!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=40)}([function(e,t,n){e.exports=n(63)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,o){var u,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),s?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=u):i&&(u=o?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),u)if(l.functional){l._injectStyles=u;var c=l.render;l.render=function(e,t){return u.call(t),c(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,u):[u]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";(function(e){var r=n(16),i=n.n(r),a=e.env.MIX_BASE_API_URL?e.env.MIX_BASE_API_URL:"http://"+location.hostname+(location.port?":"+location.port:""),s=i.a.create({baseURL:a,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}),o={get:function(e){return s.get(e)},post:function(e,t){return s.post(e,t)},put:function(e,t){return s.put(e,t)},delete:function(e){return s.delete(e)}};t.a=o}).call(this,n(11))},function(e,t,n){(function(t,n){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t,n){return(l=u()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),r=new(Function.bind.apply(e,r)),n&&o(r,n.prototype),r}).apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,e)})(e)}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}var g=null,m=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),g=g||this,this.batchSize=64,this.batchInterval=200,this.cachedBlockLimit=128,this.cachedBlockFlush=32,this.encryption={encrypt:function(e,t){return t(null,e)},decrypt:function(e,t){return t(null,e)}},"number"==typeof t.batchSize&&1<t.batchSize&&(this.batchSize=t.batchSize),"number"==typeof t.batchInterval&&10<t.batchInterval&&(this.batchInterval=t.batchInterval),"number"==typeof t.cachedBlockLimit&&0<t.cachedBlockLimit&&(this.cachedBlockLimit=t.cachedBlockLimit),"number"==typeof t.cachedBlockFlush&&t.cachedBlockFlush<this.cachedBlockLimit&&(this.cachedBlockFlush=t.cachedBlockFlush),t.encryption&&t.encryption.hasOwnProperty("encrypt")&&t.encryption.hasOwnProperty("decrypt")&&"function"==typeof t.encryption.encrypt&&"function"==typeof t.encryption.decrypt&&(this.encryption=t.encryption),g}return a(e,null,[{key:"getInstance",value:function(){return g}}]),e}(),y=0,_=1,b=2,C=function(){function t(e){var n=this;if(r(this,t),this.state=y,this._value=null,this._reason=null,"function"!=typeof e)throw"Promise resolver ".concat(e," is not a function");e((function(e){n.state===y&&(n.state=_,n._value=e)}),(function(e){n.state===y&&(n.state=b,n._reason=e)}))}return a(t,[{key:"then",value:function(e,n){var r=this,i=this;switch(this.state){case y:setTimeout((function(){return r.then(e,n)}),100);break;case _:e&&"function"==typeof e&&(i=e(this._value));break;case b:n&&"function"==typeof n&&(i=n(this._reason))}return i instanceof t?i:this}},{key:"catch",value:function(e){var n=this,r=this;switch(this.state){case y:setTimeout((function(){return n.catch(e)}),100);break;case _:break;case b:r=e(this._reason)}return r instanceof t?r:this}},{key:"finally",value:function(e){var n=this,r=this;switch(this.state){case y:setTimeout((function(){return n.finally(e)}),100);break;case _:case b:r=e()}return r instanceof t?r:this}},{key:"length",get:function(){return 1}}],[{key:"all",value:function(n){return new t((function(r,i){if(Array.isArray(n)||"string"==typeof n)if(0<n.length){var a,s=[];for(a in n)n[a]instanceof t?s.push(n[a]):s.push(t.resolve(n[a]));var o=new Array(s.length).fill(null),u=s.length,l=function(e,t,n){t?i(t):(u--,o[e]=n,u<=0&&r(o))};s.forEach((function(e,t){e.then((function(e){l(t,null,e)})).catch((function(e){l(t,e,null)}))}))}else r([]);else i(new Error("Uncaught (in promise) TypeError: ".concat(e(n)," ").concat(n," is not iterable")))}))}},{key:"resolve",value:function(e){return new t((function(t){t(e)}))}},{key:"reject",value:function(e){return new t((function(t,n){n(e)}))}}]),t}();"undefined"==typeof Promise&&(Promise=C);var E=void 0!==t?t:function(e){return setTimeout(e,1)};function k(t,n){var r=e(t),i=e(n);return!t||!n||"object"!==r||r!==i||t instanceof Date?t instanceof Date?t.getTime()===n.getTime():"function"===r&&"function"===i||t===n:Object.keys(t).length===Object.keys(n).length&&Object.keys(t).every((function(e){return k(t[e],n[e])}))}function w(e){return null!=e}function S(e,t,n){if(!t)return new Promise((function(t,r){e((function(e,i){n&&"function"==typeof n&&n(),e?r(e):t(i)}))}));e((function(e,r){n&&"function"==typeof n&&n(),t(e,r)}))}var I=function(){function t(e){r(this,t),this.condition=e,this.offset=0,this.limit=1/0,this.index=null,this.desc=!1}return a(t,null,[{key:"and",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0<n.length?new t({"/and":n}):new t({})}},{key:"or",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0<n.length?new t({"/or":n}):new t({})}},{key:"Order",get:function(){return{ASC:1,DESC:-1}}}]),a(t,[{key:"match",value:function(t){return function t(n,r){var i=!0;if(n)for(var a in r){switch(a){case"/and":i=i&&r[a].reduce((function(e,r){return e&&t(n,r)}),!0);break;case"/or":i=i&&r[a].reduce((function(e,r){return e||t(n,r)}),!1);break;default:var s=r[a];if("object"===e(s))for(var o in s)switch(o){case">":i="number"==typeof n[a]&&"number"==typeof s[o]?i&&n[a]>s[o]:"string"==typeof n[a]&&"string"==typeof s[o]&&i&&0<n[a].localeCompare(s[o]);break;case">=":i="number"==typeof n[a]&&"number"==typeof s[o]?i&&n[a]>=s[o]:"string"==typeof n[a]&&"string"==typeof s[o]&&i&&0<=n[a].localeCompare(s[o]);break;case"<":i="number"==typeof n[a]&&"number"==typeof s[o]?i&&n[a]<s[o]:"string"==typeof n[a]&&"string"==typeof s[o]&&i&&n[a].localeCompare(s[o])<0;break;case"<=":i="number"==typeof n[a]&&"number"==typeof s[o]?i&&n[a]<=s[o]:"string"==typeof n[a]&&"string"==typeof s[o]&&i&&n[a].localeCompare(s[o])<=0;break;case"=":i=i&&n[a]===s[o];break;case"!=":i=i&&n[a]!==s[o];break;case"/in":i=i&&Array.isArray(s[o])&&0<=s[o].indexOf(n[a]);break;case"/nin":i=i&&Array.isArray(s[o])&&s[o].indexOf(n[a])<0;break;case"/like":i=i&&"string"==typeof s[o]&&"string"==typeof n[a]&&0<=n[a].indexOf(s[o]);break;case"/nlike":i=i&&"string"==typeof s[o]&&"string"==typeof n[a]&&n[a].indexOf(s[o])<0;break;case"/regex":i=i&&s[o]instanceof RegExp&&s[o].test(n[a]);break;case"/where":i=i&&s[o](n[a]);break;default:i=i&&k(n[a],s)}else i=i&&n[a]===s}if(!i)break}else i=!1;return i}(t,this.condition)}}]),t}(),A=function(){function e(t){r(this,e),this.blockKey=t,this.data=[]}return a(e,[{key:"get",value:function(e){return 0<=(e=this.indexOf(e))?this.data[e].value:null}},{key:"indexOf",value:function(e){for(var t in this.data)if(this.data[t].key===e)return parseInt(t);return-1}},{key:"add",value:function(e,t){var n=this.indexOf(e);n<0?this.data.push({key:e,value:t}):this.data[n]={key:e,value:t}}},{key:"remove",value:function(e){return 0<=(e=this.indexOf(e))&&(this.data.splice(e,1),!0)}},{key:"getSerializedData",value:function(){return JSON.stringify(this.data)}},{key:"count",get:function(){return this.data.length}}],[{key:"createKey",value:function(e,t){return t=1<arguments.length&&void 0!==t?t:0,"".concat(e.toLowerCase(),"-blk-").concat(t)}},{key:"buildFromSerializedData",value:function(t,n){var r=new e(t);try{return r.data=JSON.parse(n),r}catch(t){return null}}}]),e}(),U=function(){function e(){r(this,e),this._queue=[],this.locked=!1}return a(e,[{key:"lock",value:function(e){var t=this;this.locked?this._queue.push(e):(this.locked=!0,e((function(){return t.unlock()})))}},{key:"unlock",value:function(){var e;this.locked=!1,0<this._queue.length&&(e=this._queue.shift(),this.lock(e))}}]),e}();"undefined"==typeof Promise&&(Promise=C);var M="adb-trns-",O={},T=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var i=m.getInstance();this.name=t,this.initialized=!1,this.queue={},this.batchInterval=n.batchInterval||i.batchInterval,this.batchUpdateTimer=null,this.transactionMutex=new U,this.transactionState=e.State.IDLE,this.transactionCount=0,this.encryption=i.encryption,n.encryption&&n.encryption.hasOwnProperty("encrypt")&&n.encryption.hasOwnProperty("decrypt")&&"function"==typeof n.encryption.encrypt&&"function"==typeof n.encryption.decrypt&&(this.encryption=n.encryption),O[t]=this}return a(e,[{key:"init",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:function(){};this.initialized?n(null):(this.initialized=!0,0===Object.keys(this.queue).length?q.Storage.getItem(M+this.name,(function(e,r){r?t.encryption.decrypt(r,(function(e,r){e||(t.queue=JSON.parse(r)),n(e)})):n(null)})):n(null))}},{key:"flush",value:function(){var t=this;this.transactionMutex.lock((function(n){q.Storage.setItem(M+t.name,JSON.stringify(t.queue),(function(r){if(r)throw n(),r;var i,a=[];for(i in t.queue)!function(n){var r=t.queue[n];switch(r.action){case e.Action.SET:a.push(new Promise((function(e,i){t.encryption.encrypt(JSON.stringify(r.data),(function(t,r){t?i(t):q.Storage.setItem(n,r).then(e).catch(i)}))})));break;case e.Action.REMOVE:a.push(q.Storage.removeItem(n))}}(i);t.batchUpdateTimer=null,Promise.all(a).then((function(){t.queue={},q.Storage.removeItem(M+t.name,(function(){n()}))})).catch((function(e){throw n(),e}))}))}))}},{key:"startTransaction",value:function(){this.transactionState=e.State.RUNNING,this.transactionCount++}},{key:"endTransaction",value:function(){this.transactionState===e.State.RUNNING&&(this.transactionCount--,0===this.transactionCount&&(this.flush(),this.transactionState=e.State.IDLE))}},{key:"addJob",value:function(t,n,r){var i=this;this.queue[n]={action:t,data:r},this.transactionState===e.State.IDLE&&(this.batchUpdateTimer||(this.batchUpdateTimer=setTimeout((function(){i.transactionState===e.State.IDLE&&i.flush(),i.batchUpdateTimer=null}),this.batchInterval)))}},{key:"drop",value:function(){this.batchUpdateTimer&&clearTimeout(this.batchUpdateTimer),this.transactionState=e.State.IDLE,this.transactionMutex.unlock(),this.transactionCount=0,this.queue={}}}],[{key:"dropAll",value:function(){for(var e in O)O[e].drop();O=[]}},{key:"Action",get:function(){return{SET:"set",REMOVE:"remove"}}},{key:"State",get:function(){return{IDLE:"idle",RUNNING:"running"}}}]),e}(),R="adb-info-",N=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var i=m.getInstance();this.cachedBlockLimit=n.cachedBlockLimit||i.cachedBlockLimit,this.cachedBlockFlush=n.cachedBlockFlush||i.cachedBlockFlush,this.cacheMutex=new U,this.encryption=i.encryption,n.encryption&&n.encryption.hasOwnProperty("encrypt")&&n.encryption.hasOwnProperty("decrypt")&&"function"==typeof n.encryption.encrypt&&"function"==typeof n.encryption.decrypt&&(this.encryption=n.encryption),this.batchSize=n.batchSize||i.batchSize,this.batchQueue=n.sharedBatchQueue||new T(t,n),this.transaction=null,this.name=t,this.info={},this.blockCache={},this.blockCacheCursor=0,this.currentBlock=null}return a(e,[{key:"_findBlockKey",value:function(e){return this.info.blockMap[e]}},{key:"_getBlockFromCache",value:function(e){return this.blockCache[e]?this.blockCache[e].block:null}},{key:"_putBlockToCache",value:function(e){var t=this;this.blockCache[e.blockKey]={seq:this.blockCacheCursor++,block:e};var n=Object.keys(this.blockCache);if(n.length>=this.cachedBlockLimit)for(var r in n.sort((function(e,n){return t.blockCache[e].seq-t.blockCache[n].seq})),n)this._removeBlockFromCache(n[r])}},{key:"_removeBlockFromCache",value:function(e){this.blockCache.hasOwnProperty(e)&&delete this.blockCache[e]}},{key:"_getBlock",value:function(e,t){var n=this,r=this._getBlockFromCache(e);r?t(null,r):q.Storage.getItem(e).then((function(r){r?n.encryption.decrypt(r,(function(r,i){r?t(r):(i=A.buildFromSerializedData(e,i),n._putBlockToCache(i),t(null,i))})):t(null)})).catch((function(e){return t(e)}))}},{key:"_assignNewBlock",value:function(e){this.info.cursor++;var t=A.createKey(this.name,this.info.cursor),n=new A(t);this._putBlockToCache(n),this.currentBlock=n,e&&e.key&&(n.add(e.key,e.value),this.info.blockMap[e.key]=t,this.info.count++),this.batchQueue.addJob(T.Action.SET,n.blockKey,n.data),this.batchQueue.addJob(T.Action.SET,R+this.name,this.info)}},{key:"init",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:function(){};this.batchQueue.init((function(e){e?n(e):q.Storage.getItem(R+t.name,(function(e,r){e?n(e):r?t.encryption.decrypt(r,(function(e,r){var i;e?n(e):(t.info=JSON.parse(r),i=A.createKey(t.name,t.info.cursor),t._getBlock(i,(function(e,r){e||(t.currentBlock=r||new A(i)),n(e,t.info,!1)})))})):(t.info={blockMap:{},cursor:0,count:0},t.info.cursor=-1,t._assignNewBlock(),n(null,t.info,!0))}))}))}},{key:"startTransaction",value:function(){this.batchQueue.startTransaction()}},{key:"endTransaction",value:function(){this.batchQueue.endTransaction()}},{key:"getItem",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:function(){};(t=this._findBlockKey(e))?this._getBlock(t,(function(t,r){!t&&r?n(null,r.get(e)):n(t||new Error("Broken integrity - data not found."))})):n(null,null)}},{key:"setItem",value:function(e,t,n){var r=this,i=2<arguments.length&&void 0!==n?n:function(){};(n=this._findBlockKey(e))?this._getBlock(n,(function(n,a){!n&&a?(a.add(e,t),r.batchQueue.addJob(T.Action.SET,a.blockKey,a.data),i(null)):i(n||new Error("Broken integrity - data not found."))})):((n=this.currentBlock)&&n.count<this.batchSize?(n.add(e,t),this.batchQueue.addJob(T.Action.SET,n.blockKey,n.data),this.info.count++,this.info.blockMap[e]=n.blockKey,this.batchQueue.addJob(T.Action.SET,R+this.name,this.info)):this._assignNewBlock({key:e,value:t}),i(null))}},{key:"removeItem",value:function(e,t){var n=this,r=1<arguments.length&&void 0!==t?t:function(){},i=this._findBlockKey(e);i?this._getBlock(i,(function(t,a){t?r(t):a?(a.remove(e)&&(n.info.blockMap.hasOwnProperty(e)&&delete n.info.blockMap[e],n.info.count--),0<a.data.length?n.batchQueue.addJob(T.Action.SET,i,a.data):(n._removeBlockFromCache(i),n.batchQueue.addJob(T.Action.REMOVE,i)),n.batchQueue.addJob(T.Action.SET,R+n.name,n.info),r(null)):r(new Error("Failed to remove item - data not found."))})):r(new Error("Failed to remove item - data not found."))}},{key:"clear",value:function(e){e=0<arguments.length&&void 0!==e?e:function(){};for(var t=0;t<=this.info.cursor;t++)this.batchQueue.addJob(T.Action.REMOVE,A.createKey(this.name,t));this.blockCacheCursor=0,this.blockCache={},this.info={blockMap:{},cursor:-1,count:0},this._assignNewBlock(),e(null)}},{key:"drop",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:function(){};this.clear((function(){t.batchQueue.addJob(T.Action.REMOVE,R+t.name),n(null)}))}},{key:"keys",get:function(){return Object.keys(this.info.blockMap)}},{key:"count",get:function(){return this.info.count}}]),e}();function L(e,t,n){var r=e.offset,i=e.condition,a=e.progress,s=1<arguments.length&&void 0!==t?t:function(e,t){return t(null,!0)},o=2<arguments.length&&void 0!==n?n:function(){},u=r;!function e(){i(u)?E((function(){s(u,(function(t,n){t?o(t):n?(u=a(u),e()):o(null)}))})):o(null)}()}var P="idx-",D=function(){function t(e){var n,i=e.collection,a=void 0===(a=e.columns)?{}:a;for(n in e=void 0===(e=e.options)?{}:e,r(this,t),this.collection=i,this.columns=a,this.key=t.createKey(this.columns),this.columns)this.columns[n]=1;this.store=new N(i.name+"-index-"+this.key,e),this.table=[]}return a(t,[{key:"columnValues",value:function(e){return this.columnNames.map((function(t){return e?e[t]:null}))}},{key:"compareColumnValues",value:function(t,n,r){for(var i=!(2<arguments.length&&void 0!==r)||r,a=this.columnNames,s=0;s<a.length;s++){var o=a[s],u=this.columns[o];if(0!==(o=function(t,n,r){var i=2<arguments.length&&void 0!==r&&r;if(w(t)){if(!w(n))return i?-1:1;if(e(t)===e(n)&&t!==n){if("boolean"===(r=e(t)))return t?1:-1;if("number"===r)return n<t?1:-1;if("string"===r)return t.localeCompare(n);if(t instanceof Date&&n instanceof Date&&t.getTime()!==n.getTime())return t.getTime()>n.getTime()?1:-1}}else if(w(n))return i?1:-1;return 0}(t[s],n[s],i)))return u*o}return 0}},{key:"init",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:function(){};this.store.init((function(e,r,i){e?n(e):i?t.save(n):t.store.getItem("".concat(P).concat(t.key),(function(e,r){r&&(t.table=r),n(e)}))}))}},{key:"each",value:function(e,t,n){var r=this,i=1<arguments.length&&void 0!==t?t:null,a=0<(2<arguments.length&&void 0!==n?n:1);if(n=a?0:this.table.length-1,i&&0<this.table.length){for(var s={start:0,end:this.table.length},o=n;s.start<s.end;){var u=this.compareColumnValues(this.table[o].key,i,a);if(0===u)break;0<u?s.end=o-1:s.start=o+1,o=parseInt((s.start+s.end)/2)}n=o}var l=!0;L({offset:n,condition:function(e){return a?e<r.table.length:0<=e},progress:function(e){return a?e+1:e-1}},(function(t,n){var i,s;(t=r.table[t])?(i=t.key,s=t.value,L({offset:a?0:s.length-1,condition:function(e){return a?e<s.length:0<=e},progress:function(e){return a?e+1:e-1}},(function(t,n){e({key:i,value:s[t]},(function(e,t){n(e,l=e||t)}))}),(function(e){return n(e,l)}))):n(null,!1)}),(function(){e(null,(function(){}))}))}},{key:"put",value:function(e,t){var n=this,r=!1,i=this.columnValues(t);L({offset:0,condition:function(e){return e<n.table.length},progress:function(e){return e+1}},(function(t,a){var s,o=n.table[t];o?0<(s=n.compareColumnValues(o.key,i))?(n.table.splice(t,0,{key:i,value:[e]}),r=!0,n.save((function(e){return a(e,!1)}))):0===s?o.value.indexOf(e)<0?(o.value.push(e),r=!0,n.save((function(e){return a(e,!1)}))):a(null,!1):a(null,!0):a(null,!1)}),(function(){r||(n.table.push({key:i,value:[e]}),n.save())}))}},{key:"update",value:function(e,t,n){var r=this.columnValues(t),i=this.columnValues(n);0!==this.compareColumnValues(r,i)&&(this.remove(e,t),this.put(e,n))}},{key:"remove",value:function(e,t){var n=this,r=this.columnValues(t);L({offset:0,condition:function(e){return e<n.table.length},progress:function(e){return e+1}},(function(t,i){var a,s=n.table[t];s?0===n.compareColumnValues(s.key,r)?0<=(a=s.value.indexOf(e))?(s.value.splice(a,1),0===s.value.length&&n.table.splice(t,1),n.save((function(e){return i(e,!1)}))):i(null,!1):i(null,!0):i(null,!1)}),(function(){}))}},{key:"save",value:function(e){e=0<arguments.length&&void 0!==e?e:function(){},this.store.setItem("".concat(P).concat(this.key),this.table,e)}},{key:"clear",value:function(){this.table=[],this.store.clear()}},{key:"drop",value:function(){this.table=[],this.store.drop()}},{key:"columnNames",get:function(){return Object.keys(this.columns)}}],[{key:"createKey",value:function(e){return Object.keys(e).map((function(t){return"".concat(t,"_").concat(e[t])})).join("__")}}]),t}();"undefined"==typeof Promise&&(Promise=C);var x=new WeakMap,F=new WeakMap,H=function(){function t(e,n){r(this,t),this.name=e,this.pk=n,x.set(this,new N(e)),F.set(this,[])}return a(t,[{key:"init",value:function(e){var t=x.get(this);return S((function(e){t.init((function(t){e(t)}))}),e)}},{key:"_findProperIndexer",value:function(e){if(e.index)for(var t=F.get(this),n=0;n<t.length;n++)if(k(t[n].columns,e.index))return t[n];return null}},{key:"_addItemToIndex",value:function(e,t){for(var n=F.get(this),r=0;r<n.length;r++)n[r].put(e,t)}},{key:"_updateItemToIndex",value:function(e,t,n){for(var r=F.get(this),i=0;i<r.length;i++)r[i].update(e,t,n)}},{key:"_removeItemFromIndex",value:function(e,t){for(var n=F.get(this),r=0;r<n.length;r++)n[r].remove(e,t)}},{key:"ensureIndex",value:function(e,t){var n=this,r=x.get(this),i=F.get(this),a=D.createKey(e);return S((function(t){for(var s=0;s<i.length;s++)if(a===i[s].key)return void t(null);var o=new D({collection:n,columns:e,options:{sharedBatchQueue:r.batchQueue}});o.init((function(e,n,a){e?t(e):(i.push(o),a?function(){for(var e=r.keys,n=0,i=0;i<e.length;i++)!function(i){var a=e[i];r.getItem(a,(function(r,i){!r&&i?o.put(a,i,(function(){++n===e.length&&t(null)})):++n===e.length&&t(null)}))}(i)}():t(null))}))}),t)}},{key:"removeIndex",value:function(t,n){var r=F.get(this),i=D.createKey(t);return S((function(t){for(var n=0;n<r.length;n++){var a=function(e){if(i===r[e].key)return r[e].drop((function(n){n||r.splice(e,1),t(n)})),{v:void 0}}(n);if("object"===e(a))return a.v}t(null)}),n)}},{key:"findById",value:function(e,t){var n=x.get(this);return S((function(t){e?("string"!=typeof e&&(e=JSON.stringify(e)),n.getItem(e,(function(e,n){t(e,n)}))):t(new Error("Invalid type: 'id' should not be empty."))}),t)}},{key:"findOne",value:function(e,t){return e.limit=1,this.find(e,(function(e,n){t(e,0<n.length?n[0]:null)}))}},{key:"find",value:function(t,n){var r=this,i=x.get(this);return S((function(n){if(t instanceof I){var a=[],s=r._findProperIndexer(t);if(s){for(var o=[],u=0;u<s.columnNames.length;u++){var l=s.columnNames[u];if(!t.condition[l])break;if("object"===e(t.condition[l])){if("break"===function(){var e=Object.keys(t.condition[l]),n=["="],r=e.filter((function(e){return n.includes(e)}));if(!(0<r.length))return"break";r=e.indexOf(r[0]),o.push(t.condition[l][e[r]])}())break}else{if("function"==typeof t.condition[l]||void 0===t.condition[l]||Array.isArray(t.condition[l]))break;o.push(t.condition[l])}}var c=t.offset||0;s.each((function(e,r){e?i.getItem(e.value,(function(e,n){e?r(e):(t.match(n)&&(c<=0?a.push(n):c--),r(null,a.length<t.limit))})):n(null,a)}),0<o.length?o:null,t.desc?I.Order.DESC:I.Order.ASC)}else{var d=!t.desc,f=i.keys;L({offset:t.offset<f.length?d?t.offset:f.length-t.offset-1:d?f.length:-1,condition:function(e){return d?a.length<t.limit&&e<f.length:a.length<t.limit&&0<=e},progress:function(e){return d?e+1:e-1}},(function(e,n){i.getItem(f[e],(function(e,r){e?n(e):(t.match(r)&&a.push(r),E((function(){return n(null,!0)})))}))}),(function(e){n(e,a)}))}}else n(new Error("Invalid type: 'query' should be Query type."))}),n)}},{key:"count",value:function(e,t){var n=x.get(this);return S((function(t){var r,i;!e||e instanceof I?e?(r=n.keys,L({offset:i=0,condition:function(e){return e<r.length},progress:function(e){return e+1}},(function(t,a){n.getItem(r[t],(function(t,n){t?a(t):(e.match(n)&&i++,E((function(){return a(null,!0)})))}))}),(function(e){t(e,i)}))):t(null,n.count):t(new Error("Invalid type: 'query' should be Query type."))}),t)}},{key:"insert",value:function(t,n){var r=this,i=x.get(this);return i.startTransaction(),S((function(n){if(Array.isArray(t)){for(var a=[],s=0;s<t.length;s++)t[s]&&"object"===e(t[s])&&a.push(r.insert(t[s]));t.length===a.length?Promise.all(a).then((function(){return n(null,t)})).catch((function(e){return n(e)})):n(new Error("Invalid type: 'item' should hold objects if it's an array."))}else{var o;t&&"object"===e(t)?t[r.pk]?(o="".concat(t[r.pk]),i.getItem(o,(function(e,a){e?n(e):a?n(new Error("Duplicated item: item already exists.")):(r._addItemToIndex(o,t),i.setItem(o,t,(function(e){n(e,t)})))}))):n(new Error("Invalid key: item should have key.")):n(new Error("Invalid type: 'item' should be an object or an object array."))}}),n,(function(){return i.endTransaction()}))}},{key:"upsert",value:function(t,n){var r=this,i=x.get(this);return i.startTransaction(),S((function(n){if(Array.isArray(t)){for(var a=[],s=0;s<t.length;s++)t[s]&&"object"===e(t[s])&&a.push(r.upsert(t[s]));t.length===a.length?Promise.all(a).then((function(){return n(null,t)})).catch((function(e){return n(e)})):n(new Error("Invalid type: 'item' should hold objects if it's an array."))}else{var o;t&&"object"===e(t)?t[r.pk]?(o="".concat(t[r.pk]),i.getItem(o,(function(e,a){e?n(e):(a?r._updateItemToIndex(o,a,t):r._addItemToIndex(o,t),i.setItem(o,t,(function(e){n(e,t)})))}))):n(new Error("Invalid key: item should have key.")):n(new Error("Invalid type: 'item' should be an object or an object array."))}}),n,(function(){return i.endTransaction()}))}},{key:"update",value:function(t,n){var r=this,i=x.get(this);return i.startTransaction(),S((function(n){if(Array.isArray(t)){for(var a=[],s=0;s<t.length;s++)t[s]&&"object"===e(t[s])&&a.push(r.update(t[s]));t.length===a.length?Promise.all(a).then((function(){return n(null,t)})).catch((function(e){return n(e)})):n(new Error("Invalid type: 'item' should hold objects if it's an array."))}else{var o;t&&"object"===e(t)?t[r.pk]?(o="".concat(t[r.pk]),i.getItem(o,(function(e,a){e?n(e):a?(r._updateItemToIndex(o,a,t),i.setItem(o,t,(function(e){n(e,t)}))):n(null)}))):n(new Error("Invalid key: item should have key.")):n(new Error("Invalid type: 'item' should be an object or an object array."))}}),n,(function(){return i.endTransaction()}))}},{key:"updateIf",value:function(e,t,n){var r=this,i=x.get(this);return i.startTransaction(),S((function(n){var a,s;e instanceof I?(a=[],s=i.keys,L({offset:0,condition:function(e){return e<s.length},progress:function(e){return e+1}},(function(n,o){i.getItem(s[n],(function(n,s){if(n)o(n);else if(s&&e.match(s)){var u,l=JSON.parse(JSON.stringify(s)),c=!1;for(u in t){var d=t[u];k(s[u],d)||(c=!0,s[u]=d)}c?(n="".concat(s[r.pk]),r._updateItemToIndex(n,l,s),i.setItem(n,s,(function(e){e?o(e):(a.push(s),E((function(){return o(null,!0)})))}))):E((function(){return o(null,!0)}))}else E((function(){return o(null,!0)}))}))}),(function(e){n(e,a)}))):n(new Error("Invalid type: 'query' should be Query type."))}),n,(function(){return i.endTransaction()}))}},{key:"remove",value:function(e,t){var n=this,r=x.get(this);return r.startTransaction(),S((function(t){e?(e="".concat(e),r.getItem(e,(function(i,a){i?t(i):a?(n._removeItemFromIndex(e,a),r.removeItem(e,(function(e){t(e)}))):t(null)}))):t(new Error("Invalid type: 'id' should be string type."))}),t,(function(){return r.endTransaction()}))}},{key:"removeIf",value:function(e,t){var n=this,r=x.get(this);return r.startTransaction(),S((function(t){var i,a;e instanceof I?(i=[],a=r.keys,L({offset:0,condition:function(e){return e<a.length},progress:function(e){return e+1}},(function(t,s){r.getItem(a[t],(function(t,a){t?s(t):a&&e.match(a)?(t="".concat(a[n.pk]),n._removeItemFromIndex(t,a),r.removeItem(t,(function(e){e?s(e):(i.push(a),E((function(){return s(null,!0)})))}))):E((function(){return s(null,!0)}))}))}),(function(e){t(e,i)}))):t(new Error("Invalid type: 'query' should be Query type."))}),t,(function(){return r.endTransaction()}))}},{key:"clear",value:function(e){var t=F.get(this),n=x.get(this);return n.startTransaction(),S((function(e){for(var r=0;r<t.length;r++)t[r].clear();n.clear((function(t){e(t)}))}),e,(function(){return n.endTransaction()}))}}]),t}();"undefined"==typeof Promise&&(Promise=C);var j=null,G=new WeakMap,B=new WeakMap,q=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.name=t,this.config=new m(n),G.set(this,{}),B.set(this,{})}return a(e,null,[{key:"Query",get:function(){return I}},{key:"Storage",get:function(){return j},set:function(e){j=e}}]),a(e,[{key:"schema",value:function(e,t){return G.get(this)[e]=t,this}},{key:"build",value:function(){var e=G.get(this),t=B.get(this);return new Promise((function(n,r){var i,a,s=[];for(i in e)t[i]||(a=e[i].key||"_id",a=t[i]=new H(i,a),s.push(a.init()));Promise.all(s).then((function(){var i,a=[];for(i in t)if(e[i].index&&0<e[i].index.length){var s,o=t[i];for(s in e[i].index)a.push(o.ensureIndex(e[i].index[s]))}0<a.length?Promise.all(a).then((function(){n()})).catch((function(e){return r(e)})):n()})).catch((function(e){return r(e)}))}))}},{key:"close",value:function(){}},{key:"drop",value:function(){var e,t=this,n=[],r=B.get(this);for(e in r)n.push(r[e].clear());T.dropAll(),Promise.all(n).then((function(){G.set(t,{}),B.set(t,{})})).catch((function(){}))}},{key:"collection",value:function(e){var t=B.get(this);return t[e]&&t[e]instanceof H?t[e]:null}}]),e}();function Y(){var e=!!document.documentMode,t=!e&&!!window.StyleMedia;return!e&&!t}function V(t,n){var r=e(t),i=e(n);return!t||!n||"object"!==r||r!==i||t instanceof Date?t instanceof Date?t.getTime()===n.getTime():"function"===r&&"function"===i||t===n:Object.keys(t).length===Object.keys(n).length&&Object.keys(t).every((function(e){return V(t[e],n[e])}))}function $(t){var n=null;return t&&(Array.isArray(t)?n=Y()?t.join("_"):t[t.length-1]:"object"===e(t)?n=$(Object.keys(t)):"string"==typeof t&&(n=t)),n}function z(e,t,n){if(!t)return new Promise((function(t,r){e((function(e,i){n&&"function"==typeof n&&n(),e?r(e):t(i)}))}));e(t)}function W(){if("undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product)return Promise.resolve(!1);var e=window?window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB:null,t="undefined"!=typeof InstallTrigger||window._isTestingFirefox,n=!document.documentMode&&!!window.StyleMedia;return new Promise((function(r,i){try{if(t){if(!e)return void r(!0);var a=e.open("_testMozilla");a.onerror=function(){r(!0)},a.onsuccess=function(){r(!1)}}else!n||window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?r(!1):r(!0)}catch(r){i(r)}}))}function Q(t){return"object"===e(t)&&t}"undefined"==typeof Promise&&(Promise=C);var K=function(){function e(){r(this,e),this._field={}}return a(e,[{key:"has",value:function(e){if(Q(e))return e.__wk&&"string"==typeof e.__wk&&this._field.hasOwnProperty(e.__wk);throw new Error("Invalid value used as weak map key")}},{key:"get",value:function(e){if(Q(e))return e.__wk&&"string"==typeof e.__wk?this._field[e.__wk]:null;throw new Error("Invalid value used as weak map key")}},{key:"set",value:function(e,t){if(!Q(e))throw new Error("Invalid value used as weak map key");e.__wk&&"string"==typeof e.__wk||(e.__wk="__".concat((new Date).getTime(),"-").concat(parseInt(1e8*Math.random()))),this._field[e.__wk]=t}},{key:"delete",value:function(e){if(!Q(e))throw new Error("Invalid value used as weak map key");this.has(e)&&delete this._field[e.__wk]}},{key:"length",get:function(){return 0}}]),e}(),J=new(K=function(){try{return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&-1<navigator.userAgent.indexOf("MSIE 10")}catch(e){return}}()||function(){try{return document&&9===document.documentMode}catch(e){return}}()||function(){try{return document&&document.documentMode<=8}catch(e){return}}()||"undefined"==typeof window&&void 0!==n?K:WeakMap),X=function(){function t(e,n,i){r(this,t),this.name=n,this.keyPath=i,J.set(this,e)}return a(t,[{key:"findById",value:function(e,t){var n=this,r=J.get(this);return z((function(t){var i=r.transaction(n.name,"readonly").objectStore(n.name).get(e);i.onsuccess=function(){return t(null,i.result||null)},i.onerror=function(){return t(i.error)}}),t)}},{key:"find",value:function(e,t){var n=this,r=J.get(this);return z((function(t){var i,a,s,o,u;e instanceof ie.Query?(i=$(e.index),a=[],s=r.transaction(n.name,"readonly").objectStore(n.name),o=i?s.index(i).openCursor(null,e.desc?"prev":"next"):s.openCursor(),u=e.offset,o.onsuccess=function(n){var r=n.target.result;r?(n=r.value,e.match(n)?!u||u<0?(a.push(n),a.length<e.limit?r.continue():t(null,a)):(u--,r.continue()):r.continue()):t(null,a)},o.onerror=function(){t(o.error)}):t(new Error("Invalid type: 'query' should be LocalDB.Query type."))}),t)}},{key:"count",value:function(e,t){var n=this,r=J.get(this);return z((function(t){var i,a,s,o;!e||e instanceof ie.Query?(i=r.transaction(n.name,"readonly").objectStore(n.name),e?(a=0,(s=i.openCursor()).onsuccess=function(){var n=s.result;n?(e.match(n.value)&&a++,n.continue()):t(null,a)},s.onerror=function(){t(s.error)}):((o=i.count()).onsuccess=function(){return t(null,o.result)},o.onerror=function(){return t(o.error)})):t(new Error("Invalid type: 'query' should be LocalDB.Query type."))}),t)}},{key:"insert",value:function(t,n){var r=this,i=J.get(this);return z((function(n){var a,s=i.transaction(r.name,"readwrite").objectStore(r.name);Array.isArray(t)?function(){var e,r=[];for(e in t)!function(e){var i=t[e],a=s.add(i);a.onsuccess=function(){r.push(i),r.length===t.length&&n(null,r)},a.onerror=function(){n(a.error)}}(e)}():t&&"object"===e(t)?((a=s.add(t)).onsuccess=function(){return n(null,t)},a.onerror=function(){return n(a.error)}):n(new Error("Invalid type: 'item' should be an object or an object array."))}),n)}},{key:"upsert",value:function(t,n){var r=this,i=J.get(this);return z((function(n){var a,s=i.transaction(r.name,"readwrite").objectStore(r.name);t&&"object"===e(t)?((a=s.get(t[r.keyPath])).onsuccess=function(){var e,r;a.result?((e=s.put(t)).onsuccess=function(){return n(null,t)},e.onerror=function(){return n(e.error)}):((r=s.add(t)).onsuccess=function(){return n(null,t)},r.onerror=function(){return n(r.error)})},a.onerror=function(){n(a.error)}):n(new Error("Invalid type: 'item' should be an object or an object array."))}),n)}},{key:"update",value:function(e,t){var n=this,r=J.get(this);return z((function(t){var i=r.transaction(n.name,"readwrite").objectStore(n.name).put(e);i.onsuccess=function(){return t(null,e)},i.onerror=function(){return t(i.error)}}),t)}},{key:"updateIf",value:function(e,t,n){var r=this,i=J.get(this);return z((function(n){var a,s,o;e instanceof ie.Query?(a=[],s=i.transaction(r.name,"readwrite").objectStore(r.name),(o=s.openCursor()).onsuccess=function(r){var i=r.target.result;if(i){var o=i.value;if(e.match(o)){var u,l,c=!1;for(u in t){var d=t[u];V(o[u],d)||(c=!0,o[u]=d)}c?((l=s.put(o)).onsuccess=function(){a.push(o),i.continue()},l.onerror=function(){n(l.error)}):i.continue()}else i.continue()}else n(null,a)},o.onerror=function(){n(o.error)}):n(new Error("Invalid type: 'query' should be LocalDB.Query type."))}),n)}},{key:"remove",value:function(e,t){var n=this,r=J.get(this);return z((function(t){var i=r.transaction(n.name,"readwrite").objectStore(n.name).delete(e);i.onsuccess=function(){return t(null)},i.onerror=function(){return t(i.error)}}),t)}},{key:"removeIf",value:function(e,t){var n=this,r=J.get(this);return z((function(t){var i,a,s;e instanceof ie.Query?(i=[],a=r.transaction(n.name,"readwrite").objectStore(n.name),(s=a.openCursor()).onsuccess=function(r){var s,o,u=r.target.result;u?(s=u.value,e.match(s)?((o=a.delete(s[n.keyPath])).onsuccess=function(){i.push(s),u.continue()},o.onerror=function(){t(o.error)}):u.continue()):t(null,i)},s.onerror=function(){t(s.error)}):t(new Error("Invalid type: 'query' should be LocalDB.Query type."))}),t)}},{key:"clear",value:function(e){var t=this,n=J.get(this);return z((function(e){var r=n.transaction(t.name,"readwrite").objectStore(t.name).clear();r.onsuccess=function(){return e(null)},r.onerror=function(){return e(r.error)}}),e)}}]),t}(),Z=function(){function t(e){r(this,t),this.condition=e,this.offset=0,this.limit=1/0,this.index=null,this.desc=!1}return a(t,null,[{key:"and",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0<n.length?new t({"/and":n}):new t({})}},{key:"or",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0<n.length?new t({"/or":n}):new t({})}},{key:"Order",get:function(){return{ASC:1,DESC:-1}}}]),a(t,[{key:"match",value:function(t){return function t(n,r){var i,a=!0;for(i in r){switch(i){case"/and":a=a&&r[i].reduce((function(e,r){return e&&t(n,r)}),!0);break;case"/or":a=a&&r[i].reduce((function(e,r){return e||t(n,r)}),!1);break;default:var s=r[i];if("object"===e(s))for(var o in s)switch(o){case">":a="number"==typeof n[i]&&"number"==typeof s[o]?a&&n[i]>s[o]:"string"==typeof n[i]&&"string"==typeof s[o]&&a&&0<n[i].localeCompare(s[o]);break;case">=":a="number"==typeof n[i]&&"number"==typeof s[o]?a&&n[i]>=s[o]:"string"==typeof n[i]&&"string"==typeof s[o]&&a&&0<=n[i].localeCompare(s[o]);break;case"<":a="number"==typeof n[i]&&"number"==typeof s[o]?a&&n[i]<s[o]:"string"==typeof n[i]&&"string"==typeof s[o]&&a&&n[i].localeCompare(s[o])<0;break;case"<=":a="number"==typeof n[i]&&"number"==typeof s[o]?a&&n[i]<=s[o]:"string"==typeof n[i]&&"string"==typeof s[o]&&a&&n[i].localeCompare(s[o])<=0;break;case"=":a=a&&n[i]===s[o];break;case"!=":a=a&&n[i]!==s[o];break;case"/in":a=a&&Array.isArray(s[o])&&0<=s[o].indexOf(n[i]);break;case"/nin":a=a&&Array.isArray(s[o])&&s[o].indexOf(n[i])<0;break;case"/like":a=a&&"string"==typeof s[o]&&"string"==typeof n[i]&&0<=n[i].indexOf(s[o]);break;case"/nlike":a=a&&"string"==typeof s[o]&&"string"==typeof n[i]&&n[i].indexOf(s[o])<0;break;case"/regex":a=a&&s[o]instanceof RegExp&&s[o].test(n[i]);break;case"/where":a=a&&s[o](n[i]);break;default:a=a&&V(n[i],s)}else a=a&&n[i]===s}if(!a)break}return a}(t,this.condition)}}]),t}();"undefined"==typeof Promise&&(Promise=C);var ee=new K,te=new K,ne=new K,re=window?window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB:null,ie=function(){function e(t,n){if(r(this,e),!re)throw new Error("IndexedDB is not supported in this environment. Check if you're in web browser which supports IndexedDB.");this.name=t,this.version=n,ee.set(this,{}),te.set(this,null),ne.set(this,{})}return a(e,null,[{key:"Query",get:function(){return Z}}]),a(e,[{key:"schema",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=ee.get(this);return n[e]=t,this}},{key:"build",value:function(){var e=this,t=ee.get(this),n=ne.get(this);return new Promise((function(r,i){var a=re.open(e.name,e.version);a.onerror=function(e){i(new Error("IndexedDB is not available: ".concat(e.target.errorCode)))},a.onupgradeneeded=function(r){var i,a=r.target.result,s=r.target.transaction,o=a.objectStoreNames;for(i in t){var u=t[i].key||"id",l=null;try{l=s.objectStore(i)}catch(r){"NotFoundError"===r.name&&(l=a.createObjectStore(i,{keyPath:u}))}if(l){for(var c=[],d=0;d<l.indexNames.length;d++)c.push(l.indexNames[d]);if(u=new X(a,i,u),t[i].index&&0<t[i].index.length)for(var f in t[i].index){var h=$(t[i].index[f]);if(h){var p,v,g=!1;for(p in c)if(c[p]===h){g=!0;break}g||(v=Object.keys(t[i].index[f]),l.createIndex(h,Y()?v:v[v.length-1],{unique:!1}),c.push(h))}}var m=[];if(t[i].index)for(var y in t[i].index){var _=$(t[i].index[y]);_&&m.push(_)}for(var b=0;b<c.length;b++)m.indexOf(c[b])<0&&l.deleteIndex(c[b]);n[i]=u}}for(var C=0;C<o.length;C++)Object.keys(t).indexOf(o.item(C))<0&&a.deleteObjectStore(o.item(C));te.set(e,a)},a.onsuccess=function(i){var a,s,o=i.target.result;for(a in t)n[a]||(s=t[a].key||"id",n[a]=new X(o,a,s));te.set(e,o),r()}}))}},{key:"close",value:function(){var e=te.get(this);e&&(e.close(),te.set(this,null))}},{key:"drop",value:function(){re.deleteDatabase(this.name)}},{key:"collection",value:function(e){var t=ne.get(this);return t[e]&&t[e]instanceof X?t[e]:null}}]),e}();function ae(t,n){var r=e(t),i=e(n);return!t||!n||"object"!==r||r!==i||t instanceof Date?t instanceof Date?t.getTime()===n.getTime():"function"===r&&"function"===i||t===n:Object.keys(t).length===Object.keys(n).length&&Object.keys(t).every((function(e){return ae(t[e],n[e])}))}function se(e,t,n){if(!t)return new Promise((function(t,r){e((function(e,i){n&&"function"==typeof n&&n(),e?r(e):t(i)}))}));e((function(e,r){n&&"function"==typeof n&&n(),t(e,r)}))}"undefined"==typeof Promise&&(Promise=C);var oe=function(){function t(e){r(this,t),this.condition=e,this.offset=0,this.limit=1/0,this.index=null,this.desc=!1}return a(t,null,[{key:"and",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0<n.length?new t({"/and":n}):new t({})}},{key:"or",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0<n.length?new t({"/or":n}):new t({})}},{key:"Order",get:function(){return{ASC:1,DESC:-1}}}]),a(t,[{key:"match",value:function(t){return function t(n,r){var i,a=!0;for(i in r){switch(i){case"/and":a=a&&r[i].reduce((function(e,r){return e&&t(n,r)}),!0);break;case"/or":a=a&&r[i].reduce((function(e,r){return e||t(n,r)}),!1);break;default:var s=r[i];if("object"===e(s))for(var o in s)switch(o){case">":a="number"==typeof n[i]&&"number"==typeof s[o]?a&&n[i]>s[o]:"string"==typeof n[i]&&"string"==typeof s[o]&&a&&0<n[i].localeCompare(s[o]);break;case">=":a="number"==typeof n[i]&&"number"==typeof s[o]?a&&n[i]>=s[o]:"string"==typeof n[i]&&"string"==typeof s[o]&&a&&0<=n[i].localeCompare(s[o]);break;case"<":a="number"==typeof n[i]&&"number"==typeof s[o]?a&&n[i]<s[o]:"string"==typeof n[i]&&"string"==typeof s[o]&&a&&n[i].localeCompare(s[o])<0;break;case"<=":a="number"==typeof n[i]&&"number"==typeof s[o]?a&&n[i]<=s[o]:"string"==typeof n[i]&&"string"==typeof s[o]&&a&&n[i].localeCompare(s[o])<=0;break;case"=":a=a&&n[i]===s[o];break;case"!=":a=a&&n[i]!==s[o];break;case"/in":a=a&&Array.isArray(s[o])&&0<=s[o].indexOf(n[i]);break;case"/nin":a=a&&Array.isArray(s[o])&&s[o].indexOf(n[i])<0;break;case"/like":a=a&&"string"==typeof s[o]&&"string"==typeof n[i]&&0<=n[i].indexOf(s[o]);break;case"/nlike":a=a&&"string"==typeof s[o]&&"string"==typeof n[i]&&n[i].indexOf(s[o])<0;break;case"/regex":a=a&&s[o]instanceof RegExp&&s[o].test(n[i]);break;case"/where":a=a&&s[o](n[i]);break;default:a=a&&ae(n[i],s)}else a=a&&n[i]===s}if(!a)break}return a}(t,this.condition)}}]),t}();"undefined"==typeof Promise&&(Promise=C);var ue=null,le=function(){function e(){if(r(this,e),ue)return ue;(ue=this).queries=[],this.executing=!1,this.intervalID=null}return a(e,[{key:"addTask",value:function(e,t){var n=this;return new Promise((function(r,i){n.queries.push({task:e,cb:t,resolve:r,reject:i}),n._delay(),n.executeTask()}))}},{key:"executeTask",value:function(){var e=this;if(0<this.queries.length&&!this.executing){this.executing=!0;var t=this.queries[0].task,n=this.queries[0].cb,r=this.queries[0];return new Promise((function(e,n){t((function(t,r){t?n(t):e(r)}))})).then((function(e){r.resolve(e),n&&n(null,e)})).catch((function(e){r.reject(e),n&&n(e)})).finally((function(){e._executeNext()}))}return Promise.resolve(!0)}},{key:"_delay",value:function(){}},{key:"_executeNext",value:function(){var e=this;if(this.executing=!1,0<this.queries.length)return this.queries=this.queries.slice(1),new Promise((function(t,n){e._delay(),t(e.executeTask())}))}},{key:"start",value:function(){}},{key:"stop",value:function(){}}],[{key:"getInstance",value:function(){return new e}}]),e}();"undefined"==typeof Promise&&(Promise=C);var ce=function(){function t(e,n){r(this,t),this.name=e,this.pk=n,this.store={},this.columns=[],this.queue=le.getInstance(),this.queue.start()}return a(t,[{key:"findById",value:function(e,t){var n=this;return this.queue.addTask((function(t){e?("string"!=typeof e&&(e=JSON.stringify(e)),n.store.hasOwnProperty(e)?t(null,n.store[e]):t(null,null)):t(new Error("Invalid type: 'id' should not be empty."))}),t)}},{key:"findOne",value:function(e,t){return e.limit=1,this.find(e,t)}},{key:"find",value:function(e,t){var n=this;return this.queue.addTask((function(t){if(e instanceof oe){var r,i=[],a=Object.keys(n.store).map((function(e){return n.store[e]}));for(r in a){var s=a[r];e.match(s)&&i.push(s)}e.index&&"Message"!==n.name&&i.sort((function(t,n){for(var r in e.index){if(t[r]>n[r])return e.index[r];if(t[r]<n[r])return-1*e.index[r]}return 0})),e.desc&&i.reverse();var o=e.offset||0;t(null,0<=e.limit&&i.length>=e.limit?i.slice(o,e.limit+o):i.slice(o))}else t(new Error("Invalid type: 'query' should be Query type."))}),t)}},{key:"count",value:function(e,t){var n=this;return this.queue.addTask((function(t){if(!e||e instanceof oe)if(e){var r,i=0,a=e.offset||0;for(r in n.store){if(i>=e.limit)break;var s=n.store[r];e.match(s)&&(a<=0?i+=1:a--)}t(null,i)}else t(null,Object.keys(n.store).length);else t(new Error("Invalid type: 'query' should be Query type."))}),t)}},{key:"_insertSingle",value:function(e,t){var n=this;return se((function(t){var r;e[n.pk]?(r="".concat(e[n.pk]),n.store.hasOwnProperty(r)?t(new Error("Duplicated item: item already exists.")):t(null,n.store[r]=e)):t(new Error("Invalid key: item should have key."))}),t)}},{key:"insert",value:function(t,n){var r=this;return this.queue.addTask((function(n){if(Array.isArray(t)){for(var i=[],a=0;a<t.length;a++)t[a]&&"object"===e(t[a])&&i.push(r._insertSingle(t[a]));t.length===i.length?Promise.all(i).then((function(){n(null,t)})).catch((function(e){n(e)})):n(new Error("Invalid type: 'item' should hold objects if it's an array."))}else t&&"object"===e(t)?r._insertSingle(t,(function(e,t){n(e,t)})):n(new Error("Invalid type: 'item' should be an object or an object array."))}),n)}},{key:"_upsertSingle",value:function(e,t){var n=this;return se((function(t){var r;e[n.pk]?(r="".concat(e[n.pk]),t(null,n.store[r]=e)):t(new Error("Invalid key: item should have key."))}),t)}},{key:"upsert",value:function(t,n){var r=this;return this.queue.addTask((function(n){if(Array.isArray(t)){for(var i=[],a=0;a<t.length;a++)t[a]&&"object"===e(t[a])&&i.push(r._upsertSingle(t[a]));t.length===i.length?Promise.all(i).then((function(){n(null,t)})).catch((function(e){n(e)})):n(new Error("Invalid type: 'item' should hold objects if it's an array."))}else t&&"object"===e(t)?r._upsertSingle(t,(function(e,t){n(e,t)})):n(new Error("Invalid type: 'item' should be an object or an object array."))}),n)}},{key:"_updateSingle",value:function(e,t){var n=this;return se((function(t){var r;e[n.pk]?(r="".concat(e[n.pk]),n.store.hasOwnProperty(r)?t(null,n.store[r]=e):t(new Error("Invalid key: no item with such key was found"))):t(new Error("Invalid key: item should have key."))}),t)}},{key:"update",value:function(t,n){var r=this;return this.queue.addTask((function(n){if(Array.isArray(t)){for(var i=[],a=0;a<t.length;a++)t[a]&&"object"===e(t[a])&&i.push(r._updateSingle(t[a]));t.length===i.length?Promise.all(i).then((function(){n(null,t)})).catch((function(e){n(e)})):n(new Error("Invalid type: 'item' should hold objects if it's an array."))}else t&&"object"===e(t)?r._updateSingle(t,(function(e,t){n(e,t)})):n(new Error("Invalid type: 'item' should be an object or an object array."))}),n)}},{key:"updateIf",value:function(e,t,n){var r=this;return this.queue.addTask((function(n){if(e instanceof oe){var i,a=[];for(i in r.store){var s=r.store[i];if(e.match(s))for(var o in t){var u=t[o];ae(s[o],u)||(s[o]=u,a.push(s))}}n(null,a)}else n(new Error("Invalid type: 'query' should be Query type."))}),n)}},{key:"remove",value:function(e,t){var n=this;return this.queue.addTask((function(t){e?(e="".concat(e),n.store.hasOwnProperty(e)?(delete n.store[e],t(null)):t(new Error("Invalid key: no item with such key was found"))):t(new Error("Invalid type: 'id' should be string type."))}),t)}},{key:"removeIf",value:function(e,t){var n=this;return this.queue.addTask((function(t){if(e instanceof oe){var r,i=[];for(r in n.store){var a=n.store[r];e.match(a)&&(i.push(a),delete n.store[r])}t(null,i)}else t(new Error("Invalid type: 'query' should be Query type."))}),t)}},{key:"clear",value:function(e){var t=this;return this.queue.addTask((function(e){t.store={},e(null)}),e)}}]),t}();"undefined"==typeof Promise&&(Promise=C);var de=new K,fe=new K,he=function(){function e(t,n){r(this,e),this.name=t,this.version=n,de.set(this,{}),fe.set(this,{}),le.getInstance().start()}return a(e,null,[{key:"Query",get:function(){return oe}}]),a(e,[{key:"schema",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=de.get(this);return n[e]=t,this}},{key:"build",value:function(){var e=de.get(this),t=fe.get(this);return new Promise((function(n,r){for(var i in e){var a;t[i]||(a=e[i].key||"_id",t[i]=new ce(i,a))}n()}))}},{key:"close",value:function(){}},{key:"drop",value:function(){de.set(this,{});var e,t=fe.get(this);for(e in t)t[e].clear();fe.set(this,{})}},{key:"collection",value:function(e){var t=fe.get(this);return t[e]&&t[e]instanceof ce?t[e]:null}}]),e}();"undefined"==typeof Promise&&(Promise=C);var pe=null,ve=!1,ge=function(){function e(){r(this,e)}return a(e,null,[{key:"init",value:function(){pe=pe||(window?window.localStorage:null)}},{key:"useReactNative",value:function(e){pe=e,ve=!0}},{key:"getKeys",value:function(){return ve?pe.getAllKeys():new Promise((function(e){var t,n=[];for(t in pe)n.push(t);e(n)}))}},{key:"get",value:function(e){return ve?pe.getItem(e):new Promise((function(t){var n=pe.getItem(e);t(void 0!==n?n:null)}))}},{key:"set",value:function(e,t){return ve?pe.setItem(e,t):new Promise((function(n){pe.setItem(e,t),n()}))}},{key:"remove",value:function(e){return ve?pe.removeItem(e):new Promise((function(t){pe.removeItem(e),t()}))}},{key:"clear",value:function(){return ve?pe.clear():new Promise((function(e){pe.clear(),e()}))}}]),e}(),me=98765,ye={NONE:0,ERROR:1,WARNING:2,INFO:3},_e=ye.NONE,be="",Ce=function(){function e(){r(this,e)}return a(e,null,[{key:"isValidLevel",value:function(e){return-1<Object.keys(ye).map((function(e){return ye[e]})).indexOf(e)}},{key:"_permit",value:function(e,t){if(e<=_e){var n="";switch(e){case ye.ERROR:n="error";break;case ye.WARNING:n="warning";break;case ye.INFO:case me:n="log";break;default:n=""}if(console&&console[n]){t="".concat(be," ").concat(t||""," ");for(var r,i=arguments.length,a=new Array(2<i?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];"string"==typeof a[0]?(a[0]=t+a[0],(r=console)[n].apply(r,a)):(r=console)[n].apply(r,[t].concat(a))}}}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._permit.apply(e,[ye.ERROR,"[ERROR]"].concat(n))}},{key:"warning",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._permit.apply(e,[ye.WARNING,"[WARNING]"].concat(n))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._permit.apply(e,[ye.INFO,"[INFO]"].concat(n))}},{key:"call",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._permit.apply(e,[me,"[CALL]"].concat(n))}},{key:"event",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._permit.apply(e,[me,"[EVENT]"].concat(n))}},{key:"view",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._permit.apply(e,[me,"[VIEW]"].concat(n))}},{key:"message",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._permit.apply(e,[me,"[MESSAGE]"].concat(n))}},{key:"cache",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._permit.apply(e,[me,"[CACHE]"].concat(n))}},{key:"sync",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._permit.apply(e,[me,"[SYNC]"].concat(n))}},{key:"level",set:function(e){var t=Object.keys(ye).map((function(e){return ye[e]}));t.push(me),-1<t.indexOf(e)&&(_e=e)},get:function(){return _e}},{key:"prefix",set:function(e){"string"==typeof e&&(be=e)}}]),e}(),Ee=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(i,c(Error));var e,t,n=(e=i,t=u(),function(){var n,r=s(e);return d(this,t?(n=s(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))});function i(e,t){return r(this,i),(e=n.call(this,e)).name="SyncManagerException",e.code=t||0,e}return a(i,null,[{key:"create",value:function(e){return new i((e=0<arguments.length&&void 0!==e?e:i.Type.ERROR_UNKNOWN).message,e.code)}},{key:"throw",value:function(e){Ce.error(e)}},{key:"Type",get:function(){return{ERROR_UNKNOWN:{code:81e4,message:"Unknown error occurred."},ERROR_DATABASE_IO:{code:810001,message:"Database I/O operation failed."},ERROR_SETUP_MISSING:{code:810100,message:"SendBirdSyncManager.setup() is not called."},ERROR_SENDBIRD_MISSING:{code:810101,message:"SendBird instance should be set before init()."},ERROR_DUPLICATED_FETCH:{code:810200,message:"Fetch is in progress."},ERROR_DUPLICATED_CHANGELOG_SYNC:{code:810210,message:"Sync is in progress."},ERROR_INVALID_PARAMETER:{code:810300,message:"Invalid parameter."}}}}]),i}(),ke=function(e,t){function n(e,t){s.lock((function(n){var r=Mt.getInstance();r.currentUserId?(e.ownerUserId=r.currentUserId,e.lastMessageUpdatedAt=(e.lastMessage||e).createdAt,Ce.cache("upsert channel",e),a.upsert(e.serialize(),(function(e,r){n(),t(e,r)}))):(n(),t(Ee.create(Ee.Type.ERROR_SETUP_MISSING)))}))}function r(e){return e?((e=t.GroupChannel.buildFromSerializedData(e)).lastMessageUpdatedAt=(e.lastMessage||e).createdAt,e):null}var i=this,a=e.collection("GroupChannel"),s=new U;return this.query=function(e,t,n){var i=Mt.getInstance();i.currentUserId?(e.ownerUserId=i.currentUserId,e=new Mt.LocalDB.Query(e),t&&(e.offset=t.offset||0,e.limit=t.limit||20,e.index=t.index,e.desc=t.desc),a.find(e,(function(e,t){if(e)n(e);else{for(var i=[],a=0;a<t.length;a++){var s=r(t[a]);i.push(s)}n(null,i)}}))):n(Ee.create(Ee.Type.ERROR_SETUP_MISSING))},this.insert=function(e,t){i.getItem(e.url,(function(r,i){r?t(r):i?t(null,e):n(e,(function(n){n?t(n):t(null,e)}))}))},this.upsert=function(e,t){n(e,(function(n){n?t(n):t(null,e)}))},this.remove=function(t,n){var r,i;r=t,i=function(e){e?n(e):n(null,t)},s.lock((function(t){var n=Mt.getInstance();n.currentUserId?(Ce.cache("remove channel",r.url),a.remove(r.url,(function(a,s){var o;a?(t(),i(a)):(o=new Mt.LocalDB.Query({ownerUserId:n.currentUserId,channelUrl:r.url}),e.collection("MessageChunk").removeIf(o,(function(n){n?(t(),i(n)):e.collection("Message").removeIf(o,(function(e){t(),i(e||null)}))})))}))):(t(),i(Ee.create(Ee.Type.ERROR_SETUP_MISSING)))}))},this.getItem=function(e,t){a.findById(e,(function(e,n){e?t(e):t(null,r(n))}))},this.clear=function(t){return n=t,void s.lock((function(t){Ce.cache("clear channel"),a.clear((function(r){r?(t(),n(r)):e.collection("MessageChunk").clear((function(r){t(),r?n(r):e.collection("Message").clear(n)}))}))}));var n},this},we={},Se=function(e,t){var n=this,r=e.collection("GroupChannelListQuery"),i=function(e){if(e){var n=t.GroupChannelListQuery.buildFromSerializedData(e);return n.filterKey=e.filterKey,n.ownerUserId=e.currentUserId,n.updatedAt=e.updatedAt,n.savepoint=e.savepoint,n}return null};return this.createFilterKey=function(e){var t=[];return t.push("order=".concat(e.order)),t.push("includeEmpty=".concat(e.includeEmpty)),t.push("customTypesFilter=".concat(e.customTypesFilter.sort().join(","))),t.join("&")},this.upsert=function(e,t){!function(e,t){e.filterKey=n.createFilterKey(e);var a=Mt.getInstance();a.currentUserId?(Ce.cache("upsert channel list query",e.filterKey),e.ownerUserId=a.currentUserId,e.updatedAt=(new Date).getTime(),e.savepoint||(e.savepoint=""),a=e.serialize(),r.upsert(a,(function(n,r){if(n)t(n);else{if(we[e.filterKey])for(var a in e)we[e.filterKey].hasOwnProperty(a)&&(we[e.filterKey][a]=e[a]);else we[e.filterKey]=e;t(null,i(r))}}))):t(Ee.create(Ee.Type.ERROR_SETUP_MISSING))}(e,(function(e,n){e?t(e):t(null,i(n))}))},this.remove=function(e,t){var n,a;n=e,a=function(e,n){e?t(e):t(null,i(n))},Mt.getInstance().currentUserId?(Ce.cache("remove channel list query",n.filterKey),r.remove(n.filterKey,(function(e,t){e?a(e):(we[n.filterKey]&&delete we[n.filterKey],a(null,t))}))):a(Ee.create(Ee.Type.ERROR_SETUP_MISSING))},this.getItem=function(e,t){we[e]?t(null,we[e]):r.findById(e,(function(e,n){e?t(e):t(null,i(n))}))},this.clear=function(e){return t=e,Ce.cache("clear channel list query"),we={},void r.clear((function(e){return t(e)}));var t},this};function Ie(e,t){return(1<arguments.length&&void 0!==t?t:[]).map((function(e){return e.url})).indexOf(e.url)}function Ae(e,t){for(var n=1<arguments.length&&void 0!==t?t:[],r=0;r<n.length;r++)if(e.isIdentical(n[r]))return r;return-1}function Ue(e,t){if(!t)return new Promise((function(t,n){e((function(e){return e?n(e):t()}))}));e(t)}"undefined"==typeof Promise&&(Promise=C);var Me=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))};function Oe(e){return"".concat("unsent","-").concat(e)}function Te(e){if(e)if(e.sendingStatus&&"succeeded"!==e.sendingStatus){if(!e.reqId)throw Ee.throw(Ee.create(Ee.Type.ERROR_INVALID_PARAMETER));e.messageId=Oe(e.reqId)}else e.messageId="".concat(e.messageId)}var Re=function(e,t,n){function r(e,t){s.lock((function(r){var i=Mt.getInstance(),a=e.isDeleted?e:u(e.serialize());Te(a),a.messageId?i.currentUserId?(a.hasOwnProperty("isVisible")||(a.isVisible=!0),a.hasOwnProperty("isDeleted")||(a.isDeleted=!1),a.ownerUserId=i.currentUserId,Ce.cache("upsert message","owner="+a.ownerUserId,"visible="+a.isVisible,"deleted="+a.isDeleted,a),o.findById(a.messageId,(function(e,i){e?(r(),t(e)):i?i.isDeleted||"pending"===a.sendingStatus&&"pending"!==i.sendingStatus?(r(),t(null,i)):(a.isVisible=a.isVisible||i.isVisible,o.upsert(a.serialize(),(function(e,n){r(),e?t(e):t(null,n)}))):o.upsert(a.serialize(),(function(e,i){e?(r(),t(e)):(n.messageCount[a.channelUrl]||(n.messageCount[a.channelUrl]=0),n.messageCount.all++,n.messageCount[a.channelUrl]++,r(),t(null,i))}))}))):(r(),t(Ee.create(Ee.Type.ERROR_SETUP_MISSING))):(r(),t(null,e))}))}function i(e,t){return t.messageType&&(e.messageType=t.messageType),t.customType&&(e.customType=t.customType),t.senderUserIdsFilter&&0<t.senderUserIdsFilter.length&&(e["sender.userId"]={"/in":t.senderUserIdsFilter}),e}var a=this,s=new U,o=e.collection("Message"),u=function(e){var n,r=null;return e&&("user"===e.messageType?r=t.UserMessage.buildFromSerializedData(e):"file"===e.messageType?r=t.FileMessage.buildFromSerializedData(e):"admin"===e.messageType&&(r=t.AdminMessage.buildFromSerializedData(e))),r&&((n=r)&&(n.sendingStatus&&"succeeded"!==n.sendingStatus?n.messageId=0:n.messageId=parseInt(n.messageId)),"pending"===r.sendingStatus&&(r.pendingResolveTop=e.pendingResolveTop,r.pendingResolveBottom=e.pendingResolveBottom)),r};return this.query=function(e,t,n){e=e||{},(t=t||{}).includeInvisible||(e.isVisible=!0,e.isDeleted=!1);var r=Mt.getInstance();r.currentUserId?(e.ownerUserId=r.currentUserId,(e=new Mt.LocalDB.Query(e)).offset=t.offset||0,e.limit=t.limit||50,e.desc=t.desc,e.index=t.index||{ownerUserId:Mt.LocalDB.Query.Order.ASC,channelUrl:Mt.LocalDB.Query.Order.ASC,createdAt:Mt.LocalDB.Query.Order.DESC},o.find(e,(function(e,t){if(e)n(e);else{for(var r=[],i=0;i<t.length;i++){var a=u(t[i]);r.push(a)}n(null,r)}}))):n(Ee.create(Ee.Type.ERROR_SETUP_MISSING))},this.find=function(e,t){o.find(e,t)},this.count=function(e,t){o.count(e,t)},this.upsert=function(e,t){e?r(e,(function(e,n){e?t(e):t(null,u(n))})):t(null)},this.remove=function(e,t){a.getItem(e,(function(n,i){var a=Mt.getInstance();r({messageId:e,isDeleted:!0,serialize:function(){return{messageId:"".concat(e),ownerUserId:i?i.ownerUserId:a.currentUserId,channelUrl:i?i.channelUrl:"",createdAt:i?i.createdAt:0,sendingStatus:i?i.sendingStatus:"succeeded",isVisible:!1,isDeleted:!0}}},(function(n){n?t(n):t(null,e)}))}))},this.removeUnsent=function(e,t){e=Oe(e),a.getItem(e,(function(e,r){var i,a;e?t(e):r?(i=r,a=t,s.lock((function(e){Mt.getInstance().currentUserId?(Ce.cache("remove message",i.messageId),Te(i),o.remove(i.messageId,(function(t,r){t||(n.messageCount.all--,n.messageCount[i.channelUrl]--),e(),a(t,r)}))):(e(),a(Ee.create(Ee.Type.ERROR_SETUP_MISSING)))}))):t(null)}))},this.removeExpiredMessages=function(e,t){e=(new Date).getTime()-864e5*e,(e=new Mt.LocalDB.Query({ownerUserId:Mt.getInstance().currentUserId,sendingStatus:"failed",createdAt:{"<":e}})).limit=Number.MAX_SAFE_INTEGER,e.index={ownerUserId:Mt.LocalDB.Query.Order.ASC,createdAt:Mt.LocalDB.Query.Order.ASC},o.removeIf(e,t)},this.loadMessagesByHistoryOffset=function(e,t,n){t={channelUrl:t,createdAt:{"<":e},ownerUserId:Mt.getInstance().currentUserId},(e={}).limit=Number.MAX_SAFE_INTEGER,e.desc=!0,a.query(t,e,n)},this.clearMessagesByHistoryOffset=function(e,t,n){(e=new Mt.LocalDB.Query({channelUrl:t,ownerUserId:Mt.getInstance().currentUserId,createdAt:{"<":e}})).limit=Number.MAX_SAFE_INTEGER,e.index={ownerUserId:Mt.LocalDB.Query.Order.ASC,channelUrl:Mt.LocalDB.Query.Order.ASC,createdAt:Mt.LocalDB.Query.Order.DESC},o.removeIf(e,n)},this.getItemWithVisibility=function(e,t){o.findById(e,(function(e,n){e?t(e):t(null,{item:u(n),isVisible:!!n&&n.isVisible})}))},this.getItem=function(e,t){o.findById(e,(function(e,n){e?t(e):t(null,u(n))}))},this.clear=function(e){return t=e,void s.lock((function(e){Ce.cache("clear messages"),o.clear((function(r){r||(n.messageCount={all:0}),e(),t(r)}))}));var t},this.loadPreviousSucceededMessages=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:(new Date).getTime(),r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s=4<arguments.length?arguments[4]:void 0;i(n={channelUrl:e,sendingStatus:"succeeded",createdAt:{"<=":n}},t),r.desc=!0,a.query(n,r,s)},this.loadNextSucceededMessages=function(e){var t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=4<arguments.length?arguments[4]:void 0;i(e={channelUrl:e,sendingStatus:"succeeded",createdAt:{">=":2<arguments.length&&void 0!==arguments[2]?arguments[2]:0}},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),t.desc=!1,a.query(e,t,n)},this.loadFailedMessages=function(e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length?arguments[3]:void 0;i(e={channelUrl:e,sendingStatus:"failed"},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),t.limit=Number.MAX_SAFE_INTEGER,t.desc=!0,a.query(e,t,n)},this.loadOldestFailedMessages=function(e){var t={sendingStatus:"failed"};i(t,{});var n={limit:Number.MAX_SAFE_INTEGER,desc:!1};a.query(t,n,e)},this.loadPendingMessages=function(e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length?arguments[3]:void 0;i(e={channelUrl:e,sendingStatus:"pending"},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),t.limit=Number.MAX_SAFE_INTEGER,t.desc=!0,a.query(e,t,n)},this.resolvePendingMessagesAsFailed=function(e,t,n,r){n=new Mt.LocalDB.Query({ownerUserId:Mt.getInstance().currentUserId,channelUrl:e,sendingStatus:"pending",pendingResolveTop:{">=":t},pendingResolveBottom:{"<=":n}}),o.updateIf(n,{sendingStatus:"failed"},(function(e,t){r(e,t?t.map((function(e){return u(e)})):null)}))},this.pullPendingResolveTop=function(e,t,n){e=new Mt.LocalDB.Query({ownerUserId:Mt.getInstance().currentUserId,channelUrl:e,sendingStatus:"pending",pendingResolveTop:{"<":t}}),o.updateIf(e,{pendingResolveTop:t},(function(e,t){n(e,t?t.map((function(e){return u(e)})):null)}))},this.pullPendingResolveBottom=function(e,t,n){e=new Mt.LocalDB.Query({ownerUserId:Mt.getInstance().currentUserId,channelUrl:e,sendingStatus:"pending",pendingResolveBottom:Number.MAX_SAFE_INTEGER}),o.updateIf(e,{pendingResolveBottom:t},(function(e,t){n(e,t?t.map((function(e){return u(e)})):null)}))},this.shrinkMessageChunk=function(e,t,r){var i={top:Number.MAX_SAFE_INTEGER,bottom:0},a=v(t);try{for(a.s();!(s=a.n()).done;){var s=s.value;i.top=Math.min(i.top,s.createdAt),i.bottom=Math.max(i.bottom,s.createdAt)}}catch(i){a.e(i)}finally{a.f()}Je.getInstance().chunkContainer.sliceRange(e,i.top,i.bottom,(function(i){var a;i?r(i):(a=0,t.forEach((function(i){Te(i),o.remove(i.messageId,(function(i){i||(n.messageCount[e]--,n.messageCount.all--),++a>=t.length&&r(null)}))})))}))},this},Ne={},Le=function(e){var t,n=[];for(t in e)n.push("".concat(t,"=").concat(e[t]));return n.join("&")},Pe=function(){function t(e,n){r(this,t),this.chunkId=Me(),this.channelUrl=e,this.filterKey=Le(n),this.filter=n,this.startAt=(new Date).getTime(),this.endAt=0}return a(t,[{key:"hasDefaultFilter",value:function(){var n=t.getDefaultFilter();return function t(n,r){var i=e(n),a=e(r);return!n||!r||"object"!==i||i!==a||n instanceof Date?n instanceof Date?n.getTime()===r.getTime():"function"===i&&"function"===a||n===r:Object.keys(n).length===Object.keys(r).length&&Object.keys(n).every((function(e){return t(n[e],r[e])}))}(this.filter,n)}},{key:"hasVolume",value:function(){return this.endAt>this.startAt}},{key:"isOverlap",value:function(e){return e.startAt<=this.startAt&&this.startAt<=e.endAt||e.startAt<=this.endAt&&this.endAt<=e.endAt}},{key:"isSame",value:function(e){return!!e&&e.startAt===this.startAt&&this.endAt===e.endAt}},{key:"hasSameFilter",value:function(e){return!!e&&e.channelUrl===this.channelUrl&&e.filterKey===this.filterKey}},{key:"contains",value:function(e){return this.startAt<=e&&e<=this.endAt}},{key:"containsMessage",value:function(e){return this.contains(e.createdAt)}},{key:"serialize",value:function(){var e=JSON.parse(JSON.stringify(this));return Object.freeze(e)}},{key:"extendForward",value:function(e){this.endAt=Math.max(this.endAt,e)}},{key:"extendBackward",value:function(e){this.startAt=Math.min(this.startAt,e)}},{key:"extendWithChunk",value:function(e){return this.extendForwardWithChunk(e),this.extendBackwardWithChunk(e),this}},{key:"extendForwardWithChunk",value:function(e){return this.extendForward(e.endAt),this}},{key:"extendBackwardWithChunk",value:function(e){return this.extendBackward(e.startAt),this}},{key:"extendWithMessage",value:function(e){return this.extendForwardWithMessage(e),this.extendBackwardWithMessage(e),this}},{key:"extendForwardWithMessage",value:function(e){return this.extendForward(e.createdAt),this}},{key:"extendBackwardWithMessage",value:function(e){return this.extendBackward(e.createdAt),this}}],[{key:"createFromJson",value:function(e){var n=new t(e.channelUrl,e.filter);return n.chunkId=e.chunkId,n.startAt=e.startAt,n.endAt=e.endAt,n}},{key:"getDefaultFilter",value:function(){return{messageTypeFilter:null,customTypeFilter:null,senderUserIdsFilter:[],includeMetaArray:!0}}},{key:"MessageTypeFilterRealValue",get:function(){return["","user","file","admin"]}}]),t}(),De=function(e){var t=this,n=e.collection("MessageChunk"),r=new U;return this.reload=function(e,t){return n.findById(e.chunkId,t)},this.upsert=function(e,t){var i,a;i=e,a=function(e,n){e?t(e):t(null,Pe.createFromJson(n))},r.lock((function(e){var t=Mt.getInstance();t.currentUserId?(i.ownerUserId=t.currentUserId,Ne[i.chunkId]=i,n.upsert(Ne[i.chunkId].serialize(),(function(t,n){e(),t?a(t):a(null,n)}))):(e(),a(Ee.create(Ee.Type.ERROR_SETUP_MISSING)))}))},this.remove=function(e,t){var i,a;i=e,a=function(n){n?t(n):t(null,e)},r.lock((function(e){Mt.getInstance().currentUserId?(Ne[i]&&delete Ne[i],n.remove(i,(function(t,n){e(),a(t||null)}))):(e(),a(Ee.create(Ee.Type.ERROR_SETUP_MISSING)))}))},this.clear=function(e){return t=e,void r.lock((function(e){Ne={},n.clear((function(n){e(),t(n)}))}));var t},this.getChunksByHistoryOffset=function(e,t,r){var i=Mt.getInstance(),a=Pe.getDefaultFilter();i.currentUserId&&((e=new Mt.LocalDB.Query({ownerUserId:i.currentUserId,channelUrl:t,filterKey:Le(a),endAt:{"<=":e}})).limit=Number.MAX_SAFE_INTEGER,e.index={ownerUserId:Mt.LocalDB.Query.Order.ASC,channelUrl:Mt.LocalDB.Query.Order.ASC,filterKey:Mt.LocalDB.Query.Order.ASC,endAt:Mt.LocalDB.Query.Order.DESC},n.find(e,r))},this.clearChunkByHistoryOffset=function(e,r,i){var a,s,o=Mt.getInstance(),u=Pe.getDefaultFilter();o.currentUserId&&(a=new Promise((function(t,i){var a=new Mt.LocalDB.Query({ownerUserId:o.currentUserId,channelUrl:r,filterKey:Le(u),endAt:{"<=":e}});a.limit=Number.MAX_SAFE_INTEGER,a.index={ownerUserId:Mt.LocalDB.Query.Order.ASC,channelUrl:Mt.LocalDB.Query.Order.ASC,filterKey:Mt.LocalDB.Query.Order.ASC,endAt:Mt.LocalDB.Query.Order.DESC},n.removeIf(a,(function(e,n){return e?i(e):t(n)}))})),s=new Promise((function(n,i){t.getChunkByTimestamp(r,u,e,(function(r,a){return r?i(r):(a&&(a.extendBackward(e),t.upsert(a,(function(e,t){return e?i(e):void n(t)}))),void n(a))}))})),Promise.all([a,s]).then((function(e){i(null)})).catch((function(e){i(e)})))},this.getChunkByTimestamp=function(e,r,i,a){var s=Mt.getInstance();s.currentUserId?((r=new Mt.LocalDB.Query({ownerUserId:s.currentUserId,channelUrl:e,filterKey:Le(r),startAt:{"<=":i},endAt:{">=":i}})).limit=1,r.index={ownerUserId:Mt.LocalDB.Query.Order.ASC,channelUrl:Mt.LocalDB.Query.Order.ASC,filterKey:Mt.LocalDB.Query.Order.ASC,endAt:Mt.LocalDB.Query.Order.DESC},n.find(r,(function(r,s){var o;r?a(r):(o=0<s.length?Pe.createFromJson(s[0]):null)?o.hasDefaultFilter()?a(null,o):((s=new Mt.LocalDB.Query({channelUrl:e,filterKey:Le(Pe.getDefaultFilter()),startAt:{"<=":i}})).limit=1,s.index={ownerUserId:Mt.LocalDB.Query.Order.ASC,channelUrl:Mt.LocalDB.Query.Order.ASC,filterKey:Mt.LocalDB.Query.Order.ASC,endAt:Mt.LocalDB.Query.Order.DESC},n.find(s,(function(e,n){e?a(e):(e=0<n.length?Pe.createFromJson(n[0]):null)&&e.endAt>o.endAt?e.isOverlap(o)?(o.extendWithChunk(e),t.upsert(o,a)):((n=new Pe(o.channelUrl,o.filter)).startAt=e.startAt,n.endAt=e.endAt,t.upsert(n,a)):a(null,o)}))):a(null)}))):a(Ee.create(Ee.Type.ERROR_SETUP_MISSING))},this.mergePreviousChunkOverlap=function(e,r){var i=Mt.getInstance();i.currentUserId?((i=new Mt.LocalDB.Query({ownerUserId:i.currentUserId,chunkId:{"!=":e.chunkId},channelUrl:e.channelUrl,filterKey:e.filterKey,endAt:{">=":e.startAt}})).limit=Number.MAX_SAFE_INTEGER,n.find(i,(function(i,a){i?r(i):0<a.length?(i=new Mt.LocalDB.Query({chunkId:{"/in":a.map((function(e){return e.chunkId}))}}),n.removeIf(i,(function(n){if(n)r(n);else{for(var i=0;i<a.length;i++)e.extendWithChunk(a[i]);t.upsert(e,r)}}))):t.upsert(e,r)}))):r(Ee.create(Ee.Type.ERROR_SETUP_MISSING))},this.sliceRange=function(e,r,i,a){var s=Mt.getInstance();s.currentUserId?((e=new Mt.LocalDB.Query({ownerUserId:s.currentUserId,channelUrl:e,filterKey:Le(Pe.getDefaultFilter())})).limit=Number.MAX_SAFE_INTEGER,n.find(e,(function(e,n){e||(0<(n=n.map((function(e){return Pe.createFromJson(e)})).filter((function(e){return e.contains(r)||e.contains(i)}))).length?function(){var e,s=0,o=v(n);try{for(o.s();!(e=o.n()).done;)!function(){var o=e.value,u=new Pe(o.channelUrl,o.filter);u.extendBackward(o.startAt),u.extendForward(r);var l=new Pe(o.channelUrl,o.filter);l.extendBackward(i),l.extendForward(o.endAt),t.remove(o.chunkId,(function(e){e||(u.hasVolume()&&t.upsert(u,(function(e){e&&Ce.error("Failed to write the partial chunk on chunk slice.")})),l.hasVolume()&&t.upsert(l,(function(e){e&&Ce.error("Failed to write the partial chunk on chunk slice.")})),Je.getInstance().applyTrimmedChunk(o,l)),++s>=n.length&&a(null)}))}()}catch(e){o.e(e)}finally{o.f()}}():a(null))}))):a(Ee.create(Ee.Type.ERROR_SETUP_MISSING))},this};function xe(e,t,n){return n?!(t.channelUrl!==e.url||n.messageType&&n.messageType!==t.messageType||n.customType&&n.customType!==t.customType||Array.isArray(n.senderUserIdsFilter)&&0<n.senderUserIdsFilter.length&&t.sender&&n.senderUserIdsFilter.indexOf(t.sender.userId)<0):t.channelUrl===e.url}var Fe=function(){var e={},t=[];return this.removeChannel=function(e){for(var n in t){var r=t[n];r.controller.channel.url===e.url&&r.view.channelWasRemoved(e)}},this.updateChannel=function(n){for(var r in t){var i=t[r];i.controller.channel.url===n.url&&i.view.channelWasUpdated(n)}(!e.hasOwnProperty(n.url)||n.messageOffsetTimestamp>e[n.url])&&(e[n.url]=n.messageOffsetTimestamp,e[n.url]&&(Je.getInstance().chunkContainer.clearChunkByHistoryOffset(n.messageOffsetTimestamp,n.url,(function(e){e&&Ce.error("Error while clearing message chunk history",e)})),Je.getInstance().messageContainer.loadMessagesByHistoryOffset(n.messageOffsetTimestamp,n.url,(function(e,r){if(!e){Je.getInstance().messageContainer.clearMessagesByHistoryOffset(n.messageOffsetTimestamp,n.url,(function(e,t){e&&Ce.error("Error while clearing chat history",e)}));var i=r.filter((function(e){return e.hasOwnProperty("sendingStatus")&&"failed"===e.sendingStatus})).map((function(e){return e.reqId})),a=r.filter((function(e){return e.hasOwnProperty("sendingStatus")&&"succeeded"===e.sendingStatus})).map((function(e){return e.messageId}));if(0<a.length||0<i.length)for(var s in t){var o=t[s];o.controller.channel.url===n.url&&(0<a.length&&o.view.removeViewItems(a),0<i.length&&o.view.removeViewItems(i,{isRequestId:!0}))}}}))))},this.addCollection=function(n,r){t.push({controller:n,view:r}),n.hasOwnProperty("channel")&&n.channel.hasOwnProperty("url")&&(!e.hasOwnProperty(n.channel.url)||n.channel.messageOffsetTimestamp>e[n.channel.url])&&(e[n.channel.url]=n.channel.messageOffsetTimestamp)},this.removeCollection=function(e){0<=(e=t.map((function(e){return e.controller})).indexOf(e))&&(t[e].controller._pause(),t.splice(e,1))},this.clearCollection=function(){for(var e in t)t[e].controller._pause();t=[]},this.pause=function(){for(var e in t)t[e].controller._pause()},this.resume=function(e){var n,r=t.length,i=null;for(n in t)t[n].controller._resume((function(t){i=t||i,--r<=0&&e(i)}))},this.upsert=function(e,n){if(0<e.length)for(var r in t){var i=t[r];if(i.controller!==n){var a,s=[];for(a in e){var o=e[a];xe(i.controller.channel,o,i.controller.filter)&&s.push(o)}0<s.length&&i.view.addViewItems(s,{isEventMessage:!0,direction:"next"})}}},this.update=function(e,n){if(0<e.length)for(var r in t){var i=t[r];if(i.controller!==n){var a,s=[],o=[];for(a in e){var u=e[a];0<=i.view.messages.map((function(e){return e.messageId})).indexOf(u.messageId)&&(xe(i.controller.channel,u,i.controller.filter)?s:o).push(u)}0<s.length&&i.view.addViewItems(s,{isEventMessage:!0,direction:"next"}),0<o.length&&i.view.removeViewItems(o)}}},this.read=function(e,n){for(var r in t){var i=t[r];i.controller!==n&&i.controller.channel.url===e.url&&(i.controller.channel=e,i.view.addViewItems(i.view.messages))}},this.remove=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(0<e.length)for(var i in t){var a=t[i];a.controller!==n&&a.view.removeViewItems(e,r)}},this.clear=function(){for(var n in e={},t)t[n].view.clearViewItem()},this.updateCurrentChunk=function(e){for(var n in t){var r=t[n];r.view.currentChunk&&!r.view.currentChunk.hasSameFilter(e)||r.view.updateCurrentChunk(e)}},this.applyTrimmedChunk=function(e,n){for(var r in t){var i=t[r];i.view.currentChunk&&i.view.currentChunk.chunkId===e.chunkId&&(i.controller._chunkTrimmed=!0,i.view.updateCurrentChunk(n))}},this};function He(){this.onChannelEvent=function(e,t){}}function je(){this.onPendingMessageEvent=function(e,t){},this.onFailedMessageEvent=function(e,t,n){},this.onSucceededMessageEvent=function(e,t){},this.onNewMessage=function(e){},this.onMessageEvent=function(e,t){},this.onChannelRemoved=function(e){},this.onChannelUpdated=function(e){}}var Ge={INSERT:"insert",UPDATE:"update",MOVE:"move",REMOVE:"remove",CLEAR:"clear"},Be={INSERT:"insert",UPDATE:"update",REMOVE:"remove",CLEAR:"clear"},qe={NONE:"none",UPDATE_RESEND_FAILED:"update_resend_failed",REMOVE_RESEND_SUCCEEDED:"remove_resend_succeeded",REMOVE_RETENTION_EXPIRED:"remove_retention_expired",REMOVE_EXCEEDED_MAX_COUNT:"remove_exceeded_max_count",REMOVE_MANUAL_ACTION:"remove_manual_action",REMOVE_UNKNOWN:"remove_unknown"},Ye=function(){function e(t){var n=this;t=t.channelUrl,r(this,e),this._resendingTimer=null;var i=!1;Object.defineProperty(this,"_isRunning",{get:function(){return i},set:function(e){i!==(i=e)&&n._toggleResendingInterval()}}),this._clear(),this.collectionReferenceCount=1,this._channelUrl=t}return a(e,[{key:"_clear",value:function(e){e=0<arguments.length&&void 0!==e?e:{noManualMessages:!1},this._retryCount=0,this._delayTime=0,this._isRunning=!1,e.noManualMessages||(this.manualMessages=[]),this.automaticMessages=[],clearTimeout(this._resendingTimer),this._resendingTimer=null}},{key:"_appendMessagesWithOrder",value:function(e,t){var n=this,r=(t=1<arguments.length&&void 0!==t?t:{}).hasOwnProperty("isAutomatic")?t.isAutomatic:Mt.syncManagerOptions.messageResendPolicy===Mt.Options.MessageResendPolicy.AUTOMATIC;e.forEach((function(e){for(var t=(r?n.automaticMessages:n.manualMessages).length,i=t,a=0;a<t;a++){var s=(r?n.automaticMessages:n.manualMessages)[a];if(e.createdAt<s.createdAt){i=a;break}}(r?n.automaticMessages:n.manualMessages).splice(i,0,e)}))}},{key:"appendMessages",value:function(e){for(var t=this,n=0===this.automaticMessages.length,r=Mt.syncManagerOptions.messageResendPolicy===Mt.Options.MessageResendPolicy.AUTOMATIC,i=e.length,a=[],s=0;s<i;s++)!function(n){var i=e[n];n=[],r&&(n=t.automaticMessages),0<[].concat(f(n),f(t.manualMessages)).filter((function(e){return e.reqId===i.reqId})).length||a.push(i)}(s);this._appendMessagesWithOrder(a),n&&0<this.automaticMessages.length&&this._resendUserMessage()}},{key:"removeMessages",value:function(e){for(var t=this,n=Mt.syncManagerOptions.messageResendPolicy===Mt.Options.MessageResendPolicy.AUTOMATIC,r=e.length,i=!1,a=0;a<r;a++)!function(r){var a=e[r];i=!1,n&&(t.automaticMessages=t.automaticMessages.filter((function(e){return e.reqId!==a.reqId||!(i=!0)}))),i||(t.manualMessages=t.manualMessages.filter((function(e){return e.reqId!==a.reqId})))}(a)}},{key:"_resendUserMessage",value:function(){var e=this;if(this._retryCount++,Mt.syncManagerOptions.automaticMessageResendRetryCount!==Mt.Options.INFINITY&&this._retryCount>Mt.syncManagerOptions.automaticMessageResendRetryCount)return this._appendMessagesWithOrder(this.automaticMessages,{isAutomatic:!1}),this.automaticMessages=[],ze.getInstance().upsertMessages(this._channelUrl,this.manualMessages),void this._clear({noManualMessages:!0});this._resendingTimer=setTimeout((function(){var t,n,r,i=e.automaticMessages[0];i&&e._isRunning?(n=(t=Je.getInstance()).sb,r=n.getErrorFirstCallback(),n.GroupChannel.getChannel(e._channelUrl,(function(n,a){var s;r&&(s=a,a=n,n=s),a?(e._increaseDelayTime(),e._resendUserMessage()):n.resendUserMessage(i,(function(n,a){var s,o;r&&(s=a,a=n,n=s),a?(800110===a.code?(o={reason:qe.REMOVE_UNKNOWN},ze.getInstance().removeMessages(e._channelUrl,[i],o),e.removeMessages([i])):e._increaseDelayTime(),e._resendUserMessage()):(e.removeMessages([i]),e._retryCount=0,e._delayTime=0,o={reason:qe.REMOVE_RESEND_SUCCEEDED},ze.getInstance().removeMessages(e._channelUrl,[i],o),t.messageContainer.upsert(n,(function(n,r){n||t.broadcast.upsert([r]),e._resendUserMessage()})))}))}))):(e._retryCount=0,e._delayTime=0)}),this._delayTime)}},{key:"_increaseDelayTime",value:function(){this._delayTime=1e4===this._delayTime?this._delayTime:this._delayTime+2e3}},{key:"_toggleResendingInterval",value:function(){this._isRunning?this._resendUserMessage():(clearTimeout(this._resendingTimer),this._resendingTimer=null,this._retryCount=0,this._delayTime=0)}},{key:"resumeResending",value:function(){Ce.call("FailedMessageQueue resumeResending()"),this._retryCount=0,this._delayTime=0,this._isRunning=!0}},{key:"pauseResending",value:function(){Ce.call("FailedMessageQueue pauseResending()"),this._isRunning=!1}},{key:"increaseCount",value:function(){++this.collectionReferenceCount}},{key:"decreaseCount",value:function(){--this.collectionReferenceCount,0===this.collectionReferenceCount&&this._clear()}}]),e}(),Ve=function(){function e(t){var n=void 0===(i=t.msec)?0:i,i=void 0===(i=t.isEternal)||i;t=void 0===(t=t.timeoutFn)?function(){}:t,r(this,e),this.time=n,this.isEternal=i,this.timeoutFn=t,this.checker=null}return a(e,[{key:"reset",value:function(){this.stop(),this.time=0,this.timeoutFn=function(){}}},{key:"start",value:function(){var e,t=this;null===this.checker&&(e=(new Date).getTime(),this.checker=setTimeout((function(){(new Date).getTime()-e>=t.time&&(t.isEternal?t.start():t.stop(),t.timeoutFn&&"function"==typeof t.timeoutFn&&t.timeoutFn())}),432e5))}},{key:"stop",value:function(){clearTimeout(this.checker),this.checker=null}}]),e}(),$e=null,ze=function(){function e(){if(r(this,e),$e)return $e;this.queueMap={},this.expirationTimer=new Ve({msec:864e5*Mt.syncManagerOptions.failedMessageRetentionDays,isEternal:!0,timeoutFn:this.removeExpiredMessages}),this.oldestFailedMessageTs=0,$e=this}return a(e,[{key:"getMessages",value:function(e){return this.queueMap[e]?this.queueMap[e].messages:[]}},{key:"loadFailedMessages",value:function(e,t,n){var r=this;Je.getInstance().messageContainer.loadFailedMessages(e,{},{},(function(i,a){var s,o=a;i||(Ce.cache("fetch failed message",a.map((function(e){return e.reqId}))),(s=r.queueMap[e])&&(s.appendMessages(a),s.resumeResending()),o=a.filter((function(e){var n=!0,r=!0,i=!0;if(t.messageTypeFilter&&(n=e.messageType===Pe.MessageTypeFilterRealValue[t.messageTypeFilter]),t.customTypeFilter&&(r=e.customType===t.customTypeFilter),t.senderUserIdsFilter&&Array.isArray(t.senderUserIdsFilter)&&0<t.senderUserIdsFilter.length&&(i=e.sender&&-1<t.senderUserIdsFilter.indexOf(e.sender.userId)),n&&r&&i)return e}))),n(i,o)}))}},{key:"removeExpiredMessages",value:function(e){var t=this;this.expirationTimer.stop();var n=Math.floor(((new Date).getTime()-this.oldestFailedMessageTs)/864e5);if(0!==this.oldestFailedMessageTs&&n<Mt.syncManagerOptions.failedMessageRetentionDays)return this.expirationTimer.start(),void(e&&e());var r=Je.getInstance();n=Mt.syncManagerOptions.failedMessageRetentionDays,r.messageContainer.removeExpiredMessages(n,(function(n,i){if(n)return Ce.error("Fail remove expired failedMessage by failedMessageRetentionDays:",n),t.expirationTimer.start(),void(e&&e());var a={};i.forEach((function(e){var t=e.channelUrl;a[t]&&Array.isArray(a[t])||(a[t]=[]),a[t].push(e)})),Object.keys(a).forEach((function(e){var n=a[e].map((function(e){return e.reqId})),i={isRequestId:!0,reason:qe.REMOVE_RETENTION_EXPIRED};r.broadcast.remove(n,{},i),t.queueMap.hasOwnProperty(e)&&t.queueMap[e].removeMessages(a[e])})),r.messageContainer.loadOldestFailedMessages((function(n,r){n?(Ce.error("Fail get oldestFailedMessage from DB: ",n),t.oldestFailedMessageTs=0):t.oldestFailedMessageTs=0<r.length?r[0].createdAt:(new Date).getTime(),t.expirationTimer.start(),e&&e()}))}))}},{key:"removeExceedingMaxCount",value:function(e){var t=this,n=Je.getInstance(),r=new Mt.LocalDB.Query({ownerUserId:Mt.getInstance().currentUserId,channelUrl:e,sendingStatus:"failed"});r.limit=Number.MAX_SAFE_INTEGER,r.index={ownerUserId:Mt.LocalDB.Query.Order.ASC,createdAt:Mt.LocalDB.Query.Order.ASC},n.messageContainer.count(r,(function(e,i){e?Ce.error("Get count about failedMessage by maxFailedMessageCountPerChannel:",e):(e=Mt.syncManagerOptions.maxFailedMessageCountPerChannel)<i&&(r.limit=i-e,n.messageContainer.find(r,(function(e,r){var i={isRequestId:!0,reason:qe.REMOVE_EXCEEDED_MAX_COUNT};r.forEach((function(e){var r=e.reqId;n.messageContainer.removeUnsent(r,(function(a){a&&Ce.error("Fail remove count failedMessage by maxFailedMessageCountPerChannel:",a),n.broadcast.remove([r],{},i),t.queueMap[e.channelUrl].removeMessages([e])}))}))})))}))}},{key:"upsertMessages",value:function(e,t){var n=this,r=Je.getInstance(),i=this.queueMap[e],a=0;t.forEach((function(s){r.messageContainer.upsert(s,(function(s,o){s||r.broadcast.upsert([o]),++a===t.length&&(i&&i.appendMessages(t),n.removeExceedingMaxCount(e))}))}))}},{key:"removeMessages",value:function(e,t,n){var r=Je.getInstance(),i=this.queueMap[e];t.forEach((function(e){e.reqId&&r.messageContainer.removeUnsent(e.reqId,(function(t){t?Ce.error("deleteMessage()","Failed to delete message from cache: ".concat(e)):(n.isRequestId=!0,r.broadcast.remove([e.reqId],{},n),i&&i.removeMessages([e]))}))}))}},{key:"resume",value:function(){var e=this;Ce.call("FailedMessageDispatcher resume()"),this.removeExpiredMessages((function(){e.resumeAllQueues()}))}},{key:"pause",value:function(){Ce.call("FailedMessageDispatcher pause()"),this.pauseAllQueues(),this.expirationTimer.stop()}},{key:"resumeAllQueues",value:function(){var e=this;Object.keys(this.queueMap).forEach((function(t){(t=e.queueMap[t])&&t.resumeResending()}))}},{key:"pauseAllQueues",value:function(){var e=this;Object.keys(this.queueMap).forEach((function(t){(t=e.queueMap[t])&&t.pauseResending()}))}},{key:"createQueue",value:function(e){var t=this.queueMap[e];t?t.increaseCount():this.queueMap[e]=new Ye({channelUrl:e}),this.queueMap[e].resumeResending()}},{key:"removeQueue",value:function(e){var t=this.queueMap[e];t&&(t.decreaseCount(),0===t.collectionReferenceCount&&delete this.queueMap[e])}}],[{key:"getInstance",value:function(){return new e}}]),e}();"undefined"==typeof Promise&&(Promise=C);var We="last-changeLog-token-",Qe="syncManager_messageManager_channelHandler_"+(new Date).getTime(),Ke=null,Je=function(){function e(t){var n,i=t.sendBird,a=t.db;return t=t.cacheManager,r(this,e),Ke||(Ce.call("MessageManager()"),i=(Ke=this).sb=i,this.cacheManager=t,this.messageContainer=new Re(a,i,t),this.chunkContainer=new De(a),this.broadcast=new Fe,this.isFetchingChangeLogByChannelUrl={},n=new i.ChannelHandler,Object.keys(n).forEach((function(e){n[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];switch(e){case"onMessageReceived":Ce.event(e,n[0].url,n[1].messageId,n[1].createdAt,n[1].message),n[1].isVisible=!0,Ke.messageContainer.upsert(n[1],(function(e,t){e?Ee.throw(e):Ke.broadcast.upsert([t])}));break;case"onReadReceiptUpdated":Ce.event(e,n[0].url);var i=n[0];Ke.broadcast.read(i);break;case"onMessageUpdated":Ce.event(e,n[0].url,n[1].messageId,n[1].createdAt,n[1].message),n[1].isVisible=!1,Ke.messageContainer.upsert(n[1],(function(e,t){e?Ee.throw(e):Ke.broadcast.update([t])}));break;case"onMessageDeleted":var a=n[0],s=n[1];Ke.messageContainer.getItem(s,(function(t,n){t?Ee.throw(t):(Ce.event(e,a.url,n.messageId,n.createdAt),Ke.messageContainer.remove(s,(function(e,t){e?Ee.throw(e):(e=Pe.getDefaultFilter(),Ke.chunkContainer.getChunkByTimestamp(a.url,e,n.createdAt,(function(e,t){!e&&t&&((e=new Mt.LocalDB.Query({ownerUserId:Mt.getInstance().currentUserId,channelUrl:a.url,sendingStatus:"succeeded",createdAt:{"<":n.createdAt}})).index={ownerUserId:Mt.LocalDB.Query.Order.ASC,createdAt:Mt.LocalDB.Query.Order.ASC},e.desc=!0,e.limit=1,Ke.messageContainer.find(e,(function(e,n){e||(n&&0!==n.length?(t.endAt=n[0].createdAt,Ke.chunkContainer.upsert(t,(function(e,t){e||Ke.broadcast.updateCurrentChunk(t)}))):Ke.chunkContainer.remove(t.chunkId,(function(e){e||Ke.broadcast.updateCurrentChunk(null)})))})))})),Ke.broadcast.remove([parseInt(t)]))})))}))}}})),i.addChannelHandler(Qe,n)),Ke}return a(e,[{key:"resolveStoreLimitOverflow",value:function(e){var t=this,n=(i=Mt.syncManagerOptions).messageStoreCapacity,r=i.messageStoreEjectionPriotizedLimit,i=i.messageStoreEjectionSize;if(this.cacheManager.messageCount.all>n){this.stop();var a,s,o=[];for(a in this.cacheManager.messageCount)"all"!==a&&this.cacheManager.messageCount[a]>r&&o.push({channelUrl:a,count:this.cacheManager.messageCount[a]});0<o.length?(o.sort((function(e,t){return t.count-e.count})),s=o[0],this.messageContainer.query({channelUrl:s.channelUrl},{limit:i,desc:!1,includeInvisible:!0},(function(n,r){n?(Ce.error("Failed to retrieve the messages to eject."),e(null)):t.messageContainer.shrinkMessageChunk(s.channelUrl,r,(function(t){t&&Ce.error("Failed to eject the messages on overflow for channel ".concat(s.channelUrl,".")),e(null)}))}))):this.messageContainer.query(null,{limit:i,desc:!1,index:{ownerUserId:Mt.LocalDB.Query.Order.ASC,createdAt:Mt.LocalDB.Query.Order.ASC},includeInvisible:!0},(function(n,r){if(n)Ce.error("Failed to retrieve the messages to eject."),e(null);else{var i={},a=v(r);try{for(a.s();!(s=a.n()).done;){var s=s.value;i[s.channelUrl]||(i[s.channelUrl]=[]),i[s.channelUrl].push(s)}}catch(n){a.e(n)}finally{a.f()}var o=0,u=Object.keys(i);u.forEach((function(n){t.messageContainer.shrinkMessageChunk(n,i[n],(function(t){t&&Ce.error("Failed to eject the messages on overflow for channel ".concat(n,".")),++o>=u.length&&e(null)}))}))}}))}else e(null)}},{key:"applyTrimmedChunk",value:function(e,t){this.broadcast.applyTrimmedChunk(e,t)}},{key:"syncChangeLog",value:function(e,t){var n,r=this,i=1<arguments.length&&void 0!==t?t:function(){};this.isFetchingChangeLogByChannelUrl[e.url]?i(Ee.create(Ee.Type.ERROR_DUPLICATED_CHANGELOG_SYNC)):(this.isFetchingChangeLogByChannelUrl[e.url]=!0,Ce.call("message syncChangeLog()",e.url),n="".concat(We).concat(e.url),ge.get(n).then((function(t){var a="getMessageChangeLogsByToken",s=[];t?(a="getMessageChangeLogsByToken",s.unshift(t)):(a="getMessageChangeLogsByTimestamp",s.unshift((new Date).getTime()-100)),Ce.call(a),e[a].apply(e,s.concat([function(t,a){var s;r.sb.getErrorFirstCallback()&&(s=t,t=a,a=s),a?r.isFetchingChangeLogByChannelUrl[e.url]=!1:(Ce.sync("updated",t.updatedMessages.map((function(e){return e.messageId}))),Ce.sync("deleted",t.deletedMessageIds),t.updatedMessages.forEach((function(e){Ke.messageContainer.getItemWithVisibility(e.messageId,(function(t,n){var r;t||(r=n.item,e.isVisible=n.isVisible||!1,Ke.messageContainer.upsert(e,(function(e,t){e?Ee.throw(e):r&&r.isEqual(t)||Ke.broadcast.update([t])})))}))})),t.deletedMessageIds.forEach((function(e){Ke.messageContainer.remove(e,(function(t){t?Ee.throw(t):Ke.broadcast.remove([e])}))})),ge.set(n,t.token).then((function(){t.hasMore?r.syncChangeLog(e,i):(r.isFetchingChangeLogByChannelUrl[e.url]=!1,i())})).catch((function(t){r.isFetchingChangeLogByChannelUrl[e.url]=!1,i(t)})))}]))})).catch((function(t){r.isFetchingChangeLogByChannelUrl[e.url]=!1,i(t)})))}},{key:"start",value:function(){Ke.broadcast.resume((function(e){e||ze.getInstance().resume()}))}},{key:"stop",value:function(){Ke.broadcast.pause(),ze.getInstance().pause()}},{key:"clearCache",value:function(e){Ke.messageContainer.clear((function(){Ke.chunkContainer.clear((function(){ge.getKeys().then((function(t){var n=[];t.forEach((function(e){e.startsWith(We)&&n.push(ge.remove(e))})),Promise.all(n).then((function(){return e()})).catch((function(t){Ce.error(t),e(t)}))})).catch((function(t){return e(t)}))}))}))}},{key:"reset",value:function(e){Ke?(Ke.broadcast.clear(),Ke.clearCache(e)):e(null)}}],[{key:"getInstance",value:function(){return Ke}},{key:"clear",value:function(){Ke&&Ke.sb&&(Ce.message("MessageManager is cleared"),Ke.broadcast.clearCollection(),Ke.sb.removeChannelHandler(Qe),Ke=null)}}]),e}();function Xe(e,t){var n=rt.getInstance().sb,r=!0;if(e.isGroupChannel()&&!e.isSuper){if(!t.includeEmpty&&!e.lastMessage)return;if(t.nicknameContainsFilter){var i,a=!1;for(i in e.members)if(0<=e.members[i].nickname.indexOf(t.nicknameContainsFilter)){a=!0;break}if(!a)return}if(t.userIdsFilter&&Array.isArray(t.userIdsFilter)&&0<t.userIdsFilter.length){var s=!1,o=e.members.map((function(e){return e.userId})),u=t.userIdsFilterExactMatch,l=t.queryType;if(u?s=o.length===t.userIdsFilter.length&&t.userIdsFilter.every((function(e){return 0<=o.indexOf(e)})):"AND"===l?s=t.userIdsFilter.every((function(e){return 0<=o.indexOf(e)})):"OR"===l&&(s=t.userIdsFilter.reduce((function(e,t){return e||0<=o.indexOf(t)}),!1)),!s)return}}if(t.channelNameContainsFilter&&(r=r&&0<=e.name.indexOf(t.channelNameContainsFilter)),0<t.channelUrlsFilter.length&&(r=r&&0<=t.channelUrlsFilter.indexOf(e.url)),t.memberStateFilter!==n.GroupChannel.MemberStateFilter.ALL)switch(t.memberStateFilter){case n.GroupChannel.MemberStateFilter.JOINED:r=r&&"joined"===e.myMemberState&&"joined_only"===n.GroupChannel.MemberStateFilter.JOINED;break;case n.GroupChannel.MemberStateFilter.INVITED:case n.GroupChannel.MemberStateFilter.INVITED_BY_FRIEND:case n.GroupChannel.MemberStateFilter.INVITED_BY_NON_FRIEND:r=r&&"invited"===e.myMemberState&&("invited_only"===n.GroupChannel.MemberStateFilter.INVITED||"invited_by_friend"===n.GroupChannel.MemberStateFilter.INVITED||"invited_by_non_friend"===n.GroupChannel.MemberStateFilter.INVITED)}if(0<t.customTypesFilter.length&&(r=r&&0<=t.customTypesFilter.indexOf(e.customType)),t.customTypeStartsWithFilter&&(r=r&&e.customType.startsWith(t.customTypeStartsWithFilter)),t.superChannelFilter!==n.GroupChannel.SuperChannelFilter.ALL)switch(t.superChannelFilter){case n.GroupChannel.SuperChannelFilter.SUPER:r=r&&e.isSuper;break;case n.GroupChannel.SuperChannelFilter.NONSUPER:r=r&&!e.isSuper}if(t.publicChannelFilter!==n.GroupChannel.PublicChannelFilter.ALL)switch(t.publicChannelFilter){case n.GroupChannel.PublicChannelFilter.PUBLIC:r=r&&e.isPublic;break;case n.GroupChannel.PublicChannelFilter.PRIVATE:r=r&&!e.isPublic}return t.unreadChannelFilter!==n.GroupChannel.UnreadChannelFilter.ALL&&t.unreadChannelFilter===n.GroupChannel.UnreadChannelFilter.UNREAD_MESSAGE&&(r=r&&0<e.unreadMessageCount),r}var Ze=function(){var e=[];return this.addCollection=function(t,n){e.indexOf(t)<0&&e.push({controller:t,view:n})},this.removeCollection=function(t){0<=(t=e.map((function(e){return e.controller})).indexOf(t))&&(e[t].controller._pause(),e.splice(t,1))},this.clearCollection=function(){for(var t in e)e[t].controller._pause();e=[]},this.pause=function(){for(var t in e)e[t].controller._pause()},this.resume=function(){for(var t in e)e[t].controller._resume()},this.upsert=function(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(0<t.length)for(var i in e){var a=e[i];if(a.controller!==n){var s,o=[];for(s in t){var u=t[s];Xe(u,a.controller.query)&&o.push(u)}0<o.length&&(r.isEventChannel=!0,a.view.addViewItems(o,r))}}},this.update=function(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(0<t.length){for(var i in t){var a=t[i];Je.getInstance().broadcast.updateChannel(a)}for(var s in e){var o=e[s];if(o.controller!==n){var u,l=[],c=[];for(u in t){var d=t[u];o.view.channels.map((function(e){return e.url})).includes(d.url)&&(Xe(d,o.controller.query)?l:c).push(d)}0<l.length&&(r.isEventChannel=!0,o.view.addViewItems(l,r)),0<c.length&&o.view.removeViewItems(c)}}}},this.remove=function(t,n){if(0<t.length){for(var r in t){var i=t[r];Je.getInstance().broadcast.removeChannel(i)}for(var a in e){var s=e[a];if(s.controller!==n){var o,u=[];for(o in t){var l=t[o];0<=s.view.channels.map((function(e){return e.url})).indexOf(l.url)&&u.push(l)}0<u.length&&s.view.removeViewItems(u)}}}},this.hide=function(t,n){var r,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};for(r in t){var a=t[r];Je.getInstance().broadcast.updateChannel(a)}if(0<t.length){var s,o=rt.getInstance().sb;for(s in e){var u=e[s];if(u.controller!==n){var l,c=[];for(l in t){var d=t[l];Xe(d,u.controller.query)&&c.push(d)}if(0<c.length)switch(u.controller.query.hiddenChannelFilter){case o.GroupChannel.HiddenChannelFilter.UNHIDDEN:u.view.removeViewItems(c);break;case o.GroupChannel.HiddenChannelFilter.HIDDEN:case o.GroupChannel.HiddenChannelFilter.HIDDEN_ALLOW_AUTO_UNHIDE:case o.GroupChannel.HiddenChannelFilter.HIDDEN_PREVENT_AUTO_UNHIDE:i.isEventChannel=!0,u.view.addViewItems(c,i)}}}}},this.unhide=function(t,n){var r,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};for(r in t){var a=t[r];Je.getInstance().broadcast.updateChannel(a)}if(0<t.length){var s,o=rt.getInstance().sb;for(s in e){var u=e[s];if(u.controller!==n){var l,c=[];for(l in t){var d=t[l];Xe(d,u.controller.query)&&c.push(d)}if(0<c.length)switch(u.controller.query.hiddenChannelFilter){case o.GroupChannel.HiddenChannelFilter.UNHIDDEN:i.isEventChannel=!0,u.view.addViewItems(c,i);break;case o.GroupChannel.HiddenChannelFilter.HIDDEN:case o.GroupChannel.HiddenChannelFilter.HIDDEN_ALLOW_AUTO_UNHIDE:case o.GroupChannel.HiddenChannelFilter.HIDDEN_PREVENT_AUTO_UNHIDE:u.view.removeViewItems(c)}}}}},this.clear=function(){for(var t in e)e[t].view.clearViewItem()},this};"undefined"==typeof Promise&&(Promise=C);var et="channel-changeLog-token",tt="syncManager_channelManager_channelHandler_"+(new Date).getTime(),nt=null,rt=function(){function e(t){var n,i,a,s=t.sendBird,o=t.db;return t=t.cacheManager,r(this,e),nt||(Ce.call("ChannelManager()"),n=(nt=this).sb=s,i=Mt.getInstance(),this.cacheManager=t,this.channelContainer=new ke(o,n,t),this.queryContainer=new Se(o,n),this.broadcast=new Ze,this.isFetchingChangeLog=!1,this.channelSyncByFilter={},this.changeLogSync=null,a=new n.ChannelHandler,Object.keys(a).forEach((function(e){a[e]=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];switch(e){case"onChannelChanged":var s=r[0];Ce.event(e,s.url),nt.channelContainer.getItem(s.url,(function(e,t){e?Ee.throw(e):nt.channelContainer.upsert(s,(function(e,r){e?Ee.throw(e):t?t.hiddenState!==n.GroupChannel.HiddenState.UNHIDDEN&&s.hiddenState===n.GroupChannel.HiddenState.UNHIDDEN?nt.broadcast.unhide([r]):nt.broadcast.update([r]):nt.broadcast.upsert([r])}))}));break;case"onUserMuted":case"onUserUnmuted":case"onUserUnbanned":case"onChannelFrozen":case"onChannelUnfrozen":case"onMetaDataCreated":case"onMetaDataUpdated":case"onMetaDataDeleted":case"onMetaCountersCreated":case"onMetaCountersUpdated":case"onMetaCountersDeleted":Ce.event(e,r[0].url),nt.channelContainer.upsert(r[0],(function(e,t){e?Ee.throw(e):nt.broadcast.update([t])}));break;case"onUserReceivedInvitation":case"onUserJoined":Ce.event(e,r[0].url),nt.channelContainer.upsert(r[0],(function(e,t){e?Ee.throw(e):r[1].userId===i.currentUserId?nt.broadcast.upsert([t]):nt.broadcast.update([t])}));break;case"onReadReceiptUpdated":nt.channelContainer.upsert(r[0],(function(e){e&&Ee.throw(e)}));break;case"onChannelHidden":Ce.event(e,r[0].url);var o=r[0];nt.channelContainer.upsert(o,(function(e){e?Ee.throw(e):nt.broadcast.hide([o])}));break;case"onUserLeft":case"onUserBanned":Ce.event(e,r[0].url);var u=r[0];r[1].userId===i.currentUserId?nt.channelContainer.remove(u,(function(e){e?Ee.throw(e):nt.broadcast.remove([u])})):nt.channelContainer.upsert(u,(function(e,t){e?Ee.throw(e):nt.broadcast.update([t])}));break;case"onUserDeclinedInvitation":Ce.event(e,r[0].url);var l=r[0];r[2].userId===i.currentUserId?nt.channelContainer.remove(l,(function(e){e?Ee.throw(e):nt.broadcast.remove([l])})):nt.channelContainer.upsert(l,(function(e,t){e?Ee.throw(e):nt.broadcast.update([t])}));break;case"onChannelDeleted":Ce.event(e,r[0]),nt.channelContainer.getItem(r[0],(function(e,t){e?Ee.throw(e):t&&nt.channelContainer.remove(t,(function(e){e?Ee.throw(e):nt.broadcast.remove([t])}))}))}}})),n.addChannelHandler(tt,a)),nt}return a(e,[{key:"syncChangeLog",value:function(e,t){var n,r=this;this.isFetchingChangeLog?t(Ee.create(Ee.Type.ERROR_DUPLICATED_CHANGELOG_SYNC)):(this.isFetchingChangeLog=!0,Ce.call("channel syncChangeLog()"),n="".concat(et),ge.get(n).then((function(i){var a="getMyGroupChannelChangeLogsByToken",s=[];s.push([]),s.push(!0),i?(a="getMyGroupChannelChangeLogsByToken",s.unshift(i)):(a="getMyGroupChannelChangeLogsByTimestamp",s.unshift((new Date).getTime()-100)),Ce.call(a),(i=r.sb)[a].apply(i,s.concat([function(i,a){var s,o;r.sb.getErrorFirstCallback()&&(s=i,i=a,a=s),a?r.isFetchingChangeLog=!1:(Ce.sync("updated",i.updatedChannels&&0<i.updatedChannels.length?"\n"+i.updatedChannels.map((function(e){return"\turl="+e.url+" name="+e.name+" createdAt="+e.createdAt+" lastMessageUpdatedAt="+e.lastMessageUpdatedAt})).join("\n"):[]),Ce.sync("deleted",i.deletedChannelUrls),o=[],i.updatedChannels.forEach((function(e){o.push(new Promise((function(t,n){nt.channelContainer.getItem(e.url,(function(i,a){i?n(i):nt.channelContainer.upsert(e,(function(e,i){var s,o;e?n(e):(o=!a||!a.isEqual(i),s=(!a||a.hiddenState===r.sb.GroupChannel.HiddenState.UNHIDDEN)&&i.hiddenState!==r.sb.GroupChannel.HiddenState.UNHIDDEN,e=(!a||a.hiddenState!==r.sb.GroupChannel.HiddenState.UNHIDDEN)&&i.hiddenState===r.sb.GroupChannel.HiddenState.UNHIDDEN,o=o?"update":"noop",s?o="hide":e&&(o="unhide"),t({action:o,channel:i}))}))}))})))})),i.deletedChannelUrls.forEach((function(e){o.push(new Promise((function(t,n){nt.channelContainer.getItem(e,(function(e,r){e?n(e):r&&nt.channelContainer.remove(r,(function(e){e?n(e):t({action:"remove",channel:r})}))}))})))})),Promise.all(o).then((function(a){for(var s=[],o=[],u=[],l=[],c=0;c<a.length;c++)switch(a[c].action){case"update":s.push(a[c].channel);break;case"remove":o.push(a[c].channel);break;case"hide":u.push(a[c].channel);break;case"unhide":l.push(a[c].channel)}0<s.length&&nt.broadcast.upsert(s,null,{isChangeLogChannel:!0}),0<o.length&&nt.broadcast.remove(o),0<u.length&&nt.broadcast.hide(u,null,{isChangeLogChannel:!0}),0<l.length&&nt.broadcast.unhide(l,null,{isChangeLogChannel:!0}),ge.set(n,i.token).then((function(){i.hasMore?r.syncChangeLog(e,t):(r.isFetchingChangeLog=!1,t())})).catch((function(e){r.isFetchingChangeLog=!1,t(e)}))})).catch((function(e){return t(e)})))}]))})).catch((function(e){r.isFetchingChangeLog=!1,t(e)})))}},{key:"start",value:function(){nt.broadcast.resume()}},{key:"stop",value:function(){nt.broadcast.pause()}},{key:"clearCache",value:function(e){nt.channelSyncByFilter={},nt.changeLogSync=null,nt.channelContainer.clear((function(){nt.queryContainer.clear((function(){ge.getKeys().then((function(t){var n=[];t.forEach((function(e){e.startsWith(et)&&n.push(ge.remove(e))})),Promise.all(n).then((function(){return e()})).catch((function(t){Ce.error(t),e(t)}))})).catch((function(t){return e(t)}))}))}))}},{key:"reset",value:function(e){nt?(nt.broadcast.clear(),nt.clearCache(e)):e(null)}}],[{key:"getInstance",value:function(){return nt}},{key:"clear",value:function(){nt&&nt.sb&&(Ce.message("ChannelManager is cleared"),nt.channelSyncByFilter={},nt.changeLogSync=null,nt.broadcast.clearCollection(),nt.sb.removeChannelHandler(tt),nt=null)}}]),e}(),it=function(){function e(t){r(this,e),this.worker=t,this.state=e.State.PAUSED,this.isLoading=!1,this.shared=0,this.retry=0,this.retryLimit=3,this.subscribes={}}return a(e,[{key:"start",value:function(t,n){var r=this;!(1<arguments.length&&void 0!==n&&n)&&this.state===e.State.END||this.isLoading||(this.isLoading=!0,this.state=e.State.RUNNING,this.worker(t,(function(n,i){Ce.sync("background sync result: err=",n,"res=",i),r.isRunning&&(n?r.retry<r.retryLimit?(r.retry++,setTimeout((function(){return r.start(t)}),500)):r.state=e.State.PAUSED:(r.retry=0,r.flush(n,i),i.hasMore?setTimeout((function(){r.isRunning&&r.start(i.nextTs)}),500):r.state=e.State.END)),r.isLoading=!1})))}},{key:"pause",value:function(){this.isLoading=!1,this.state=e.State.PAUSED}},{key:"end",value:function(){this.isLoading=!1,this.state=e.State.END}},{key:"flush",value:function(e,t){var n,r=0<arguments.length&&void 0!==e?e:null,i=1<arguments.length?t:void 0;for(n in Ce.sync("background sync flush: ".concat(Object.keys(this.subscribes).length," subscribes")),this.subscribes)this.subscribes[n](r,i);this.subscribes={}}},{key:"subscribe",value:function(e,t){return!this.subscribes[e]&&(this.subscribes[e]=t,!0)}},{key:"unsubscribeAll",value:function(){this.subscribes={}}},{key:"isRunning",get:function(){return this.state===e.State.RUNNING}},{key:"isEnd",get:function(){return this.state===e.State.END}}],[{key:"State",get:function(){return{RUNNING:"running",PAUSED:"paused",END:"end"}}}]),e}(),at="channel-collection-handler",st=new K,ot=new K,ut=function(e){var t=rt.getInstance();if(t){var n=e.query,r=n.filterKey;return t.channelSyncByFilter[r]||(t.channelSyncByFilter[r]=new it((function(r,i){Ce.call("channel syncChannel()",n.filterKey,n.hasNext,n._token),n.hasNext?(n.limit=100,n.next((function(r,a){var s;t.sb.getErrorFirstCallback()&&(a=(s=[r,a])[0],r=s[1]),Ce.sync("channel",a,r&&0<r.length?"\n"+r.map((function(e){return"\turl="+e.url+" name="+e.name+" createdAt="+e.createdAt+" lastMessageUpdatedAt="+e.lastMessageUpdatedAt})).join("\n"):""),a?i(a):function(){for(var a=st.get(e),s=0,o=null,u=0;u<r.length;u++)t.channelContainer.insert(r[u],(function(e){o=o||e,++s===r.length&&(o?i(o):((e=a.findChannelEdges(r)).end&&(n.savepoint=e.end+""),t.queryContainer.upsert(n,(function(e){e?i(e):i(null,{count:r.length,nextTs:0,hasMore:n.hasNext})}))))}));0===r.length&&i(null,{count:0,nextTs:0,hasMore:!1})}()}))):i(null,{count:0,nextTs:0,hasMore:!1})}))),t.channelSyncByFilter[r]}return null},lt=function(e){var t,n=rt.getInstance();return n?(n.changeLogSync||(t=e.query,n.changeLogSync=new it((function(e,r){n.syncChangeLog(t,(function(e){r(e,{count:0,nextTs:0,hasMore:!1})}))}))),n.changeLogSync):null},ct=function(){function e(){r(this,e),this.collection=null,this.channels=[],this.mutex=new U,this.viewOffset=null}return a(e,[{key:"attachCollection",value:function(e){this.collection=e}},{key:"compareWithChannel",value:function(e,t){var n="lastMessageUpdatedAt";switch(this.collection.query.order){case"chronological":n="createdAt";break;case"channel_name_alphabetical":n="name"}return this.compareWithOffset(e,t[n])}},{key:"compareWithOffset",value:function(e,t){switch(this.collection.query.order){case"latest_last_message":return e.lastMessageUpdatedAt-t;case"chronological":return e.createdAt-t;case"channel_name_alphabetical":return t.localeCompare(e.name);default:return e.lastMessageUpdatedAt-t}}},{key:"isAbove",value:function(e,t){return 0<this.compareWithOffset(e,t)}},{key:"isBelow",value:function(e,t){return this.compareWithOffset(e,t)<0}},{key:"findChannelEdges",value:function(e){var t="lastMessageUpdatedAt";switch(this.collection.query.order){case"chronological":t="createdAt";break;case"channel_name_alphabetical":t="name"}var n,r={start:null,end:null};for(n in e)r.start&&!this.isAbove(e[n],r.start)||(r.start=e[n][t]),r.end&&!this.isBelow(e[n],r.end)||(r.end=e[n][t]);return r}},{key:"refreshViewOffset",value:function(){var e=this.findChannelEdges(this.channels);this.viewOffset=e.end}},{key:"addViewItems",value:function(e,t){var n=this,r=1<arguments.length&&void 0!==t?t:{},i=[],a=[],s=[],o=[],u=ot.get(this.collection);this.mutex.lock((function(t){for(var l in e){var c,d=e[l],f=Ie(d,n.channels),h=function(e,t,n){var r=2<arguments.length&&void 0!==n?n:[],i=null,a=function(e,t){return t<e};switch(t.order){case"latest_last_message":i="lastMessageUpdatedAt";break;case"chronological":i="createdAt";break;case"channel_name_alphabetical":i="name",a=function(e,t){return e.localeCompare(t)<0};break;default:i="lastMessageUpdatedAt"}var s=Ie(e,r);s<0&&(s=r.length);for(var o=0;o<r.length;o++){var u=r[o];if(e[i]===u[i]&&e.url===u.url){s=o;break}if(a(e[i],u[i])){s=o;break}}return s}(d,n.collection.query,n.channels),p=!1;r.isEventChannel&&(n.viewOffset?n.isBelow(d,n.viewOffset)&&(p=!0):(c=ut(n.collection),v=lt(n.collection),c.state!==it.State.RUNNING&&v.state!==it.State.RUNNING||!n.collection.query.hasNext||(p=!0)));var v=f<0?Ge.INSERT:Ge.UPDATE;switch(f<0?p||(h<n.channels.length?n.channels.splice(h,0,d):n.channels.push(d)):f!==h?h<n.channels.length?(v=Ge.MOVE,n.channels.splice(f,1),f<h?n.channels.splice(h-1,0,d):n.channels.splice(h,0,d)):(v=Ge.REMOVE,n.channels.splice(f,1)):n.channels[f]=d,v){case Ge.INSERT:p||i.push(d);break;case Ge.UPDATE:a.push(d);break;case Ge.MOVE:s.push(d);break;case Ge.REMOVE:o.push(d)}}if(n.refreshViewOffset(),0<i.length)for(var g in Ce.view("channel",Ge.INSERT,"\n"+i.map((function(e){return"\turl=".concat(e.url," name=").concat(e.name," createdAt=").concat(e.createdAt," lastMessageUpdatedAt=").concat(e.lastMessageUpdatedAt)})).join("\n")),u)u[g].onChannelEvent(Ge.INSERT,i);if(0<a.length)for(var m in Ce.view("channel",Ge.UPDATE,"\n"+a.map((function(e){return"\turl=".concat(e.url," name=").concat(e.name," createdAt=").concat(e.createdAt," lastMessageUpdatedAt=").concat(e.lastMessageUpdatedAt)})).join("\n")),u)u[m].onChannelEvent(Ge.UPDATE,a);if(0<s.length)for(var y in Ce.view("channel",Ge.MOVE,"\n"+s.map((function(e){return"\turl=".concat(e.url," name=").concat(e.name," createdAt=").concat(e.createdAt," lastMessageUpdatedAt=").concat(e.lastMessageUpdatedAt)})).join("\n")),u)u[y].onChannelEvent(Ge.MOVE,s);if(0<o.length)for(var _ in Ce.view("channel",Ge.REMOVE,"\n"+o.map((function(e){return"\turl=".concat(e.url," name=").concat(e.name," createdAt=").concat(e.createdAt," lastMessageUpdatedAt=").concat(e.lastMessageUpdatedAt)})).join("\n")),u)u[_].onChannelEvent(Ge.REMOVE,o);t()}))}},{key:"removeViewItems",value:function(e){var t=this,n=ot.get(this.collection);this.mutex.lock((function(r){var i,a=[];for(i in e){var s=e[i],o=t.channels.map((function(e){return e.url})).indexOf(s.url);0<=o&&(t.channels.splice(o,1),a.push(s))}if(0<a.length)for(var u in Ce.view("channel",Ge.REMOVE,"\n"+a.map((function(e){return"\turl=".concat(e.url," name=").concat(e.name," createdAt=").concat(e.createdAt," lastMessageUpdatedAt=").concat(e.lastMessageUpdatedAt)})).join("\n")),n)n[u].onChannelEvent(Ge.REMOVE,a);r()}))}},{key:"clearViewItem",value:function(){this.channels=[];var e=ot.get(this.collection);this.mutex.lock((function(t){var n,r=Ge.CLEAR;for(n in Ce.view("channel",r),e)e[n].onChannelEvent(r);t()}))}}]),e}(),dt=function(){function e(t){var n=this;r(this,e);var i=new ct,a=rt.getInstance();if(!a)return null;this.collectionId=Me(),this.sendBird=a.sb,this.type="MyGroupChannelListQuery",this.limit=t.limit,this.query=t,this.query.filterKey=a.queryContainer.createFilterKey(this.query),this._isLoading=!1,i.attachCollection(this),a.broadcast.addCollection(this,i),st.set(this,i),ot.set(this,{}),ut(this).shared++,lt(this).shared++,a.queryContainer.getItem(this.query.filterKey,(function(e,r){e?Ee.throw(e):(r&&(n.query._token=r._token,n.query.hasNext=r.hasNext,n.query.savepoint=r.savepoint,n.query.updatedAt=r.updatedAt),a.queryContainer.upsert(t,(function(e,t){e?Ee.throw(e):(n.query=t,n._resume(),Ce.message("channel collection ".concat(n.collectionId," is created.")))})))}))}return a(e,[{key:"_pause",value:function(){Ce.call("channel sync pause",this.collectionId);var e=ut(this),t=lt(this);e&&e.pause(),t&&t.pause()}},{key:"_resume",value:function(){Ce.call("channel sync resume",this.collectionId);var e=ut(this),t=lt(this);e&&e.start(),t&&t.start()}},{key:"fetch",value:function(e){var t=this;if(!this._isLoading)return this._isLoading=!0,Ue((function(e){Ce.call("fetch()");var n=st.get(t),r=t.sendBird,i=Mt.getInstance(),a=rt.getInstance(),s={ownerUserId:i.currentUserId};if(t.query.includeEmpty||(s.lastMessage={"!=":null}),t.query.nicknameContainsFilter&&(s.members={"/where":function(e){for(var n in e)if(0<=e[n].nickname.indexOf(t.query.nicknameContainsFilter))return!0;return!1}}),t.query.userIdsFilter&&Array.isArray(t.query.userIdsFilter)&&0<t.query.userIdsFilter.length&&(s.members={"/where":function(e){var n=e.map((function(e){return e.userId}));return t.query.userIdsFilterExactMatch?n.length===t.query.userIdsFilter.length&&t.query.userIdsFilter.every((function(e){return 0<=n.indexOf(e)})):"AND"===t.query.queryType?t.query.userIdsFilter.every((function(e){return 0<=n.indexOf(e)})):"OR"===t.query.queryType&&t.query.userIdsFilter.reduce((function(e,t){return e||0<=n.indexOf(t)}),!1)}}),t.query.channelNameContainsFilter&&(s.name={"/regex":new RegExp(t.query.channelNameContainsFilter)}),0<t.query.channelUrlsFilter.length&&(s.url={"/in":t.query.channelUrlsFilter}),t.query.memberStateFilter!==r.GroupChannel.MemberStateFilter.ALL)switch(t.query.memberStateFilter){case r.GroupChannel.MemberStateFilter.JOINED:s.myMemberState="joined";break;case r.GroupChannel.MemberStateFilter.INVITED:case r.GroupChannel.MemberStateFilter.INVITED_BY_FRIEND:case r.GroupChannel.MemberStateFilter.INVITED_BY_NON_FRIEND:s.myMemberState="invited"}if("string"==typeof t.query.customTypeFilter&&t.query.customTypeFilter&&(s.customType=t.query.customTypeFilter),Array.isArray(t.query.customTypesFilter)&&0<t.query.customTypesFilter.length&&(s.customType={"/in":t.query.customTypesFilter}),"string"==typeof t.query.customTypeStartsWithFilter&&t.query.customTypeStartsWithFilter&&(s.customType={"/regex":new RegExp("^".concat(t.query.customTypeStartsWithFilter))}),t.query.superChannelFilter!==r.GroupChannel.SuperChannelFilter.ALL)switch(t.query.superChannelFilter){case r.GroupChannel.SuperChannelFilter.SUPER:s.isSuper=!0;break;case r.GroupChannel.SuperChannelFilter.NONSUPER:s.isSuper=!1}if(t.query.publicChannelFilter!==r.GroupChannel.PublicChannelFilter.ALL)switch(t.query.publicChannelFilter){case r.GroupChannel.PublicChannelFilter.PUBLIC:s.isPublic=!0;break;case r.GroupChannel.PublicChannelFilter.PRIVATE:s.isPublic=!1}if(t.query.unreadChannelFilter!==r.GroupChannel.UnreadChannelFilter.ALL&&t.query.unreadChannelFilter===r.GroupChannel.UnreadChannelFilter.UNREAD_MESSAGE&&(s.unreadMessageCount={">":0}),"all"!=t.query.hiddenChannelFilter)switch(t.query.hiddenChannelFilter){case r.GroupChannel.HiddenChannelFilter.UNHIDDEN:s.hiddenState=r.GroupChannel.HiddenState.UNHIDDEN;break;case r.GroupChannel.HiddenChannelFilter.HIDDEN:s.hiddenState={"/in":[r.GroupChannel.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE,r.GroupChannel.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE]};break;case r.GroupChannel.HiddenChannelFilter.HIDDEN_ALLOW_AUTO_UNHIDE:s.hiddenState=r.GroupChannel.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE;break;case r.GroupChannel.HiddenChannelFilter.HIDDEN_PREVENT_AUTO_UNHIDE:s.hiddenState=r.GroupChannel.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE}var o=null,u=!0;switch(t.query.order){case"latest_last_message":!t.query.hasNext&&t.query.savepoint&&(s.lastMessageUpdatedAt={">=":parseInt(t.query.savepoint)}),o={ownerUserId:1,lastMessageUpdatedAt:-1};break;case"chronological":!t.query.hasNext&&t.query.savepoint&&(s.createdAt={">=":parseInt(t.query.savepoint)}),o={ownerUserId:1,createdAt:-1};break;case"channel_name_alphabetical":!t.query.hasNext&&t.query.savepoint&&(s.name={"<=":t.query.savepoint}),u=!(o={ownerUserId:1,name:1});break;default:!t.query.hasNext&&t.query.savepoint&&(s.lastMessageUpdatedAt={">=":parseInt(t.query.savepoint)}),o={ownerUserId:1,lastMessageUpdatedAt:-1}}function l(e,r){a.channelContainer.query(s,{offset:n.channels.length,limit:e,index:o,desc:u},(function(i,a){i?(t._isLoading=!1,r(i)):(t._isLoading=!1,a.sort((function(e,t){return 0<n.compareWithChannel(e,t)})),0<a.length&&n.addViewItems(a),a.length<e&&d(e-a.length),r(null,a))}))}var c=ut(t),d=function(e){c.state!==it.State.END&&(Ce.sync("subscribe channel",t.collectionId),c.subscribe(t.collectionId,(function(t){t?Ce.error(t):(Ce.sync("flush channel"),l(e,(function(e){e&&Ce.error(e)})))})))};l(t.limit,(function(t,n){Ce.cache("fetch channel",t,n.map((function(e){return e.url}))),e(t)})),c.state===it.State.PAUSED&&t._resume()}),e);Ce.error("fetch() is loading"),e(Ee.create(Ee.Type.ERROR_DUPLICATED_FETCH))}},{key:"remove",value:function(){rt.getInstance().broadcast.removeCollection(this);var e=ut(this),t=lt(this);e&&(e.shared--,0===e.shared&&e.pause()),t&&(t.shared--,0===t.shared&&t.pause())}},{key:"setCollectionHandler",value:function(e){var t=ot.get(this);e instanceof He&&(t[at]=e)}},{key:"removeCollectionHandler",value:function(){var e=ot.get(this);e[at]&&delete e[at]}},{key:"channels",get:function(){return st.get(this).channels}}],[{key:"CollectionHandler",get:function(){return He}},{key:"Action",get:function(){return Ge}}]),e}();function ft(){r(this,ft),this.messageCount={all:0}}"undefined"==typeof Promise&&(Promise=C);var ht=new K,pt=new K,vt=new K,gt=new K,mt=new K,yt="message-collection-handler",_t=function(){function e(){r(this,e),this.collection=null,this.messages=[],this.prevTempMessages=[],this.nextTempMessages=[],this.unsentMessages=[],ht.set(this,{}),this.mutex=new U,this.currentChunk=null,this.viewRange={start:0,end:0}}return a(e,[{key:"attachCollection",value:function(e){this.collection=e}},{key:"channelWasRemoved",value:function(e){var t,n=mt.get(this.collection);for(t in n)n[t].onChannelRemoved(e)}},{key:"channelWasUpdated",value:function(e){var t,n=mt.get(this.collection);for(t in n)n[t].onChannelUpdated(e)}},{key:"addViewItems",value:function(e,t){var n=this,r=1<arguments.length&&void 0!==t?t:{},i=mt.get(this.collection),a=ht.get(this),s=gt.get(this.collection),o=[],u=[],l=[],c=[],d=[],h=[],p=[],v=[],g=[];this.mutex.lock((function(t){for(var m in e){var y=e[m];if(y.messageId){var _=!0,b=!1;r.isEventMessage&&(C=s.state===it.State.END,w=!n.currentChunk||n.currentChunk.endAt<=n.viewRange.end,E=0===n.viewRange.end,b=!0,_=C&&w||!n.currentChunk||E);var C=n.collection.sendBird.currentUser?n.collection.channel.getReadReceipt(y):a[y.messageId]||0;if(a[y.messageId]||(a[y.messageId]=C),_){var E,k=Ae(y,n.messages),w=function(e,t){for(var n=1<arguments.length&&void 0!==t?t:[],r=n.length,i=0;i<n.length;i++)if(n[i].createdAt>=e.createdAt){r=i;break}return r}(y,n.messages);if(0<=k&&n.messages[k].isEqual(y)&&a[y.messageId]===C)continue;a[y.messageId]=C,n.viewRange.start=0<n.viewRange.start?Math.min(n.viewRange.start,y.createdAt):y.createdAt,n.viewRange.end=0<n.viewRange.end?Math.max(n.viewRange.end,y.createdAt):y.createdAt,k<0?(0<=(E=Ae(y,n.unsentMessages))&&(C=!(_=n.unsentMessages[E]).isUserMessage()||"pending"===_.sendingStatus,n.unsentMessages.splice(E,1),(C?h:g).push(_)),n.messages.splice(w,0,y),b&&n.nextTempMessages.push(y),o.push(y)):(n.messages[k]=y,u.push(y))}r.isEventMessage&&y.sender&&y.sender.userId!==Mt.getInstance().currentUserId&&c.push(y),k=[],(b=n.messages.length)>Mt.syncManagerOptions.messageCollectionCapacity&&(k="next"===r.direction?(S=b-Mt.syncManagerOptions.messageCollectionCapacity,n.messages.splice(0,S)):n.messages.splice(Mt.syncManagerOptions.messageCollectionCapacity),l.push.apply(l,f(k)))}else{b=!y.isUserMessage()||"pending"===y.sendingStatus;var S=Ae(y,n.unsentMessages);S<0?Ae(y,n.messages)<0&&((b?d:p).push(y),n.unsentMessages.push(y)):(k=n.unsentMessages[S]).isUserMessage()?"pending"===k.sendingStatus?b||(h.push(k),p.push(y),n.unsentMessages[S]=y):(v.push(y),n.unsentMessages[S]=y):n.unsentMessages[S]=y}}if(0<l.length)for(var I in Ce.view("message",Be.REMOVE,l.map((function(e){return e.reqId+" "+e.messageId+" "+e.createdAt}))),i)i[I].onSucceededMessageEvent(l,Be.REMOVE),i[I].onMessageEvent(Be.REMOVE,l);if(0<o.length)for(var A in Ce.view("message",Be.INSERT,o.map((function(e){return e.reqId+" "+e.messageId+" "+e.createdAt}))),i)i[A].onSucceededMessageEvent(o,Be.INSERT),i[A].onMessageEvent(Be.INSERT,o);if(0<u.length)for(var U in Ce.view("message",Be.UPDATE,u.map((function(e){return e.reqId+" "+e.messageId+" "+e.createdAt}))),i)i[U].onSucceededMessageEvent(u,Be.UPDATE),i[U].onMessageEvent(Be.UPDATE,u);if(0<h.length)for(var M in Ce.view("pending message",Be.REMOVE,h.map((function(e){return e.reqId+" "+e.messageId+" "+e.createdAt}))),i)i[M].onPendingMessageEvent(h,Be.REMOVE),i[M].onMessageEvent(Be.REMOVE,h);if(0<d.length)for(var O in Ce.view("pending message",Be.INSERT,d.map((function(e){return e.reqId+" "+e.messageId+" "+e.createdAt}))),i)i[O].onPendingMessageEvent(d,Be.INSERT),i[O].onMessageEvent(Be.INSERT,d);if(0<g.length){Ce.view("failed message",Be.REMOVE,g.map((function(e){return e.reqId+" "+e.messageId+" "+e.createdAt})));var T,R=qe.REMOVE_RESEND_SUCCEEDED;for(T in i)i[T].onFailedMessageEvent(g,Be.REMOVE,R)}if(0<v.length){Ce.view("failed message",Be.UPDATE,v.map((function(e){return e.reqId+" "+e.messageId+" "+e.createdAt})));var N,L=qe.UPDATE_RESEND_FAILED;for(N in i)i[N].onFailedMessageEvent(v,Be.UPDATE,L)}if(0<p.length){Ce.view("failed message",Be.INSERT,p.map((function(e){return e.reqId+" "+e.messageId+" "+e.createdAt})));var P,D=qe.NONE;for(P in i)i[P].onFailedMessageEvent(p,Be.INSERT,D)}if(0<c.length)for(var x=0;x<c.length;x++){var F,H=c[x];for(F in Ce.view("new message",H.reqId,H.messageId,H.createdAt),i)i[F].onNewMessage(H)}t()}))}},{key:"removeViewItems",value:function(e,t){var n=this,r=1<arguments.length&&void 0!==t?t:{isRequestId:!1};this.mutex.lock((function(t){var i=!!r.hasOwnProperty("isRequestId")&&r.isRequestId,a=mt.get(n.collection);if(i){for(var s=[],o=[],u=0;u<e.length;u++)for(var l=e[u],c=0;c<n.unsentMessages.length;c++)if(l===n.unsentMessages[c].reqId){var d=n.unsentMessages[c];if(d.isUserMessage())switch(d.sendingStatus){case"pending":s.push(d);break;case"failed":o.push(d)}else d.isFileMessage()&&s.push(d);n.unsentMessages.splice(c,1);break}if(0<s.length)for(var h in Ce.view("pending message",Be.REMOVE,s.map((function(e){return e.reqId}))),a)a[h].onPendingMessageEvent(s,Be.REMOVE),a[h].onMessageEvent(Be.REMOVE,s);if(0<o.length){Ce.view("failed message",Be.REMOVE,o.map((function(e){return e.reqId})));var p,v=r.hasOwnProperty("reason")?r.reason:qe.REMOVE_UNKNOWN;for(p in a)a[p].onFailedMessageEvent(o,Be.REMOVE,v)}}else{for(var g=ht.get(n),m=[],y=0;y<e.length;y++)for(var _=e[y],b=0;b<n.messages.length;b++)if(_===n.messages[b].messageId){"number"==typeof g[_]&&delete g[_];var C=n.messages.splice(b,1);m.push.apply(m,f(C));break}if(n.viewRange.start=0<n.messages.length?n.messages[0].createdAt:0,n.viewRange.end=0<n.messages.length?n.messages[n.messages.length-1].createdAt:0,0<m.length)for(var E in Ce.view("message",Be.REMOVE,m.map((function(e){return e.messageId}))),a)a[E].onSucceededMessageEvent(m,Be.REMOVE),a[E].onMessageEvent(Be.REMOVE,m)}t()}))}},{key:"clearUnsentMessages",value:function(){var e=this;this.mutex.lock((function(t){var n,r=e.unsentMessages,i=mt.get(e.collection);for(n in e.unsentMessages=[],Ce.view("message",Be.REMOVE,"unsent messages"),i){i[n].onPendingMessageEvent([],Be.CLEAR);var a=qe.NONE;i[n].onFailedMessageEvent([],Be.CLEAR,a),i[n].onMessageEvent(Be.REMOVE,r)}t()}))}},{key:"clearViewItem",value:function(){var e=this;this.mutex.lock((function(t){e.currentChunk=null,e.messages=[],ht.set(e,{}),e.viewRange.start=0,e.viewRange.end=0;var n,r=mt.get(e.collection);for(n in Ce.view("message",Be.CLEAR),r)r[n].onSucceededMessageEvent([],Be.CLEAR),r[n].onMessageEvent(Be.CLEAR);t()}))}},{key:"updateCurrentChunk",value:function(e){e?e.isSame(this.currentChunk)||(this.currentChunk=Pe.createFromJson(e)):this.currentChunk=e}}]),e}(),bt=function(){function t(n){var i=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:(new Date).getTime();r(this,t);var o=Je.getInstance();if(!o)return null;if(this.collectionId=Me(),this.sendBird=o.sb,this.channel=n,this.limit=50,this.filter=Pe.getDefaultFilter(),a&&"object"===e(a)&&0<Object.keys(a).length)for(var u in a)this.filter.hasOwnProperty(u)&&(this.filter[u]=a[u]);this.viewpoint=s,this._chunkTrimmed=!1,this._isLoading={prev:!1,next:!1},ze.getInstance().createQueue(this.channel.url);var l=new _t;function c(e,t,r){Ce.sync("message synchronize() begin",e,t);var a=null,s=0,u=[t];switch(e){case"prev":a="getPreviousMessagesByTimestamp",s=100,u.push(!0),u.push(100);break;case"next":a="getNextMessagesByTimestamp",s=100,u.push(!0),u.push(100);break;case"prevnext":a="getPreviousAndNextMessagesByTimestamp",s=100,u.push(50),u.push(50)}u.push(!1),u.push(i.filter.messageType||""),u.push(i.filter.customType||""),u.push(i.filter.senderUserIdsFilter||[]),u.push(i.filter.includeMetaArray||!0),n[a].apply(n,u.concat([function(n,a){var u;o.sb.getErrorFirstCallback()&&(a=(u=[n,a])[0],n=u[1]),a?(i._pause(),r(a)):(Ce.sync("message synchronize() end",e,t,n.map((function(e){return e.messageId}))),d.lock((function(t){var a,u=[],c={startAt:Number.MAX_SAFE_INTEGER,endAt:0},d=n.length>=s,p=[],g=v(n);try{for(g.s();!(a=g.n()).done;)!function(){var e=a.value;e.isVisible=!0;var t=v(i.unsentMessages);try{for(t.s();!(n=t.n()).done;){var n=n.value;if("pending"===n.sendingStatus&&n.reqId===e.reqId){p.push(e);break}}}catch(e){t.e(e)}finally{t.f()}u.push(new Promise((function(t,n){o.messageContainer.upsert(e,(function(e){return e?n(e):t()}))}))),c.startAt=Math.min(c.startAt,e.createdAt),c.endAt=Math.max(c.endAt,e.createdAt)}()}catch(e){g.e(e)}finally{g.f()}l.currentChunk&&l.currentChunk.isOverlap(c)||(l.currentChunk=new Pe(i.channel.url,i.filter),Ce.message("chunk is created",l.currentChunk.startAt,l.currentChunk.endAt)),l.currentChunk.extendWithChunk(c);var m=l.currentChunk;Ce.message("currentChunk is extended",m.startAt,m.endAt),o.chunkContainer.mergePreviousChunkOverlap(m,(function(a){a?(t(),r(a)):(Ce.message("currentChunk merged previous chunks",m.startAt,m.endAt),Promise.all(u).then((function(){o.resolveStoreLimitOverflow((function(){0<p.length&&l.addViewItems(p);var a={start:m.startAt,end:m.endAt};switch(e){case"prevnext":d||(a.start=0,a.end=Number.MAX_SAFE_INTEGER);break;case"prev":d||(a.start=0,h.isEnd&&(a.end=Number.MAX_SAFE_INTEGER));break;case"next":d||(a.end=Number.MAX_SAFE_INTEGER,f.isEnd&&(a.start=0))}o.messageContainer.resolvePendingMessagesAsFailed(i.channel.url,a.start,a.end,(function(i,a){i||0<a.length&&l.addViewItems(a),t(),r(null,{count:n.length,nextTs:"prev"===e?m.startAt:m.endAt,hasMore:d})}))}))})).catch((function(e){t(),r(e)})))}))})))}]))}l.attachCollection(this),pt.set(this,l),vt.set(this,null),gt.set(this,null),mt.set(this,{}),o.broadcast.addCollection(this,l);var d=new U,f=new it((function(e,t){return c("prev",e,t)}));f.shared++,vt.set(this,f);var h=new it((function(e,t){return c("next",e,t)}));h.shared++,gt.set(this,h),0<(s=this.sendBird.getLastConnectedAt())&&o.messageContainer.pullPendingResolveBottom(this.channel.url,s,(function(e){})),o.chunkContainer.getChunkByTimestamp(this.channel.url,this.filter,this.viewpoint,(function(e,t){e||(t&&(l.currentChunk=t),l.currentChunk?i._resume():c("prevnext",i.viewpoint,(function(e,t){e||setTimeout((function(){f.flush(e,t),h.flush(e,t),t.count<50?(f.end(),h.end()):i._resume()}),300)})),Ce.message("message collection ".concat(i.collectionId," is created.")))})),Object.defineProperty(this,"messageCount",{get:function(){try{return l.messages.length}catch(e){return 0}}})}return a(t,[{key:"_pause",value:function(){Ce.call("message sync pause",this.collectionId);var e=vt.get(this),t=gt.get(this);e&&e.pause(),t&&t.pause()}},{key:"_resume",value:function(e){var t=this;Ce.call("message sync resume",this.collectionId);var n=Je.getInstance(),r=vt.get(this),i=gt.get(this);r&&r.isRunning&&(r.pause(),r.unsubscribeAll()),i&&i.isRunning&&(i.pause(),i.unsubscribeAll()),n.syncChangeLog(this.channel,(function(){var n,a=pt.get(t);r&&(n=a.currentChunk?a.currentChunk.startAt:t.viewpoint,r.start(n)),i&&(a=a.currentChunk?a.currentChunk.endAt:t.viewpoint,i.start(a,!0),e&&i.subscribe(t.collectionId+"_autoresendqueue",e))}))}},{key:"fetch",value:function(e,t){return this.fetchSucceededMessages(e,t)}},{key:"fetchSucceededMessages",value:function(e,t){var n=this,r=Je.getInstance(),i=pt.get(this);return this._isLoading[e]?Ue((function(e){return e(Ee.create(Ee.Type.ERROR_DUPLICATED_FETCH))}),t):(this._isLoading[e]=!0,Ue((function(t){Ce.call("fetchSucceededMessages()",e);var a=null,s=n.viewpoint,o=n.limit,u=!1,l=s;if(n._chunkTrimmed&&"prev"===e)n._isLoading[e]=!0,n.channel.getPreviousMessagesByTimestamp(0<i.messages.length?i.messages[0].createdAt:n.viewpoint,!0,100,!1,n.filter.messageType||"",n.filter.customType||"",n.filter.senderUserIdsFilter||[],n.filter.includeMetaArray||!0,(function(r,a){var s;n.sendBird.getErrorFirstCallback()||(r=(s=[a,r])[0],a=s[1]),n._isLoading[e]=!1,r||0<a.length&&i.addViewItems(a,{direction:e}),t(r)}));else{var c=null,d=null;switch(e){case"prev":a=vt.get(n),0<i.viewRange.start&&(s=i.viewRange.start),i.currentChunk&&(l=Math.max(i.currentChunk.startAt,s)),c=i.prevTempMessages,d=r.messageContainer.loadPreviousSucceededMessages,u=!0;break;case"next":a=gt.get(n),0<i.viewRange.end&&(s=i.viewRange.end),i.currentChunk&&(l=Math.min(i.currentChunk.endAt,s)),c=i.nextTempMessages,d=r.messageContainer.loadNextSucceededMessages;break;default:return void t(Ee.create(Ee.Type.ERROR_INVALID_PARAMETER))}var h=function(t,s){Ce.message("waiting for synchronization...");var h=!1;d(n.channel.url,n.filter,t,{limit:o,desc:u},(function(t,r){t?(h=!0,n._isLoading[e]=!1,s(t)):(Ce.cache("temp message",e,r.map((function(e){return e.messageId}))),(0<r.length||a.state===it.State.END)&&(h=!0,c.push.apply(c,f(r)),i.addViewItems(r,{direction:e}),n._isLoading[e]=!1,s(null)))}));var p=l;Ce.sync("subscribe message",n.collectionId,e,t),a.subscribe(n.collectionId,(function(a){a?(Ce.error(a),h||(n._isLoading[e]=!1,s(a))):(Ce.sync("flush message",e,t),r.chunkContainer.getChunkByTimestamp(n.channel.url,n.filter,t,(function(t,r){var a;t?(Ce.error(t),h||(n._isLoading[e]=!1,s(t))):(r&&(i.currentChunk=r),i.currentChunk?(a=i.currentChunk,d(n.channel.url,n.filter,p,{limit:o,desc:u},(function(t,r){if(t)Ce.error(t),h||(n._isLoading[e]=!1,s(t));else{Ce.cache("flush message",e,p,r.map((function(e){return e.messageId})));var o,u,l,d=[],f=[];for(o in r)!a.containsMessage(r[o])||((u=i.messages.map((function(e){return e.messageId})).indexOf(r[o].messageId))<0||!i.messages[u].isEqual(r[o]))&&d.push(r[o]);for(l in c)i.messages.map((function(e){return e.messageId})).indexOf(c[l].messageId)<0&&f.push(c[l]);for(;0<c.length;)c.pop();0<f.length&&i.removeViewItems(f.map((function(e){return e.messageId}))),0<d.length&&i.addViewItems(d,{direction:e}),h||(n._isLoading[e]=!1,s(null))}}))):(Ce.error(t),h||(n._isLoading[e]=!1,s(t))))})))}))};r.chunkContainer.getChunkByTimestamp(n.channel.url,n.filter,s,(function(r,a){var l;r?(n._isLoading[e]=!1,t(r)):(a&&(i.currentChunk=a),i.currentChunk?(l=i.currentChunk,Ce.message("chunk is selected",l),d(n.channel.url,n.filter,s,{limit:o,desc:u},(function(r,a){if(r)n._isLoading[e]=!1,t(r);else{var u=[],d=[];Ce.cache("fetch message",e,s,a.map((function(e){return e.messageId})));var f,p,v=!1;for(f in a)l.containsMessage(a[f])&&(v=!0,((p=i.messages.map((function(e){return e.messageId})).indexOf(a[f].messageId))<0||!i.messages[p].isEqual(a[f]))&&u.push(a[f]));if(!v){for(var g in c)i.messages.map((function(e){return e.messageId})).indexOf(c[g].messageId)<0&&d.push(c[g]);for(;0<c.length;)c.pop()}0<u.length&&i.addViewItems(u,{direction:e}),0<d.length&&i.removeViewItems(d.map((function(e){return e.messageId}))),a.length<o?(o-=a.length,h(s,t)):(n._isLoading[e]=!1,t(null))}}))):h(s,t))})),a.state===it.State.PAUSED&&n._resume()}}),t))}},{key:"fetchFailedMessages",value:function(e){var t=this;return Ue((function(e){Ce.call("fetchFailedMessages()"),ze.getInstance().loadFailedMessages(t.channel.url,t.filter,(function(n,r){n||(Ce.cache("fetch failed message",r.map((function(e){return e.reqId}))),pt.get(t).addViewItems(r)),e(n)}))}),e)}},{key:"fetchPendingMessages",value:function(e){var t=this,n=Je.getInstance();return Ue((function(e){Ce.call("fetchPendingMessages()"),n.messageContainer.loadPendingMessages(t.channel.url,t.filter,{},(function(n,r){n||(Ce.cache("fetch pending message",r.map((function(e){return e.reqId}))),pt.get(t).addViewItems(r)),e(n)}))}),e)}},{key:"resetViewpointTimestamp",value:function(e){var t=0<arguments.length&&void 0!==e?e:(new Date).getTime();"number"==typeof t&&0<=t?(Ce.call("resetViewpointTimestamp()",t),(e=pt.get(this)).viewRange.start<=t&&t<=e.viewRange.end?e.currentChunk&&!e.currentChunk.contains(t)&&(e.currentChunk=null):(e.currentChunk=null,e.clearViewItem()),this.viewpoint=t,this._resume()):(Ce.error("resetViewpointTimestamp()","ts should be number type and greater than or equal to 0."),Ee.throw(Ee.create(Ee.Type.ERROR_INVALID_PARAMETER)))}},{key:"remove",value:function(){ze.getInstance().removeQueue(this.channel.url),Je.getInstance().broadcast.removeCollection(this),pt.get(this).currentChunk=null;var e=vt.get(this),t=gt.get(this);e&&(e.shared--,0===e.shared&&e.pause()),t&&(t.shared--,0===t.shared&&t.pause())}},{key:"handleSendMessageResponse",value:function(e,t){if(Ce.call("handleSendMessageResponse()",e,t),e){var n;if(t)switch(Mt.syncManagerOptions.messageResendPolicy){case Mt.Options.MessageResendPolicy.NONE:this.deleteMessage(t);break;case Mt.Options.MessageResendPolicy.MANUAL:case Mt.Options.MessageResendPolicy.AUTOMATIC:t.isUserMessage()&&800110!==e.code?this.appendMessage(t):(n={reason:qe.REMOVE_UNKNOWN},this.deleteMessage(t,n));break;default:this.deleteMessage(t)}else this.deleteMessage(t),Ce.error(e)}else{var r,i=pt.get(this),a={reason:qe.REMOVE_RESEND_SUCCEEDED};for(r in i.unsentMessages)if(i.unsentMessages[r].isIdentical(t)){this.deleteMessage(i.unsentMessages[r],a);break}this.appendMessage(t)}}},{key:"hasMessage",value:function(e){if(e)for(var t=pt.get(this),n=0;n<t.succeededMessages.length;n++)if(t.succeededMessages[n].isIdentical(e))return!0;return!1}},{key:"appendMessage",value:function(e){var t,n,r,i;e?(Ce.call("appendMessage()",e.messageId),i=Mt.getInstance(),t=Je.getInstance(),n=pt.get(this),e.messageId?e.sender&&e.sender.userId===i.currentUserId?(e.isVisible=!0,t.messageContainer.upsert(e,(function(e,n){e||t.broadcast.upsert([n])})),(r=rt.getInstance()).channelContainer.getItem(e.channelUrl,(function(t,n){t?Ee.throw(t):n&&(!n.lastMessage||n.lastMessage.createdAt<=e.createdAt)&&(n.lastMessage=e,r.channelContainer.upsert(n,(function(e,t){e?Ee.throw(e):r.broadcast.upsert([t])})))}))):Ce.warning("Cannot append message sent by other member."):(i=Mt.syncManagerOptions,"failed"===e.sendingStatus?i.messageResendPolicy!==Mt.Options.MessageResendPolicy.NONE?ze.getInstance().upsertMessages(this.channel.url,[e]):n.removeViewItems([e]):"pending"===e.sendingStatus&&(n.addViewItems([e]),i=parseInt(this.sendBird.getLastConnectedAt()/1e3),e.pendingResolveTop=n.currentChunk?Math.max(n.currentChunk.endAt,i):i,e.pendingResolveBottom=Number.MAX_SAFE_INTEGER,t.messageContainer.upsert(e,(function(e,t){}))))):(Ce.error("appendMessage()","Message is expected but ".concat(e," is given.")),Ee.throw(Ee.create(Ee.Type.ERROR_INVALID_PARAMETER)))}},{key:"updateMessage",value:function(e){var t,n,r,i;e?(Ce.call("updateMessage()",e.messageId),t=Mt.getInstance(),n=Je.getInstance(),r=pt.get(this),e.sender&&e.sender.userId===t.currentUserId&&(e.messageId?(e.isVisible=!0,n.messageContainer.upsert(e,(function(e,t){e||n.broadcast.update([t])})),(i=rt.getInstance()).channelContainer.getItem(e.channelUrl,(function(t,n){t?Ee.throw(t):n&&n.lastMessage&&n.lastMessage.messageId===e.messageId&&(n.lastMessage=e,i.channelContainer.upsert(n,(function(e,t){e?Ee.throw(e):i.broadcast.update([t])})))}))):r.addViewItems([e]))):(Ce.error("updateMessage()","Message is expected but ".concat(e," is given.")),Ee.throw(Ee.create(Ee.Type.ERROR_INVALID_PARAMETER)))}},{key:"deleteMessage",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};e?(Ce.call("deleteMessage()",e.messageId),t=Mt.getInstance(),e.sender&&e.sender.userId===t.currentUserId&&(e.messageId||this.deleteMessageByRequestID(e.reqId,n))):(Ce.error("deleteMessage()","Message is expected but ".concat(e," is given.")),Ee.throw(Ee.create(Ee.Type.ERROR_INVALID_PARAMETER)))}},{key:"deleteMessageByRequestID",value:function(e,t){var n,r=1<arguments.length&&void 0!==t?t:{},i=pt.get(this),a=v(i.unsentMessages);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(s.reqId===e){switch(s.sendingStatus){case"pending":i.removeViewItems([s.reqId],!0);break;case"failed":ze.getInstance().removeMessages(this.channel.url,[s],r)}break}}}catch(e){a.e(e)}finally{a.f()}}},{key:"setCollectionHandler",value:function(e){var t=mt.get(this);e instanceof je&&(t[yt]=e)}},{key:"removeCollectionHandler",value:function(){var e=mt.get(this);e[yt]&&delete e[yt]}},{key:"messages",get:function(){return this.succeededMessages}},{key:"succeededMessages",get:function(){return pt.get(this).messages}},{key:"unsentMessages",get:function(){return pt.get(this).unsentMessages}}],[{key:"create",value:function(e,n,r,i){"function"==typeof r&&(i=r,r=(new Date).getTime());var a=rt.getInstance();return Ue((function(i){a.channelContainer.getItem(e,(function(a,s){var o;a?i(a):s?i(null,new t(s,n,r)):(o=rt.getInstance()).sb.GroupChannel.getChannel(e,(function(e,a){var s;o.sb.getErrorFirstCallback()&&(a=(s=[e,a])[0],e=s[1]),a?i(a):i(null,new t(e,n,r))}))}))}),i)}},{key:"CollectionHandler",get:function(){return je}},{key:"Action",get:function(){return Be}},{key:"FailedMessageEventActionReason",get:function(){return qe}}]),t}();"undefined"==typeof Promise&&(Promise=C);var Ct=null,Et=null,kt=null,wt=ie,St=null,It=null,At=null,Ut=null,Mt=function(){function e(){return r(this,e),Et=Et||this}return a(e,[{key:"resumeSync",value:function(){Ce.call("resumeSync()"),It&&It.start(),At&&At.start()}},{key:"pauseSync",value:function(){Ce.call("pauseSync()"),It&&It.stop(),At&&At.stop()}},{key:"clearCache",value:function(e){return Ce.call("clearCache()"),Ue((function(e){var t=[];It&&t.push(new Promise((function(e,t){It.reset((function(n){return n?t(n):e()}))}))),At&&t.push(new Promise((function(e,t){At.reset((function(n){return n?t(n):e()}))}))),0<t.length?Promise.all(t).then((function(){return e(null)})).catch((function(t){return e(t)})):e(null)}),e)}},{key:"reset",value:function(e){var t=this;return Ce.call("reset()"),Ue((function(e){t.clearCache((function(t){t||(rt.clear((function(){It=null})),Je.clear((function(){At=null}))),e(t)}))}),e)}},{key:"currentUserId",get:function(){return Ct&&Ct.currentUser?Ct.currentUser.userId:kt}}],[{key:"setup",value:function(t,n,r){Ce.call("init()"),Ut=new e.Options;var i=arguments.length<=0?void 0:t;return(t=arguments.length<=1?void 0:n)&&"function"!=typeof t&&(t instanceof e.Options?(Ut=t,t=arguments.length<=2?void 0:r):Ce.error("Type of the second parameter is not valid: ",arguments.length<=1?void 0:n)),Ce.prefix="[SyncManager]",Ue((function(t){ge.init(),Ct?(Et=new e,ge.get("lastUserId").then((function(n){function r(t){ge.set("lastUserId",i).then((function(){var r=new ft;It=new rt({sendBird:Ct,db:St,cacheManager:r}),At=new Je({sendBird:Ct,db:St,cacheManager:r}),e.ChannelCollection=dt,e.MessageCollection=bt,n&&n!==i&&(Ce.warning("Different user ID: clear cache"),Et.clearCache((function(){}))),ze.getInstance().removeExpiredMessages((function(){Ce.message("Expired messages are removed.")})),At.messageContainer.query({},{limit:Number.MAX_SAFE_INTEGER,desc:!0,includeInvisible:!0},(function(e,n){if(e)t(e);else{var i=v(n);try{for(i.s();!(a=i.n()).done;){var a=a.value;r.messageCount[a.channelUrl]||(r.messageCount[a.channelUrl]=0),r.messageCount[a.channelUrl]++,r.messageCount.all++}}catch(e){i.e(e)}finally{i.f()}t(null)}}))})).catch((function(e){t(e)}))}kt=i,rt.clear(),It=null,Je.clear(),At=null,St?(Ce.cache("Database is open"),r(t)):W().then((function(e){e&&(Ce.info("IndexedDB is not supported in private browsing mode in Edge/Firefox. Using in-memory database."),wt=he);var n=new wt("sbsync.db",5);n.schema("GroupChannel",{key:"url",index:[{ownerUserId:wt.Query.Order.ASC,lastMessageUpdatedAt:wt.Query.Order.DESC},{ownerUserId:wt.Query.Order.ASC,createdAt:wt.Query.Order.DESC},{ownerUserId:wt.Query.Order.ASC,name:wt.Query.Order.ASC}]}).schema("GroupChannelListQuery",{key:"filterKey",index:[{ownerUserId:wt.Query.Order.ASC,updatedAt:wt.Query.Order.DESC}]}).schema("MessageChunk",{key:"chunkId",index:[{ownerUserId:wt.Query.Order.ASC,channelUrl:wt.Query.Order.ASC,filterKey:wt.Query.Order.ASC,endAt:wt.Query.Order.DESC}]}).schema("Message",{key:"messageId",index:[{ownerUserId:wt.Query.Order.ASC,channelUrl:wt.Query.Order.ASC,createdAt:wt.Query.Order.DESC},{ownerUserId:wt.Query.Order.ASC,createdAt:wt.Query.Order.ASC}]}).build().then((function(){Ce.cache("Database is open"),St=n,r(t)})).catch((function(e){return t(e)}))}))})).catch((function(e){t(e)}))):t(Ee.create(Ee.Type.ERROR_SETUP_MISSING))}),t)}},{key:"useReactNative",value:function(e){ge.useReactNative(e),q.Storage=e,wt=q}},{key:"getInstance",value:function(){return Et}},{key:"sendBird",get:function(){return Ct},set:function(e){(Ct=e)&&Ct.addExtension("sb_syncmanager","1.1.22")}},{key:"LocalDB",get:function(){return wt}},{key:"_messageContainer",get:function(){return Je.getInstance().messageContainer}},{key:"_chunkContainer",get:function(){return Je.getInstance().chunkContainer}},{key:"syncManagerOptions",get:function(){return Ut||new e.Options}},{key:"LogLevel",get:function(){return ye}},{key:"loggerLevel",set:function(e){Ce.level=e},get:function(){return Ce.level}}]),e}();return Mt.Options=function e(){r(this,e);var t=1e4;Object.defineProperty(this,"messageStoreCapacity",{get:function(){return t},set:function(e){"number"==typeof e&&0<e&&(t=e)}});var n=2e3;Object.defineProperty(this,"messageStoreEjectionPriotizedLimit",{get:function(){return n},set:function(e){"number"==typeof e&&0<e&&(n=e)}});var i=500;Object.defineProperty(this,"messageStoreEjectionSize",{get:function(){return i},set:function(e){"number"==typeof e&&0<e&&e<=1e3&&(i=e)}});var a=1e3;Object.defineProperty(this,"messageCollectionCapacity",{get:function(){return a},set:function(e){"number"==typeof e&&e>=(Ce.isValidLevel(Ce.level)?200:0)&&e<=Number.MAX_SAFE_INTEGER&&(a=e)}});var s=Mt.Options.MessageResendPolicy.NONE;Object.defineProperty(this,"messageResendPolicy",{get:function(){return s},set:function(e){-1<Object.keys(Mt.Options.MessageResendPolicy).map((function(e){return Mt.Options.MessageResendPolicy[e]})).indexOf(e)&&(s=e)}});var o=10;Object.defineProperty(this,"automaticMessageResendRetryCount",{get:function(){return o},set:function(e){"number"==typeof e&&0<e&&e<=50&&(o=e)}});var u=20;Object.defineProperty(this,"maxFailedMessageCountPerChannel",{get:function(){return u},set:function(e){"number"==typeof e&&0<e&&e<=Number.MAX_SAFE_INTEGER&&(u=e)}});var l=7;Object.defineProperty(this,"failedMessageRetentionDays",{get:function(){return l},set:function(e){"number"==typeof e&&(e>(Ce.isValidLevel(Ce.level)?0:-2)&&e<=Number.MAX_SAFE_INTEGER||e===Mt.Options.INFINITY)&&(l=e)}})},Mt.Options.MessageResendPolicy={NONE:"none",MANUAL:"manual",AUTOMATIC:"automatic"},Mt.Options.INFINITY=Number.MAX_SAFE_INTEGER,Mt}()}).call(this,n(26).setImmediate,n(11))},function(e,t,n){"use strict";var r=n(2);t.a={getCheckoutCart:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r.a.get("/checkout-cart?buy-now-cart=".concat(e?1:0,"&ref=").concat(t))},getCheckoutCartById:function(e){return r.a.get("/checkout-cart?ref=".concat(e))},updateRowQuantity:function(e,t,n){return r.a.post("/checkout-cart/update-quantity",{row_id:e,quantity:t,checkout_id:n})},updateShippingOption:function(e,t,n){return r.a.post("/checkout-cart/update-shipping-option",{store_id:e,shipping_option_id:t,checkout_id:n})},updateShippingInsurance:function(e,t,n){return r.a.post("/checkout-cart/update-shipping-insurance",{store_id:e,enable_insurance:t,checkout_id:n})},updateAddress:function(e,t){return r.a.post("/checkout-cart/update-address",{user_address_id:e,checkout_id:t})},saveOrder:function(e){return r.a.post("/checkout-cart/save-order",{cart:e})},payment:function(){return r.a.get("/checkout-cart/payment")},createPayment:function(e,t){return r.a.post("/checkout-cart/payment?ref=".concat(t),{payment_method:e})},getPaymentFeeentFee:function(e,t){return r.a.post("/checkout-cart/payment-fee?ref=".concat(t),{payment_method:e})}}},function(e,t,n){"use strict";var r=n(2);t.a={getList:function(){return r.a.get("/user-addresses")},getOne:function(e){return r.a.get("/user-addresses/".concat(e))},create:function(e){return r.a.post("/user-addresses/create",e)},update:function(e,t){return r.a.post("/user-addresses/".concat(e,"/update"),t)},delete:function(e){return r.a.delete("/user-addresses/".concat(e))},setAsDefault:function(e){return r.a.put("/user-addresses/".concat(e,"/set-default"))},getListProvince:function(){return r.a.get("/api/provinces")},getListCity:function(e){return r.a.get("/api/provinces/".concat(e,"/cities"))},getListDistrict:function(e){return r.a.get("/api/cities/".concat(e,"/districts"))},getUser:function(){return r.a.get("/api/user")}}},function(e,t,n){"use strict";var r=n(18),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function o(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return o(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";var r=n(27),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function o(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isPlainObject:u,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return o(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):a(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";var r=n(14),i=n.n(r),a=n(3),s=n.n(a),o=new i.a({appId:"DBF8BFAF-A834-4045-AB56-D270B894C68C"});s.a.sendBird=o;var u=null,l={getSendBirdIntance:function(){return o},getSendBirdSyncManager:function(){return s.a},init:function(e){var t=new s.a.Options;return t.messageCollectionCapacity=2e3,t.messageResendPolicy="automatic",t.automaticMessageResendRetryCount=5,t.maxFailedMessageCountPerChannel=50,t.failedMessageRetentionDays=7,s.a.setup(e,t)},connect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s.a.sendBird=o;var n=new s.a.Options;return n.messageCollectionCapacity=2e3,n.messageResendPolicy="automatic",n.automaticMessageResendRetryCount=5,n.maxFailedMessageCountPerChannel=50,n.failedMessageRetentionDays=7,new Promise((function(r,i){s.a.setup(e,n,(function(){var n=o.GroupChannel.createMyGroupChannelListQuery();n.limit=200,n.includeEmpty=!0,n.order="latest_last_message";var i=new s.a.ChannelCollection(n),a=new s.a.ChannelCollection.CollectionHandler;a.onChannelEvent=function(){"function"==typeof t&&t(i.channels)},i.setCollectionHandler(a),o.connect(e,(function(e,t){i.fetch().then((function(){})),r(e)}))}))}))},registerGroupEvent:function(e,t){var n=o.GroupChannel.createMyGroupChannelListQuery();n.limit=50,n.includeEmpty=!0,n.order="latest_last_message";var r=new s.a.ChannelCollection(n),i=new s.a.ChannelCollection.CollectionHandler;return i[e]=t,r.setCollectionHandler(i),r.fetch(),r},connectUser:function(e){return o.connect(e)},createGroup:function(e){var t=new o.GroupChannelParams;return t.isPublic=!1,t.isEphemeral=!1,t.isDistinct=!0,t.addUserId(e),new Promise((function(e,n){o.GroupChannel.createChannel(t,(function(t,r){return r?n(r):e(t)}))}))},getGroup:function(e){return new Promise((function(t,n){o.GroupChannel.getChannel(e,(function(e,r){r&&n(r),t(e)}))}))},getListGroup:function(){return new Promise((function(e,t){var n=o.GroupChannel.createMyGroupChannelListQuery();n.includeEmpty=!0,n.order="latest_last_message",n.limit=15,n.hasNext&&n.next((function(n,r){return r?t(r):e(n)}))}))},registerMessageEvent:function(e,t){var n=new s.a.MessageCollection(e),r=new s.a.MessageCollection.CollectionHandler;r.onSucceededMessageEvent=t,n.setCollectionHandler(r),n.fetchSucceededMessage("prev"),n.fetchSucceededMessage("next")},sendTextMessage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,i){var a=new o.UserMessageParams;a.message=t,a.data=JSON.stringify(n),e.sendUserMessage(a,(function(e,t){t&&i(t),r(e)}))}))},sendFileMessage:function(e,t){return new Promise((function(n,r){var i=new o.FileMessageParams;i.file=t,i.thumbnailSizes=[{maxWidth:100,maxHeight:100},{maxWidth:200,maxHeight:200}],e.sendFileMessage(i,(function(e,t){if(t)return r(t);n(e)}))}))},registerSyncMessage:function(e,t){(u=new s.a.MessageCollection(e)).limit=5;var n=new s.a.MessageCollection.CollectionHandler;n.onSucceededMessageEvent=function(e,n){t(u.messages)},u.setCollectionHandler(n),u.fetchSucceededMessages("prev")},getCurrenUser:function(){return o.currentUser}};t.a=l},function(e,t,n){e.exports=n(60)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,l=[],c=!1,d=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=o(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||o(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),a=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(a).concat([i]).join("\n")}var s;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var r,i,a={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),o=function(e,t){return t?t.querySelector(e):document.querySelector(e)},u=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=o.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),l=null,c=0,d=[],f=n(90);function h(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=a[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(_(r.parts[s],t))}else{var o=[];for(s=0;s<r.parts.length;s++)o.push(_(r.parts[s],t));a[r.id]={id:r.id,refs:1,parts:o}}}}function p(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],s=t.base?a[0]+t.base:a[0],o={css:a[1],media:a[2],sourceMap:a[3]};r[s]?r[s].parts.push(o):n.push(r[s]={id:s,parts:[o]})}return n}function v(e,t){var n=u(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=u(e.insertAt.before,n);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return y(t,e.attrs),v(e,t),t}function y(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function _(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}if(t.singleton){var s=c++;n=l||(l=m(t)),r=E.bind(null,n,s,!1),i=E.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),v(e,t),t}(t),r=w.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),r=k.bind(null,n),i=function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return h(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var s=n[i];(o=a[s.id]).refs--,r.push(o)}e&&h(p(e,t),t);for(i=0;i<r.length;i++){var o;if(0===(o=r[i]).refs){for(var u=0;u<o.parts.length;u++)o.parts[u]();delete a[o.id]}}}};var b,C=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function E(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=C(t,i);else{var a=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function k(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function w(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=f(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(s),o&&URL.revokeObjectURL(o)}},function(e,t,n){(function(t,r){e.exports=function(e,n,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){var r,i,a;r=e,a=n[i=t],i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e,t,n){return(v=p()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function g(e){var t="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return v(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){var t=p();return function(){var n,r,i,a=f(e);if(t){var s=f(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return r=this,!(i=n)||"object"!=typeof i&&"function"!=typeof i?m(r):i}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var w=function(){function e(){s(this,e)}return u(e,null,[{key:"OS_VERSION",get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"}},{key:"SDK_VERSION",get:function(){return"3.0.142"}},{key:"SDK_MAJOR_VERSION",get:function(){return e.SDK_VERSION.split(".")[0]}},{key:"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",get:function(){return 100}},{key:"INTERNAL_CALL",get:function(){return"ic"}}]),e}(),S={},I=new WeakMap,A=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s(this,e),I.set(this,"object"===a(t)&&t?t:{})}return u(e,[{key:"get",value:function(e){return I.get(this)[e]}},{key:"set",value:function(e,t){I.get(this)[e]=t}},{key:"remove",value:function(e){var t=I.get(this);t.hasOwnProperty(e)&&delete t[e]}},{key:"container",get:function(){return I.get(this)}}],[{key:"create",value:function(t,n){return S[t]=new e(n),S[t]}},{key:"get",value:function(e){return e=e||Dt.getInstance()._iid,S[e]}}]),e}(),U=function(){d(t,g(Error));var e=y(t);function t(n,r){var i;return s(this,t),(i=e.call(this,r)).name="SendBirdException",i.code=r||0,i.message=n,i}return u(t,[{key:"isSessionKeyExpiredError",get:function(){return 400309===this.code}},{key:"isSessionTokenExpiredError",get:function(){return 400302===this.code}}],[{key:"INVALID_INITIALIZATION",get:function(){return 800100}},{key:"CONNECTION_REQUIRED",get:function(){return 800101}},{key:"CONNECTION_CANCELED",get:function(){return 800102}},{key:"INVALID_PARAMETER",get:function(){return 800110}},{key:"NETWORK_ERROR",get:function(){return 800120}},{key:"NETWORK_ROUTING_ERROR",get:function(){return 800121}},{key:"MALFORMED_DATA",get:function(){return 800130}},{key:"MALFORMED_ERROR_DATA",get:function(){return 800140}},{key:"WRONG_CHANNEL_TYPE",get:function(){return 800150}},{key:"MARK_AS_READ_RATE_LIMIT_EXCEEDED",get:function(){return 800160}},{key:"QUERY_IN_PROGRESS",get:function(){return 800170}},{key:"ACK_TIMEOUT",get:function(){return 800180}},{key:"LOGIN_TIMEOUT",get:function(){return 800190}},{key:"WEBSOCKET_CONNECTION_CLOSED",get:function(){return 800200}},{key:"WEBSOCKET_CONNECTION_FAILED",get:function(){return 800210}},{key:"REQUEST_FAILED",get:function(){return 800220}},{key:"FILE_UPLOAD_CANCEL_FAILED",get:function(){return 800230}},{key:"REQUEST_CANCELED",get:function(){return 800240}},{key:"REQUEST_DUPLICATED",get:function(){return 800250}},{key:"FILE_SIZE_LIMIT_EXCEEDED",get:function(){return 800260}},{key:"SESSION_TOKEN_REQUEST_FAILED",get:function(){return 800500}},{key:"SESSION_TOKEN_REFRESHED",get:function(){return 800501}},{key:"SESSION_TOKEN_REFRESH_FAILED",get:function(){return 800502}}]),t}(),M=function(){function e(){s(this,e),this.sessionToken=null,this.sessionKey=null,this.eKey=null}return u(e,[{key:"hasSession",value:function(){return!!this.sessionKey}}]),e}(),O={},T=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};for(var r in s(this,e),this._iid=t,n){var i=n[r];"function"==typeof i&&(this[r]=this.getClonedClass(i))}O[t]=this}return u(e,[{key:"getClonedClass",value:function(e){var t=this._iid;return function(){d(r,e);var n=y(r);function r(){return s(this,r),n.apply(this,arguments)}return u(r,[{key:"_iid",get:function(){return t}}],[{key:"_iid",get:function(){return t}},{key:"_name",get:function(){return e.name}}]),r}()}}],[{key:"get",value:function(e){return e?O[e]:{}}}]),e}(),R={verbose:"VERBOSE",info:"INFO",debug:"DEBUG",warn:"WARN",error:"ERROR"},N=function(){function e(){s(this,e)}return u(e,[{key:"getLogLevelText",value:function(e){return R[e]}}]),e}(),L=function(){d(t,N);var e=y(t);function t(){return s(this,t),e.apply(this,arguments)}return u(t,[{key:"log",value:function(e){for(var t,n,r,i,a,s=arguments.length,o=new Array(1<s?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];switch(o.unshift("[".concat(this.getLogLevelText(e).padEnd(8),"]")),e){case"verbose":(t=console).log.apply(t,o);break;case"debug":(n=console).log.apply(n,o);break;case"info":(r=console).info.apply(r,o);break;case"warn":(i=console).warn.apply(i,o);break;case"error":(a=console).error.apply(a,o)}}},{key:"groupStart",value:function(){var e;(e=console).group.apply(e,arguments)}},{key:"groupEnd",value:function(){var e;(e=console).groupEnd.apply(e,arguments)}}]),t}(),P={DEBUG:"debug",PRODUCTION:"production"},D=P.PRODUCTION,x={VERBOSE:"verbose",DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"},F=["error","warn","info","debug","verbose"],H=x.WARN,j=F.indexOf(H),G=[new L],B=function(){function e(){s(this,e)}return u(e,null,[{key:"isDisplayableLogLevel",value:function(e){var t=F.indexOf(e);return 0<=t&&t<=j}},{key:"log",value:function(t){for(var n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.isDisplayableLogLevel(t)&&G.forEach((function(e){return e.log.apply(e,[t].concat(r))}))}},{key:"verbose",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[x.VERBOSE].concat(n))}},{key:"debug",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[x.DEBUG].concat(n))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[x.INFO].concat(n))}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[x.WARN].concat(n))}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[x.ERROR].concat(n))}},{key:"group",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=[];Array.isArray(n[n.length-1])&&(i=n.pop()),i.some((function(t){return e.isDisplayableLogLevel(t.level)}))&&G.filter((function(e){return e instanceof L})).forEach((function(e){e.groupStart.apply(e,n),i.forEach((function(t){return e.log.apply(e,[t.level].concat(C(t.messages)))})),e.groupEnd()}))}},{key:"Mode",get:function(){return P}},{key:"mode",get:function(){return D},set:function(t){-1<Object.keys(e.Mode).map((function(t){return e.Mode[t]})).indexOf(t)&&(D=t)}},{key:"supportedLogLevels",get:function(){return x}},{key:"logLevel",get:function(){return F[j]},set:function(e){F.includes(e)||(e=H),j=F.indexOf(e)}},{key:"defaultLogLevel",get:function(){return H}}]),e}(),q=function(){function e(){s(this,e),this._queue=[],this.locked=!1}return u(e,[{key:"lock",value:function(e){var t=this;this.locked?this._queue.push(e):(this.locked=!0,e((function(){return t.unlock()})))}},{key:"unlock",value:function(){if(this.locked=!1,0<this._queue.length){var e=this._queue.shift();this.lock(e)}}}]),e}(),Y=function(){function e(t){s(this,e),this.sb=t,this.mutex=new q,this.pingTimer=null,this.pingTimeoutTimer=null}return u(e,[{key:"ping",value:function(){var e=this,t=T.get(this.sb._iid).Command.bPing(),n=A.get(this.sb._iid).container,r=n.wsAdapter,i=n.pongTimeout;r.client.send(t),B.debug("`PING`"),this.pingTimeoutTimer=setTimeout((function(){B.debug("`PING` timeout."),e.stop(),r.client.handler&&r.client.handler.onError()}),i)}},{key:"pong",value:function(){this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}},{key:"refreshTimer",value:function(){var e=this,t=A.get(this.sb._iid).container.pingInterval;this.mutex.lock((function(n){e.stop(),e.pingTimer=setInterval((function(){e.ping()}),t),n()}))}},{key:"start",value:function(){this.refreshTimer(),this.ping()}},{key:"stop",value:function(){this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null),this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}}]),e}(),V=[U.CONNECTION_REQUIRED,U.NETWORK_ERROR,U.ACK_TIMEOUT,U.WEBSOCKET_CONNECTION_CLOSED,U.WEBSOCKET_CONNECTION_FAILED,U.FILE_UPLOAD_CANCEL_FAILED,U.REQUEST_CANCELED,500901,500910,900200],$=function(){function e(){s(this,e)}return u(e,null,[{key:"deepEqual",value:function(e,t){if(e===t)return!0;var n=c({},e),r=c({},t);return!(n.messageId&&r.messageId&&n.messageId!==r.messageId||n.reqId&&r.reqId&&n.reqId!==r.reqId||(n.hasOwnProperty("messageId")&&delete n.messageId,n.hasOwnProperty("reqId")&&delete n.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(n)!==JSON.stringify(r)))}},{key:"isResendableError",value:function(e){return 0<e&&0<=V.indexOf(e)}},{key:"isFile",value:function(e){var n="object"===a(e)&&null!==e&&"string"==typeof e.name&&"string"==typeof e.uri&&"string"==typeof e.type;if(!n)if("undefined"==typeof window&&void 0!==t){if(void 0!==r)return e instanceof r}else{if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return n}}]),e}(),z=function(){function e(t){if(s(this,e),this.fields={},t)for(var n in t)this.fields[n]={value:t[n]},$.isFile(t[n])&&(this.fields[n].filename=t[n].name);this.options={},this.internal=!1,this.upload={reqId:null,deleteRequest:null,progressHandler:null}}return u(e,[{key:"add",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:null;this.fields[e]={value:t,filename:r}}},{key:"remove",value:function(e){this.fields.hasOwnProperty(e)&&delete this.fields[e]}},{key:"yield",value:function(){var e=!1;for(var t in this.fields)if($.isFile(this.fields[t].value)){e=!0;break}if(e){var r=new n;for(var i in this.fields){var a=this.fields[i];if($.isFile(a.value)){var s=a.value;s.filename||s.name?r.append(i,a.value,s.filename||s.name):s.data?r.append(i,a.value,a.data.name):r.append(i,a.value,"unnamed")}else r.append(i,a.value)}return r}var o={};for(var u in this.fields)o[u]=this.fields[u].value;return o}}]),e}(),W=888e3,Q=function(){function t(e){s(this,t),this.sb=e,this.cls=T.get(this.sb._iid)}return u(t,[{key:"checkRouting",value:function(e){if(this.sb.customApiHost&&this.sb.customWsHost)"function"==typeof e&&e(null,{apiHost:this.sb.customApiHost,wsHost:this.sb.customWsHost});else{var t=this.sb.getApplicationId();e(null,{apiHost:"https://api-".concat(t,".sendbird.com"),wsHost:"wss://ws-".concat(t,".sendbird.com")})}}},{key:"_buildUrl",value:function(e){var t=e.apiHost,n=e.url,r=e.params;return r&&r.internal?"".concat(t,"/v").concat(w.SDK_MAJOR_VERSION,"/sdk").concat(n):"".concat(t,"/v").concat(w.SDK_MAJOR_VERSION).concat(n)}},{key:"_createHeader",value:function(e,t){var r=0<arguments.length&&void 0!==e?e:{},i=1<arguments.length&&void 0!==t?t:{},a=i.noSessionKey,s=void 0!==a&&a,o=i.accessToken,u=void 0===o?null:o,l=r instanceof n&&"function"==typeof r.getHeaders?r.getHeaders():{},c=A.get(this.sb._iid).container,d=c.appId,f=c.auth,h=c.extensions,p=c.getUserAgentWithExtensions;return l.SendBird="JS,".concat(w.OS_VERSION,",").concat(w.SDK_VERSION,",").concat(d),l["SB-User-Agent"]=encodeURIComponent(p(h)),!s&&f.sessionKey&&(l["Session-Key"]=f.sessionKey),u&&(l["App-Id"]=d,l["Access-Token"]=u),l["Request-Sent-Timestamp"]=(new Date).getTime().toString(),l}},{key:"_createQuery",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};try{var r=[];for(var i in n){var s=n[i];if(null!=s){var o="";o="object"===a(s)?Array.isArray(s)?s.map((function(e){return encodeURIComponent(e)})).join(","):encodeURIComponent(JSON.stringify(s)):encodeURIComponent(s),r.push("".concat(i,"=").concat(o))}}return 0<r.length?"".concat(e,"?").concat(r.join("&")):e}catch(t){return B.debug("createWithEncodedGetParams is failed. - ",t),e}}},{key:"_validateStatus",value:function(e){return 200<=e&&e<400}},{key:"_handleError",value:function(e){var t=e.request,n=e.response;if(t){if(t.isAbort||t.aborted)return new U("Request has been canceled.",U.REQUEST_CANCELED);if(n){var r=n.data,i=r?r.message:"Request failed.",a=r?r.code:U.REQUEST_FAILED;return new U(i,a)}return new U("Request failed.",U.REQUEST_FAILED)}return new U("There was a network error.",U.NETWORK_ERROR)}},{key:"get",value:function(t,n,r){var i=this;this.checkRouting((function(a,s){if(a)r(new U("Request failed.",U.REQUEST_FAILED),null);else{var o=i._buildUrl({apiHost:s.apiHost,url:t,params:n}),u=n?n.yield():{},l=i._createHeader(u,n?n.options:{});B.group("GET request",[{level:B.supportedLogLevels.DEBUG,messages:["url:",t]},{level:B.supportedLogLevels.DEBUG,messages:["data:",u]}]);var c=[];e.get(i._createQuery(o,u),{headers:l,validateStatus:i._validateStatus}).then((function(e){try{var t=e.data;c.push({level:B.supportedLogLevels.DEBUG,messages:["data:",t]}),r(null,t)}catch(e){throw{code:W,rawError:e}}})).catch((function(e){if(e.code===W)throw e.rawError;var t=i._handleError(e);c.push({level:B.supportedLogLevels.ERROR,messages:["error:",t]}),t.isSessionKeyExpiredError?A.get(i.sb._iid).container.sessionManager.refresh((function(e){return r(e,null)})):r(t,null)})).finally((function(){return B.group("GET response",c)}))}}))}},{key:"dummyCall",value:function(t){var n=this;this.checkRouting((function(r,i){if(r)t(new U("Request failed.",U.REQUEST_FAILED),null);else{var a=i.apiHost,s=n._createHeader();B.group("GET request",[{level:B.supportedLogLevels.DEBUG,messages:["url:",""]}]);var o=[];e.get(n._createQuery(a),{headers:s,validateStatus:n._validateStatus}).then((function(e){try{var n=e.data;o.push({level:B.supportedLogLevels.DEBUG,messages:["data:",n]}),t(null,n)}catch(e){throw{code:W,rawError:e}}})).catch((function(e){if(e.code===W)throw e.rawError;var r=n._handleError(e);o.push({level:B.supportedLogLevels.ERROR,messages:["error:",r]}),t(r,null)})).finally((function(){return B.group("GET response",o)}))}}))}},{key:"post",value:function(t,r,i){var a=this;this.checkRouting((function(s,o){if(s)i(new U("Request failed.",U.REQUEST_FAILED),null);else{var u=a._buildUrl({apiHost:o.apiHost,url:t,params:r}),l=r?r.yield():{},c=a._createHeader(l,r?r.options:{}),d=[{level:B.supportedLogLevels.DEBUG,messages:["url:",t]},{level:B.supportedLogLevels.DEBUG,messages:["data:",l]}],f=null;if(l instanceof n){var h=e.CancelToken.source();f=h.token;var p=a.cls.FileMessageQueue,v=r.upload.reqId;v&&(d.push({level:B.supportedLogLevels.DEBUG,messages:["request id:",v]}),p.uploadRequest[v]=h)}B.group("POST request",d),d=[],e.post(u,"function"==typeof l.getBuffer?l.getBuffer():l,{headers:c,validateStatus:a._validateStatus,cancelToken:f,onUploadProgress:function(e){r.upload.progressHandler&&r.upload.progressHandler(e,r.upload.reqId)}}).then((function(e){try{var t=e.data;"function"==typeof r.upload.deleteRequest&&r.upload.deleteRequest(),d.push({level:B.supportedLogLevels.DEBUG,messages:["data:",t]}),i(null,t)}catch(e){throw{code:W,rawError:e}}})).catch((function(e){if(e.code===W)throw e.rawError;"function"==typeof r.upload.deleteRequest&&r.upload.deleteRequest();var t=a._handleError(e);d.push({level:B.supportedLogLevels.ERROR,messages:["error:",t]}),t.isSessionKeyExpiredError?A.get(a.sb._iid).container.sessionManager.refresh((function(e){return i(e,null)})):i(t,null)})).finally((function(){return B.group("POST response",d)}))}}))}},{key:"put",value:function(t,n,r){var i=this;this.checkRouting((function(a,s){if(a)r(new U("Request failed.",U.REQUEST_FAILED),null);else{var o=i._buildUrl({apiHost:s.apiHost,url:t,params:n}),u=n?n.yield():{},l=i._createHeader(u,n?n.options:{});B.group("PUT request",[{level:B.supportedLogLevels.DEBUG,messages:["url:",t]},{level:B.supportedLogLevels.DEBUG,messages:["data:",u]}]);var c=[];e.put(o,u,{headers:l,validateStatus:i._validateStatus}).then((function(e){try{var t=e.data;c.push({level:B.supportedLogLevels.DEBUG,messages:["data:",t]}),r(null,t)}catch(e){throw{code:W,rawError:e}}})).catch((function(e){if(e.code===W)throw e.rawError;var t=i._handleError(e);c.push({level:B.supportedLogLevels.ERROR,messages:["error:",t]}),t.isSessionKeyExpiredError?A.get(i.sb._iid).container.sessionManager.refresh((function(e){return r(e,null)})):r(t,null)})).finally((function(){return B.group("PUT response",c)}))}}))}},{key:"delete",value:function(t,n,r){var i=this;this.checkRouting((function(a,s){if(a)r(new U("Request failed.",U.REQUEST_FAILED),null);else{var o=i._buildUrl({apiHost:s.apiHost,url:t,params:n}),u=n?n.yield():{},l=i._createHeader(u,n?n.options:{});B.group("DELETE request",[{level:B.supportedLogLevels.DEBUG,messages:["url:",t]},{level:B.supportedLogLevels.DEBUG,messages:["data:",u]}]);var c=[];e.delete(i._createQuery(o,u),{headers:l,validateStatus:i._validateStatus}).then((function(e){try{var t=e.data;c.push({level:B.supportedLogLevels.DEBUG,messages:["data:",t]}),r(null,t)}catch(e){throw{code:W,rawError:e}}})).catch((function(e){if(e.code===W)throw e.rawError;var t=i._handleError(e);c.push({level:B.supportedLogLevels.ERROR,messages:["error:",t]}),t.isSessionKeyExpiredError?A.get(i.sb._iid).container.sessionManager.refresh((function(e){return r(e,null)})):r(t,null)})).finally((function(){return B.group("DELETE response",c)}))}}))}},{key:"refreshSessionKey",value:function(e,n){var r=this,i=e.accessToken;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_SESSION_KEY.replace("%s",encodeURIComponent(a.userId)),o=new z;o.options.noSessionKey=!0,o.options.accessToken=i,r.post(s,o,n)}}))}},{key:"updateCurrentUserInfo",value:function(e,n){var r=this,i=e.nickname,a=e.profileUrl,s=e.profileImage,o=e.preferredLanguages;this.sb.ConnectionManager.ready((function(e,u){if(e)n(e,null);else{var l=t.Path.USERS_USERID.replace("%s",encodeURIComponent(u.userId)),c=new z;i&&c.add("nickname",i),a&&c.add("profile_url",a),s&&c.add("profile_file",s,s.name),o&&c.add("preferred_languages",o),r.put(l,c,n)}}))}},{key:"getMyGroupChannelChangeLogs",value:function(e,n){var r=this,i=e.ts,a=e.token,s=e.customTypes,o=e.includeEmpty,u=e.includeFrozen;this.sb.ConnectionManager.ready((function(e,l){if(e)n(e,null);else{var c=t.Path.USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS.replace("%s",encodeURIComponent(l.userId)),d=new z({show_read_receipt:!0,show_delivery_receipt:!0,show_member:!0});a&&d.add("token",a),i&&d.add("change_ts",i),s&&0<s.length&&d.add("custom_types",s),"boolean"==typeof o&&d.add("show_empty",o),"boolean"==typeof u&&d.add("show_frozen",u),r.get(c,d,n)}}))}},{key:"getChannelInvitationPreference",value:function(e,n){var r=this;this.sb.ConnectionManager.ready((function(e,i){if(e)n(e,null);else{var a=t.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(i.userId));r.get(a,null,n)}}))}},{key:"getGroupChannelCount",value:function(e,n){var r=this,i=e.memberStateFilter;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=r.cls.GroupChannel,o=t.Path.USERS_USERID_GROUP_CHANNEL_COUNT.replace("%s",encodeURIComponent(a.userId)),u="";switch(i){case s.MemberStateFilter.JOINED:u="joined";break;case s.MemberStateFilter.INVITED:u="invited";break;case s.MemberStateFilter.INVITED_BY_FRIEND:u="invited_by_friend";break;case s.MemberStateFilter.INVITED_BY_NON_FRIEND:u="invited_by_non_friend";break;default:u="all"}var l=new z({state:u});r.get(o,l,n)}}))}},{key:"getUnreadItemCount",value:function(e,n){var r=this,i=e.keys;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_UNREAD_ITEM_COUNT.replace("%s",encodeURIComponent(a.userId)),o=new z({item_keys:i});r.get(s,o,n)}}))}},{key:"getTotalUnreadMessageCount",value:function(e,n){var r=this,i=e.customTypesFilter,a=e.superChannelFilter;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=t.Path.USERS_USERID_UNREAD_MESSAGE_COUNT.replace("%s",encodeURIComponent(s.userId)),u=new z({super_mode:a});null!==i&&0<i.length&&u.add("custom_types",i),r.get(o,u,n)}}))}},{key:"getTotalUnreadChannelCount",value:function(e,n){var r=this;this.sb.ConnectionManager.ready((function(e,i){if(e)n(e,null);else{var a=t.Path.USERS_USERID_UNREAD_CHANNEL_COUNT.replace("%s",encodeURIComponent(i.userId));r.get(a,null,n)}}))}},{key:"searchMessages",value:function(e,n){var r=this,i=e.keyword,a=e.limit,s=e.reverse,o=e.exactMatch,u=e.channelUrl,l=e.channelCustomType,c=e.messageTimestampFrom,d=e.messageTimestampTo,f=e.order,h=e.nextToken;this.sb.ConnectionManager.ready((function(e,p){if(e)n(e,null);else{var v=t.Path.SEARCH_MESSAGE,g=new z({limit:a,reverse:s,query:i,custom_type:l});c&&g.add("message_ts_from",c),d&&g.add("message_ts_to",d),u&&g.add("channel_url",u),f&&g.add("sort_field",f),"boolean"==typeof o&&g.add("exact_match",o),null!==h&&0<h.length&&g.add("after",h),r.get(v,g,n)}}))}},{key:"markAsReadAll",value:function(e,n){var r=this,i=e.channelUrls;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_MARKASREADALL.replace("%s",encodeURIComponent(a.userId)),o=new z;i&&o.add("channel_urls",i),r.put(s,o,n)}}))}},{key:"markAsDelivered",value:function(e,n){var r=this,i=e.channelUrl,a=e.userId;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED.replace("%s",encodeURIComponent(i)),u=new z;a&&u.add("user_id",a),r.put(o,u,n)}}))}},{key:"setChannelInvitationPreference",value:function(e,n){var r=this,i=e.isAutoAccept;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(a.userId)),o=new z({auto_accept:i});r.put(s,o,n)}}))}},{key:"blockUser",value:function(e,n){var r=this,i=e.blockedUserId;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(a.userId)),o=new z({target_id:i});r.post(s,o,n)}}))}},{key:"unblockUser",value:function(e,n){var r=this,i=e.unblockedUserId;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_BLOCK_TARGETID.replace("%s",encodeURIComponent(a.userId)).replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"getPushTriggerOption",value:function(e,n){var r=this;this.sb.ConnectionManager.ready((function(e,i){if(e)n(e,null);else{var a=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId));r.get(a,null,n)}}))}},{key:"setPushTriggerOption",value:function(e,n){var r=this,i=e.pushTriggerOption;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId)),o=new z({push_trigger_option:i});r.put(s,o,n)}}))}},{key:"getPushTokens",value:function(e,n){var r=this,i=e.ts,a=e.token,s=e.type;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=t.Path.USERS_USERID_PUSH_DEVICE_TOKENS.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(s)),l=new z;a&&l.add("token",a),i&&l.add("created_ts",i),r.get(u,l,n)}}))}},{key:"getPushTemplate",value:function(e,n){var r=this;this.sb.ConnectionManager.ready((function(e,i){if(e)n(e,null);else{var a=t.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(i.userId));r.get(a,null,n)}}))}},{key:"setPushTemplate",value:function(e,n){var r=this,i=e.templateName;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(a.userId)),o=new z({name:i});r.put(s,o,n)}}))}},{key:"getDoNotDisturb",value:function(e,n){var r=this;this.sb.ConnectionManager.ready((function(e,i){if(e)n(e,null);else{var a=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId));r.get(a,null,n)}}))}},{key:"setDoNotDisturb",value:function(e,n){var r=this,i=e.doNotDisturbOn,a=e.startHour,s=e.startMin,o=e.endHour,u=e.endMin,l=e.timezone;this.sb.ConnectionManager.ready((function(e,c){if(e)n(e,null);else{var d=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(c.userId)),f=new z({do_not_disturb:i,start_hour:a,start_min:s,end_hour:o,end_min:u,timezone:l});r.put(d,f,n)}}))}},{key:"getSnoozePeriod",value:function(e,n){var r=this;this.sb.ConnectionManager.ready((function(e,i){if(e)n(e,null);else{var a=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId));r.get(a,null,n)}}))}},{key:"setSnoozePeriod",value:function(e,n){var r=this,i=e.snoozeOn,a=e.startTs,s=e.endTs;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(o.userId)),l=new z({snooze_enabled:i,snooze_start_ts:a,snooze_end_ts:s});r.put(u,l,n)}}))}},{key:"registerGCMPushToken",value:function(e,n){var r=this,i=e.token;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(a.userId)),o=new z({gcm_reg_token:i,always_push:!0});r.post(s,o,n)}}))}},{key:"unregisterGCMPushToken",value:function(e,n){var r=this,i=e.token;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSH_GCM_TOKEN.replace("%s",encodeURIComponent(a.userId)).replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"unregisterAllGCMPushTokens",value:function(e,n){var r=this;this.sb.ConnectionManager.ready((function(e,i){if(e)n(e,null);else{var a=t.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(i.userId));r.delete(a,null,n)}}))}},{key:"registerAPNSPushToken",value:function(e,n){var r=this,i=e.token;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(a.userId)),o=new z({apns_device_token:i,always_push:!0});r.post(s,o,n)}}))}},{key:"unregisterAPNSPushToken",value:function(e,n){var r=this,i=e.token;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSH_APNS_TOKEN.replace("%s",encodeURIComponent(a.userId)).replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"unregisterAllAPNSPushTokens",value:function(e,n){var r=this;this.sb.ConnectionManager.ready((function(e,i){if(e)n(e,null);else{var a=t.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(i.userId));r.delete(a,null,n)}}))}},{key:"unregisterAllPushTokens",value:function(e,n){var r=this;this.sb.ConnectionManager.ready((function(e,i){if(e)n(e,null);else{var a=t.Path.USERS_USERID_PUSH.replace("%s",encodeURIComponent(i.userId));r.delete(a,null,n)}}))}},{key:"loadFriendList",value:function(e,n){var r=this,i=e.token,a=e.limit;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=t.Path.FRIENDS.replace("%s",encodeURIComponent(s.userId)),u=new z({limit:a,token:i});r.get(o,u,n)}}))}},{key:"getFriendChangeLogsByToken",value:function(e,n){var r=this,i=e.token;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.FRIENDS_CHANGE_LOGS.replace("%s",encodeURIComponent(a.userId)),o=new z;i&&o.add("token",i),r.get(s,o,n)}}))}},{key:"addFriends",value:function(e,n){var r=this,i=e.userIds;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.FRIENDS.replace("%s",encodeURIComponent(a.userId)),o=new z({user_ids:i});r.post(s,o,n)}}))}},{key:"deleteFriends",value:function(e,n){var r=this,i=e.userIds;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.FRIENDS.replace("%s",encodeURIComponent(a.userId)),o=new z({user_ids:i});r.delete(s,o,n)}}))}},{key:"uploadFriendDiscoveries",value:function(e,n){var r=this,i=e.discoveries;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(a.userId)),o=[];i.forEach((function(e){o.push({friend_discovery_key:e.friendDiscoveryKey,friend_name:"string"==typeof e.friendName||e.friendName?e.friendName:null})}));var u=new z({friend_discoveries:o});r.put(s,u,n)}}))}},{key:"deleteFriendDiscoveries",value:function(e,n){var r=this,i=e.discoveryKeys;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(a.userId)),o=new z({friend_discovery_keys:i});r.delete(s,o,n)}}))}},{key:"loadUserList",value:function(e,n){var r=this,i=e.token,a=e.limit,s=e.userIdsFilter,o=e.metaDataKeyFilter,u=e.metaDataValuesFilter,l=e.nicknameStartsWithFilter;this.sb.ConnectionManager.ready((function(e,c){if(e)n(e,null);else{var d=t.Path.USERS,f=new z({token:i,limit:a});s&&0<s.length&&f.add("user_ids",s),o&&u&&0<u.length&&(f.add("metadatakey",o),f.add("metadatavalues_in",u)),l&&f.add("nickname_startswith",l),r.get(d,f,n)}}))}},{key:"loadBlockedUserList",value:function(e,n){var r=this,i=e.token,a=e.limit,s=e.userIdsFilter;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=t.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(o.userId)),l=new z({token:i,limit:a});s&&0<s.length&&l.add("user_ids",s),r.get(u,l,n)}}))}},{key:"createUserMetaData",value:function(e,n){var r=this,i=e.metaData;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(a.userId)),o=new z({metadata:i});r.post(s,o,n)}}))}},{key:"updateUserMetaData",value:function(e,n){var r=this,i=e.metaData,a=e.upsert;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=t.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(s.userId)),u=new z({metadata:i,upsert:a});r.put(o,u,n)}}))}},{key:"deleteUserMetaData",value:function(e,n){var r=this,i=e.metaDataKey;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_METADATA_KEY.replace("%s",encodeURIComponent(a.userId)).replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"deleteAllUserMetaData",value:function(e,n){var r=this;this.sb.ConnectionManager.ready((function(e,i){if(e)n(e,null);else{var a=t.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(i.userId));r.delete(a,null,n)}}))}},{key:"getMessageChangeLogs",value:function(e,n){var r=this,i=e.channelUrl,a=e.ts,s=e.timestamp,o=e.token,u=e.isOpenChannel,l=e.includeMetaArray,c=e.includeReactions,d=e.includeReplies,f=e.includeParentMessageText,h=e.includeThreadInfo;this.sb.ConnectionManager.ready((function(e,p){if(e)n(e,null);else{var v=u?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(i)),g=new z;o&&g.add("token",o),a&&g.add("change_ts",a),s&&g.add("change_ts",s),"boolean"==typeof l&&g.add("with_sorted_meta_array",l),"boolean"==typeof c&&g.add("include_reactions",c),"boolean"==typeof d&&g.add("include_replies",d),"boolean"==typeof f&&g.add("include_parent_text_message",f),"boolean"==typeof h&&g.add("include_thread_info",h),r.get(v,g,n)}}))}},{key:"getMyMutedInfo",value:function(e,n){var r=this,i=e.channelUrl,a=e.userId,s=e.isGroupChannel;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=s?t.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a)):t.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a));r.get(u,null,n)}}))}},{key:"loadBannedUserList",value:function(e,n){var r=this,i=e.token,a=e.limit,s=e.channelUrl,o=e.isOpenChannel;this.sb.ConnectionManager.ready((function(e,u){if(e)n(e,null);else{var l=o?t.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)):t.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)),c=new z({token:i,limit:a});r.get(l,c,n)}}))}},{key:"loadMutedUserList",value:function(e,n){var r=this,i=e.token,a=e.limit,s=e.channelUrl,o=e.isOpenChannel;this.sb.ConnectionManager.ready((function(e,u){if(e)n(e,null);else{var l=o?t.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)):t.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)),c=new z({token:i,limit:a});r.get(l,c,n)}}))}},{key:"getMessageList",value:function(e,n){var r=this,i=e.channel,a=e.token,s=e.tokenType,o=e.isInclusive,u=e.prevResultSize,l=void 0===u?0:u,c=e.nextResultSize,d=void 0===c?0:c,f=e.shouldReverse,h=e.messageType,p=e.customType,v=e.customTypes,g=e.senderUserIds,m=e.includeMetaArray,y=e.includeReactions,_=e.includeThreadInfo,b=e.includeReplies,C=e.includeParentMessageText,E=e.showSubchannelMessagesOnly,k=e.rootMessageId,w=e.parentMessageId;this.sb.ConnectionManager.ready((function(e,u){if(e)n(e,null);else{var c=i.isOpenChannel()?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",i.url):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",i.url),S=new z({is_sdk:String(!0),prev_limit:String(l),next_limit:String(d),include:String(o),reverse:String(f)});"timestamp"===s?S.add("message_ts",a):"messageId"===s&&S.add("message_id",String(a)),h&&S.add("message_type",String(h)),p&&S.add("custom_type",String(p)),Array.isArray(v)&&0<v.length&&S.add("custom_types",v),Array.isArray(g)&&0<g.length&&S.add("sender_ids",g),"boolean"==typeof m&&S.add("with_sorted_meta_array",m),"boolean"==typeof y&&S.add("include_reactions",y),"boolean"==typeof _&&S.add("include_thread_info",_),"boolean"==typeof b&&S.add("include_replies",b),"boolean"==typeof C&&S.add("include_parent_message_text",C),"boolean"==typeof E&&i.isOpenChannel()&&S.add("show_subchannel_messages_only",E),k&&S.add("root_message_id",k),w&&S.add("parent_message_id",w),r.get(c,S,n)}}))}},{key:"translateUserMessage",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.messageId,o=e.translationTargetLanguages;this.sb.ConnectionManager.ready((function(e,u){if(e)n(e,null);else{var l=a?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(i)).replace("%s",s):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(i)).replace("%s",s),c=new z({target_langs:o});r.post(l,c,n)}}))}},{key:"getMessage",value:function(e,n){var r=this,i=e.channel,a=e.messageId;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=i.isOpenChannel()?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i.url)).replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i.url)).replace("%s",encodeURIComponent(a));r.get(o,null,n)}}))}},{key:"deleteMessage",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.messageId;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=a?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s));r.delete(u,null,n)}}))}},{key:"muteUser",value:function(e,n){var r=this,i=e.channelUrl,a=e.userId,s=e.description,o=e.seconds,u=e.isGroupChannel;this.sb.ConnectionManager.ready((function(e,l){if(e)n(e,null);else{var c=u?t.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(i)):t.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(i)),d=new z({user_id:a});o&&(0<o||-1!==o)&&d.add("seconds",o),s&&d.add("description",s),r.post(c,d,n)}}))}},{key:"unmuteUser",value:function(e,n){var r=this,i=e.channelUrl,a=e.userId,s=e.isGroupChannel;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=s?t.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a)):t.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a));r.delete(u,null,n)}}))}},{key:"banUser",value:function(e,n){var r=this,i=e.channelUrl,a=e.userId,s=e.description,o=e.seconds,u=e.isGroupChannel;this.sb.ConnectionManager.ready((function(e,l){if(e)n(e,null);else{var c=u?t.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(i)):t.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(i)),d=new z({user_id:a});s&&d.add("description",s),d.add("seconds",String(o)),r.post(c,d,n)}}))}},{key:"unbanUser",value:function(e,n){var r=this,i=e.channelUrl,a=e.userId,s=e.isGroupChannel;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=s?t.Path.GROUPCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a)):t.Path.OPENCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(a));r.delete(u,null,n)}}))}},{key:"getMetaCounters",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.keys;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=a?t.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)),l=new z({keys:s});r.get(u,l,n)}}))}},{key:"createMetaCounters",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.metaCounter;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=a?t.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)),l=new z({metacounter:s});r.post(u,l,n)}}))}},{key:"updateMetaCounters",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.metaCounter,o=e.upsert,u=e.mode;this.sb.ConnectionManager.ready((function(e,l){if(e)n(e,null);else{var c=a?t.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)),d=new z({metacounter:s,upsert:o,mode:u});r.put(c,d,n)}}))}},{key:"deleteMetaCounter",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.key;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=a?t.Path.OPENCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(i)).replace("%s",s):t.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(i)).replace("%s",s);r.delete(u,null,n)}}))}},{key:"deleteAllMetaCounters",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=a?t.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i));r.delete(o,null,n)}}))}},{key:"getMetaData",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.keys;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=a?t.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)),l=new z({keys:s});r.get(u,l,n)}}))}},{key:"createMetaData",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.metaData;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=a?t.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)),l=new z({metadata:s});r.post(u,l,n)}}))}},{key:"updateMetaData",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.metaData,o=e.upsert;this.sb.ConnectionManager.ready((function(e,u){if(e)n(e,null);else{var l=a?t.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)),c=new z({metadata:s,upsert:o});r.put(l,c,n)}}))}},{key:"deleteMetaData",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.key;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=a?t.Path.OPENCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(i)).replace("%s",s):t.Path.GROUPCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(i)).replace("%s",s);r.delete(u,null,n)}}))}},{key:"deleteAllMetaData",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=a?t.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i));r.delete(o,null,n)}}))}},{key:"loadOperatorList",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.token,o=e.limit;this.sb.ConnectionManager.ready((function(e,u){if(e)n(e,null);else{var l=a?t.Path.OPENCHANNELS_OPERATORS.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_OPERATORS.replace("%s",encodeURIComponent(i)),c=new z({token:s,limit:o});r.get(l,c,n)}}))}},{key:"getOpenChannel",value:function(e,n){var r=this,i=e.channelUrl,a=e.internalCall;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=t.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i)),u=new z({});u.internal=a===w.INTERNAL_CALL,r.get(o,u,n)}}))}},{key:"loadOpenChannelList",value:function(e,n){var r=this,i=e.token,a=e.limit,s=e.nameKeyword,o=e.urlKeyword,u=e.customTypes,l=e.includeFrozen;this.sb.ConnectionManager.ready((function(e,c){if(e)n(e,null);else{var d=t.Path.OPENCHANNELS,f=new z({token:i,limit:a});s&&f.add("name_contains",s),o&&f.add("url_contains",o),u&&0<u.length&&f.add("custom_types",u),"boolean"==typeof l&&f.add("show_frozen",l),r.get(d,f,n)}}))}},{key:"loadParticipantList",value:function(e,n){var r=this,i=e.token,a=e.limit,s=e.channelUrl;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=t.Path.OPENCHANNELS_CHANNELURL_PARTICIPANTS.replace("%s",encodeURIComponent(s)),l=new z({token:i,limit:a});r.get(u,l,n)}}))}},{key:"createOpenChannel",value:function(e,n){var r=this,i=e.name,a=e.coverUrlOrImage,s=e.data,o=e.operatorUserIds,u=e.customType;this.sb.ConnectionManager.ready((function(e,l){if(e)n(e,null);else{var c=t.Path.OPENCHANNELS,d=new z;"string"==typeof a&&d.add("cover_url",a),$.isFile(a)&&d.add("cover_file",a),null!==i&&"string"==typeof i&&d.add("name",i),s&&d.add("data",s),o&&(Array.isArray(o)?d.add("operators",o):d.add("operators",[o])),u&&d.add("custom_type",u),r.post(c,d,n)}}))}},{key:"updateOpenChannel",value:function(e,n){var r=this,i=e.channelUrl,a=e.name,s=e.coverUrlOrImage,o=e.data,u=e.operatorUserIds,l=e.customType;this.sb.ConnectionManager.ready((function(e,c){if(e)n(e,null);else{var d=t.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i)),f=new z;"string"==typeof s&&f.add("cover_url",s),$.isFile(s)&&f.add("cover_file",s,s.name),null!==a&&"string"==typeof a&&f.add("name",a),null!==o&&"string"==typeof o&&f.add("data",o),null!==u&&(Array.isArray(u)?f.add("operator_ids",u):f.add("operator_ids",[u])),null!==l&&"string"==typeof l&&f.add("custom_type",l),r.put(d,f,n)}}))}},{key:"deleteOpenChannel",value:function(e,n){var r=this,i=e.channelUrl;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"getGroupChannel",value:function(e,n){var r=this,i=e.channelUrl,a=e.showMember,s=e.internalCall;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=t.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i)),l=new z({show_member:a,show_read_receipt:!0,show_delivery_receipt:!0});l.internal=s===w.INTERNAL_CALL,r.get(u,l,n)}}))}},{key:"loadGroupChannelList",value:function(e,n){var r=this,i=e.token,a=e.limit,s=e.includeEmpty,o=e.order,u=e.userIdsFilter,l=e.nicknameContainsFilter,c=e.channelNameContainsFilter,d=e.channelUrlsFilter,f=e.customTypesFilter,h=e.customTypeStartsWithFilter,p=e.memberStateFilter,v=e.superChannelFilter,g=e.publicChannelFilter,m=e.unreadChannelFilter,y=e.metadataOrderKeyFilter,_=e.hiddenChannelFilter,b=e.searchFilter,C=e.includeFrozen;this.sb.ConnectionManager.ready((function(e,E){if(e)n(e,null);else{var k=t.Path.MYGROUPCHANNELS.replace("%s",encodeURIComponent(E.userId)),w=new z({token:i,limit:a,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),member_state_filter:p});f&&0<f.length&&w.add("custom_types",f),l&&w.add("members_nickname_contains",l),c&&w.add("name_contains",c),b.hasOwnProperty("search_query")&&b.hasOwnProperty("search_fields")&&(w.add("search_query",b.search_query),w.add("search_fields",b.search_fields)),u.userIds&&0<u.userIds.length&&(u.includeMode?(w.add("members_include_in",u.userIds),w.add("query_type",u.queryType.toUpperCase())):w.add("members_exactly_in",u.userIds)),d&&0<d.length&&w.add("channel_urls",d),w.add("super_mode",v),w.add("public_mode",g),w.add("unread_filter",m),y&&w.add("metadata_order_key",y),h&&w.add("custom_type_startswith",h),_&&w.add("hidden_mode",_),"boolean"==typeof C&&w.add("show_frozen",C),r.get(k,w,n)}}))}},{key:"loadPublicGroupChannelList",value:function(e,n){var r=this,i=e.token,a=e.limit,s=e.includeEmpty,o=e.order,u=e.channelNameContainsFilter,l=e.channelUrlsFilter,c=e.customTypesFilter,d=e.customTypeStartsWithFilter,f=e.superChannelFilter,h=e.membershipFilter,p=e.metadataOrderKeyFilter,v=e.includeFrozen;this.sb.ConnectionManager.ready((function(e,g){if(e)n(e,null);else{var m=r.cls.GroupChannel,y=t.Path.GROUPCHANNELS,_=new z({token:i,limit:a,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),public_mode:m.PublicChannelFilter.PUBLIC,public_membership_mode:h});c&&0<c.length&&_.add("custom_types",c),u&&_.add("name_contains",u),l&&0<l.length&&_.add("channel_urls",l),_.add("super_mode",f),p&&_.add("metadata_order_key",p),d&&_.add("custom_type_startswith",d),"boolean"==typeof v&&_.add("show_frozen",v),r.get(y,_,n)}}))}},{key:"createGroupChannel",value:function(e,n){var r=this,i=e.isDistinct,a=e.isSuper,s=e.isBroadcast,o=e.isPublic,u=e.channelUrl,l=e.isDiscoverable,c=e.isStrict,d=e.name,f=e.data,h=e.customType,p=e.coverUrl,v=e.coverImage,g=e.accessCode,m=e.isEphemeral,y=e._invitedUserIds,_=void 0===y?[]:y,b=e.operatorUserIds,E=e.messageSurvivalSeconds;this.sb.ConnectionManager.ready((function(e,y){if(e)n(e,null);else{var k=t.Path.GROUPCHANNELS,w=new z({user_ids:[y.userId].concat(C(_)).filter((function(e,t,n){return t===n.indexOf(e)}))});null!==p&&"string"==typeof p&&w.add("cover_url",p),$.isFile(v)&&w.add("cover_file",v,v.name),null!==u&&w.add("channel_url",u),null!==i&&w.add("is_distinct",i),null!==a&&w.add("is_super",a),null!==s&&w.add("is_broadcast",s),null!==o&&w.add("is_public",o),null!==l&&w.add("is_discoverable",l),null!==c&&w.add("strict",c),null!==m&&w.add("is_ephemeral",m),g&&w.add("access_code",g),null!==d&&"string"==typeof d&&w.add("name",d),f&&w.add("data",f),h&&w.add("custom_type",h),Array.isArray(b)&&0<b.length&&w.add("operator_ids",b),null!==E&&-1<E&&w.add("message_survival_seconds",E),r.post(k,w,n)}}))}},{key:"updateGroupChannel",value:function(e,n){var r=this,i=e.isDistinct,a=e.isPublic,s=e.channelUrl,o=e.isDiscoverable,u=e.name,l=e.data,c=e.customType,d=e.coverUrl,f=e.coverImage,h=e.accessCode,p=e.operatorUserIds,v=e.messageSurvivalSeconds;this.sb.ConnectionManager.ready((function(e,g){if(e)n(e,null);else{var m=t.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(s)),y=new z;null!==i&&y.add("is_distinct",i),null!==a&&y.add("is_public",a),null!==o&&y.add("is_discoverable",o),null!==h&&y.add("access_code",h),null!==d&&"string"==typeof d&&y.add("cover_url",d),$.isFile(f)&&y.add("cover_file",f,f.name),null!==u&&"string"==typeof u&&y.add("name",u),null!==l&&"string"==typeof l&&y.add("data",l),null!==c&&"string"==typeof c&&y.add("custom_type",c),null!==p&&(Array.isArray(p)?y.add("operator_ids",p):p&&y.add("operator_ids",[p])),null!==v&&-1<v&&y.add("message_survival_seconds",v),r.put(m,y,n)}}))}},{key:"addOperators",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=void 0!==a&&a,o=e.operatorUserIds;this.sb.ConnectionManager.ready((function(e,a){if(!e){var u=(s?t.Path.OPENCHANNELS_CHANNELURL_OPERATORS:t.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(i)),l=new z({operator_ids:o});r.post(u,l,n)}}))}},{key:"removeOperators",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=void 0!==a&&a,o=e.operatorUserIds;this.sb.ConnectionManager.ready((function(e,a){if(!e){var u=(s?t.Path.OPENCHANNELS_CHANNELURL_OPERATORS:t.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(i)),l=new z({operator_ids:o});r.delete(u,l,n)}}))}},{key:"inviteToGroupChannel",value:function(e,n){var r=this,i=e.channelUrl,a=e.userIds;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=t.Path.GROUPCHANNELS_CHANNELURL_INVITE.replace("%s",encodeURIComponent(i)),u=new z({user_ids:a});r.post(o,u,n)}}))}},{key:"acceptInvitation",value:function(e,n){var r=this,i=e.channelUrl,a=e.accessCode;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=t.Path.GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION.replace("%s",encodeURIComponent(i)),u=new z({user_id:s.userId});a&&u.add("access_code",a),r.put(o,u,n)}}))}},{key:"declineInvitation",value:function(e,n){var r=this,i=e.channelUrl;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION.replace("%s",encodeURIComponent(i)),o=new z({user_id:a.userId});r.put(s,o,n)}}))}},{key:"joinGroupChannel",value:function(e,n){var r=this,i=e.channelUrl,a=e.accessCode;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=t.Path.GROUPCHANNELS_CHANNELURL_JOIN.replace("%s",encodeURIComponent(i)),u=new z({user_id:s.userId});a&&u.add("access_code",a),r.put(o,u,n)}}))}},{key:"leaveGroupChannel",value:function(e,n){var r=this,i=e.channelUrl;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.GROUPCHANNELS_CHANNELURL_LEAVE.replace("%s",encodeURIComponent(i)),o=new z({user_id:a.userId});r.put(s,o,n)}}))}},{key:"hideGroupChannel",value:function(e,n){var r=this,i=e.channelUrl,a=e.hidePreviousMessages,s=e.allowAutoUnhide;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=t.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(i)),l=new z({user_id:o.userId,hide_previous_messages:a,allow_auto_unhide:s});r.put(u,l,n)}}))}},{key:"unhideGroupChannel",value:function(e,n){var r=this,i=e.channelUrl;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"freeze",value:function(e,n){var r=this,i=e.channelUrl,a=e.isGroupChannel,s=e.freezing;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=a?t.Path.GROUPCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(i)):t.Path.OPENCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(i)),l=new z({freeze:s});r.put(u,l,n)}}))}},{key:"deleteGroupChannel",value:function(e,n){var r=this,i=e.channelUrl;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i));r.delete(s,null,n)}}))}},{key:"loadMemberList",value:function(e,n){var r=this,i=e.channelUrl,a=e.token,s=e.limit,o=e.mutedMemberFilter,u=e.order,l=e.memberStateFilter,c=e.nicknameStartsWithFilter;this.sb.ConnectionManager.ready((function(e,d){if(e)n(e,null);else{var f=t.Path.GROUPCHANNELS_MEMBERS.replace("%s",encodeURIComponent(i)),h=new z({token:a,limit:s,order:u.toLowerCase(),muted_member_filter:o.toLowerCase(),member_state_filter:l,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0});c&&h.add("nickname_startswith",c),r.get(f,h,n)}}))}},{key:"report",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.reportCategory,o=e.reportingUserId,u=e.reportDescription;this.sb.ConnectionManager.ready((function(e,l){if(e)n(e,null);else{var c=t.Path.REPORT_CHANNELS.replace("%s",encodeURIComponent(a?"open_channels":"group_channels")).replace("%s",encodeURIComponent(i)),d=new z({report_category:s});null!=o&&d.add("reporting_user_id",o),null!=u&&d.add("report_description",u),r.post(c,d,n)}}))}},{key:"reportUser",value:function(e,n){var r=this,i=e.offendingUserId,a=e.channelUrl,s=e.isOpenChannel,o=e.reportCategory,u=e.reportingUserId,l=e.reportDescription;this.sb.ConnectionManager.ready((function(e,c){if(e)n(e,null);else{var d=t.Path.REPORT_USERS.replace("%s",encodeURIComponent(i)),f=new z({channel_url:a,channel_type:s?"open_channels":"group_channels",report_category:o});null!=u&&f.add("reporting_user_id",u),null!=l&&f.add("report_description",l),r.post(d,f,n)}}))}},{key:"reportMessage",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.messageId,o=e.reportCategory,u=e.reportingUserId,l=e.reportDescription,c=e.offendingUserId;this.sb.ConnectionManager.ready((function(e,d){if(e)n(e,null);else{var f=t.Path.REPORT_MESSAGES.replace("%s",encodeURIComponent(a?"open_channels":"group_channels")).replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)),h=new z({report_category:o,offending_user_id:c});null!=u&&h.add("reporting_user_id",u),null!=l&&h.add("report_description",l),r.post(f,h,n)}}))}},{key:"sendUserMessage",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.message,o=e.data,u=e.customType,l=e.translationTargetLanguages,c=e.metaArrays,d=e.mentionType,f=e.mentionedUserIds,h=e.pushNotificationDeliveryOption,p=e.rootMessageId,v=e.parentMessageId;this.sb.ConnectionManager.ready((function(e,g){if(e)n(e,null);else{var m=r.cls.FileMessageParams,y=a?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)),_=new z({message_type:"MESG",user_id:g.userId,message:s,mention_type:d,mentioned_user_ids:[]});null!=o&&_.add("data",o),null!=u&&_.add("custom_type",u),l&&_.add("translation_target_langs",l),c&&0<c.length&&_.add("sorted_metaarray",c.map((function(e){return e.encode()}))),d===r.cls.BaseMessageParams.MentionType.CHANNEL?_.add("mentioned_user_ids",[]):Array.isArray(f)&&0<f.length&&_.add("mentioned_user_ids",f),h&&h!==m.PushNotificationDeliveryOption.DEFAULT&&_.add("push_option",h),p&&_.add("root_message_id",p),v&&_.add("parent_message_id",v),r.post(y,_,n)}}))}},{key:"sendFileMessage",value:function(e,n){var r=this,i=e.channelUrl,a=e.isOpenChannel,s=e.fileUrl,o=e.fileName,u=e.fileSize,l=e.fileType,c=e.data,d=e.customType,f=e.thumbnailSizes,h=e.requireAuth,p=e.metaArrays,v=e.mentionType,g=e.mentionedUserIds,m=e.pushNotificationDeliveryOption,y=e.rootMessageId,_=e.parentMessageId;this.sb.ConnectionManager.ready((function(e,b){if(e)n(e,null);else{var C=r.cls.FileMessageParams,E=a?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)),k=new z({message_type:"FILE",user_id:b.userId,url:s,mention_type:v,mentioned_user_ids:[]});null!=o&&k.add("file_name",o),null!=u&&k.add("file_size",u),null!=l&&k.add("file_type",l),null!=c&&k.add("custom_field",c),null!=d&&k.add("custom_type",d),f&&k.add("thumbnails",f),h&&k.add("require_auth",h),p&&0<p.length&&k.add("sorted_metaarray",p.map((function(e){return e.encode()}))),v===r.cls.BaseMessageParams.MentionType.CHANNEL?k.add("mentioned_user_ids",[]):Array.isArray(g)&&0<g.length&&k.add("mentioned_user_ids",g),m&&m!==C.PushNotificationDeliveryOption.DEFAULT&&k.add("push_option",m),y&&k.add("root_message_id",y),_&&k.add("parent_message_id",_),r.post(E,k,n)}}))}},{key:"uploadFile",value:function(e,n){var r=this,i=e.file,a=e.thumbnailSizes,s=e.channelUrl,o=e.progressHandler,u=e.reqId;this.sb.ConnectionManager.ready((function(e,l){if(e)n(e,null);else{var c=A.get(r.sb._iid).container.appInfo;if(c)if("number"==typeof i.size||i.size||(i.size=0),"number"==typeof i.size)if(i.size<=c.uploadSizeLimit){var d=t.Path.STORAGE_FILE,f=new z;if(f.add("file",i,i.name),s&&"string"==typeof s&&f.add("channel_url",s),a)for(var h=0;h<a.length;h++)f.add("thumbnail"+(h+1),a[h].maxWidth+","+a[h].maxHeight);f.upload.reqId=u,f.upload.deleteRequest=function(){var e=r.cls.FileMessageQueue;e.uploadRequest[u]&&delete e.uploadRequest[u]},f.upload.progressHandler=function(e){o&&"function"==typeof o&&o(e,u)},r.post(d,f,n)}else n(new U("The file size exceeded the upload limit: ".concat(c.uploadSizeLimit),U.FILE_SIZE_LIMIT_EXCEEDED),null);else n(new U("Invalid file size: ".concat(i.size),U.INVALID_PARAMETER),null);else n(new U("Connection should be made first.",U.CONNECTION_REQUIRED),null)}}))}},{key:"registerScheduledUserMessage",value:function(e,n){var r=this,i=e.groupChannelParams,a=e.channelUrl,s=e.isOpenChannel;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=s?t.Path.OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(a)),l=new z({scheduled_dt:i._getScheduleString(),user_id:o.userId,message:i.message,data:i.data});i.customType&&l.add("custom_type",i.customType),i.metaArrayKeys&&0<Object.keys(i.metaArrayKeys).length&&l.add("metaarray",i.metaArrayKeys),i.mentionType&&l.add("mention_type",i._mentionType),i._mentionType===r.cls.BaseMessageParams.MentionType.CHANNEL?l.add("mentioned_user_ids",[]):Array.isArray(i._mentionedUserIds)&&0<i._mentionedUserIds.length&&l.add("mentioned_user_ids",i._mentionedUserIds),i.translationTargetLanguages&&0<i.translationTargetLanguages.length&&l.add("translation_target_langs",i.translationTargetLanguages),i.pushNotificationDeliveryOption&&i.pushNotificationDeliveryOption!==r.cls.BaseMessageParams.PushNotificationDeliveryOption.DEFAULT&&l.add("push_option",i.pushNotificationDeliveryOption),r.post(u,l,n)}}))}},{key:"getMyPushTriggerOption",value:function(e,n){var r=this,i=e.channelUrl;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(a.userId)).replace("%s",encodeURIComponent(i));r.get(s,null,n)}}))}},{key:"setMyPushTriggerOption",value:function(e,n){var r=this,i=e.channelUrl,a=e.pushTriggerOption,s=e.enable;this.sb.ConnectionManager.ready((function(e,o){if(e)n(e,null);else{var u=t.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(i)),l=new z;a&&l.add("push_trigger_option",a),"boolean"==typeof s&&l.add("enable",s),r.put(u,l,n)}}))}},{key:"setMyCountPreference",value:function(e,n){var r=this,i=e.channelUrl,a=e.countPreference;this.sb.ConnectionManager.ready((function(e,s){if(e)n(e,null);else{var o=t.Path.USERS_COUNT_PREFERENCE.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(i)),u=new z({count_preference:a});r.put(o,u,n)}}))}},{key:"resetMyHistory",value:function(e,n){var r=this,i=e.channelUrl;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.GROUPCHANNELS_RESET_USER_HISTORY.replace("%s",encodeURIComponent(i));r.put(s,null,n)}}))}},{key:"addReaction",value:function(e,n){var r=this,i=e.isGroupChannel,a=e.channelUrl,s=e.messageId,o=e.key;this.sb.ConnectionManager.ready((function(e,u){if(e)n(e,null);else{var l=i?t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)):t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)),c=new z({reaction:o});r.post(l,c,n)}}))}},{key:"deleteReaction",value:function(e,n){var r=this,i=e.isGroupChannel,a=e.channelUrl,s=e.messageId,o=e.key;this.sb.ConnectionManager.ready((function(e,u){if(e)n(e,null);else{var l=i?t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)):t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)),c=new z({reaction:o});r.delete(l,c,n)}}))}},{key:"getAllEmoji",value:function(e){var n=this;this.sb.ConnectionManager.ready((function(r,i){r?e(r,null):n.get(t.Path.EMOJI_CATEGORIES,null,e)}))}},{key:"getEmojiCategory",value:function(e,n){var r=this,i=e.categoryId;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.EMOJI_CATEGORIES_CATEGORYID.replace("%s",i);r.get(s,null,n)}}))}},{key:"getEmoji",value:function(e,n){var r=this,i=e.emojiKey;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.EMOJIS_EMOJIKEY.replace("%s",i);r.get(s,null,n)}}))}},{key:"getAllowFriendDiscovery",value:function(e){var n=this;this.sb.ConnectionManager.ready((function(r,i){if(r)e(r,null);else{var a=t.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(i.userId));n.get(a,null,e)}}))}},{key:"setAllowFriendDiscovery",value:function(e,n){var r=this,i=e.allowFriendDiscovery;this.sb.ConnectionManager.ready((function(e,a){if(e)n(e,null);else{var s=t.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(a.userId)),o=new z;"boolean"==typeof i&&o.add("allow_friend_discovery",i),r.put(s,o,n)}}))}}],[{key:"Path",get:function(){return{USERS:"/users",USERS_USERID:"/users/%s",USERS_USERID_LOGIN:"/users/%s/login",USERS_USERID_SESSION_KEY:"/users/%s/session_key",USERS_USERID_METADATA:"/users/%s/metadata",USERS_USERID_METADATA_KEY:"/users/%s/metadata/%s",USERS_USERID_MARKASREADALL:"/users/%s/mark_as_read_all",USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS:"/users/%s/my_group_channels/changelogs",USERS_USERID_UNREAD_ITEM_COUNT:"/users/%s/unread_item_count",USERS_USERID_UNREAD_MESSAGE_COUNT:"/users/%s/unread_message_count",USERS_USERID_UNREAD_CHANNEL_COUNT:"/users/%s/unread_channel_count",USERS_USERID_PUSH_GCM_TOKEN:"/users/%s/push/gcm/%s",USERS_USERID_PUSH_GCM:"/users/%s/push/gcm",USERS_USERID_PUSH_DEVICE_TOKENS:"/users/%s/push/%s/device_tokens",USERS_USERID_PUSHPREFERENCE_CHANNELURL:"/users/%s/push_preference/%s",USERS_USERID_PUSHPREFERENCE:"/users/%s/push_preference/",USERS_USERID_PUSH_TEMPLATE:"/users/%s/push/template",USERS_USERID_BLOCK:"/users/%s/block",USERS_USERID_BLOCK_TARGETID:"/users/%s/block/%s",USERS_USERID_PUSH_APNS_TOKEN:"/users/%s/push/apns/%s",USERS_USERID_PUSH_APNS:"/users/%s/push/apns",USERS_USERID_PUSH:"/users/%s/push",USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE:"/users/%s/channel_invitation_preference",USERS_USERID_GROUP_CHANNEL_COUNT:"/users/%s/group_channel_count",USERS_COUNT_PREFERENCE:"/users/%s/count_preference/%s",USERS_USERID_ALLOW_FRIEND_DISCOVERY:"/users/%s/allow_friend_discovery",OPENCHANNELS:"/open_channels",OPENCHANNELS_CHANNELURL:"/open_channels/%s",OPENCHANNELS_CHANNELURL_MESSAGES:"/open_channels/%s/messages",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/open_channels/%s/messages/%s",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/open_channels/%s/messages/%s/translation",OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/open_channels/%s/messages/changelogs",OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/open_channels/%s/scheduled_messages",OPENCHANNELS_CHANNELURL_PARTICIPANTS:"/open_channels/%s/participants",OPENCHANNELS_CHANNELURL_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_METADATA:"/open_channels/%s/metadata",OPENCHANNELS_CHANNELURL_METADATA_KEY:"/open_channels/%s/metadata/%s",OPENCHANNELS_CHANNELURL_METACOUNTER:"/open_channels/%s/metacounter",OPENCHANNELS_CHANNELURL_METACOUNTER_KEY:"/open_channels/%s/metacounter/%s",OPENCHANNELS_CHANNELURL_BAN:"/open_channels/%s/ban",OPENCHANNELS_CHANNELURL_BAN_USERID:"/open_channels/%s/ban/%s",OPENCHANNELS_CHANNELURL_MUTE:"/open_channels/%s/mute",OPENCHANNELS_CHANNELURL_MUTE_USERID:"/open_channels/%s/mute/%s",OPENCHANNELS_CHANNELURL_FREEZE:"/open_channels/%s/freeze",OPENCHANNELS_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/open_channels/%s/messages/%s/reactions",GROUPCHANNELS:"/group_channels",MYGROUPCHANNELS:"/users/%s/my_group_channels",GROUPCHANNELS_CHANNELURL:"/group_channels/%s",GROUPCHANNELS_CHANNELURL_INVITE:"/group_channels/%s/invite",GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION:"/group_channels/%s/accept",GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION:"/group_channels/%s/decline",GROUPCHANNELS_CHANNELURL_HIDE:"/group_channels/%s/hide",GROUPCHANNELS_CHANNELURL_LEAVE:"/group_channels/%s/leave",GROUPCHANNELS_CHANNELURL_JOIN:"/group_channels/%s/join",GROUPCHANNELS_CHANNELURL_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_CHANNELURL_MESSAGES:"/group_channels/%s/messages",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD:"/group_channels/%s/messages/mark_as_read",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED:"/group_channels/%s/messages/mark_as_delivered",GROUPCHANNELS_CHANNELURL_MESSAGES_TOTALCOUNT:"/group_channels/%s/messages/total_count",GROUPCHANNELS_CHANNELURL_MESSAGES_UNREADCOUNT:"/group_channels/%s/messages/unread_count",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/group_channels/%s/messages/%s",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/group_channels/%s/messages/%s/translation",GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/group_channels/%s/messages/changelogs",GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/group_channels/%s/scheduled_messages",GROUPCHANNELS_CHANNELURL_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_METADATA:"/group_channels/%s/metadata",GROUPCHANNELS_CHANNELURL_METADATA_KEY:"/group_channels/%s/metadata/%s",GROUPCHANNELS_CHANNELURL_METACOUNTER:"/group_channels/%s/metacounter",GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY:"/group_channels/%s/metacounter/%s",GROUPCHANNELS_RESET_USER_HISTORY:"/group_channels/%s/reset_user_history",GROUPCHANNELS_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_BAN:"/group_channels/%s/ban",GROUPCHANNELS_CHANNELURL_BAN_USERID:"/group_channels/%s/ban/%s",GROUPCHANNELS_CHANNELURL_MUTE:"/group_channels/%s/mute",GROUPCHANNELS_CHANNELURL_MUTE_USERID:"/group_channels/%s/mute/%s",GROUPCHANNELS_CHANNELURL_FREEZE:"/group_channels/%s/freeze",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/group_channels/%s/messages/%s/reactions",STORAGE_FILE:"/storage/file",STORAGE_PROFILE:"/storage/profile_image",FRIENDS:"/users/%s/friends",FRIENDS_CHANGE_LOGS:"/users/%s/friends/changelogs",FRIENDS_DISCOVERIES:"/users/%s/friend_discoveries",SEARCH_MESSAGE:"/search/messages",REPORT_USERS:"/report/users/%s",REPORT_CHANNELS:"/report/%s/%s",REPORT_MESSAGES:"/report/%s/%s/messages/%s",EMOJIS_EMOJIKEY:"/emojis/%s",EMOJI_CATEGORIES:"/emoji_categories",EMOJI_CATEGORIES_CATEGORYID:"/emoji_categories/%s"}}}]),t}(),K=function(){function e(t,n){s(this,e),this.sb=t,this.ws=null,this.wsHost=null,this.WebSocket=null,this.handler=n||new e.ConnectionHandler,this.explicitDisconnect=!1,this.lastActiveMillis=0;try{this.WebSocket="undefined"==typeof WebSocket?i:WebSocket}catch(t){this.WebSocket=WebSocket}}return u(e,[{key:"connect",value:function(e,t,n){var r=this;B.debug("`WebSocketClient.connect` called.");var i=A.get(this.sb._iid).container,a=i.pinger,s=i.auth,o=i.extensions,u=i.getUserAgentWithExtensions,l=i.sessionManager;this.wsHost=n;try{var c="/?p=JS&pv="+encodeURIComponent(w.OS_VERSION)+"&sv="+encodeURIComponent(w.SDK_VERSION)+"&ai="+encodeURIComponent(this.sb.getApplicationId());if(s.sessionKey?c+="&key="+encodeURIComponent(s.sessionKey):c+="&user_id="+encodeURIComponent(e)+"&access_token="+encodeURIComponent(t),c+="&active=1",c+="&SB-User-Agent="+encodeURIComponent(u(o)),c+="&Request-Sent-Timestamp="+(new Date).getTime().toString(),c+="&include_extra_data="+encodeURIComponent(["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash"].join(",")),l.handler&&(c+="&expiring_session=1"),this.ws=new this.WebSocket(this.wsHost+c),!this.ws)return this.sb.isReconnectingOnError=!0,void this.handler.onError("ws does not exist.")}catch(e){return this.sb.isReconnectingOnError=!0,void this.handler.onError(e)}try{this.sb.getDebugMode()&&"undefined"!=typeof window&&(window.ws=this.ws)}catch(e){B.debug("`window` object does not exist.")}var d=!1;this.ws.onopen=function(e){B.debug("`WebSocket.onopen` called."),r.handler.onOpen(e)},this.ws.onmessage=function(e){r.active();var t=e.data.split("\n");for(var n in t){var i=t[n];if(i&&"string"==typeof i){try{if("PONG"===i.substring(0,4)){a.pong();continue}}catch(e){B.debug("`WebSocket.onmessage` command check error:",e)}r.handler.onMessage(i)}}},this.ws.onerror=function(e){B.debug("`WebSocket.onerror` called:",e),a&&a.stop(),d=!0,r.sb.isReconnectingOnError=!0,r.handler.onError(e)},this.ws.onclose=function(e){B.group("`WebSocket.onclose` called.",[{level:B.supportedLogLevels.DEBUG,messages:["e",e]},{level:B.supportedLogLevels.DEBUG,messages:["explicitDisconnect",r.explicitDisconnect]}]),a&&a.stop(),r.explicitDisconnect?r.handler.onClose(e):d||r.handler.onError(e),r.explicitDisconnect=!1}}},{key:"disconnect",value:function(e,t){B.group("`WebSocketClient.onclose` called.",[{level:B.supportedLogLevels.DEBUG,messages:["explicit",e]}]);var n=A.get(this.sb._iid).container.pinger;n&&n.stop(),this.explicitDisconnect=!0===e,this.ws&&(this.ws.onopen=function(){},this.ws.onmessage=function(){},this.ws.onclose=function(){t&&t()},this.ws.onerror=function(){},this.ws.close(),this.ws=null),this.explicitDisconnect?this.handler.onClose():this.handler.onError(),this.explicitDisconnect=!1}},{key:"send",value:function(e,t){if(1!==this.ws.readyState)t&&t(new U("Connection is not valid. Please reconnect.",U.WEBSOCKET_CONNECTION_CLOSED),null);else{var n=A.get(this.sb._iid).container.pinger;this.ws.send(e.encode()),"PING"!==e.command&&n.refreshTimer(),t&&t(null,null)}}},{key:"active",value:function(){this.lastActiveMillis=(new Date).getTime()}},{key:"getConnectionState",value:function(){try{return 1===this.ws.readyState?this.sb.ConnectionState.OPEN:0===this.ws.readyState?this.sb.ConnectionState.CONNECTING:this.sb.ConnectionState.CLOSED}catch(e){return this.sb.ConnectionState.CLOSED}}}]),e}();function J(){s(this,J),this.onSessionExpired=function(){},this.onSessionTokenRequired=function(e,t){return e(null)},this.onSessionError=function(e){},this.onSessionRefreshed=function(){},this.onSessionClosed=function(){}}K.ConnectionHandler=function e(){s(this,e),this.onReady=function(){},this.onOpen=function(){},this.onClose=function(){},this.onMessage=function(){},this.onError=function(){}},Number.MAX_SAFE_INTEGER||Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:Math.pow(2,53)-1});var X=function(){function e(t){s(this,e),this.sb=t,this.cls=T.get(this.sb._iid),this.client=new K(this.sb),this.connectParams={retryCount:1},this.reconnectParams={interval:3,retryCount:3,multiplier:2,maxInterval:24},this.connectCount=0,this.reconnectCount=0,this.reconnectDelay=0}return u(e,[{key:"connect",value:function(e,t){var n=this,r=A.get(this.sb._iid).container,i=r.auth,a=r.apiClient,s=r.commandHandler;i.sessionToken=t||null;var o=this.cls.GroupChannel,u=null,l=new K.ConnectionHandler;this.client=new K(this.sb,l),l.onMessage=function(e){s.onRawCommandReceived(e)},this.sb.loginHandler=function(e,t){if(n.sb.connecting=!1,e)n.disconnect({clearSession:!0,err:e},null);else{clearInterval(n.sb.globalTimer);var r=function(){if(o.cachedChannels)for(var e in o.cachedChannels){var t=o.cachedChannels[e];if(t.invalidateTypingStatus())for(var r in n.sb.channelHandlers)n.sb.channelHandlers[r].onTypingStatusUpdated(t)}};r(),n.sb.globalTimer=setInterval((function(){return r()}),1e3),n.flushConnectionCallbacks(null,t),n.sb.connecting=!1,n.sb.reconnecting=!1,n.sb.ConnectionManager.processAllReadyHandler(null)}},l.onOpen=function(){n.connectCount=0,n.sb.loginTimer=setTimeout((function(){n.sb.loginTimer=null,n.sb.onLoginTimerCancel=null,n.flushConnectionCallbacks(new U("Connection timeout.",U.LOGIN_TIMEOUT),null),n.sb.disconnect(null)}),n.sb.Options.websocketResponseTimeout),n.sb.onLoginTimerCancel=function(){n.connectCount=0,n.flushConnectionCallbacks(new U("Connection has been canceled.",U.REQUEST_FAILED),null)},n.sb.connecting=!1},l.onError=function(r){B.debug("Connect: `WebSocketClient.ConnectionHandler.onError` called.",r),i.sessionKey?(n.sb.isReconnectingOnError=!0,n.sb.ConnectionManager.errorAllReadyHandler(),n.reconnect(e,!0),n.sb.connecting=!1):n.connectCount<n.connectParams.retryCount?(n.connectCount++,n.client.connect(e,t,u)):(n.connectCount=0,n.flushConnectionCallbacks(new U("Websocket connection failed.",U.WEBSOCKET_CONNECTION_FAILED),null),n.sb.connecting=!1)},l.onClose=function(){B.debug("Connect: `WebSocketClient.ConnectionHandler.onClose` called."),n.connectCount=0,n.sb.connecting=!1},a.checkRouting((function(r,i){if(r)return n.sb.connecting=!1,void n.flushConnectionCallbacks(new U("Connection routing failed.",U.REQUEST_FAILED),null);u=i.wsHost,a.dummyCall((function(e){e&&B.error("API dummy call failed:",e)})),n.client.connect(e,t,u)}))}},{key:"reconnect",value:function(e,t){var n=this,r=!(1<arguments.length&&void 0!==t)||t,i=A.get(this.sb._iid).container,a=i.auth,s=i.apiClient,o=i.commandHandler,u=i.sessionManager,l=this.cls.OpenChannel;if(this.sb.reconnecting=!0,this.sb.reconnectTimer)B.debug("Reconnect: still reconnecting.");else{if(this.reconnectCount+=1,this.reconnectCount<=1){if(r)for(var c in this.sb.connectionHandlers)this.sb.connectionHandlers[c].onReconnectStarted();this.reconnectDelay=0}else this.reconnectDelay=Math.min(1e3*this.reconnectParams.interval*Math.pow(this.reconnectParams.multiplier,this.reconnectCount-2),0<this.reconnectParams.maxInterval?1e3*this.reconnectParams.maxInterval:Number.MAX_SAFE_INTEGER);if(!e||!a.sessionKey||0<this.reconnectParams.retryCount&&this.reconnectCount>this.reconnectParams.retryCount){for(var d in this.disconnect({clearSession:!1,err:new U("Websocket connection failed.",U.WEBSOCKET_CONNECTION_FAILED)},null),this.reconnectCount=0,this.sb.connectionHandlers)this.sb.connectionHandlers[d].onReconnectFailed();return this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1,void this.sb.ConnectionManager.errorAllReadyHandler()}this.sb.onReconnectTimerCancel=function(){n.reconnectCount=0},this.sb.reconnectTimer=setTimeout((function(){n.sb.reconnectTimer=null,n.sb.onReconnectTimerCancel=null,n.client&&n.client.disconnect(!0);var t=new K.ConnectionHandler;n.client=new K(n.sb,t),n.sb.loginHandler=function(t,r){if(t)t.isSessionKeyExpiredError?u.refresh((function(){})):(clearTimeout(n.sb.reconnectTimer),n.sb.reconnectTimer=null,n.reconnect(e,!1));else{for(var i in n.reconnectCount=0,n.sb.connecting=!1,n.sb.reconnecting=!1,n.sb.isReconnectingOnError=!1,n.sb.connectionHandlers)n.sb.connectionHandlers[i].onReconnectSucceeded();if(n.sb.ConnectionManager.processAllReadyHandler(null),n.sb.isReconnectingOnError)for(var a in n.sb.ConnectionManager.networkHandlers)n.sb.ConnectionManager.networkHandlers[a].onReconnected();Object.keys(l.enteredChannels).forEach((function(e){l.enteredChannels[e].enter((function(t,r){if(t){var i=n.cls.FileMessageQueue;delete l.enteredChannels[e],i.delete(e)}}))}))}},t.onOpen=function(){B.debug("Reconnect: `WebSocketClient.ConnectionHandler.onOpen` called."),n.sb.loginTimer=setTimeout((function(){B.debug("Reconnect: `loginTimer` timeout."),n.sb.loginTimer=null,n.reconnect(e,!0)}),n.sb.Options.websocketResponseTimeout),n.sb.onLoginTimerCancel=null,n.sb.reconnecting=!1},t.onMessage=function(e){o.onRawCommandReceived(e)},t.onError=function(t){B.debug("Reconnect: `WebSocketClient.ConnectionHandler.onError` called.",t),n.sb.isReconnectingOnError=!0,n.sb.ConnectionManager.errorAllReadyHandler(),n.reconnect(e,!0)},t.onClose=function(){B.debug("Reconnect: `WebSocketClient.ConnectionHandler.onClose` called."),n.sb.reconnecting=!1},s.checkRouting((function(t,r){t?n.reconnect(e,!0):(n.sb.getCurrentApiHost()!==r.apiHost&&s.get("/",null,(function(){})),n.client.connect(e,null,r.wsHost))}))}),this.reconnectDelay)}}},{key:"disconnect",value:function(e,t){var n=A.get(this.sb._iid),r=n.container.ackStateMap,i=this.cls,a=i.GroupChannel,s=i.OpenChannel,o=e.clearSession,u=e.err;if(this.sb.loginTimer&&(clearTimeout(this.sb.loginTimer),this.sb.onLoginTimerCancel&&(this.sb.onLoginTimerCancel(),this.sb.onLoginTimerCancel=null),this.sb.loginTimer=null),this.sb.reconnectTimer&&(clearTimeout(this.sb.reconnectTimer),this.sb.onReconnectTimerCancel&&(this.sb.onReconnectTimerCancel(),this.sb.onReconnectTimerCancel=null),this.sb.reconnectTimer=null),this.client&&(this.reconnectCount=0,this.client.disconnect(!0),this.client=null),o){for(var l in s.clearEnteredChannels(),s.clearCache(),a.clearCache(),this.sb.globalTimer&&(clearInterval(this.sb.globalTimer),this.sb.globalTimer=null),r)clearTimeout(r[l].timer);this.sb.currentUser=null,n.set("ackStateMap",{}),n.set("subscribedUnreadMessageCount",{all:0,custom_types:{},ts:0}),n.set("auth",new M)}u&&(this.flushConnectionCallbacks(u,null),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1),t&&t(null,null)}},{key:"flushConnectionCallbacks",value:function(e,t){var n=this.sb.connectionCallbacks;this.sb.connectionCallbacks=[],n.forEach((function(n){return n(e,t)}))}},{key:"isConnected",get:function(){return this.client&&this.client.getConnectionState()===this.sb.ConnectionState.OPEN}}]),e}(),Z=function(){function e(t){var n=t.type,r=t.nullable,i=void 0!==r&&r,a=t.optional,o=void 0!==a&&a,u=t.optionalIf,l=void 0===u?null:u,c=t.ignoreIf,d=void 0===c?null:c,f=t.defaultValue,h=void 0===f?null:f,p=t.constraint,v=void 0===p?null:p;s(this,e),this.type=n,this.nullable=i,this.optional=o,this.optionalIf=l,this.ignoreIf=d,this.defaultValue=h,this.constraint=v}return u(e,[{key:"isMatchingType",value:function(e){function t(t,n){return"string"==typeof n?a(t)===n||"array"===n&&Array.isArray(t)||"file"===n&&$.isFile(t)||"null"===n&&null===t||"date"===n&&t instanceof Date:"function"==typeof n?t instanceof n:"object"===a(n)&&-1<Object.keys(n).map((function(e){return n[e]})).indexOf(e)}return t(e,this.type)||Array.isArray(this.type)&&this.type.some((function(n){return t(e,n)}))||this.nullable&&null===e}}],[{key:"parse",value:function(t,n){for(t=e.toArray(t);0<t.length&&void 0===t[t.length-1];)t.pop();var r=!1,i=null;"callback"===n[n.length-1].type&&("function"==typeof t[t.length-1]&&(i=t.pop()),n.pop(),r=!0);var a=[],s=null,o=0;for(var u in n){var l=n[u];"function"==typeof l.ignoreIf&&l.ignoreIf(t)?a.push(l.hasOwnProperty("defaultValue")?l.defaultValue:null):l.isMatchingType(t[o])?(l.nullable&&null===t[o]||!l.constraint||l.constraint(t[o])||(s=e.error),a.push(t[o]),o++):l.optional||"function"==typeof l.optionalIf&&l.optionalIf(t)?a.push(l.hasOwnProperty("defaultValue")?l.defaultValue:null):(s=e.error,a.push(t[o]),o++)}return r&&i&&a.push(i),t.length!==o&&(s=e.error),[s].concat(a)}},{key:"toArray",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}},{key:"error",get:function(){return new U("Invalid parameter.",U.INVALID_PARAMETER)}}]),e}(),ee=function(){function e(t){s(this,e),this.sb=t,this.authCount=0,this.readyHandlers=[],this.networkHandlers={},this.authenticateTimer=1e4,this.authInfoRequester=null}return u(e,[{key:"addReadyHandler",value:function(e){e&&"function"==typeof e&&this.readyHandlers.push(e)}},{key:"ready",value:function(e,t){var n=!(1<arguments.length&&void 0!==t)||t,r=A.get(this.sb._iid).container,i=r.auth,a=r.isInBackground;n&&i.hasSession()?e&&(this.sb.currentUser?e(null,this.sb.currentUser):(this.addReadyHandler(e),this.errorAllReadyHandler()),this.sb.getConnectionState()!==this.sb.ConnectionState.CLOSED||a||this.sb.reconnect()):(this.addReadyHandler(e),this.sb.isReconnectingOnError?this.errorAllReadyHandler():this.sb.getConnectionState()===this.sb.ConnectionState.OPEN?this.processAllReadyHandler(null):this.sb.getConnectionState()===this.sb.ConnectionState.CONNECTING||this.errorAllReadyHandler())}},{key:"processAllReadyHandler",value:function(e){if(0<this.readyHandlers.length){var t=this.sb.currentUser,n=this.readyHandlers;this.readyHandlers=[],n.forEach((function(n){n&&"function"==typeof n&&n(e,t)}))}}},{key:"errorAllReadyHandler",value:function(){this.processAllReadyHandler(new U("Connection should be made first.",U.CONNECTION_REQUIRED))}},{key:"NetworkHandler",value:function(){this.onReconnected=function(){}}},{key:"addNetworkHandler",value:function(e,t){this.networkHandlers[e]=t}},{key:"removeNetworkHandler",value:function(e){delete this.networkHandlers[e]}},{key:"removeAllNetworkHandler",value:function(){this.networkHandlers={}}},{key:"authenticate",value:function(e){var t=this;if(this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnecting)this.sb.connecting=!1,e(null,this.sb.currentUser);else if(this.authInfoRequester&&"function"==typeof this.authInfoRequester){this.sb.connecting=!0,this.authCount++;var n=setTimeout((function(){n=null,t.authCount--,0===t.authCount&&0===t.sb.connectionCallbacks.length&&(t.sb.connecting=!1),t.errorAllReadyHandler(),e(new U("Connection should be made first.",U.CONNECTION_REQUIRED),null)}),this.authenticateTimer);this.authInfoRequester((function(r){if(n){clearTimeout(n),n=null,t.authCount--;var i=function(n){t.sb.connecting=!1,e(n,null)};r&&r.hasOwnProperty("userId")?r.accessToken?r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.accessToken,r.apiHost,r.wsHost,i):t.sb.connect(r.userId,r.accessToken,i):r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.apiHost,r.wsHost,i):t.sb.connect(r.userId,i):e(Z.error,null)}}))}else e(Z.error,null)}}]),e}(),te=function(){function e(t){s(this,e),this.sb=t,this.handler=null,this.callbacks=[]}return u(e,[{key:"_refreshSessionKey",value:function(){var e=this;A.get(this._iid).container.wsAdapter.isConnected?this._refreshSessionKeyByCommand((function(t){t?t.isSessionTokenExpiredError?e._handleRefreshError(t):e._refreshSessionKeyByApi((function(t){t?e._handleRefreshError(t):e._handleRefreshSuccess()})):e._handleRefreshSuccess()})):this._refreshSessionKeyByApi((function(t){t?e._handleRefreshError(t):e._handleRefreshSuccess()}))}},{key:"_refreshSessionKeyByCommand",value:function(e){var t=this.sb,n=A.get(this._iid).container.auth,r=T.get(this._iid).Command,i=r.bSessionRefresh({token:n.sessionToken,requestId:r.generateRequestId()});t.sendCommand(i,(function(r,i){if(t.getErrorFirstCallback()){var a=[r,i];i=a[0],r=a[1]}r&&(r.hasOwnProperty("error")?i=new U("Failed to refresh the session key.",U.SESSION_TOKEN_REFRESH_FAILED):r.hasOwnProperty("new_key")&&(n.sessionKey=r.new_key)),e(i)}))}},{key:"_refreshSessionKeyByApi",value:function(e){var t=this;!function n(r){if(r<3){var i=A.get(t._iid).container,a=i.auth,s=i.apiClient,o={};a.sessionToken&&(o.accessToken=a.sessionToken),s.refreshSessionKey(o,(function(t,i){if(t)t.isSessionTokenExpiredError?e(new U("Failed to refresh the session key.",U.SESSION_TOKEN_REFRESH_FAILED)):n(r+1);else{var s=i.key;a.sessionKey=s,e(null)}}))}else e(new U("Failed to refresh the session key.",U.SESSION_TOKEN_REFRESH_FAILED))}(0)}},{key:"_handleRefreshSuccess",value:function(){var e=this.sb;e.reconnectTimer&&(clearTimeout(e.reconnectTimer),e.reconnectTimer=null),e.reconnect(),this._flushCallbacks(new U("Session key refreshed.",U.SESSION_TOKEN_REFRESHED)),this.handler&&this.handler.onSessionRefreshed()}},{key:"_handleRefreshError",value:function(e){this._flushCallbacks(e),this.handler&&this.handler.onSessionError(e)}},{key:"_handleClose",value:function(){var e=this;this.sb.disconnect((function(){e._flushCallbacks(new U("Failed to refresh the session key.",U.SESSION_TOKEN_REFRESH_FAILED)),e.handler&&e.handler.onSessionClosed()}))}},{key:"_flushCallbacks",value:function(e){this.callbacks.forEach((function(t){return t(e)})),this.callbacks=[]}},{key:"setHandler",value:function(e){e instanceof J&&(this.handler=e)}},{key:"refresh",value:function(e){var t=this,n=this.sb,r=A.get(this._iid).container.auth;this.handler?(this.callbacks.push(e),1===this.callbacks.length&&(this.handler.onSessionExpired(),r.sessionToken?this.handler.onSessionTokenRequired((function(e){e?(r.sessionToken=e,t._refreshSessionKey()):t._handleClose()}),(function(){n.reconnectTimer&&(clearTimeout(n.reconnectTimer),n.reconnectTimer=null);var e=new U("Failed to get the session token.",U.SESSION_TOKEN_REQUEST_FAILED);t._flushCallbacks(e),t.handler&&t.handler.onSessionError(e)})):this._refreshSessionKey())):e(null)}}]),e}(),ne=function(){function e(t){s(this,e),this.sb=t}return u(e,[{key:"onlineWorker",value:function(){try{if("undefined"!=typeof navigator&&navigator.onLine){var e=A.get(this.sb._iid).container.auth;this.sb.reconnecting||this.sb.connecting||!e.sessionKey||this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnect()}}catch(e){B.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"offlineWorker",value:function(){try{if("undefined"!=typeof navigator&&!navigator.onLine){var e=A.get(this.sb._iid).container,t=e.auth,n=e.pinger;this.sb.reconnecting||this.sb.connecting||!t.sessionKey||(n&&n.stop(),this.sb.reconnect())}}catch(e){B.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"start",value:function(){try{"undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine&&(window.addEventListener("online",this.onlineWorker),window.addEventListener("offline",this.offlineWorker))}catch(e){B.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"stop",value:function(){try{window.removeEventListener("online",this.onlineWorker,!1),window.removeEventListener("offline",this.offlineWorker,!1)}catch(e){B.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}}]),e}(),re=(new Date).getTime(),ie=function(){function e(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;switch(s(this,e),this.command=t,this.requestId=r,arguments.length){case 1:if(!t||t.length<=4)this.command="NOOP",this.payload="{}";else if(this.decode(t),this.isRequestIdCommand){var i=this.getJsonElement();i&&(this.requestId=i.req_id||"")}break;case 2:case 3:!this.requestId&&this.isRequestIdCommand&&(this.requestId=e.generateRequestId()),n.req_id=this.requestId||"",this.payload=JSON.stringify(n)}}return u(e,[{key:"encode",value:function(){return this.command+this.payload+"\n"}},{key:"decode",value:function(e){e=e.trim(),this.command=e.substring(0,4),this.payload=e.substring(4)}},{key:"getJsonElement",value:function(){return JSON.parse(this.payload)}},{key:"isRequestIdCommand",get:function(){return this.isAckRequired||"EROR"===this.command}},{key:"isAckRequired",get:function(){return"MESG"===this.command||"FILE"===this.command||"ENTR"===this.command||"EXIT"===this.command||"READ"===this.command||"MEDI"===this.command||"FEDI"===this.command}}],[{key:"bSessionRefresh",value:function(e){return new this("LOGI",{token:e.token},e.requestId)}},{key:"bPing",value:function(){return new this("PING",{id:(new Date).getTime(),active:1})}},{key:"bMessage",value:function(e){var t=e.channelUrl,n=e.message,r=e.data,i=e.customType,a=e.metaArrays,s=e.mentionType,o=e.mentionedUserIds,u=e.translationTargetLanguages,l=e.pushNotificationDeliveryOption,c=e.requestId,d=void 0===c?null:c,f=e.silent,h=void 0!==f&&f,p=e.rootMessageId,v=void 0===p?null:p,g=e.parentMessageId,m=void 0===g?null:g,y=T.get(this._iid),_=y.UserMessageParams,b=y.BaseMessageParams,C={};return C.channel_url=t,C.message=n,C.data=r,a&&0<a.length&&(C.metaarray=a.map((function(e){return e.encode()}))),s&&(C.mention_type=s),C.mentioned_user_ids=[],s===b.MentionType.CHANNEL?C.mentioned_user_ids=[]:Array.isArray(o)&&0<o.length&&(C.mentioned_user_ids=o),i&&(C.custom_type=i),u&&0<u.length&&(C.target_langs=u),l&&l!==_.PushNotificationDeliveryOption.DEFAULT&&(C.push_option=l),h&&(C.silent=h),v&&(C.root_message_id=v),m&&(C.parent_message_id=m),new this("MESG",C,d)}},{key:"bFile",value:function(e){var t=e.channelUrl,n=e.url,r=e.name,i=e.type,a=e.size,s=e.data,o=e.customType,u=e.thumbnailSizes,l=e.requireAuth,c=e.metaArrays,d=e.mentionType,f=e.mentionedUserIds,h=e.pushNotificationDeliveryOption,p=e.requestId,v=void 0===p?null:p,g=e.silent,m=void 0!==g&&g,y=e.rootMessageId,_=void 0===y?null:y,b=e.parentMessageId,C=void 0===b?null:b,E=T.get(this._iid),k=E.BaseMessageParams,w=E.FileMessageParams,S={};return S.channel_url=t,S.url=n,S.name=r||"",S.type=i||"",S.size=a||0,S.custom=s,o&&(S.custom_type=o),u&&(S.thumbnails=u),l&&(S.require_auth=l),c&&0<c.length&&(S.metaarray=c.map((function(e){return e.encode()}))),d&&(S.mention_type=d),S.mentioned_user_ids=[],d===k.MentionType.CHANNEL?S.mentioned_user_ids=[]:Array.isArray(f)&&0<f.length&&(S.mentioned_user_ids=f),h&&h!==w.PushNotificationDeliveryOption.DEFAULT&&(S.push_option=h),m&&(S.silent=m),_&&(S.root_message_id=_),C&&(S.parent_message_id=C),new this("FILE",S,v)}},{key:"bUpdateUserMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.message,i=void 0===r?null:r,a=e.data,s=void 0===a?null:a,o=e.customType,u=void 0===o?null:o,l=e.mentionType,c=void 0===l?null:l,d=e.mentionedUserIds,f=void 0===d?null:d,h=e.metaArrayParams,p=void 0===h?null:h,v=T.get(this._iid).BaseMessageParams,g={};return g.channel_url=t,g.msg_id=n,null!=i&&void 0!==i&&(g.message=i),null!=s&&void 0!==s&&(g.data=s),null!=u&&void 0!==u&&(g.custom_type=u),c&&(g.mention_type=c),c===v.MentionType.CHANNEL?g.mentioned_user_ids=[]:Array.isArray(f)&&0<f.length&&(g.mentioned_user_ids=f),p&&(g.metaarray=p),new this("MEDI",g)}},{key:"bUpdateFileMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.data,i=void 0===r?null:r,a=e.customType,s=void 0===a?null:a,o=e.mentionType,u=void 0===o?null:o,l=e.mentionedUserIds,c=void 0===l?null:l,d=e.metaArrayParams,f=void 0===d?null:d,h=T.get(this._iid).BaseMessageParams,p={};return p.channel_url=t,p.msg_id=n,null!=i&&void 0!==i&&(p.data=i),null!=s&&void 0!==s&&(p.custom_type=s),u&&(p.mention_type=u),u===h.MentionType.CHANNEL?p.mentioned_user_ids=[]:Array.isArray(c)&&0<c.length&&(p.mentioned_user_ids=c),f&&(p.metaarray=f),new this("FEDI",p)}},{key:"bRead",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("READ",n)}},{key:"bMessageAck",value:function(e){var t=e.channelUrl,n=e.messageId,r={};return r.channel_url=t,r.msg_id=n,new this("MACK",r)}},{key:"bTypeStart",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPST",r)}},{key:"bTypeEnd",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPEN",r)}},{key:"bEnter",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("ENTR",n)}},{key:"bExit",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("EXIT",n)}},{key:"generateRequestId",value:function(){return re++,String(re)}}]),e}(),ae=new WeakMap,se=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s(this,e);var n=[];if(t.hasOwnProperty("premium_feature_list")&&Array.isArray(t.premium_feature_list))try{var r=t.premium_feature_list;n.push.apply(n,C(r))}catch(t){}var i=[];if(t.hasOwnProperty("application_attributes")&&Array.isArray(t.application_attributes))try{var a=t.application_attributes;i.push.apply(i,C(a))}catch(t){}ae.set(this,{emojiHash:t.hasOwnProperty("emoji_hash")?t.emoji_hash:"",uploadSizeLimit:t.hasOwnProperty("file_upload_size_limit")?1048576*t.file_upload_size_limit:Number.MAX_VALUE,useReaction:t.hasOwnProperty("use_reaction")&&t.use_reaction,applicationAttributes:i,premiumFeatureList:n})}return u(e,[{key:"emojiHash",get:function(){return ae.get(this).emojiHash}},{key:"uploadSizeLimit",get:function(){return ae.get(this).uploadSizeLimit}},{key:"premiumFeatureList",get:function(){return ae.get(this).premiumFeatureList}},{key:"applicationAttributes",get:function(){return ae.get(this).applicationAttributes}},{key:"isUsingReaction",get:function(){return ae.get(this).useReaction}}]),e}(),oe=function(){function e(){s(this,e),this.messageId=null,this.userId=null,this.key=null,this.operation="",this.updatedAt=null}return u(e,null,[{key:"createFromJson",value:function(e){var t=parseInt(e.msg_id),n=e.user_id,r=e.operation,i=e.reaction,a=e.updated_at;if(t&&"string"==typeof n&&"string"==typeof r&&0<=["add","delete"].indexOf(r.toLowerCase())&&"string"==typeof i&&i&&"number"==typeof a){var s=new this;return s.messageId=t,s.userId=n,s.key=i,s.operation=r.toLowerCase(),s.updatedAt=a,s}return null}}]),e}(),ue=function(){function e(){s(this,e)}return u(e,null,[{key:"serialize",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:null,r=JSON.parse(JSON.stringify(e));return n&&n(r),function e(t){return Object.keys(t).forEach((function(n){t[n]&&"object"===a(t[n])&&e(t[n])})),Object.freeze(t)}(r)}},{key:"deserialize",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:null,r=JSON.parse(JSON.stringify(e));return n&&n(r),r}}]),e}();function le(e,t,n){return void 0===n?new Promise((function(e,n){t((function(t,r){return t?n(t):e(r)}))})):t((function(t,r){n&&(A.get(e).container.isErrorFirstInCallback?n(t,r):n(r,t))}))}"undefined"==typeof Promise&&(Promise=function(){function e(t){var n=this;if(s(this,e),this.state=0,this._value=null,this._reason=null,"function"!=typeof t)throw"Promise resolver ".concat(t," is not a function");t((function(e){0===n.state&&(n.state=1,n._value=e)}),(function(e){0===n.state&&(n.state=2,n._reason=e)}))}return u(e,[{key:"then",value:function(t,n){var r=this,i=this;switch(this.state){case 0:setTimeout((function(){return r.then(t,n)}),100);break;case 1:t&&"function"==typeof t&&(i=t(this._value));break;case 2:n&&"function"==typeof n&&(i=n(this._reason))}return i instanceof e?i:this}},{key:"catch",value:function(t){var n=this,r=this;switch(this.state){case 0:setTimeout((function(){return n.catch(t)}),100);break;case 1:break;case 2:r=t(this._reason)}return r instanceof e?r:this}},{key:"finally",value:function(t){var n=this,r=this;switch(this.state){case 0:setTimeout((function(){return n.finally(t)}),100);break;case 1:case 2:r=t()}return r instanceof e?r:this}},{key:"length",get:function(){return 1}}],[{key:"all",value:function(t){return new e((function(n,r){if(Array.isArray(t)||"string"==typeof t)if(0<t.length){var i=[];for(var s in t)t[s]instanceof e?i.push(t[s]):i.push(e.resolve(t[s]));var o=new Array(i.length).fill(null),u=i.length,l=function(e,t,i){t?r(t):(u--,o[e]=i,u<=0&&n(o))};i.forEach((function(e,t){e.then((function(e){l(t,null,e)})).catch((function(e){l(t,e,null)}))}))}else n([]);else r(new Error("Uncaught (in promise) TypeError: ".concat(a(t)," ").concat(t," is not iterable")))}))}},{key:"resolve",value:function(t){return new e((function(e){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}}]),e}());var ce={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},de=new WeakMap,fe=function(){function e(t){s(this,e),this.messageId=0,this.messageType=e.MESSAGE_TYPE_BASE,this.channelUrl="",this.data=null,this.customType=null,this.silent=!1,this.createdAt=0,this.updatedAt=0,this.channelType=null,this.metaArrays=[],this.reactions=[],this.mentionType=null,this.mentionedUsers=[],this.sendingStatus=null,de.set(this,0),this.parentMessageId=0,this.parentMessageText=null,this.threadInfo=null,this.ogMetaData=null,this.isOperatorMessage=!1,t&&this.__update(t)}return u(e,[{key:"serialize",value:function(){return ue.serialize(this,(function(e){e.hasOwnProperty("_sender")&&(e.sender=e._sender,delete e._sender)}))}},{key:"isIdentical",value:function(e){return!("object"!==a(e)||!e.hasOwnProperty("messageId"))&&(0!==this.messageId&&0!==e.messageId?this.messageId===e.messageId:this.reqId===e.reqId)}},{key:"isEqual",value:function(e){return $.deepEqual(this,e)}},{key:"isOpenChannel",value:function(){var e=T.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=T.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isUserMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_USER}},{key:"isAdminMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_ADMIN}},{key:"isFileMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_FILE}},{key:"__update",value:function(e){var t=this,n=Dt.getInstance(this._iid),r=T.get(this._iid),i=r.User,a=r.BaseChannel,s=r.BaseMessageParams,o=r.Reaction,u=r.MessageMetaArray,l=r.ThreadInfo,c=r.OGMetaData;e.hasOwnProperty("msg_id")&&(this.messageId=parseInt(e.msg_id)),e.hasOwnProperty("message_id")&&(this.messageId=parseInt(e.message_id)),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",this.silent=!!e.hasOwnProperty("silent")&&e.silent,this.createdAt=e.hasOwnProperty("ts")?parseInt(e.ts):0,e.hasOwnProperty("created_at")&&(this.createdAt=parseInt(e.created_at)),this.updatedAt=e.hasOwnProperty("updated_at")?parseInt(e.updated_at):0,this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):a.CHANNEL_TYPE_GROUP;var d=e.hasOwnProperty("metaarray")?e.metaarray:{},f=e.hasOwnProperty("metaarray_key_order")?e.metaarray_key_order:Object.keys(d).sort((function(e,t){return e.localeCompare(t)}));this.metaArrays=[];for(var h=0;h<f.length;h++){var p=f[h];this.metaArrays.push(new u(p,d[p]||[]))}if(e.hasOwnProperty("sorted_metaarray")){var v=e.sorted_metaarray;Array.isArray(v)&&(this.metaArrays=v.map((function(e){return new u(e.key,e.value)})))}if(this.reactions=[],e.hasOwnProperty("reactions")&&Array.isArray(e.reactions))for(var g in e.reactions){var m=o.createFromJson(e.reactions[g]);m&&this.reactions.push(m)}this.mentionType=e.hasOwnProperty("mention_type")?e.mention_type:s.MentionType.USERS,this.mentionedUsers=[],e.hasOwnProperty("mentioned_users")&&e.mentioned_users.forEach((function(e){var n=new i(e);t.mentionedUsers.push(n)})),this.sendingStatus=0<this.messageId?n.MessageSendingStatus.SUCCEEDED:n.MessageSendingStatus.FAILED,e.hasOwnProperty("sending_status")&&(this.sendingStatus=e.sending_status),e.hasOwnProperty("root_message_id")&&de.set(this,parseInt(e.root_message_id)),e.hasOwnProperty("parent_message_id")&&(this.parentMessageId=parseInt(e.parent_message_id)),e.hasOwnProperty("parent_message_text")&&(this.parentMessageText=e.parent_message_text),this.threadInfo=new l(e.thread_info),e.hasOwnProperty("og_tag")&&(this.ogMetaData=new c(e.og_tag)),this.isOperatorMessage=!!e.hasOwnProperty("is_op_msg")&&e.is_op_msg}},{key:"getMetaArraysByKeys",value:function(e){return Array.isArray(e)?this.metaArrays.filter((function(t){return-1<e.indexOf(t.key)})):[]}},{key:"getMetaArrayByKeys",value:function(e){var t={};return this.getMetaArraysByKeys(e).forEach((function(e){t[e.key]=e.value})),t}},{key:"applyReactionEvent",value:function(e){var t,n=this,r=T.get(this._iid).Reaction,i=b(Z.parse(arguments,[new Z({type:oe,constraint:function(e){return parseInt(e.messageId)===parseInt(n.messageId)}})]),2);if(t=i[0],e=i[1],!t){var a=!1;for(var s in this.reactions)if(this.reactions[s].key===e.key){this.reactions[s]._applyEvent(e),this.reactions[s].isEmpty&&this.reactions.splice(s,1),a=!0;break}a||"add"!==e.operation||this.reactions.push(new r(e.key,[e.userId],e.updatedAt))}}},{key:"_getThreadedMessageList",value:function(e,t,n,r){var i,a=this,s=T.get(this._iid).ThreadedMessageListParams,o=b(Z.parse(arguments,[new Z({type:"number"}),new Z({type:"string",constraint:function(e){return Object.values(ce).includes(e)}}),new Z({type:s,constraint:function(e){return e._validate()}}),new Z({type:"callback"})]),5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){if(i)r(i,null);else{var s=T.get(a._iid),o=s.GroupChannel,u=s.OpenChannel;a.isGroupChannel()?o.getChannel(a.channelUrl,w.INTERNAL_CALL,(function(i,s){if(Dt.getInstance(a._iid).getErrorFirstCallback()){var o=[i,s];s=o[0],i=o[1]}s?r(s,null):A.get(a._iid).container.apiClient.getMessageList(c(c({channel:i,token:e,tokenType:t},n),{},{shouldReverse:n.reverse,rootMessageId:a.messageId,includeReplies:!0,includeThreadInfo:!0}),(function(e,t){if(e)r(e,null);else{var n=T.get(a._iid).BaseChannel,i=t.messages.map((function(e){return n.buildMessage(e,a)})).filter((function(e){return null!==e})),s=i.filter((function(e){return e.messageId===a.messageId}))[0],o=i.filter((function(e){return e.parentMessageId===a.messageId}));r(null,{parentMessage:s,threadedReplies:o})}}))})):a.isOpenChannel()&&u.getChannel(a.channelUrl,w.INTERNAL_CALL,(function(i,s){if(Dt.getInstance(a._iid).getErrorFirstCallback()){var o=[i,s];s=o[0],i=o[1]}s?r(s,null):A.get(a._iid).container.apiClient.getMessageList(c(c({channel:i,token:e,tokenType:t},n),{},{shouldReverse:n.reverse,rootMessageId:a.messageId,includeReplies:!0,includeThreadInfo:!0}),(function(e,t){if(e)r(e,null);else{var n=T.get(a._iid).BaseChannel,i=t.messages.map((function(e){return n.buildMessage(e,a)})).filter((function(e){return null!==e})),s=i.filter((function(e){return e.messageId===a.messageId}))[0],o=i.filter((function(e){return e.parentMessageId===a.messageId}));r(null,{parentMessage:s,threadedReplies:o})}}))}))}}),r)}},{key:"getThreadedMessagesByTimestamp",value:function(e,t,n){return this._getThreadedMessageList(e,ce.TIMESTAMP,t,n)}},{key:"applyThreadInfoUpdateEvent",value:function(e){var t,n=T.get(this._iid),r=n.ThreadInfo,i=n.ThreadInfoUpdateEvent,a=de.get(this),s=b(Z.parse(arguments,[new Z({type:i,constraint:function(e){return parseInt(e.targetMessageId)===parseInt(a)}})]),2);if(t=s[0],e=s[1],t)return!1;var o=e.threadInfo;return this.threadInfo=new r(o),!0}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach((function(t){e[t.key]=t.value})),e},set:function(e){if("object"===a(e)&&e){var t=T.get(this._iid).MessageMetaArray,n=[];for(var r in e)n.push(new t(r,e[r]));this.metaArrays=n}}}],[{key:"getMessage",value:function(e,t){var n,r=this,i=T.get(this._iid),a=i.BaseChannel,s=i.MessageRetrievalParams,o=b(Z.parse(arguments,[new Z({type:s,constraint:function(e){return e._validate()}}),new Z({type:"callback"})]),3);return n=o[0],e=o[1],t=o[2],le(this._iid,(function(t){if(n)t(n,null);else{var i=T.get(r._iid),s=i.GroupChannel,o=i.OpenChannel;switch(e.channelType){case a.CHANNEL_TYPE_GROUP:s.getChannel(e.channelUrl,w.INTERNAL_CALL,(function(n,i){if(Dt.getInstance(r._iid).getErrorFirstCallback()){var s=[n,i];i=s[0],n=s[1]}i?t(i,null):A.get(r._iid).container.apiClient.getMessage(c({channel:n},e),(function(e,r){if(e)t(e,null);else{var i=a.buildMessage(r,n);t(null,i)}}))}));break;case a.CHANNEL_TYPE_OPEN:o.getChannel(e.channelUrl,w.INTERNAL_CALL,(function(n,i){if(Dt.getInstance(r._iid).getErrorFirstCallback()){var s=[n,i];i=s[0],n=s[1]}i?t(i,null):A.get(r._iid).container.apiClient.getMessage(c({channel:n},e),(function(e,r){if(e)t(e,null);else{var i=a.buildMessage(r,n);t(null,i)}}))}))}}}),t)}},{key:"MESSAGE_TYPE_BASE",get:function(){return"base"}},{key:"MESSAGE_TYPE_ADMIN",get:function(){return"admin"}},{key:"MESSAGE_TYPE_USER",get:function(){return"user"}},{key:"MESSAGE_TYPE_FILE",get:function(){return"file"}},{key:"SendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}}]),e}(),he=function(){function e(t){s(this,e),this.nickname="",this.plainProfileUrl="",this.userId="",this.connectionStatus="",this.lastSeenAt=null,this.metaData={},this.isActive=!0,this.friendDiscoveryKey=null,this.friendName=null,this._preferredLanguages=null,this.requireAuth=null,t&&this.__update(t)}return u(e,[{key:"__update",value:function(t){var n=A.get(this._iid).container.auth;t.hasOwnProperty("guest_id")&&(this.userId=String(t.guest_id)),t.hasOwnProperty("user_id")&&(this.userId=String(t.user_id)),t.hasOwnProperty("name")&&(this.nickname=String(t.name)),t.hasOwnProperty("nickname")&&(this.nickname=String(t.nickname)),t.hasOwnProperty("require_auth_for_profile_image")?this.requireAuth=t.require_auth_for_profile_image:this.requireAuth=null,(t.hasOwnProperty("image")||t.hasOwnProperty("profile_url"))&&(this.plainProfileUrl=String(t.image||t.profile_url||""),Object.defineProperty(this,"profileUrl",{value:this.requireAuth?"".concat(this.plainProfileUrl,"?auth=").concat(n.eKey):this.plainProfileUrl,configurable:!0,writable:!1})),t.hasOwnProperty("is_online")?t.is_online===e.NON_AVAILABLE?this.connectionStatus=e.NON_AVAILABLE:this.connectionStatus=t.is_online?e.ONLINE:e.OFFLINE:this.connectionStatus=e.NON_AVAILABLE,t.hasOwnProperty("last_seen_at")?this.lastSeenAt=parseInt(t.last_seen_at):this.lastSeenAt=0,t.hasOwnProperty("metadata")?this.metaData=t.metadata:this.metaData={},t.hasOwnProperty("is_active")?this.isActive=void 0===t.is_active||t.is_active:this.isActive=!0,t.hasOwnProperty("friend_discovery_key")?this.friendDiscoveryKey=t.friend_discovery_key:this.friendDiscoveryKey=null,t.hasOwnProperty("friend_name")?this.friendName=t.friend_name:this.friendName=null,t.hasOwnProperty("preferred_languages")?this._preferredLanguages=t.preferred_languages||null:this._preferredLanguages=null}},{key:"_updateMetaData",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t,r=T.get(this._iid).GroupChannel;for(var i in e)n?delete this.metaData[i]:this.metaData[i]=e[i];for(var a in r.cachedChannels)if(r.cachedChannels.hasOwnProperty(a)){var s=r.cachedChannels[a];s.memberMap.hasOwnProperty(this.userId)&&(s.memberMap[this.userId].metaData=this.metaData)}}},{key:"serialize",value:function(){return ue.serialize(this,(function(e){e.hasOwnProperty("_preferredLanguages")&&(e.preferredLanguages=e._preferredLanguages,delete e._preferredLanguages)}))}},{key:"getOriginalProfileUrl",value:function(){var e="";if((-1<(e=(e=-1<this.plainProfileUrl.indexOf("://")?this.plainProfileUrl.split("/")[2]:this.plainProfileUrl.split("/")[0]).split("?")[0]).indexOf("sendbird.com")||-1<e.indexOf("intoz.com")||-1<e.indexOf("file-local"))&&-1<this.plainProfileUrl.indexOf(e+"/profile_images/")){var t=this.plainProfileUrl.replace("profile_images/","");return t===this.plainProfileUrl?"":t}return""}},{key:"createMetaData",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"object",constraint:function(e){return 0<Object.keys(e).length&&!Array.isArray(e)}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.createUserMetaData({metaData:e},(function(e,n){e||r._updateMetaData(n),t(e,n)}))}),t)}},{key:"updateMetaData",value:function(e,t,n){var r,i=this,a=b(Z.parse(arguments,[new Z({type:"object",constraint:function(e){return!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"callback"})]),4);return r=a[0],e=a[1],t=a[2],n=a[3],le(this._iid,(function(n){r?n(r,null):A.get(i._iid).container.apiClient.updateUserMetaData({metaData:e,upsert:t},(function(e,t){e||i._updateMetaData(t),n(e,t)}))}),n)}},{key:"deleteMetaData",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){if(n)t(n,null);else{var i={};i[e]="",A.get(r._iid).container.apiClient.deleteUserMetaData({metaDataKey:e},(function(e,n){e||r._updateMetaData(i,!0),t(e,n)}))}}),t)}},{key:"deleteAllMetaData",value:function(e){var t=this;return le(this._iid,(function(e){var n=t.metaData;A.get(t._iid).container.apiClient.deleteAllUserMetaData({},(function(r,i){r||t._updateMetaData(n,!0),e(r,i)}))}),e)}},{key:"preferredLanguages",get:function(){return this._preferredLanguages}}],[{key:"objectify",value:function(e){var t=e.userId,n=void 0===t?null:t,r=e.nickname,i=void 0===r?"":r,a=e.plainProfileUrl,s=void 0===a?"":a,o=e.connectionStatus,u=void 0===o?"":o,l=e.lastSeenAt,c=void 0===l?0:l,d=e.metaData,f=void 0===d?{}:d,h=e.isActive,p=void 0===h||h,v=e.friendDiscoveryKey,g=void 0===v?null:v,m=e.friendName,y=void 0===m?null:m,_=e.preferredLanguages,b=void 0===_?null:_,C=e.requireAuth;return{user_id:n,nickname:i,profile_url:s,is_online:u,last_seen_at:c,metadata:f,is_active:p,friend_discovery_key:g,friend_name:y,preferred_languages:b,require_auth_for_profile_image:void 0!==C&&C}}},{key:"build",value:function(e,t,n,r,i,a,s,o,u,l,c){return this.objectify({userId:e,nickname:t,plainProfileUrl:n,connectionStatus:r,lastSeenAt:i,metaData:a,isActive:s,friendDiscoveryKey:o,friendName:u,preferredLanguages:l,requireAuth:c})}},{key:"buildFromSerializedData",value:function(e){var t=T.get(this._iid).User,n=ue.deserialize(e);return new t(t.objectify(n))}},{key:"NON_AVAILABLE",get:function(){return"nonavailable"}},{key:"ONLINE",get:function(){return"online"}},{key:"OFFLINE",get:function(){return"offline"}}]),e}(),pe={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},ve=function(){function e(t){s(this,e),this.url="",this.channelType=e.CHANNEL_TYPE_BASE,this.name="",this.coverUrl="",this.creator=null,this.createdAt=0,this.data=null,this.customType=null,this.isFrozen=!1,this.isEphemeral=!1,t&&(this.__update(t),t.__wk&&(this.__wk=t.__wk))}return u(e,[{key:"__update",value:function(e){this.url=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.name=e.hasOwnProperty("name")?String(e.name):"",this.coverUrl=e.hasOwnProperty("cover_url")?String(e.cover_url):"",this.createdAt=e.hasOwnProperty("created_at")?1e3*e.created_at:0,this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?e.custom_type:"",this.isFrozen=!!e.hasOwnProperty("freeze")&&e.freeze,this.isEphemeral=!!e.hasOwnProperty("is_ephemeral")&&e.is_ephemeral,e.hasOwnProperty("created_by")&&null!==e.created_by&&"object"===a(e.created_by)&&0<Object.keys(e.created_by).length?this.creator=new he(e.created_by):this.creator=null}},{key:"isGroupChannel",value:function(){var e=T.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){var e=T.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"createOperatorListQuery",value:function(){return new(T.get(this._iid).OperatorListQuery)(this)}},{key:"createMessageListQuery",value:function(){return new(T.get(this._iid).MessageListQuery)(this)}},{key:"createPreviousMessageListQuery",value:function(){return new(T.get(this._iid).PreviousMessageListQuery)(this)}},{key:"serialize",value:function(){return ue.serialize(this,(function(e){if(null!==e.lastMessage&&"object"===a(e.lastMessage)){var t=e.lastMessage;t.hasOwnProperty("_sender")&&(t.sender=t._sender,delete t._sender,e.lastMessage=t)}e.hasOwnProperty("_messageOffsetTimestamp")&&(e.messageOffsetTimestamp=e._messageOffsetTimestamp,delete e._messageOffsetTimestamp)}))}},{key:"getMessageChangeLogsByTimestamp",value:function(e,t,n,r){var i,a=this,s=b(Z.parse(arguments,[new Z({type:"number",constraint:function(e){return 0<=e}}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"callback"})]),5);return i=s[0],e=s[1],t=s[2],n=s[3],r=s[4],le(this._iid,(function(r){i?r(i,null):A.get(a._iid).container.apiClient.getMessageChangeLogs({channelUrl:a.url,ts:e,token:null,isOpenChannel:a.isOpenChannel(),includeMetaArray:t,includeReactions:n},(function(e,t){var n=null;if(!e){var i=T.get(a._iid).BaseChannel;n={updatedMessages:t.updated.map((function(e){return i.buildMessage(e,a)})),deletedMessageIds:t.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:t.has_more,token:t.next}}r(e,n)}))}),r)}},{key:"getMessageChangeLogsByToken",value:function(e,t,n,r){var i,a=this,s=b(Z.parse(arguments,[new Z({type:"string",nullable:!0}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"callback"})]),5);return i=s[0],e=s[1],t=s[2],n=s[3],r=s[4],le(this._iid,(function(r){i?r(i,null):A.get(a._iid).container.apiClient.getMessageChangeLogs({channelUrl:a.url,ts:null,token:e,isOpenChannel:a.isOpenChannel(),includeMetaArray:t,includeReactions:n},(function(e,t){var n=null;if(!e){var i=T.get(a._iid).BaseChannel;n={updatedMessages:t.updated.map((function(e){return i.buildMessage(e,a)})),deletedMessageIds:t.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:t.has_more,token:t.next}}r(e,n)}))}),r)}},{key:"getMessageChangeLogsSinceToken",value:function(e,t,n){var r,i=this,a=T.get(this._iid),s=a.BaseChannel,o=a.MessageChangeLogsParams,u=b(Z.parse(arguments,[new Z({type:"string",nullable:!0}),new Z({type:o}),new Z({type:"callback"})]),4);return r=u[0],e=u[1],t=u[2],n=u[3],le(this._iid,(function(n){r?n(r,null):A.get(i._iid).container.apiClient.getMessageChangeLogs(c({channelUrl:i.url,ts:null,token:e,isOpenChannel:i.isOpenChannel()},t),(function(e,t){var r=null;e||(r={updatedMessages:t.updated.map((function(e){return s.buildMessage(e,i)})),deletedMessageIds:t.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:t.has_more,token:t.next}),n(e,r)}))}),n)}},{key:"getMessageChangeLogsSinceTimestamp",value:function(e,t,n){var r,i=this,a=T.get(this._iid),s=a.BaseChannel,o=a.MessageChangeLogsParams,u=b(Z.parse(arguments,[new Z({type:"number",constraint:function(e){return 0<=e}}),new Z({type:o}),new Z({type:"callback"})]),4);return r=u[0],e=u[1],t=u[2],n=u[3],le(this._iid,(function(n){r?n(r,null):A.get(i._iid).container.apiClient.getMessageChangeLogs(c({channelUrl:i.url,timestamp:e,token:null,isOpenChannel:i.isOpenChannel()},t),(function(e,t){var r=null;e||(r={updatedMessages:t.updated.map((function(e){return s.buildMessage(e,i)})),deletedMessageIds:t.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:t.has_more,token:t.next}),n(e,r)}))}),n)}},{key:"getMyMutedInfo",value:function(e){var t=this;return le(this._iid,(function(e){var n=Dt.getInstance(t._iid);A.get(t._iid).container.apiClient.getMyMutedInfo({channelUrl:t.url,userId:n.currentUser?n.currentUser.userId:null,isGroupChannel:t.isGroupChannel()},(function(t,n){var r=null;t||(r={isMuted:n.is_muted,startAt:n.start_at,endAt:n.end_at,remainingDuration:n.remaining_duration,description:n.description}),e(t,r)}))}),e)}},{key:"_parseMessageListParams",value:function(e){for(var t=new(T.get(this._iid).MessageListParams),n=null,r=!1,i=0,a=0,s=!1,o="",u="",l=null,c=!1,d=!1,f=null,h=arguments.length,p=new Array(1<h?h-1:0),v=1;v<h;v++)p[v-1]=arguments[v];switch(e){case"prev":var g=b(Z.parse(p,[new Z({type:"number"}),new Z({type:"boolean"}),new Z({type:"number"}),new Z({type:"boolean"}),new Z({type:"string"}),new Z({type:"string"}),new Z({type:"array",optional:!0}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"callback"})]),11);n=g[0],g[1],r=g[2],i=g[3],s=g[4],o=g[5],u=g[6],l=g[7],c=g[8],d=g[9],f=g[10];break;case"next":var m=b(Z.parse(p,[new Z({type:"number"}),new Z({type:"boolean"}),new Z({type:"number"}),new Z({type:"boolean"}),new Z({type:"string"}),new Z({type:"string"}),new Z({type:"array",optional:!0}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"callback"})]),11);n=m[0],m[1],r=m[2],a=m[3],s=m[4],o=m[5],u=m[6],l=m[7],c=m[8],d=m[9],f=m[10];break;case"prevnext":var y=b(Z.parse(p,[new Z({type:"number"}),new Z({type:"number"}),new Z({type:"number"}),new Z({type:"boolean"}),new Z({type:"string"}),new Z({type:"string"}),new Z({type:"array",optional:!0}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"callback"})]),11);n=y[0],y[1],i=y[2],a=y[3],s=y[4],o=y[5],u=y[6],l=y[7],c=y[8],d=y[9],f=y[10],r=!0}return n?[null,f]:(t.isInclusive=r,t.prevResultSize=i,t.nextResultSize=a,t.reverse=s,t.messageType=o,t.customType=u,t.senderUserIds=l,t.includeMetaArray=c,t.includeReactions=d,[t,f])}},{key:"_getMessageList",value:function(e,t,n,r){var i,a=this,s=T.get(this._iid).MessageListParams,o=b(Z.parse(arguments,[new Z({type:"number"}),new Z({type:"string",constraint:function(e){return Object.values(pe).includes(e)}}),new Z({type:s,constraint:function(e){return e._validate()}}),new Z({type:"callback"})]),5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):A.get(a._iid).container.apiClient.getMessageList(c(c({channel:a,token:e,tokenType:t},n),{},{shouldReverse:n.reverse}),(function(e,t){if(e)r(e,null);else{var n=T.get(a._iid).BaseChannel,i=t.messages.map((function(e){return n.buildMessage(e,a)})).filter((function(e){return null!==e}));r(null,i)}}))}),r)}},{key:"getPreviousMessagesByTimestamp",value:function(e){var t=b(this._parseMessageListParams.apply(this,["prev"].concat(C(Z.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,pe.TIMESTAMP,n,r)}},{key:"getNextMessagesByTimestamp",value:function(e){var t=b(this._parseMessageListParams.apply(this,["next"].concat(C(Z.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,pe.TIMESTAMP,n,r)}},{key:"getPreviousAndNextMessagesByTimestamp",value:function(e){var t=b(this._parseMessageListParams.apply(this,["prevnext"].concat(C(Z.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,pe.TIMESTAMP,n,r)}},{key:"getPreviousMessagesByID",value:function(e){var t=b(this._parseMessageListParams.apply(this,["prev"].concat(C(Z.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,pe.MESSAGE_ID,n,r)}},{key:"getNextMessagesByID",value:function(e){var t=b(this._parseMessageListParams.apply(this,["next"].concat(C(Z.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,pe.MESSAGE_ID,n,r)}},{key:"getPreviousAndNextMessagesByID",value:function(e){var t=b(this._parseMessageListParams.apply(this,["prevnext"].concat(C(Z.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,pe.MESSAGE_ID,n,r)}},{key:"getMessagesByTimestamp",value:function(e,t,n){return this._getMessageList(e,pe.TIMESTAMP,t,n)}},{key:"getMessagesByMessageId",value:function(e,t,n){return this._getMessageList(e,pe.MESSAGE_ID,t,n)}},{key:"_sendUserMessage",value:function(e){var t=this,n=e.reqId,r=e.message,i=e.data,a=e.customType,s=e.metaArrays,o=e.mentionType,u=e.mentionedUserIds,l=e.pushNotificationDeliveryOption,c=e.rootMessageId,d=e.parentMessageId,f=e.translationTargetLanguages,h=e.silent,p=void 0!==h&&h,v=e.callback,g=T.get(this._iid),m=g.Command,y=g.UserMessage;n=n||m.generateRequestId();var _=Dt.getInstance(this._iid),b={};Array.isArray(f)&&f.forEach((function(e){return b[e]=""}));var C=y.objectify({messageId:0,reqId:n,user:_.currentUser||{},channel:this,message:r,data:i,customType:a,metaArrays:s,mentionType:o,mentionedUserIds:u,rootMessageId:c,parentMessageId:d,translations:b,silent:p,createdAt:(new Date).getTime()}),E=new y(C);if(E.requestState=_.MessageRequestState.PENDING,E.sendingStatus=_.MessageSendingStatus.PENDING,E.requestedMentionUserIds=u,!_.currentUser){var k=new U("Connection should be made first.",U.CONNECTION_REQUIRED),w=new y(C);return w.requestState=_.MessageRequestState.FAILED,w.sendingStatus=_.MessageSendingStatus.FAILED,w.requestedMentionUserIds=u,w.errorCode=k.code,v(k,w),E}var S=m.bMessage({channelUrl:this.url,message:r,data:i,customType:a,metaArrays:s,mentionType:o,mentionedUserIds:u,requestId:n,rootMessageId:c,parentMessageId:d,silent:p,translationTargetLanguages:f,pushNotificationDeliveryOption:l});return E.reqId=S.requestId,this.isGroupChannel()&&_.getConnectionState()!==_.ConnectionState.OPEN&&_.currentUser&&!_.connecting&&!_.reconnecting&&"string"==typeof a&&0===a.indexOf("SB_VIDEOCHAT")?A.get(_._iid).container.apiClient.sendUserMessage({channelUrl:this.url,isOpenChannel:this.isOpenChannel(),message:r,data:i,customType:a,translationTargetLanguages:f,metaArrays:s,mentionType:o,mentionedUserIds:u,pushNotificationDeliveryOption:l,rootMessageId:c,parentMessageId:d},(function(e,t){var n=null;e?((n=new y(C)).requestState=_.MessageRequestState.FAILED,n.sendingStatus=_.MessageSendingStatus.FAILED,e.code===U.REQUEST_CANCELED&&(n.sendingStatus=_.MessageSendingStatus.CANCELED),n.requestedMentionUserIds=u,n.errorCode=e.code):((n=new y(t)).requestState=_.MessageRequestState.SUCCEEDED,n.sendingStatus=_.MessageSendingStatus.SUCCEEDED),v(e,n)})):_.sendCommand(S,(function(e,n){if(_.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n){var i=new y(C);i.reqId=S.requestId,i.requestState=_.MessageRequestState.FAILED,i.sendingStatus=_.MessageSendingStatus.FAILED,n.code===U.REQUEST_CANCELED&&(i.sendingStatus=_.MessageSendingStatus.CANCELED),i.requestedMentionUserIds=u,i.errorCode=n.code,v(new U(n.message,n.code),i)}else{var a=new y(e.getJsonElement()),s=_.currentUser;if(s&&a._sender&&s.userId===a._sender.userId&&(s.nickname!==a._sender.nickname&&(s.nickname=a._sender.nickname),s.plainProfileUrl!==a._sender.plainProfileUrl&&(s.plainProfileUrl=a._sender.plainProfileUrl),$.deepEqual(s.metaData,a._sender.metaData)||(s.metaData=a._sender.metaData)),t.isGroupChannel())for(var o in t.lastMessage=a,_.channelHandlers)_.channelHandlers[o].onChannelChanged(t);a.requestState=_.MessageRequestState.SUCCEEDED,a.sendingStatus=_.MessageSendingStatus.SUCCEEDED,v(null,a)}})),E}},{key:"sendUserMessage",value:function(){var e=Z.toArray(arguments),t=e.pop(),n=null,r=null,i=T.get(this._iid).UserMessageParams;if("function"==typeof t)if(e[0]instanceof i)null===(r=e[0]).data&&(r.data=""),null===r.customType&&(r.customType="");else if("string"==typeof e[0])switch((r=new i).message=e[0],e.length){case 1:break;case 2:r.data=e[1]||"";break;case 3:r.data=e[1]||"",r.customType=e[2]||"";break;case 4:r.data=e[1]||"",r.customType=e[2]||"",r.translationTargetLanguages=Array.isArray(e[3])?e[3]:[e[3]];break;default:n=Z.error}else n=Z.error;else n=Z.error;var a=A.get(this._iid).container.isErrorFirstInCallback;return!n&&r._validate()&&r.message?this._sendUserMessage(c(c({},r),{},{metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,callback:function(e,n){a?t(e,n):t(n,e)}})):(a?t(Z.error,null):t(null,Z.error),null)}},{key:"resendUserMessage",value:function(e,t){var n=this,r=T.get(this._iid),i=r.UserMessage,s=r.UserMessageParams,o=null,u=b(Z.parse(arguments,[new Z({type:i,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===n.url&&"string"==typeof e.message&&"string"==typeof e.data&&"string"==typeof e.customType&&"object"===a(e.translations)&&!Array.isArray(e.translations)}}),new Z({type:"callback"})]),3);return o=u[0],e=u[1],t=u[2],le(this._iid,(function(t){if(o)o.message+=" Please check if the failed message is resend-able with `message.isResendable().`",t(o,null);else{var r=Object.keys(e.translations),i=s.PushNotificationDeliveryOption.DEFAULT;n._sendUserMessage(c(c({},e),{},{mentionedUserIds:e.requestedMentionUserIds,translationTargetLanguages:r,pushNotificationDeliveryOption:i,reqId:e.reqId,callback:t}))}}),t)}},{key:"updateUserMessage",value:function(e,t,n,r,i){var a=this,s=T.get(this._iid),o=s.Command,u=s.UserMessage,l=s.UserMessageParams,d=arguments,f=null,h=null;if("number"==typeof e)switch(d.length){case 3:var p=b(Z.parse(d,[new Z({type:"number"}),new Z({type:l}),new Z({type:"callback"})]),4);f=p[0],e=p[1],h=p[2],i=p[3];break;case 5:h=new l;var v=b(Z.parse(d,[new Z({type:"number"}),new Z({type:"string",nullable:!0}),new Z({type:"string",nullable:!0}),new Z({type:"string",nullable:!0}),new Z({type:"callback"})]),6);f=v[0],e=v[1],t=v[2],n=v[3],r=v[4],i=v[5],h.message=t,h.data=n,h.customType=r}return le(this._iid,(function(t){if(!f&&h&&h._validate()){var n=o.bUpdateUserMessage(c(c({channelUrl:a.url,messageId:e},h),{},{mentionType:h._mentionType,mentionedUserIds:h._mentionedUserIds})),r=Dt.getInstance(a._iid);r.sendCommand(n,(function(e,n){if(r.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}var a=null;n||(a=new u(e.getJsonElement())),t(n,a)}))}else t(Z.error,null)}),i)}},{key:"translateUserMessage",value:function(e,t,n){var r,i=this,a=Dt.getInstance(this._iid),s=T.get(this._iid).UserMessage,o=b(Z.parse(arguments,[new Z({type:s,constraint:function(e){return e.channelUrl===i.url&&e.sendingStatus===a.MessageSendingStatus.SUCCEEDED}}),new Z({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new Z({type:"callback"})]),4);return r=o[0],e=o[1],t=o[2],n=o[3],le(this._iid,(function(n){r?n(r,null):A.get(i._iid).container.apiClient.translateUserMessage({channelUrl:i.url,isOpenChannel:i.isOpenChannel(),messageId:e.messageId,translationTargetLanguages:t},(function(e,t){var r=null;e||(r=new s(t)),n(e,r)}))}),n)}},{key:"_parseFileMessageArguments",value:function(e){var t=T.get(this._iid),n=t.BaseMessageParams,r=t.FileMessageParams,i={error:null,file:null,name:null,type:null,size:null,data:"",customType:"",thumbnailSizes:[],metaArrays:[],mentionType:n.MentionType.USERS,mentionedUserIds:[],pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,rootMessageId:null,parentMessageId:null,progressHandler:null,silent:!1,callback:null};if("function"==typeof e[e.length-1]&&(i.callback=e.pop()),"function"==typeof e[e.length-1]&&(i.progressHandler=e.pop()),e[0]instanceof r)i.file=e[0].file||e[0].fileUrl,i.name=e[0].fileName,i.type=e[0].mimeType,i.size=e[0].fileSize,i.data=e[0].data,i.customType=e[0].customType,i.thumbnailSizes=e[0].thumbnailSizes,i.metaArrays=e[0].metaArrays,i.mentionType=e[0]._mentionType,i.mentionedUserIds=e[0]._mentionedUserIds,i.pushNotificationDeliveryOption=e[0].pushNotificationDeliveryOption?e[0].pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,i.rootMessageId=e[0].rootMessageId,i.parentMessageId=e[0].parentMessageId,i.silent=e[0].silent,e[0]._validate()||(i.error=Z.error);else if($.isFile(e[0])||"string"==typeof e[0]){switch(i.file=e[0],e.length){case 1:break;case 2:i.data=e[1];break;case 3:i.data=e[1],i.customType=e[2];break;case 4:i.data=e[1],i.customType=e[2],i.thumbnailSizes=e[3];break;case 5:i.name=e[1],i.type=e[2],i.size=e[3],i.data=e[4];break;case 6:i.name=e[1],i.type=e[2],i.size=e[3],i.data=e[4],i.customType=e[5];break;case 7:i.name=e[1],i.type=e[2],i.size=e[3],i.data=e[4],i.customType=e[5],i.thumbnailSizes=e[6]}var a=b(Z.parse([i.file,i.name,i.type,i.size,i.data,i.customType,i.thumbnailSizes],[new Z({type:["file","string"]}),new Z({type:"string",nullable:!0}),new Z({type:"string",nullable:!0}),new Z({type:"number",nullable:!0,constraint:function(e){return 0<=e}}),new Z({type:"string",nullable:!0}),new Z({type:"string",nullable:!0}),new Z({type:"array"})]),8);i.error=a[0],i.file=a[1],i.name=a[2],i.type=a[3],i.size=a[4],i.data=a[5],i.customType=a[6],i.thumbnailSizes=a[7]}else i.error=Z.error;return $.isFile(i.file)&&(i.name=i.name||i.file.name,i.type=i.type||i.file.type,i.size=i.size||i.file.size),i}},{key:"_createTempFileMessage",value:function(e){try{var t=Dt.getInstance(this._iid),n=T.get(this._iid),r=n.Command,i=n.FileMessage,a=i.objectify(c(c({},e),{},{messageId:0,reqId:r.generateRequestId(),user:t.currentUser||{},channel:this,plainUrl:"string"==typeof e.file?e.file:"",thumbnails:e.thumbnailSizes.map((function(e){return{url:"",plainUrl:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}})),sendingStatus:t.MessageSendingStatus.PENDING,createdAt:(new Date).getTime()}));return new i(a)}catch(e){return null}}},{key:"sendFileMessage",value:function(){var e=this._parseFileMessageArguments(Z.toArray(arguments)),t=null,n=T.get(this._iid).Command.generateRequestId();e.error||((t=this._createTempFileMessage(e)).requestedMentionUserIds=e.mentionedUserIds,n=t.reqId);var r=Dt.getInstance(this._iid);r&&r.currentUser||(e.error=new U("Connection should be made first.",U.CONNECTION_REQUIRED));var i=T.get(this._iid).FileMessageQueue;return i.create(this).addJob(new i.Job({fileInfo:e,pendingMessage:t,requestId:n,error:e.error,response:null})),t}},{key:"sendFileMessages",value:function(e,t){var n=this,r=1<arguments.length&&void 0!==t?t:{},i=r.progress?r.progress:function(){},a=r.sent?r.sent:function(){},s=r.complete?r.complete:function(){};if(Array.isArray(e)&&0<e.length&&e.length<=20){var o=[];return e.forEach((function(t,r){o.push(n.sendFileMessage(t,i,(function(t,n){a(t,n),r===e.length-1&&s(null)})))})),o}return s(Z.error),null}},{key:"resendFileMessage",value:function(e,t,n){var r=this,i=T.get(this._iid),a=i.FileMessage,s=i.FileMessageParams,o=null,u=b(Z.parse(arguments,[new Z({type:a,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===r.url&&"string"==typeof e.data&&"string"==typeof e.customType&&Array.isArray(e.thumbnails)}}),new Z({type:"file",optionalIf:function(e){return!!e[0].url},defaultValue:null}),new Z({type:"callback"})]),4);return o=u[0],e=u[1],t=u[2],n=u[3],le(this._iid,(function(n){if(o)o.message+=" Please check if the failed message is resend-able with `message.isResendable().`",n(o,null);else{var i=new s;e.url?i.fileUrl=e.url:i.file=t,i.fileName=e.name,i.fileSize=e.size,i.mimeType=e.type,i.data=e.data,i.customType=e.customType,i.mentionType=e.mentionType,i.mentionedUserIds=e.requestedMentionUserIds,i.metaArrays=e.metaArrays,i.thumbnailSizes=e.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),r.sendFileMessage(i,n)}}),n)}},{key:"updateFileMessage",value:function(e,t,n,r){var i=this,a=T.get(this._iid),s=a.Command,o=a.FileMessage,u=a.FileMessageParams,l=arguments,d=null,f=null;if("number"==typeof e)switch(l.length){case 3:var h=b(Z.parse(l,[new Z({type:"number"}),new Z({type:u}),new Z({type:"callback"})]),4);d=h[0],e=h[1],f=h[2],r=h[3],f&&(f._isUpdate=!0);break;case 4:f=new u;var p=b(Z.parse(l,[new Z({type:"number"}),new Z({type:"string",nullable:!0}),new Z({type:"string",nullable:!0}),new Z({type:"callback"})]),5);d=p[0],e=p[1],t=p[2],n=p[3],r=p[4],f.data=t,f.customType=n,f._isUpdate=!0}return le(this._iid,(function(t){if(!d&&f&&f._validate()){var n=s.bUpdateFileMessage(c(c({channelUrl:i.url,messageId:e},f),{},{mentionType:f._mentionType,mentionedUserIds:f._mentionedUserIds})),r=Dt.getInstance(i._iid);r.sendCommand(n,(function(e,n){if(r.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}var a=null;n||(a=new o(e.getJsonElement())),t(n,a)}))}else t(Z.error,null)}),r)}},{key:"cancelUploadingFileMessage",value:function(e,t){var n,r=b(Z.parse(arguments,[new Z({type:["number","string"]}),new Z({type:"callback"})]),3);n=r[0],e=r[1],t=r[2];var i=A.get(this._iid).container.isErrorFirstInCallback;return n?(i?t(n,null):t(null,n),!1):T.get(this._iid).FileMessageQueue.create(this).cancelUploadItemByRequestId(e,(function(e,n){return i?t(e,n):t(n,e)}))}},{key:"addReaction",value:function(e,t,n){var r,i=this,a=Dt.getInstance(this._iid),s=T.get(this._iid).ReactionEvent,o=b(Z.parse(arguments,[new Z({type:fe}),new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"callback"})]),4);return r=o[0],e=o[1],t=o[2],n=o[3],le(this._iid,(function(n){r?n(r,null):e.sendingStatus===a.MessageSendingStatus.SUCCEEDED?A.get(i._iid).container.apiClient.addReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},(function(t,r){var i=null;t||(i=s.createFromJson(c(c({},r),{},{msg_id:e.messageId}))),n(t,i)})):n(new U("Cannot add reaction to a non-succeeded message.",U.REQUEST_FAILED),null)}),n)}},{key:"deleteReaction",value:function(e,t,n){var r,i=this,a=Dt.getInstance(this._iid),s=T.get(this._iid).ReactionEvent,o=b(Z.parse(arguments,[new Z({type:fe}),new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"callback"})]),4);return r=o[0],e=o[1],t=o[2],n=o[3],le(this._iid,(function(n){r?n(r,null):e.sendingStatus===a.MessageSendingStatus.SUCCEEDED?A.get(i._iid).container.apiClient.deleteReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},(function(t,r){var i=null;t||(i=s.createFromJson(c(c({},r),{},{msg_id:e.messageId}))),n(t,i)})):n(new U("Cannot remove reaction to a non-succeeded message.",U.REQUEST_FAILED),null)}),n)}},{key:"deleteMessage",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"object",constraint:function(e){return!Array.isArray(e)&&null!==e&&e.hasOwnProperty("messageId")}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.deleteMessage({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),messageId:e.messageId},(function(e,n){return t(e,null)}))}),t)}},{key:"copyUserMessage",value:function(t,n,r){var i,a=T.get(this._iid),s=(a.Command,a.UserMessage),o=a.BaseMessageParams,u=b(Z.parse(arguments,[new Z({type:e}),new Z({type:s}),new Z({type:"callback"})]),4);i=u[0],t=u[1],n=u[2],r=u[3];var l=A.get(this._iid).container.isErrorFirstInCallback;if(i)return l?r(Z.error,null):r(null,Z.error),null;if(this.url!==n.channelUrl){var d=new U("The message does not belong to this channel",U.INVALID_PARAMETER);return l?r(d,null):r(null,d),null}var f={},h=Object.keys(n.translations);h.forEach((function(e){return f[e]=""}));var p=o.PushNotificationDeliveryOption.DEFAULT;return t._sendUserMessage(c(c({},n),{},{reqId:null,pushNotificationDeliveryOption:p,translationTargetLanguages:h,rootMessageId:null,parentMessageId:null,parentMessageText:null,callback:r}))}},{key:"copyFileMessage",value:function(t,n,r){var i,a=T.get(this._iid),s=a.Command,o=(a.GroupChannel,a.FileMessage),u=a.BaseMessageParams,l=(a.FileMessageParams,a.User),c=b(Z.parse(arguments,[new Z({type:e}),new Z({type:o}),new Z({type:"callback"})]),4);i=c[0],t=c[1],n=c[2],r=c[3];var d=A.get(this._iid),f=d.container.isErrorFirstInCallback;if(i)return f?r(Z.error,null):r(null,Z.error),null;if(this.url!==n.channelUrl){var h=new U("The message does not belong to this channel");return f?r(h,null):r(null,h),null}var p=Dt.getInstance(this._iid),v=n.url,g=n.name,m=n.type,y=n.size,_=n.data,C=n.customType,E=n.mentionType,k=n.mentionedUserIds,w=n.mentionedUsers,S=n.metaArrays,I=n.thumbnails,M=n.requireAuth,O=n.messageSurvivalSeconds,R=n.silent,N=s.generateRequestId(),L=p.currentUser||{},P=t.url,D=t.isOpenChannel(),x=w.filter((function(e){return new l(l.objectify(e))})),F=u.PushNotificationDeliveryOption.DEFAULT,H=o.objectify({messageId:0,reqId:N,user:L,channel:t,plainUrl:v,name:g,type:m,size:y,data:_,customType:C,mentionType:E,mentionedUserIds:k,mentionedUsers:x,requestedMentionUserIds:k,metaArrays:S,thumbnails:I,requireAuth:M,messageSurvivalSeconds:O,silent:R,createdAt:(new Date).getTime()}),j=new o(H);if(j.requestState=p.MessageRequestState.PENDING,j.sendingStatus=p.MessageSendingStatus.PENDING,!p.currentUser){var G=new U("Connection should be made first.",U.CONNECTION_REQUIRED),B=new o(H);return B.requestState=p.MessageRequestState.FAILED,B.sendingStatus=p.MessageSendingStatus.FAILED,B.errorCode=G.code,f?r(G,B):r(B,G),j}var q=s.bFile({requestId:N,channelUrl:P,url:v,name:g,type:m,size:y,data:_,customType:C,metaArrays:S,mentionType:E,mentionedUserIds:k,thumbnailSizes:I,requireAuth:M,pushNotificationDeliveryOption:F,silent:R});return p.getConnectionState()===p.ConnectionState.OPEN||p.connecting||p.reconnecting?p.sendCommand(q,(function(e,n){if(p.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}if(n)if(n.code!==U.INVALID_PARAMETER){var a=new o(H);a.requestState=p.MessageRequestState.FAILED,a.sendingStatus=p.MessageSendingStatus.FAILED,n.code!==U.FILE_UPLOAD_CANCEL_FAILED&&n.code!==SendBridException.REQUEST_CANCELED||(a.sendingStatus=p.MessageSendingStatus.CANCELED),a.errorCode=n.code,f?r(n,a):r(a,n)}else f?r(n,null):r(null,n);else{var s=new o(e.getJsonElement()),u=s._sender;if(L&&u&&L.userId===u.userId&&(L.nickname!==u.nickname&&(L.nickname=u.nickname),L.plainProfileUrl!==u.plainProfileUrl&&(L.plainProfileUrl=u.plainProfileUrl)),t.isGroupChannel())for(var l in t.lastMessage=s,p.channelHandlers)p.channelHandlers[l].onChannelChanged(t);f?r(null,s):r(s,null)}})):d.container.apiClient.sendFileMessage({channelUrl:P,isOpenChannel:D,fileUrl:v,fileName:g,fileType:m,fileSize:y,data:_,customType:C,metaArrays:S,mentionType:E,mentionedUserIds:k,thumbnailSizes:I,requireAuth:M,pushNotificationDeliveryOption:F},(function(e,n){if(e)if(e.code!==U.INVALID_PARAMETER){var i=new o(commnad.getJsonElement());i.requestState=p.MessageRequestState.FAILED,i.sendingStatus=p.MessageSendingStatus.FAILED,e.code!==U.FILE_UPLOAD_CANCEL_FAILED&&e.code!==SendBridException.REQUEST_CANCELED||(i.sendingStatus=p.MessageSendingStatus.CANCELED),i.errorCode=e.code,f?r(e,i):r(i,e)}else f?r(e,null):r(null,e);else{var a=new o(n),s=a._sender;if(L&&s&&L.userId===s.userId&&(L.nickname!==s.nickname&&(L.nickname=s.nickname),L.plainProfileUrl!==s.plainProfileUrl&&(L.plainProfileUrl=s.plainProfileUrl)),t.isGroupChannel())for(var u in t.lastMessage=a,p.channelHandlers)p.channelHandlers[u].onChannelChanged(t);f?r(null,a):r(a,null)}})),j}},{key:"addOperators",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.addOperators({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),operatorUserIds:e},(function(e,n){return t(e,n)}))}),t)}},{key:"removeOperators",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.removeOperators({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),operatorUserIds:e},(function(e,n){return t(e,n)}))}),t)}},{key:"getMetaCounters",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.getMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),keys:e},(function(e,n){return t(e,n)}))}),t)}},{key:"getAllMetaCounters",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.getMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},(function(t,n){return e(t,n)}))}),e)}},{key:"createMetaCounters",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.createMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaCounter:e},(function(e,n){return t(e,n)}))}),t)}},{key:"updateMetaCounters",value:function(e,t,n){var r,i=this,a=b(Z.parse(arguments,[new Z({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"callback"})]),4);return r=a[0],e=a[1],t=a[2],n=a[3],le(this._iid,(function(n){r?n(r,null):A.get(i._iid).container.apiClient.updateMetaCounters({channelUrl:i.url,isOpenChannel:i.isOpenChannel(),metaCounter:e,upsert:t,mode:"set"},(function(e,t){return n(e,t)}))}),n)}},{key:"increaseMetaCounters",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.updateMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaCounter:e,upsert:!1,mode:"increase"},(function(e,n){return t(e,n)}))}),t)}},{key:"decreaseMetaCounters",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.updateMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaCounter:e,upsert:!1,mode:"decrease"},(function(e,n){var r=null;if(!e)for(var i in r={},n)r[i]=n[i];t(e,r)}))}),t)}},{key:"deleteMetaCounter",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.deleteMetaCounter({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),key:e},(function(e,n){return t(e,n)}))}),t)}},{key:"deleteAllMetaCounters",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.deleteAllMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},(function(t,n){return e(t,n)}))}),e)}},{key:"getMetaData",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.getMetaData({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),keys:e},(function(e,n){return t(e,n)}))}),t)}},{key:"getAllMetaData",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.getMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},(function(t,n){return e(t,n)}))}),e)}},{key:"createMetaData",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.createMetaData({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaData:e},(function(e,n){return t(e,n)}))}),t)}},{key:"updateMetaData",value:function(e,t,n){var r,i=this,a=b(Z.parse(arguments,[new Z({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length}}),new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"callback"})]),4);return r=a[0],e=a[1],t=a[2],n=a[3],le(this._iid,(function(n){r?n(r,null):A.get(i._iid).container.apiClient.updateMetaData({channelUrl:i.url,isOpenChannel:i.isOpenChannel(),metaData:e,upsert:t},(function(e,t){return n(e,t)}))}),n)}},{key:"deleteMetaData",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.deleteMetaData({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),key:e},(function(e,n){return t(e,n)}))}),t)}},{key:"deleteAllMetaData",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.deleteAllMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},(function(t,n){return e(t,n)}))}),e)}},{key:"_updateMessageMetaArray",value:function(e,t,n,r){var i=this;return le(this._iid,(function(r){var a=T.get(i._iid),s=a.Command,o=a.UserMessage,u=a.FileMessage,l=a.AdminMessage,c=null;if(t.isUserMessage()?c=s.bUpdateUserMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n}):t.isFileMessage()&&(c=s.bUpdateFileMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n})),c){var d=Dt.getInstance(i._iid);d.sendCommand(c,(function(e,n){if(d.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}var a=null;n||(t.isUserMessage()?a=new o(e.getJsonElement()):t.isFileMessage()?a=new u(e.getJsonElement()):t.isAdminMessage()&&(a=new l(e.getJsonElement()))),r(n,a)}))}else r(Z.error,null)}),r)}},{key:"createMessageMetaArrayKeys",value:function(e,t,n){var r,i=T.get(this._iid).MessageMetaArray,a=b(Z.parse(arguments,[new Z({type:fe}),new Z({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e&&""!==e}))}}),new Z({type:"callback"})]),4);if(r=a[0],e=a[1],t=a[2],n=a[3],r)return le(this._iid,(function(e){e(r,null)}),n);var s=[];if(Array.isArray(t))for(var o=0;o<t.length;o++){var u=t[o];s.push(new i(u,[]))}return this._updateMessageMetaArray(this.url,e,{array:s.map((function(e){return e.encode()})),mode:"add",upsert:!0},n)}},{key:"deleteMessageMetaArrayKeys",value:function(e,t,n){var r,i=T.get(this._iid).MessageMetaArray,a=b(Z.parse(arguments,[new Z({type:fe}),new Z({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e&&""!==e}))}}),new Z({type:"callback"})]),4);if(r=a[0],e=a[1],t=a[2],n=a[3],r)return le(this._iid,(function(e){e(r,null)}),n);var s=[];if(Array.isArray(t))for(var o=0;o<t.length;o++){var u=t[o];s.push(new i(u,[]))}return this._updateMessageMetaArray(this.url,e,{array:s.map((function(e){return e.encode()})),mode:"remove",upsert:!0},n)}},{key:"addMessageMetaArrayValues",value:function(e,t,n){var r,i=T.get(this._iid).MessageMetaArray,a=b(Z.parse(arguments,[new Z({type:fe}),new Z({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&0<e.length&&e.every((function(e){return e instanceof i}))||0<Object.keys(e).length&&Object.keys(e).every((function(t){return Array.isArray(e[t])&&0<e[t].length&&e[t].every((function(e){return"string"==typeof e&&0<e.length}))})))}}),new Z({type:"callback"})]),4);if(r=a[0],e=a[1],t=a[2],n=a[3],r)return le(this._iid,(function(e){e(r,null)}),n);var s=Array.isArray(t)?t.map((function(e){return e.encode()})):Object.keys(t).map((function(e){return{key:e,value:t[e]}}));return this._updateMessageMetaArray(this.url,e,{array:s,mode:"add",upsert:!0},n)}},{key:"removeMessageMetaArrayValues",value:function(e,t,n){var r,i=T.get(this._iid).MessageMetaArray,a=b(Z.parse(arguments,[new Z({type:fe}),new Z({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&0<e.length&&e.every((function(e){return e instanceof i}))||0<Object.keys(e).length&&Object.keys(e).every((function(t){return Array.isArray(e[t])&&0<e[t].length&&e[t].every((function(e){return"string"==typeof e&&0<e.length}))})))}}),new Z({type:"callback"})]),4);if(r=a[0],e=a[1],t=a[2],n=a[3],r)return le(this._iid,(function(e){e(r,null)}),n);var s=Array.isArray(t)?t.map((function(e){return e.encode()})):Object.keys(t).map((function(e){return{key:e,value:t[e]}}));return this._updateMessageMetaArray(this.url,e,{array:s,mode:"remove",upsert:!0},n)}},{key:"report",value:function(e,t,n){var r,i=this,a=T.get(this._iid).BaseChannel,s=b(Z.parse(arguments,[new Z({type:a.ReportCategory}),new Z({type:"string"}),new Z({type:"callback"})]),4);return r=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,(function(n){if(r)n(r,null);else{var a=Dt.getInstance(i._iid);A.get(i._iid).container.apiClient.report({channelUrl:i.url,isOpenChannel:i.isOpenChannel(),reportCategory:e,reportingUserId:a.currentUser?a.currentUser.userId:null,reportDescription:t},(function(e,t){n(e,null)}))}}),n)}},{key:"reportUser",value:function(e,t,n,r){var i,a=this,s=T.get(this._iid).BaseChannel,o=b(Z.parse(arguments,[new Z({type:he}),new Z({type:s.ReportCategory}),new Z({type:"string"}),new Z({type:"callback"})]),5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){if(i)r(i,null);else{var s=Dt.getInstance(a._iid);A.get(a._iid).container.apiClient.reportUser({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:t,offendingUserId:e.userId,reportingUserId:s.currentUser?s.currentUser.userId:null,reportDescription:n},(function(e,t){r(e,null)}))}}),r)}},{key:"reportMessage",value:function(e,t,n,r){var i,a=this,s=T.get(this._iid).BaseChannel,o=b(Z.parse(arguments,[new Z({type:fe}),new Z({type:s.ReportCategory}),new Z({type:"string"}),new Z({type:"callback"})]),5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){if(i)r(i,null);else{var s=Dt.getInstance(a._iid);A.get(a._iid).container.apiClient.reportMessage({messageId:e.messageId,channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:t,offendingUserId:e.sender.userId,reportingUserId:s.currentUser?s.currentUser.userId:null,reportDescription:n},(function(e,t){r(e,null)}))}}),r)}}],[{key:"buildMessage",value:function(e,t){var n=T.get(this._iid),r=n.UserMessage,i=n.FileMessage,a=n.AdminMessage;if(e)switch(e.hasOwnProperty("channel_type")||(e.channel_type=t.channelType),e.type){case"MESG":return new r(e);case"FILE":var s=e.file;return new i(c(c({},e),{},{url:String(s.url),name:String(s.name),type:String(s.type),size:parseInt(s.size),data:String(s.data)}));case"BRDM":case"ADMM":return new a(e)}return null}},{key:"CHANNEL_TYPE_OPEN",get:function(){return"open"}},{key:"CHANNEL_TYPE_GROUP",get:function(){return"group"}},{key:"CHANNEL_TYPE_BASE",get:function(){return"base"}},{key:"MessageTypeFilter",get:function(){return{ALL:"",USER:"MESG",FILE:"FILE",ADMIN:"ADMM"}}},{key:"ReportCategory",get:function(){return{SPAM:"spam",HARASSING:"harassing",SUSPICIOUS:"suspicious",INAPPROPRIATE:"inappropriate"}}}]),e}(),ge=function(){function e(t){s(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0,this.data=t.hasOwnProperty("data")?t.data:null,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):ve.CHANNEL_TYPE_GROUP)}return u(e,[{key:"isGroupChannel",value:function(){return this.channelType===ve.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){return this.channelType===ve.CHANNEL_TYPE_OPEN}}]),e}();function me(e){s(this,me),e&&(this.category=e.hasOwnProperty("cat")?parseInt(e.cat):0)}ge.CATEGORY_NONE=0,ge.CATEGORY_CHANNEL_ENTER=10102,ge.CATEGORY_CHANNEL_EXIT=10103,ge.CATEGORY_USER_CHANNEL_MUTE=10201,ge.CATEGORY_USER_CHANNEL_UNMUTE=10200,ge.CATEGORY_USER_CHANNEL_BAN=10601,ge.CATEGORY_USER_CHANNEL_UNBAN=10600,ge.CATEGORY_CHANNEL_FREEZE=10701,ge.CATEGORY_CHANNEL_UNFREEZE=10700,ge.CATEGORY_TYPING_START=10900,ge.CATEGORY_TYPING_END=10901,ge.CATEGORY_CHANNEL_JOIN=1e4,ge.CATEGORY_CHANNEL_LEAVE=10001,ge.CATEGORY_CHANNEL_OPERATOR_UPDATE=10002,ge.CATEGORY_CHANNEL_INVITE=10020,ge.CATEGORY_CHANNEL_DECLINE_INVITE=10022,ge.CATEGORY_CHANNEL_PROP_CHANGED=11e3,ge.CATEGORY_CHANNEL_DELETED=12e3,ge.CATEGORY_CHANNEL_META_DATA_CHANGED=11100,ge.CATEGORY_CHANNEL_META_COUNTERS_CHANGED=11200,ge.CATEGORY_CHANNEL_HIDE=13e3,ge.CATEGORY_CHANNEL_UNHIDE=13001,me.CATEGORY_USER_BLOCK=20001,me.CATEGORY_USER_UNBLOCK=2e4,me.CATEGORY_FRIEND_DISCOVERED=20900;var ye=function(){function e(t){s(this,e),this.sb=t,this.cls=T.get(this.sb._iid)}return u(e,[{key:"onRawCommandReceived",value:function(e){var t=this,n=this.cls,r=n.Command,i=n.User,s=n.Member,o=n.BaseChannel,u=n.GroupChannel,l=n.OpenChannel,c=n.UserMessage,d=n.FileMessage,f=n.AdminMessage,h=n.BaseMessageParams,p=n.ReactionEvent,v=n.ReadStatus,g=n.ThreadInfoUpdateEvent,m=A.get(this.sb._iid),y=m.container,_=y.pinger,b=y.auth,C=y.subscribedUnreadMessageCount,E=y.sessionManager,k=y.ackStateMap,S=new r(e),I=S.getJsonElement();if(I.hasOwnProperty("unread_cnt")&&"object"===a(I.unread_cnt)){var M=!1,O=I.unread_cnt.ts;if("number"==typeof O&&O>C.ts){if(C.all!==I.unread_cnt.all&&(M=!0),C.all=0<=I.unread_cnt.all?I.unread_cnt.all:0,I.unread_cnt.custom_types)for(var T in I.unread_cnt.custom_types)C.custom_types[T]!==I.unread_cnt.custom_types[T]&&(M=!0),C.custom_types[T]=I.unread_cnt.custom_types[T];M=M&&0<C.ts,C.ts=O}if(M)for(var R in this.sb.userEventHandlers)this.sb.userEventHandlers[R].onTotalUnreadMessageCountUpdated(C.all,C.custom_types)}var N=S.requestId;if(N){var L=k[N];if(L){clearTimeout(L.timer);var P=L.handler;P&&("EROR"===S.command?P(new U(I.message,I.code),null):P(null,S)),k.hasOwnProperty(N)&&delete k[N]}}else switch(_&&"LOGI"!==S.command&&_.refreshTimer(),S.command){case"LOGI":this.sb.loginTimer&&(clearTimeout(this.sb.loginTimer),this.sb.loginTimer=null,this.sb.onLoginTimerCancel=null,I.hasOwnProperty("error")?(this.sb.isSessionOpened=!1,this.sb.loginHandler(new U(I.message,I.code),null)):(this.sb.isSessionOpened=!0,I.hasOwnProperty("key")&&(b.sessionKey=I.key),I.hasOwnProperty("ekey")&&(b.eKey=I.ekey),I.hasOwnProperty("user_id")&&(this.sb.currentUser=new i(I)),"number"==typeof I.ping_interval&&0<I.ping_interval&&m.set("pingInterval",1e3*I.ping_interval),"number"==typeof I.pong_timeout&&0<I.pong_timeout&&m.set("pongTimeout",1e3*I.pong_timeout),"number"==typeof I.login_ts&&m.set("connectedAt",1e3*I.login_ts),"number"==typeof I.max_unread_cnt_on_super_group?m.set("maxUnreadCountOfSuperGroupChannel",I.max_unread_cnt_on_super_group):m.set("maxUnreadCountOfSuperGroupChannel",w.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL),I.profile_image_encryption&&m.set("profileImageEncryption",!0),_&&_.start(),I.hasOwnProperty("file_upload_size_limit")&&I.hasOwnProperty("premium_feature_list")&&I.hasOwnProperty("emoji_hash")&&m.set("appInfo",new se(I)),this.sb.loginHandler(null,this.sb.currentUser)),this.sb.connecting=!1,this.sb.reconnecting=!1);break;case"EXPR":I.hasOwnProperty("expires_in")&&"number"==typeof I.expires_in&&0<I.expires_in&&E.refresh((function(){}));break;case"MESG":case"FILE":case"BRDM":case"ADMM":var D=null;if("MESG"===S.command?D=new c(I):"FILE"===S.command?D=new d(I):"BRDM"!==S.command&&"ADMM"!==S.command||(D=new f(I)),D){var x=this.sb.currentUser?this.sb.currentUser.userId:null,F=D.silent,H=!!I.force_update_last_message,j=D._sender&&D._sender.userId===x;if(D.isGroupChannel()){var G=r.bMessageAck({channelUrl:D.channelUrl,messageId:D.messageId});this.sb.sendCommand(G);var q=u.cachedChannels.hasOwnProperty(D.channelUrl);u.getChannel(D.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){if(e.isHidden=!1,e.hiddenState=u.HiddenState.UNHIDDEN,u.cachedChannels[e.url]=e,D._sender&&e.memberMap.hasOwnProperty(D._sender.userId)){var i=e.memberMap[D._sender.userId];i.nickname!==D._sender.nickname&&(i.nickname=D._sender.nickname),i.plainProfileUrl!==D._sender.plainProfileUrl&&(i.plainProfileUrl=D._sender.plainProfileUrl),$.deepEqual(i.metaData,D._sender.metaData)||(i.metaData=D._sender.metaData),i.isBlockedByMe!==D._sender.isBlockedByMe&&(i.isBlockedByMe=D._sender.isBlockedByMe)}var a=t.sb.currentUser;a&&j&&(a.nickname!==D._sender.nickname&&(a.nickname=D._sender.nickname),a.plainProfileUrl!==D._sender.plainProfileUrl&&(a.plainProfileUrl=D._sender.plainProfileUrl),$.deepEqual(a.metaData,D._sender.metaData)||(a.metaData=D._sender.metaData));var s=!1;if(D.mentionType===h.MentionType.CHANNEL)j||(s=!0);else if(D.mentionType===h.MentionType.USERS)for(var o=0;o<D.mentionedUsers.length;o++)if(!j&&D.mentionedUsers[o].userId===x){s=!0;break}if(F&&!j||(e.isEphemeral||q)&&((!e.lastMessage||e.lastMessage.createdAt<D.createdAt)&&(e.lastMessage=D),j||e._setGroupChannelUnreadCount(e.unreadMessageCount+1,e.unreadMentionCount+(s?1:0))),H&&(!e.lastMessage||e.lastMessage.createdAt<D.createdAt)&&(e.lastMessage=D),!F||j)for(var l in t.sb.channelHandlers)t.sb.channelHandlers[l].onChannelChanged(e);for(var c in t.sb.channelHandlers){var d=t.sb.channelHandlers[c];d.onMessageReceived(e,D),s&&d.onMentionReceived(e,D)}}}))}else D.isOpenChannel()&&l.getChannel(D.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var i=!1;if(D.mentionType===h.MentionType.CHANNEL)i=!0;else if(D.mentionType===h.MentionType.USERS)for(var a=0;a<D.mentionedUsers.length;a++)if(D.mentionedUsers[a].userId===x){i=!0;break}for(var s in t.sb.channelHandlers){var o=t.sb.channelHandlers[s];l.enteredChannels[e.url]&&o.onMessageReceived(e,D),i&&o.onMentionReceived(e,D)}}}))}break;case"MEDI":case"FEDI":case"AEDI":var Y=null;if("MEDI"===S.command?Y=new c(I):"FEDI"===S.command?Y=new d(I):"AEDI"===S.command&&(Y=new f(I)),Y){var V=this.sb.currentUser?this.sb.currentUser.userId:null,z=Y.silent,W=Y.sender&&Y.sender.userId===V;if(Y.isGroupChannel()){var Q=u.cachedChannels.hasOwnProperty(Y.channelUrl);u.getChannel(Y.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var i=e.cachedReadReceiptStatus[V],a=i&&i>=Y.createAt,s=t.sb.currentUser;s&&W&&(s.nickname!==Y._sender.nickname&&(s.nickname=Y._sender.nickname),s.plainProfileUrl!==Y._sender.plainProfileUrl&&(s.plainProfileUrl=Y._sender.plainProfileUrl),$.deepEqual(s.metaData,Y._sender.metaData)||(s.metaData=Y._sender.metaData));var o=!1,u=!1;if(!W&&!a&&I&&I.hasOwnProperty("old_values")){var l=I.old_values.mention_type||Y.mentionType,c=I.old_values.mentioned_user_ids||Y.mentionedUsers.map((function(e){return e.userId}));if(l===h.MentionType.USERS&&Y.mentionType===h.MentionType.USERS){for(var d=!1,f=!1,p=0;p<c.length;p++)if(c[p]===V){d=!0;break}for(var v=0;v<Y.mentionedUsers.length;v++)if(Y.mentionedUsers[v].userId===V){f=!0;break}!d&&f&&(u=!0,!z&&Q&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}else if(l===h.MentionType.USERS&&Y.mentionType===h.MentionType.CHANNEL){for(var g=!1,m=0;m<c.length;m++)if(c[m]===V){g=!0;break}g||(u=!0,!z&&Q&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}}if(e.lastMessage?e.lastMessage.createdAt<Y.createdAt?(e.lastMessage=Y,o=!0):e.lastMessage.createdAt===Y.createdAt&&e.lastMessage.messageId===Y.messageId&&(Q?e.lastMessage.updatedAt<Y.updatedAt&&(e.lastMessage=Y,o=!0):o=!0):(e.lastMessage=Y,o=!0),(!z||W)&&o)for(var y in t.sb.channelHandlers)t.sb.channelHandlers[y].onChannelChanged(e);for(var _ in t.sb.channelHandlers){var b=t.sb.channelHandlers[_];b.onMessageUpdated(e,Y),u&&b.onMentionReceived(e,Y)}}}))}else Y.isOpenChannel()&&l.getChannel(Y.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n)for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onMessageUpdated(e,Y)}))}break;case"DELM":var K=String(I.channel_type),J=String(I.channel_url),X=parseInt(I.msg_id);switch(K){case o.CHANNEL_TYPE_GROUP:u.getChannel(J,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"));else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onMessageDeleted(e,X)}));break;case o.CHANNEL_TYPE_OPEN:l.getChannel(J,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"));else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onMessageDeleted(e,X)}))}break;case"READ":var Z=new v(I),ee=u.cachedChannels.hasOwnProperty(Z.channelUrl);u.getChannel(Z.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n&&(ee&&e.updateReadReceipt(Z.reader.userId,Z.timestamp),t.sb.currentUser))if(Z.reader.userId===t.sb.currentUser.userId){if(ee){if(0<e.unreadMessageCount||0<e.unreadMentionCount)for(var i in e._setGroupChannelUnreadCount(0,0),t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelChanged(e)}else if(0===e.unreadMessageCount||0===e.unreadMentionCount)for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onChannelChanged(e)}else for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onReadReceiptUpdated(e)}));break;case"MRCT":var te=String(I.channel_type),ne=String(I.channel_url),re=p.createFromJson(I);switch(te){case o.CHANNEL_TYPE_GROUP:u.getChannel(ne,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"));else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onReactionUpdated(e,re)}));break;case o.CHANNEL_TYPE_OPEN:l.getChannel(ne,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"));else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onReactionUpdated(e,re)}))}break;case"DLVR":var ie=String(I.channel_url),ae=I.hasOwnProperty("updated")?I.updated:null,oe=u.cachedChannels.hasOwnProperty(ie);u.getChannel(ie,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var i=!1;for(var a in ae)t.sb.currentUser&&a===t.sb.currentUser.userId&&(i=!0),oe&&e.updateDeliveryReceipt(a,parseInt(ae[a]));if(u.cachedChannels[e.url]=e,!i||1!==Object.keys(ae).length)for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onDeliveryReceiptUpdated(e)}}));break;case"MTHD":var ue=String(I.channel_url),le=String(I.channel_type),ce=g.createFromJson(I);switch(le){case o.CHANNEL_TYPE_GROUP:u.getChannel(ue,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n)for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onThreadInfoUpdated(e,ce)}));break;case o.CHANNEL_TYPE_OPEN:l.getChannel(ue,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n)for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onThreadInfoUpdated(e,ce)}))}break;case"SYEV":var de=new ge(I),fe=I.ts;switch(de.category){case ge.CATEGORY_CHANNEL_JOIN:case ge.CATEGORY_CHANNEL_LEAVE:u.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else{var a=de.data.hasOwnProperty("member_count")?de.data.member_count:null,o=de.data.hasOwnProperty("joined_member_count")?de.data.joined_member_count:null;if(de.category===ge.CATEGORY_CHANNEL_JOIN)(de.data.hasOwnProperty("users")?de.data.users:[de.data]).forEach((function(n){e.isSuper||e.isBroadcast?e.setLatestMemberCount(a,o,I.ts):(n.state=s.JOINED,e.addMember(new s(n),fe),e.updateJoinedMemberCount());var r=new i(n);for(var l in t.sb.currentUser&&r.userId===t.sb.currentUser.userId&&(e.myMemberState="joined",u.cachedChannels[e.url]=e),t.sb.channelHandlers)t.sb.channelHandlers[l].onUserJoined(e,r)}));else{var l=new i(de.data);for(var c in t.sb.currentUser&&l.userId===t.sb.currentUser.userId?(e.isPublic||u.removeCachedChannel(de.channelUrl),e.myMemberState="none",e.invitedAt=0,e._setGroupChannelUnreadCount(0,0)):u.cachedChannels[e.url]=e,e.isSuper||e.isBroadcast?e.setLatestMemberCount(a,o,I.ts):(e.removeMember(l),e.updateJoinedMemberCount()),t.sb.channelHandlers)t.sb.channelHandlers[c].onUserLeft(e,l)}}}));break;case ge.CATEGORY_CHANNEL_OPERATOR_UPDATE:de.isGroupChannel()?u.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else{var a=de.data.operators.map((function(e){return new i(e)})),s=a.map((function(e){return e.userId}));for(var o in e.members)e.members[o].role=0<=s.indexOf(e.members[o].userId)?u.Role.OPERATOR:u.Role.NONE;for(var l in e.myRole=t.sb.currentUser&&0<=s.indexOf(t.sb.currentUser.userId)?u.Role.OPERATOR:u.Role.NONE,t.sb.channelHandlers)t.sb.channelHandlers[l].onOperatorUpdated(e,a)}})):de.isOpenChannel()&&l.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else for(var a in e.operators=de.data.operators.map((function(e){return new i(e)})),t.sb.channelHandlers)t.sb.channelHandlers[a].onOperatorUpdated(e,e.operators)}));break;case ge.CATEGORY_CHANNEL_INVITE:u.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else{var a=null;de.data&&de.data.inviter&&0<Object.keys(de.data.inviter).length&&(a=new i(de.data.inviter));for(var o=[],l=0;l<de.data.invitees.length;l++){var c=new i(de.data.invitees[l]);o.push(c),de.data.invitees[l].state=s.INVITED;var d=new s(de.data.invitees[l]);if(e.isSuper||e.isBroadcast){var f=de.data.hasOwnProperty("member_count")?de.data.member_count:null,h=de.data.hasOwnProperty("joined_member_count")?de.data.joined_member_count:null;e.setLatestMemberCount(f,h,I.ts)}else e.addMember(d,fe);t.sb.currentUser&&d.userId===t.sb.currentUser.userId&&(e.isHidden=!1,"joined"!==e.myMemberState&&(e.myMemberState="invited"),e.invitedAt=I.ts,u.cachedChannels[e.url]=e)}for(var p in t.sb.channelHandlers)t.sb.channelHandlers[p].onUserReceivedInvitation(e,a,o)}}));break;case ge.CATEGORY_CHANNEL_DECLINE_INVITE:u.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else{var a=null;de.data&&de.data.inviter&&0<Object.keys(de.data.inviter).length&&(a=new i(de.data.inviter));var s=new i(de.data.invitee);if(t.sb.currentUser&&s.userId===t.sb.currentUser.userId&&(e.invitedAt=0,e.myMemberState="none",e.isPublic||u.removeCachedChannel(de.channelUrl)),e.isSuper||e.isBroadcast){var o=de.data.hasOwnProperty("member_count")?de.data.member_count:null,l=de.data.hasOwnProperty("joined_member_count")?de.data.joined_member_count:null;e.setLatestMemberCount(o,l,I.ts)}else e.removeMember(s);for(var c in t.sb.currentUser&&s.userId!==t.sb.currentUser.userId&&(u.cachedChannels[e.url]=e),t.sb.channelHandlers)t.sb.channelHandlers[c].onUserDeclinedInvitation(e,a,s)}}));break;case ge.CATEGORY_TYPING_START:case ge.CATEGORY_TYPING_END:u.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else{var a=new i(de.data);for(var s in de.category===ge.CATEGORY_TYPING_START?e.updateTypingStatus(a,!0):e.updateTypingStatus(a,!1),t.sb.channelHandlers)t.sb.channelHandlers[s].onTypingStatusUpdated(e)}}));break;case ge.CATEGORY_CHANNEL_ENTER:case ge.CATEGORY_CHANNEL_EXIT:l.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else{de.data.hasOwnProperty("participant_count")&&(e.participantCount=de.data.participant_count);var a=new i(de.data);if(de.category===ge.CATEGORY_CHANNEL_ENTER)for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onUserEntered(e,a);else for(var o in t.sb.channelHandlers)t.sb.channelHandlers[o].onUserExited(e,a)}}));break;case ge.CATEGORY_USER_CHANNEL_MUTE:case ge.CATEGORY_USER_CHANNEL_UNMUTE:de.isOpenChannel()?l.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else{var a=new i(de.data);if(de.category===ge.CATEGORY_USER_CHANNEL_MUTE)for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onUserMuted(e,a);else for(var o in t.sb.channelHandlers)t.sb.channelHandlers[o].onUserUnmuted(e,a)}})):u.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else{var a=new i(de.data);if(t.sb.currentUser&&a.userId===t.sb.currentUser.userId&&(e.myMutedState=de.category===ge.CATEGORY_USER_CHANNEL_MUTE?"muted":"unmuted"),Array.isArray(e.members)&&e.members.forEach((function(e){e&&e.userId===a.userId&&(e.isMuted=de.category===ge.CATEGORY_USER_CHANNEL_MUTE)})),de.category===ge.CATEGORY_USER_CHANNEL_MUTE)for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onUserMuted(e,a);else for(var o in t.sb.channelHandlers)t.sb.channelHandlers[o].onUserUnmuted(e,a)}}));break;case ge.CATEGORY_USER_CHANNEL_BAN:case ge.CATEGORY_USER_CHANNEL_UNBAN:de.isOpenChannel()?l.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else{var a=new i(de.data);if(de.category===ge.CATEGORY_USER_CHANNEL_BAN)for(var s in t.sb.currentUser&&a.userId===t.sb.currentUser.userId&&(delete l.enteredChannels[de.channelUrl],t.cls.FileMessageQueue.delete(de.channelUrl)),t.sb.channelHandlers)t.sb.channelHandlers[s].onUserBanned(e,a);else for(var o in t.sb.channelHandlers)t.sb.channelHandlers[o].onUserUnbanned(e,a)}})):u.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else{var a=new i(de.data);if(de.category===ge.CATEGORY_USER_CHANNEL_BAN){if(t.sb.currentUser&&a.userId===t.sb.currentUser.userId&&(e.isPublic||u.removeCachedChannel(de.channelUrl),e.myMemberState="none",e.invitedAt=0,e._setGroupChannelUnreadCount(0,0)),e.isSuper||e.isBroadcast){var s=de.data.hasOwnProperty("member_count")?de.data.member_count:null,o=de.data.hasOwnProperty("joined_member_count")?de.data.joined_member_count:null;e.setLatestMemberCount(s,o,I.ts)}else e.removeMember(a),e.updateJoinedMemberCount();for(var l in t.sb.channelHandlers)t.sb.channelHandlers[l].onUserBanned(e,a)}else for(var c in t.sb.channelHandlers)t.sb.channelHandlers[c].onUserUnbanned(e,a)}}));break;case ge.CATEGORY_CHANNEL_FREEZE:case ge.CATEGORY_CHANNEL_UNFREEZE:de.isOpenChannel()?l.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else if(e.isFrozen=de.data.freeze,l.cachedChannels[e.url]=e,de.category===ge.CATEGORY_CHANNEL_FREEZE)for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelFrozen(e);else for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onChannelUnfrozen(e)})):u.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else if(e.isFrozen=de.data.freeze,u.cachedChannels[e.url]=e,de.category===ge.CATEGORY_CHANNEL_FREEZE)for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelFrozen(e);else for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onChannelUnfrozen(e)}));break;case ge.CATEGORY_CHANNEL_DELETED:for(var he in de.isGroupChannel()?u.removeCachedChannel(de.channelUrl):l.removeCachedChannel(de.channelUrl),this.sb.channelHandlers)this.sb.channelHandlers[he].onChannelDeleted(de.channelUrl,de.isGroupChannel()?"group":"open");break;case ge.CATEGORY_CHANNEL_PROP_CHANGED:de.isOpenChannel()?l.getChannelWithoutCache(de.channelUrl,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelChanged(e)})):u.getChannelWithoutCache(de.channelUrl,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else{var i=e.unreadMessageCount,a=e.unreadMentionCount;for(var s in e.myCountPreference!==u.CountPreference.ALL&&(e.myCountPreference===u.CountPreference.UNREAD_MESSAGE_COUNT_ONLY?a=0:e.myCountPreference===u.CountPreference.UNREAD_MENTION_COUNT_ONLY?i=0:a=i=0),e._setGroupChannelUnreadCount(i,a),t.sb.channelHandlers)t.sb.channelHandlers[s].onChannelChanged(e)}}));break;case ge.CATEGORY_CHANNEL_META_DATA_CHANGED:case ge.CATEGORY_CHANNEL_META_COUNTERS_CHANGED:var pe=de.data.hasOwnProperty("created"),ve=de.data.hasOwnProperty("updated"),ye=de.data.hasOwnProperty("deleted");de.isOpenChannel()?l.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else for(var i in t.sb.channelHandlers){var a=t.sb.channelHandlers[i];de.category===ge.CATEGORY_CHANNEL_META_DATA_CHANGED?(pe&&a.onMetaDataCreated(e,de.data.created),ve&&a.onMetaDataUpdated(e,de.data.updated),ye&&a.onMetaDataDeleted(e,de.data.deleted)):(pe&&a.onMetaCountersCreated(e,de.data.created),ve&&a.onMetaCountersUpdated(e,de.data.updated),ye&&a.onMetaCountersDeleted(e,de.data.deleted))}})):u.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else for(var i in t.sb.channelHandlers){var a=t.sb.channelHandlers[i];de.category===ge.CATEGORY_CHANNEL_META_DATA_CHANGED?(pe&&a.onMetaDataCreated(e,de.data.created),ve&&a.onMetaDataUpdated(e,de.data.updated),ye&&a.onMetaDataDeleted(e,de.data.deleted)):(pe&&a.onMetaCountersCreated(e,de.data.created),ve&&a.onMetaCountersUpdated(e,de.data.updated),ye&&a.onMetaCountersDeleted(e,de.data.deleted))}}));break;case ge.CATEGORY_CHANNEL_HIDE:case ge.CATEGORY_CHANNEL_UNHIDE:u.getChannel(de.channelUrl,w.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)B.debug("Discard command:","`".concat(S.command,"`"),de.category);else if(de.category===ge.CATEGORY_CHANNEL_HIDE)for(var i in e.isHidden=!0,de.data&&(de.data.hasOwnProperty("allow_auto_unhide")&&(e.hiddenState=de.data.allow_auto_unhide?u.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:u.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE),de.data.hasOwnProperty("hide_previous_messages")&&de.data.hide_previous_messages&&e._setGroupChannelUnreadCount(0,0)),I.hasOwnProperty("ts_message_offset")&&(e._messageOffsetTimestamp=I.ts_message_offset),u.cachedChannels[e.url]=e,t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelHidden(e);else for(var a in e.isHidden=!1,e.hiddenState=u.HiddenState.UNHIDDEN,u.cachedChannels[e.url]=e,t.sb.channelHandlers)t.sb.channelHandlers[a].onChannelChanged(e)}))}break;case"USEV":var _e=new ge(I);switch(_e.category){case me.CATEGORY_USER_BLOCK:case me.CATEGORY_USER_UNBLOCK:var be=_e.data.blocker.user_id,Ce=_e.data.blockee.user_id;Object.keys(u.cachedChannels).forEach((function(e){var n=u.cachedChannels[e];try{t.sb.currentUser&&(t.sb.currentUser.userId===be?n.memberMap[Ce].isBlockedByMe=_e.category===me.CATEGORY_USER_BLOCK:t.sb.currentUser.userId===Ce&&(n.memberMap[be].isBlockingMe=_e.category===me.CATEGORY_USER_BLOCK))}catch(e){}}));break;case me.CATEGORY_FRIEND_DISCOVERED:var Ee=_e.data.friend_discoveries.map((function(e){return new i(e)}));for(var ke in this.sb.userEventHandlers)this.sb.userEventHandlers[ke].onFriendsDiscovered(Ee)}break;case"LEAV":case"JOIN":case"PONG":case"MTIO":case"TPST":case"TPEN":break;default:B.debug("Discard command:","`".concat(S.command,"`"))}}}]),e}(),_e={},be={},Ce=function(){function e(t){s(this,e),this.channel=t,this.uploadQueue=[],this.messageQueue=[],this.latestTimestampToSendMessage=0,T.get(this._iid).FileMessageQueue.queueMap[t.url]=this}return u(e,[{key:"_handleMessageQueueUpdated",value:function(e){var t=this;switch(B.debug("`fileMessageQueue` message queue updated:",this.messageQueue),e){case"add":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue();break;case"update":case"remove":if(0<this.messageQueue.length){var n=T.get(this._iid).FileMessageQueue,r=this.messageQueue[0];if(r)if(r.state===n.State.UPLOADED){if(r&&r.state===n.State.UPLOADED){for(r.state=n.State.SENDING,0===this.latestTimestampToSendMessage&&(this.latestTimestampToSendMessage=(new Date).getTime()-200);(new Date).getTime()-this.latestTimestampToSendMessage<200;);this.latestTimestampToSendMessage=(new Date).getTime(),this._sendUploadedMessage(r,(function(e,i){r.state=n.State.SENT,r.error=e||null,r.response=i||null,t._handleMessageQueueUpdated("update")}))}}else r.state===n.State.SENT&&this._finalizeMessage()}}}},{key:"_handleUploadQueueUpdated",value:function(e,t){var n=this;switch(B.debug("`fileMessageQueue` upload queue updated:",this.uploadQueue),e){case"add":var r=T.get(this._iid).FileMessageQueue;t.state=r.State.UPLOADING,t.error?(-1<this.messageQueue.map((function(e){return e.requestId})).indexOf(t.requestId)&&(t.state=r.State.SENT,this._handleMessageQueueUpdated("update")),this._finalizeUpload(t.requestId)):this._uploadFile(t,(function(e){t.error&&t.state===r.State.SENT||(t.state=r.State.UPLOADED),t.fileInfo=e,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId)}));break;case"update":break;case"remove":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue()}}},{key:"_moveFirstPendingMessageToUploadQueue",value:function(){var e=T.get(this._iid).FileMessageQueue,t=this.messageQueue.filter((function(t){return t.state===e.State.PENDING}));if(0<t.length){var n=t[0];this.uploadQueue.push(n),this._handleUploadQueueUpdated("add",n)}}},{key:"_sendUploadedMessage",value:function(e,t){var n=T.get(this._iid),r=n.Command,i=n.FileMessage,a=e.fileInfo,s=r.bFile(c(c({},a),{},{requestId:e.requestId,channelUrl:this.channel.url,url:a.file,metaArrays:a.metaArrays})),o=Dt.getInstance(this._iid),u=A.get(this._iid);o.getConnectionState()===o.ConnectionState.OPEN||!o.currentUser||o.connecting||o.reconnecting?o.sendCommand(s,(function(e,n){if(o.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n){var u=new i(s.getJsonElement());u.requestedMentionUserIds=a.mentionedUserIds,t(n,u)}else{var l=new i(e.getJsonElement());t(null,l)}})):u.container.apiClient.sendFileMessage(c(c({channelUrl:this.channel.url,isOpenChannel:this.channel.isOpenChannel()},a),{},{fileUrl:a.file,fileName:a.name,fileSize:a.size,fileType:a.type,metaArrays:a.metaArrays}),(function(e,n){var r=new i(e?s.getJsonElement():n);e&&(r.requestedMentionUserIds=a.mentionedUserIds),t(e,r)}))}},{key:"_uploadFile",value:function(e,t){var n=e.fileInfo,r=e.pendingMessage;if("string"!=typeof n.file&&n.file){var i=T.get(this._iid).FileMessageQueue;A.get(this._iid).container.apiClient.uploadFile(c(c({},n),{},{fileType:n.type,channelUrl:this.channel.url,reqId:r?r.reqId:null}),(function(r,s){if(r)e.state=i.State.SENT,e.error=r,e.response=null,t(n);else{var o="object"===a(s)?s:JSON.parse(s);n.file=o.url,n.thumbnailSizes=o.hasOwnProperty("thumbnails")?o.thumbnails:[],n.requireAuth=!!o.hasOwnProperty("require_auth")&&o.require_auth,n.size=o.hasOwnProperty("file_size")?o.file_size:n.size,t(n)}}))}else n.thumbnailSizes=[],n.requireAuth=!1,t(n)}},{key:"_finalizeUpload",value:function(e){var t=this.uploadQueue.map((function(e){return e.requestId})).indexOf(e);if(-1<t){var n=this.uploadQueue.splice(t,1);0<n.length&&this._handleUploadQueueUpdated("remove",n[0])}}},{key:"_finalizeMessage",value:function(){var e=A.get(this._iid).container.isErrorFirstInCallback,t=Dt.getInstance(this._iid),n=T.get(this._iid).FileMessageQueue,r=this.messageQueue[0];if(r&&r.state===n.State.SENT){r.state=n.State.DONE;var i=r.response,a=r.error,s=r.fileInfo.callback;if(i&&!a){var o=t.currentUser;if(o&&i._sender&&o.userId===i._sender.userId&&(o.nickname!==i._sender.nickname&&(o.nickname=i._sender.nickname),o.plainProfileUrl!==i._sender.plainProfileUrl&&(o.plainProfileUrl=i._sender.plainProfileUrl)),this.channel.isGroupChannel())for(var u in this.channel.lastMessage=i,t.channelHandlers)t.channelHandlers[u].onChannelChanged(this.channel);return e?s(null,i):s(i,null),this.messageQueue.shift(),void this._handleMessageQueueUpdated("remove")}a&&(i=r.pendingMessage)&&(a.code!==U.INVALID_PARAMETER?(i.requestState=t.MessageRequestState.FAILED,i.sendingStatus=t.MessageSendingStatus.FAILED,a.code!==U.FILE_UPLOAD_CANCEL_FAILED&&a.code!==U.REQUEST_CANCELED||(i.sendingStatus=t.MessageSendingStatus.CANCELED),i.requestedMentionUserIds=r.fileInfo.mentionedUserIds,i.errorCode=a.code):i=null),e?s(a,i):s(i,a),this.messageQueue.shift(),this._handleMessageQueueUpdated("remove")}}},{key:"addJob",value:function(e){this.messageQueue.push(e),this._handleMessageQueueUpdated("add")}},{key:"cancelUploadItemByRequestId",value:function(e,t){this._finalizeUpload(e);var n=this.messageQueue.map((function(e){return e.requestId})).indexOf(e);if(-1<n){var r=T.get(this._iid).FileMessageQueue,i=this.messageQueue[n];!i||i.state!==r.State.UPLOADING&&i.state!==r.State.PENDING||(i.state=r.State.SENT,i.response=null,i.error=new U("Uploading has been completed or canceled.",U.FILE_UPLOAD_CANCEL_FAILED),this._handleMessageQueueUpdated("update"));var a=r.uploadRequest[e];if(a)return a.cancel("Upload has been canceled."),t(null,!0),!0;t(new U("Uploading has been completed or canceled.",U.FILE_UPLOAD_CANCEL_FAILED),!1)}else t(new U("Uploading has been completed or canceled.",U.FILE_UPLOAD_CANCEL_FAILED),!1);return!1}}],[{key:"getByChannelUrl",value:function(e){return T.get(this._iid).FileMessageQueue.queueMap[e]}},{key:"create",value:function(e){var t=T.get(this._iid).FileMessageQueue;return t.queueMap.hasOwnProperty(e.url)||(t.queueMap[e.url]=new t(e)),t.queueMap[e.url]}},{key:"delete",value:function(e){var t=T.get(this._iid).FileMessageQueue;t.queueMap.hasOwnProperty(e)&&delete t.queueMap[e]}},{key:"clear",value:function(){be[this._iid]={}}},{key:"State",get:function(){return{PENDING:"pending",UPLOADING:"uploading",UPLOADED:"uploaded",SENDING:"sending",SENT:"sent",DONE:"done"}}},{key:"queueMap",get:function(){return be[this._iid]||(be[this._iid]={}),be[this._iid]}},{key:"uploadRequest",get:function(){return _e[this._iid]||(_e[this._iid]={}),_e[this._iid]}}]),e}();function Ee(){s(this,Ee),this.channelCustomTypesFilter=[],this.superChannelFilter=Ne.SuperChannelFilter.ALL}function ke(){s(this,ke),this.onReconnectStarted=function(){},this.onReconnectSucceeded=function(){},this.onReconnectFailed=function(){}}function we(){s(this,we),this.onFriendsDiscovered=function(e){},this.onTotalUnreadMessageCountUpdated=function(e,t){}}function Se(){s(this,Se),this.onMessageReceived=function(e,t){},this.onMessageUpdated=function(e,t){},this.onMessageDeleted=function(e,t){},this.onReadReceiptUpdated=function(e){},this.onReactionUpdated=function(e,t){},this.onDeliveryReceiptUpdated=function(e){},this.onTypingStatusUpdated=function(e){},this.onUserJoined=function(e,t){},this.onUserLeft=function(e,t){},this.onOperatorUpdated=function(e,t){},this.onUserEntered=function(e,t){},this.onUserExited=function(e,t){},this.onUserMuted=function(e,t){},this.onUserUnmuted=function(e,t){},this.onUserBanned=function(e,t){},this.onUserUnbanned=function(e,t){},this.onChannelFrozen=function(e){},this.onChannelUnfrozen=function(e){},this.onChannelChanged=function(e){},this.onChannelDeleted=function(e,t){},this.onUserReceivedInvitation=function(e,t,n){},this.onUserDeclinedInvitation=function(e,t,n){},this.onMetaDataCreated=function(e,t){},this.onMetaDataUpdated=function(e,t){},this.onMetaDataDeleted=function(e,t){},this.onMetaCountersCreated=function(e,t){},this.onMetaCountersUpdated=function(e,t){},this.onMetaCountersDeleted=function(e,t){},this.onChannelHidden=function(e){},this.onMentionReceived=function(e,t){},this.onThreadInfoUpdated=function(e,t){}}function Ie(e){if(s(this,Ie),e){var t=T.get(this._iid),n=t.User,r=t.BaseChannel;this.reader=new n(e.user),this.timestamp=parseInt(e.ts),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):r.CHANNEL_TYPE_GROUP}}Ce.Job=function e(t){var n=t.fileInfo,r=t.requestId,i=t.pendingMessage,a=t.state,o=t.error,u=void 0===o?null:o,l=t.response,c=void 0===l?null:l;s(this,e),this.fileInfo=n,this.requestId=r,this.pendingMessage=i,this.state=a||Ce.State.PENDING,this.error=u,this.response=c};var Ae=function(){function e(){s(this,e)}return u(e,null,[{key:"create",value:function(){return"".concat(parseInt(1e5*Math.random()),"-").concat((new Date).getTime())}}]),e}(),Ue={},Me={},Oe=new WeakMap,Te=new WeakMap,Re=new WeakMap,Ne=function(){d(t,ve);var e=y(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).channelType=ve.CHANNEL_TYPE_GROUP,r.isDistinct=!1,r.isSuper=!1,r.isBroadcast=!1,r.isPublic=!1,r.unreadMessageCount=0,r.inviter=null,r.members=[],r.memberMap={},r.lastMessage=null,r.memberCount=0,r.joinedMemberCount=0,r.cachedReadReceiptStatus={},r.cachedDeliveryReceiptStatus=null,r.myPushTriggerOption=t.PushTriggerOption.DEFAULT,r.isPushEnabled,r.isHidden=!1,r.hiddenState=t.HiddenState.UNHIDDEN,r.isDiscoverable=!0,r.myLastRead=0,r.messageSurvivalSeconds=-1,r._messageOffsetTimestamp=0,r._cachedLastDeliveredReceipt={sentAt:0,timeout:null},Oe.set(m(r),{}),Te.set(m(r),{start:0,end:0}),Re.set(m(r),0),n&&r._update(n),r}return u(t,[{key:"_setGroupChannelUnreadCount",value:function(e,t){try{if("number"==typeof e&&0<=e)if("all"===this.myCountPreference||"unread_message_count_only"===this.myCountPreference)if(this.isSuper||this.isBroadcast){var n=A.get(this._iid).container.maxUnreadCountOfSuperGroupChannel;this.unreadMessageCount=n<=e?n:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;"number"==typeof t&&0<=t&&("all"===this.myCountPreference||"unread_mention_count_only"===this.myCountPreference?this.unreadMentionCount=t:this.unreadMentionCount=0)}catch(e){}}},{key:"_update",value:function(e){var t=T.get(this._iid),n=t.BaseChannel,r=t.GroupChannel,i=t.User,s=t.Member;if(this.isAccessCodeRequired=!!e.is_access_code_required&&e.is_access_code_required,this.isDistinct=!!e.is_distinct&&e.is_distinct,this.isPushEnabled=!!e.is_push_enabled&&e.is_push_enabled,this.isHidden=!!e.hasOwnProperty("is_hidden")&&e.is_hidden,this.myPushTriggerOption=e.push_trigger_option?e.push_trigger_option:r.PushTriggerOption.DEFAULT,this.myCountPreference=e.hasOwnProperty("count_preference")?e.count_preference:r.CountPreference.ALL,this.unreadMessageCount=0,this.unreadMentionCount=0,this._setGroupChannelUnreadCount(parseInt(e.unread_message_count),parseInt(e.unread_mention_count)),e.hasOwnProperty("read_receipt"))for(var o in this.cachedReadReceiptStatus={},e.read_receipt){var u=e.read_receipt[o];this.updateReadReceipt(o,parseInt(u))}if(e.hasOwnProperty("delivery_receipt")&&"object"===a(e.delivery_receipt)&&null!==e.delivery_receipt)for(var l in this.cachedDeliveryReceiptStatus||(this.cachedDeliveryReceiptStatus={}),e.delivery_receipt){var c=e.delivery_receipt[l];this.updateDeliveryReceipt(l,parseInt(c))}if(e.hasOwnProperty("user_last_read")&&"number"==typeof e.user_last_read?this.myLastRead=e.user_last_read:this.myLastRead=0,e.hasOwnProperty("members")){this.members=[],this.memberMap={};for(var d=0;d<e.members.length;d++){var f=new s(e.members[d]);this.members.push(f),this.memberMap[f.userId]=f}}this.myMemberState=e.member_state||"none",this.myRole=e.my_role||r.Role.NONE,e.hasOwnProperty("is_muted")?"string"==typeof e.is_muted?this.myMutedState=e.is_muted:"boolean"==typeof e.is_muted?this.myMutedState=e.is_muted?"muted":"unmuted":this.myMutedState="unmuted":this.myMutedState="unmuted",e.hasOwnProperty("member_count")&&(this.memberCount=parseInt(e.member_count)),e.hasOwnProperty("joined_member_count")&&(this.joinedMemberCount=parseInt(e.joined_member_count)),e.hasOwnProperty("last_message")&&"object"===a(e.last_message)&&e.last_message?e.last_message instanceof fe?this.lastMessage=e.last_message:this.lastMessage=n.buildMessage(e.last_message,this):this.lastMessage=null,e.hasOwnProperty("inviter")&&null!==e.inviter&&"object"===a(e.inviter)&&0<Object.keys(e.inviter).length?this.inviter=new i(e.inviter):this.inviter=null,this.invitedAt=e.invited_at||0,e.hasOwnProperty("is_super")&&"boolean"==typeof e.is_super?this.isSuper=e.is_super:this.isSuper=!1,e.hasOwnProperty("is_broadcast")&&"boolean"==typeof e.is_broadcast?this.isBroadcast=e.is_broadcast:this.isBroadcast=!1,e.hasOwnProperty("is_public")&&"boolean"==typeof e.is_public?this.isPublic=e.is_public:this.isPublic=!1,e.hasOwnProperty("hidden_state")?this.hiddenState=e.hidden_state:this.hiddenState=r.HiddenState.UNHIDDEN,e.hasOwnProperty("is_discoverable")&&"boolean"==typeof e.is_discoverable?this.isDiscoverable=e.is_discoverable:this.isDiscoverable=this.isPublic,e.hasOwnProperty("ts_message_offset")&&(this._messageOffsetTimestamp=e.ts_message_offset),e.hasOwnProperty("message_survival_seconds")&&"number"==typeof e.message_survival_seconds&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"addMember",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:0;if(!this.isSuper&&!this.isBroadcast){var r=T.get(this._iid).Member,i=this.removeMember(e);i&&i.state===r.JOINED&&(e.state=r.JOINED),this.memberMap[e.userId]=e,this.members.push(e),this.memberCount++,this.updateReadReceipt(e.userId,n),this.updateDeliveryReceipt(e.userId,n)}}},{key:"removeMember",value:function(e){var t=null;if(!this.isSuper&&!this.isBroadcast&&this.memberMap.hasOwnProperty(e.userId)){delete this.memberMap[e.userId];for(var n=0;n<this.members.length;n++){var r=this.members[n];if(r.userId===e.userId){t=r,this.members.splice(n,1);break}}this.memberCount--}return t}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"isIdentical",value:function(e){return e&&this.url===e.url}},{key:"isEqual",value:function(e){return $.deepEqual(this,e)}},{key:"createMemberListQuery",value:function(){return new(T.get(this._iid).MemberListQuery)(this.url)}},{key:"createBannedUserListQuery",value:function(){return new(T.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:this.isOpenChannel()})}},{key:"refresh",value:function(e){return T.get(this._iid).GroupChannel.getChannelWithoutCache(this.url,e)}},{key:"updateChannel",value:function(){var e=this,t=Z.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=T.get(this._iid),i=r.GroupChannel,a=r.GroupChannelParams;if(t[0]instanceof a&&1===t.length)return le(this._iid,(function(n){var r=t[0];r.channelUrl=e.url,r._validate()?A.get(e._iid).container.apiClient.updateGroupChannel(c(c({},r),{},{operatorUserIds:r.operatorUserIds}),(function(e,t){var r=null;e||(r=i.upsert(t)),n(e,r)})):n(Z.error,null)}),n);if(3===t.length){var s=new a;return s.channelUrl=this.url,s.name=t[0],"string"==typeof t[1]?s.coverUrl=t[1]:s.coverImage=t[1],s.data=t[2],this.updateChannel(s,n)}if(4===t.length){var o=new a;return o.channelUrl=this.url,o.isDistinct=t[0],o.name=t[1],"string"==typeof t[1]?o.coverUrl=t[2]:o.coverImage=t[2],o.data=t[3],this.updateChannel(o,n)}if(5!==t.length)return le(this._iid,(function(e){return e(Z.error,null)}),n);var u=new a;return u.channelUrl=this.url,u.isDistinct=t[0],u.name=t[1],"string"==typeof t[2]?u.coverUrl=t[2]:u.coverImage=t[2],u.data=t[3],u.customType=t[4],this.updateChannel(u,n)}},{key:"invite",value:function(e,t){var n,r=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return 0<e.length&&e.every((function(e){return!!e.userId&&"string"==typeof e.userId}))}}),new Z({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){return e(Z.error,null)}),t):this.inviteWithUserIds(e.map((function(e){return e.userId})),t)}},{key:"inviteWithUserIds",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.inviteToGroupChannel({channelUrl:r.url,userIds:e},(function(e,n){var i=null;e||(i=T.get(r._iid).GroupChannel.upsert(n)),t(e,i)}))}),t)}},{key:"acceptInvitation",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string",optional:!0,defaultValue:null}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.acceptInvitation({channelUrl:r.url,accessCode:e},(function(e,n){var i=null;e||((i=T.get(r._iid).GroupChannel.upsert(n)).myMemberState="joined"),t(e,i)}))}),t)}},{key:"declineInvitation",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.declineInvitation({channelUrl:t.url},(function(n,r){var i=null;if(!n){var a=T.get(t._iid).GroupChannel;(i=a.upsert(r)).myMemberState="none",t.isPublic||a.removeCachedChannel(t.url)}e(n,i)}))}),e)}},{key:"join",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string",optional:!0,defaultValue:null}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.joinGroupChannel({channelUrl:r.url,accessCode:e},(function(e,n){var i=null;e||((i=T.get(r._iid).GroupChannel.upsert(n)).myMemberState="joined"),t(e,i)}))}),t)}},{key:"leave",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.leaveGroupChannel({channelUrl:t.url},(function(t,n){return e(t,null)}))}),e)}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var i,a=this,s=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return-1<=e}}),new Z({type:"string",optional:!0,defaultValue:""}),new Z({type:"callback"})]),5);return i=s[0],e=s[1],t=s[2],n=s[3],r=s[4],le(this._iid,(function(r){i?r(i,null):A.get(a._iid).container.apiClient.muteUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!0},(function(e,t){r(e,null)}))}),r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.unmuteUser({channelUrl:r.url,userId:e,isGroupChannel:!0},(function(e,n){t(e,null)}))}),t)}},{key:"banUser",value:function(e,t,n,r){return this.banUserWithUserId(e?e.userId:null,t,n,r)}},{key:"banUserWithUserId",value:function(e,t,n,r){var i,a=this,s=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return-1<=e}}),new Z({type:"string"}),new Z({type:"callback"})]),5);return i=s[0],e=s[1],t=s[2],n=s[3],r=s[4],le(this._iid,(function(r){i?r(i,null):A.get(a._iid).container.apiClient.banUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!0},(function(e,t){r(e,null)}))}),r)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.unbanUser({channelUrl:r.url,userId:e,isGroupChannel:!0},(function(e,n){t(e,null)}))}),t)}},{key:"updateJoinedMemberCount",value:function(){if(!this.isSuper&&!this.isBroadcast){var e=T.get(this._iid).Member;this.joinedMemberCount=this.members.filter((function(t){return t.state===e.JOINED})).length}}},{key:"setLatestMemberCount",value:function(e,t,n){"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&n>=Re.get(this)&&(Re.set(this,n),this.memberCount=e,this.joinedMemberCount=t)}},{key:"hide",value:function(e,t,n){var r,i=this,a=b(Z.parse(arguments,[new Z({type:"boolean",optional:!0,defaultValue:!1}),new Z({type:"boolean",optional:!0,defaultValue:!0}),new Z({type:"callback"})]),4);return r=a[0],e=a[1],t=a[2],n=a[3],le(this._iid,(function(n){r?n(r,null):A.get(i._iid).container.apiClient.hideGroupChannel({channelUrl:i.url,hidePreviousMessages:e,allowAutoUnhide:t},(function(r,a){if(!r){var s=T.get(i._iid).GroupChannel;i.isHidden=!0,i.hiddenState=t?s.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:s.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE,e&&i._setGroupChannelUnreadCount(0,0),a.hasOwnProperty("ts_message_offset")&&(i._messageOffsetTimestamp=a.ts_message_offset),s.cachedChannels[i.url]=i}n(r,a)}))}),n)}},{key:"unhide",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.unhideGroupChannel({channelUrl:t.url},(function(n,r){if(!n){var i=T.get(t._iid).GroupChannel;t.isHidden=!1,t.hiddenState=i.HiddenState.UNHIDDEN,i.cachedChannels[t.url]=t}e(n,r)}))}),e)}},{key:"freeze",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!0},(function(n,r){if(!n){var i=T.get(t._iid).GroupChannel;t.isFrozen=!0,i.cachedChannels[t.url]=t}e(n,null)}))}),e)}},{key:"unfreeze",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!1},(function(n,r){if(!n){var i=T.get(t._iid).GroupChannel;t.isFrozen=!1,i.cachedChannels[t.url]=t}e(n,null)}))}),e)}},{key:"delete",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.deleteGroupChannel({channelUrl:t.url},(function(n,r){n||T.get(t._iid).GroupChannel.removeCachedChannel(t.url),e(n,r)}))}),e)}},{key:"markAsRead",value:function(){var e=this,t=T.get(this._iid).Command,n=Dt.getInstance(this._iid),r=t.bRead({channelUrl:this.url});n.sendCommand(r,(function(t,r){if(n.getErrorFirstCallback()){var i=[t,r];r=i[0],t=i[1]}if(!r&&n.currentUser&&(e.updateReadReceipt(n.currentUser.userId,t.getJsonElement().ts),0<e.unreadMessageCount||0<e.unreadMentionCount))for(var a in e._setGroupChannelUnreadCount(0,0),n.channelHandlers)n.channelHandlers[a].onChannelChanged(e)}))}},{key:"getUnreadMemberCount",value:function(e){var t=Dt.getInstance(this._iid),n=T.get(this._iid).Member;if(e instanceof fe&&!e.isAdminMessage()&&t.currentUser&&!this.isSuper&&!this.isBroadcast){for(var r=0,i=e.createdAt,a=this.members,s=0;s<a.length;s++){var o=a[s];t.currentUser.userId===o.userId||o.state!==n.JOINED||e.sender&&e.sender.userId===o.userId||(this.cachedReadReceiptStatus[o.userId]||0)<i&&r++}return r}return 0}},{key:"getReadReceipt",value:function(e){return this.getUnreadMemberCount(e)}},{key:"markAsDelivered",value:function(){function e(){var e=Dt.getInstance(t._iid),n=e.currentUser?e.currentUser.userId:null;A.get(t._iid).container.apiClient.markAsDelivered({channelUrl:t.url,userId:n},(function(e,r){if(e)B.debug(e);else{var i=r.hasOwnProperty("ts")?r.ts:0;t.updateDeliveryReceipt(n,i)}}))}var t=this,n=this._cachedLastDeliveredReceipt;n&&Date.now()-n.sentAt<1e3?(n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout((function(){n.sentAt=Date.now(),e()}),n.sentAt+1e3-Date.now())):(n.sentAt=Date.now(),e())}},{key:"getUndeliveredMemberCount",value:function(e){var t=Dt.getInstance(this._iid),n=T.get(this._iid).Member;if(this.cachedDeliveryReceiptStatus&&e instanceof fe&&!e.isAdminMessage()&&t.currentUser&&!this.isSuper&&!this.isBroadcast){var r,i=e.createdAt,a=0,s=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=E(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}(this.members);try{for(s.s();!(r=s.n()).done;){var o=r.value;t.currentUser.userId===o.userId||o.state!==n.JOINED||e.sender&&e.sender.userId===o.userId||this.cachedDeliveryReceiptStatus[o.userId]<i&&a++}}catch(e){s.e(e)}finally{s.f()}return a}return 0}},{key:"getDeliveryReceipt",value:function(e){return this.getUndeliveredMemberCount(e)}},{key:"getReadMembers",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t,r=Dt.getInstance(this._iid);if(r.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof fe&&!e.isAdminMessage()){for(var i=[],a=0;a<this.members.length;a++){var s=this.members[a];(n||s.userId!==r.currentUser.userId&&s.userId!==e.sender.userId)&&(this.cachedReadReceiptStatus[s.userId]||0)>=e.createdAt&&i.push(s)}return i}return[]}},{key:"getUnreadMembers",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t,r=Dt.getInstance(this._iid);if(r.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof fe&&!e.isAdminMessage()){for(var i=[],a=0;a<this.members.length;a++){var s=this.members[a];(n||s.userId!==r.currentUser.userId&&s.userId!==e.sender.userId)&&(this.cachedReadReceiptStatus[s.userId]||0)<e.createdAt&&i.push(s)}return i}return[]}},{key:"getReadStatus",value:function(e){var t=this,n=0<arguments.length&&void 0!==e&&e,r=Dt.getInstance(this._iid);if(!r.currentUser||this.isSuper||this.isBroadcast)return{};function i(e){if(!n&&e===r.currentUser.userId)return"continue";var i=t.cachedReadReceiptStatus[e],s=t.members.filter((function(t){return t.userId===e}));a[e]={user:0<s.length?s[0]:null,last_seen_at:parseInt(i)}}var a={};for(var s in this.cachedReadReceiptStatus)i(s);return a}},{key:"updateReadReceipt",value:function(e,t){var n=this.cachedReadReceiptStatus[e];if(!n||n<t){this.cachedReadReceiptStatus[e]=t;var r=Dt.getInstance(this._iid);r.currentUser&&e===r.currentUser.userId&&(this.myLastRead=t)}}},{key:"updateDeliveryReceipt",value:function(e,t){if(this.cachedDeliveryReceiptStatus)if(this.cachedDeliveryReceiptStatus.hasOwnProperty(e)){var n=this.cachedDeliveryReceiptStatus[e];(!n||n<t)&&(this.cachedDeliveryReceiptStatus[e]=t)}else this.cachedDeliveryReceiptStatus[e]=t}},{key:"startTyping",value:function(){var e=Dt.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||9e3<n)&&(n=1e3);var r=Te.get(this);if(t-r.start>=n){r.end=0,r.start=t;var i=T.get(this._iid).Command.bTypeStart({channelUrl:this.url,time:r.start});e.sendCommand(i,null)}}},{key:"endTyping",value:function(){var e=Dt.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||9e3<n)&&(n=1e3);var r=Te.get(this);if(t-r.end>=n){r.start=0,r.end=t;var i=T.get(this._iid).Command.bTypeEnd({channelUrl:this.url,time:r.end});e.sendCommand(i,null)}}},{key:"invalidateTypingStatus",value:function(){var e=Oe.get(this),t=(new Date).getTime(),n=!1;for(var r in e)1e4<=t-e[r].ts&&(delete e[r],n=!0);return n}},{key:"getTypingMembers",value:function(){var e=Oe.get(this),t=[];for(var n in e){var r=this.memberMap[n];r&&t.push(r)}return t}},{key:"getTypingUsers",value:function(){var e=Oe.get(this),t=[];for(var n in e){var r=e[n].user;t.push(r)}return t}},{key:"updateTypingStatus",value:function(e,t){var n=Oe.get(this);t?n[e.userId]={user:e,ts:(new Date).getTime()}:delete n[e.userId]}},{key:"isTyping",value:function(){var e=Oe.get(this);return 0!==Object.keys(e).length}},{key:"registerScheduledUserMessage",value:function(e,t){var n,r=this,i=T.get(this._iid),a=i.ScheduledUserMessage,s=i.ScheduledUserMessageParams,o=b(Z.parse(arguments,[new Z({type:s,constraint:function(e){return"string"==typeof e.message&&"string"==typeof e._getScheduleString()}}),new Z({type:"callback"})]),3);return n=o[0],e=o[1],t=o[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.registerScheduledUserMessage({groupChannelParams:e,channelUrl:r.url,isOpenChannel:!1},(function(e,n){var i=null;if(!e){i=new a(n);var s=Dt.getInstance(r._iid).currentUser;s&&i._sender&&s.userId===i._sender.userId&&(s.nickname=i._sender.nickname,s.plainProfileUrl=i._sender.plainProfileUrl,s.metaData=i._sender.metaData)}t(e,i)}))}),t)}},{key:"getPushPreference",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},(function(n,r){var i=null;if(!n){try{i=r.enable}catch(n){i=!1}t.isPushEnabled=i}e&&e(n,i)}))}),e)}},{key:"setPushPreference",value:function(e,t){var n=this;return le(this._iid,(function(t){var r=T.get(n._iid).GroupChannel;A.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,enable:e},(function(e,i){e||(n.isPushEnabled=i.enable,n.isPushEnabled||(n.myPushTriggerOption=r.PushTriggerOption.OFF)),t(e,i)}))}),t)}},{key:"getMyPushTriggerOption",value:function(e){var n=this;return le(this._iid,(function(e){A.get(n._iid).container.apiClient.getMyPushTriggerOption({channelUrl:n.url},(function(r,i){var a=null;if(!r){try{a=i.push_trigger_option||t.PushTriggerOption.DEFAULT}catch(r){B.debug(r)}n.myPushTriggerOption=a}e(r,a)}))}),e)}},{key:"setMyPushTriggerOption",value:function(e,t){var n,r=this,i=T.get(this._iid).GroupChannel,a=b(Z.parse(arguments,[new Z({type:i.PushTriggerOption}),new Z({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.setMyPushTriggerOption({channelUrl:r.url,pushTriggerOption:e},(function(e,n){var i=null;if(!e){try{i=n.push_trigger_option}catch(e){B.debug(e)}r.myPushTriggerOption=i}t(e,i)}))}),t)}},{key:"setMyCountPreference",value:function(e,t){var n,r=this,i=T.get(this._iid).GroupChannel,a=b(Z.parse(arguments,[new Z({type:i.CountPreference}),new Z({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.setMyCountPreference({channelUrl:r.url,countPreference:e},(function(e,n){var a=null;e||(a=r.myCountPreference=n.count_preference,r._setGroupChannelUnreadCount(r.unreadMessageCount,r.unreadMentionCount),i.cachedChannels[r.url]=r),t(e,a)}))}),t)}},{key:"resetMyHistory",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.resetMyHistory({channelUrl:t.url},(function(n,r){if(!n&&r.hasOwnProperty("ts_message_offset")){var i=T.get(t._iid).GroupChannel;t._messageOffsetTimestamp=r.ts_message_offset,i.cachedChannels[t.url]=t}e(n,r)}))}),e)}},{key:"messageOffsetTimestamp",get:function(){return this._messageOffsetTimestamp}}],[{key:"buildFromSerializedData",value:function(e){var t,n=T.get(this._iid),r=n.User,i=n.Member,s=n.GroupChannel,o=n.BaseMessage,u=n.UserMessage,l=n.FileMessage,d=n.AdminMessage,f=ue.deserialize(e);return new s({channel_url:f.url,name:f.name,cover_url:f.coverUrl,data:f.data,custom_type:f.customType,invited_at:f.invitedAt,created_at:f.createdAt/1e3,is_access_code_required:f.isAccessCodeRequired,is_distinct:f.isDistinct,is_super:f.isSuper,is_broadcast:f.isBroadcast,is_public:f.isPublic,is_discoverable:f.isDiscoverable,is_hidden:f.isHidden,is_ephemeral:f.isEphemeral,is_muted:f.myMutedState,is_push_enabled:f.isPushEnabled,freeze:f.isFrozen,unread_message_count:f.unreadMessageCount,unread_mention_count:f.unreadMentionCount,push_trigger_option:f.myPushTriggerOption,count_preference:f.myCountPreference,hidden_state:f.hiddenState,member_count:f.memberCount,joined_member_count:f.joinedMemberCount,member_state:f.myMemberState,my_role:f.myRole,user_last_read:f.myLastRead,ts_message_offset:f.messageOffsetTimestamp,message_survival_seconds:f.messageSurvivalSeconds,read_receipt:f.cachedReadReceiptStatus,delivery_receipt:f.cachedDeliveryReceiptStatus,members:f.members.map((function(e){return i.objectify(c({user:e},e))})),last_message:null!=(t=f.lastMessage)&&"object"===a(t)?t.messageType===o.MESSAGE_TYPE_USER?new u(u.objectify(c(c({},t),{},{channel:{url:t.channelUrl,channelType:t.channelType},user:t.sender,mentionedUsers:t.mentionedUsers}))):t.messageType===o.MESSAGE_TYPE_FILE?new l(l.objectify(c(c({},t),{},{channel:{url:t.channelUrl,channelType:t.channelType},user:t.sender,mentionedUsers:t.mentionedUsers}))):new d(d.objectify(c(c({},t),{},{channel:{url:t.channelUrl,channelType:t.channelType},mentionedUsers:t.mentionedUsers}))):null,created_by:null!==f.creator&&void 0!==f.creator&&"object"===a(f.creator)?r.objectify(f.creator):null,inviter:null!==f.inviter&&void 0!==f.inviter&&"object"===a(f.inviter)?r.objectify(f.inviter):null})}},{key:"upsert",value:function(e){var t=T.get(this._iid).GroupChannel,n=new t(e);if(t.cachedChannels.hasOwnProperty(n.url)){if(n.isEphemeral){var r=t.cachedChannels[n.url];e.last_message=r.lastMessage,e.unread_message_count=r.unreadMessageCount}t.cachedChannels[n.url].update(e)}else t.cachedChannels[n.url]=n;return t.cachedChannels[n.url]}},{key:"removeCachedChannel",value:function(e){var t=T.get(this._iid),n=t.GroupChannel,r=t.FileMessageQueue;n.cachedChannels[e]&&delete n.cachedChannels[e],r.delete(e)}},{key:"clearCache",value:function(){Ue[this._iid]={},T.get(this._iid).FileMessageQueue.clear()}},{key:"getChannel",value:function(e,t){var n,r,i=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"string",optional:!0,nullable:!0,defaultValue:null}),new Z({type:"callback"})]),4);if(n=i[0],e=i[1],r=i[2],t=i[3],n)return le(this._iid,(function(e){e(n,null)}),t);var a=T.get(this._iid).GroupChannel;return a.cachedChannels[e]?le(this._iid,(function(t){t(null,a.cachedChannels[e])}),t):a.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n,r,i=this,a=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"string",optional:!0,nullable:!0,defaultValue:null}),new Z({type:"callback"})]),4);return n=a[0],e=a[1],r=a[2],t=a[3],le(this._iid,(function(t){n?t(n,null):A.get(i._iid).container.apiClient.getGroupChannel({channelUrl:e,internalCall:r,showMember:!0},(function(e,n){var r=null;e||(r=i.upsert(n)),t(e,r)}))}),t)}},{key:"createDistinctChannelIfNotExist",value:function(e,t){var n,r=this,i=T.get(this._iid).GroupChannelParams,a=b(Z.parse(arguments,[new Z({type:i,constraint:function(e){return e._validate()}}),new Z({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],le(this._iid,(function(t){n?t(n,null):(e.isPublic||(e.accessCode=null),A.get(r._iid).container.apiClient.createGroupChannel(c(c({},e),{},{isDistinct:!0}),(function(e,n){var i=null;if(!e){var a=T.get(r._iid).GroupChannel;i={channel:new a(n),isCreated:n.is_created},a.cachedChannels[i.channel.url]=i.channel}t(e,i)})))}),t)}},{key:"createChannel",value:function(){var e=this,t=Z.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=T.get(this._iid),i=r.GroupChannel,a=r.GroupChannelParams;if(t[0]instanceof a&&1===t.length)return le(this._iid,(function(n){var r=t[0];r.isPublic||(r.accessCode=null),r._validate()?A.get(e._iid).container.apiClient.createGroupChannel(r,(function(e,t){var r=null;e||(r=new i(t),i.cachedChannels[r.url]=r),n(e,r)})):n(Z.error,null)}),n);if(Array.isArray(t[0])){var s=new a;switch(t.length){case 1:s.addUsers(t[0]);break;case 2:s.addUsers(t[0]),s.isDistinct=t[1];break;case 3:s.addUsers(t[0]),s.isDistinct=t[1],s.customType=t[2];break;case 5:s.addUsers(t[0]),s.isDistinct=t[1],s.name=t[2],"string"==typeof t[3]?s.coverUrl=t[3]:s.coverImage=t[3],s.data=t[4];break;case 6:s.addUsers(t[0]),s.isDistinct=t[1],s.name=t[2],"string"==typeof t[3]?s.coverUrl=t[3]:s.coverImage=t[3],s.data=t[4],s.customType=t[5];break;default:return le(this._iid,(function(e){return e(Z.error,null)}),n)}return n?i.createChannel(s,n):i.createChannel(s)}return le(this._iid,(function(e){return e(Z.error,null)}),n)}},{key:"createChannelWithUserIds",value:function(){var e=Z.toArray(arguments),t=void 0;"function"==typeof e[e.length-1]&&(t=e.pop());var n=T.get(this._iid),r=n.GroupChannel,i=new n.GroupChannelParams;switch(e.length){case 1:i.addUserIds(e[0]);break;case 2:i.addUserIds(e[0]),i.isDistinct=e[1];break;case 3:i.addUserIds(e[0]),i.isDistinct=e[1],i.customType=e[2];break;case 5:i.addUserIds(e[0]),i.isDistinct=e[1],i.name=e[2],"string"==typeof e[3]?i.coverUrl=e[3]:i.coverImage=e[3],i.data=e[4];break;case 6:i.addUserIds(e[0]),i.isDistinct=e[1],i.name=e[2],"string"==typeof e[3]?i.coverUrl=e[3]:i.coverImage=e[3],i.data=e[4],i.customType=e[5];break;default:return le(this._iid,(function(e){return e(Z.error,null)}),t)}return r.createChannel(i,t)}},{key:"createMyGroupChannelListQuery",value:function(){return new(T.get(this._iid).GroupChannelListQuery)}},{key:"createPublicGroupChannelListQuery",value:function(){return new(T.get(this._iid).PublicGroupChannelListQuery)}},{key:"getChannelCount",value:function(e,t){return Dt.getInstance(this._iid).getGroupChannelCount(e,t)}},{key:"getUnreadItemCount",value:function(e,t){return Dt.getInstance(this._iid).getUnreadItemCount(e,t)}},{key:"getTotalUnreadMessageCount",value:function(){var e=Z.toArray(arguments),t="function"==typeof e[e.length-1]?e.pop():null,n=Dt.getInstance(this._iid);return n.getTotalUnreadMessageCount.apply(n,C(e).concat([t]))}},{key:"getTotalUnreadChannelCount",value:function(e){return Dt.getInstance(this._iid).getTotalUnreadChannelCount(e)}},{key:"MemberStateFilter",get:function(){return{ALL:"all",JOINED:"joined_only",INVITED:"invited_only",INVITED_BY_FRIEND:"invited_by_friend",INVITED_BY_NON_FRIEND:"invited_by_non_friend"}}},{key:"PushTriggerOption",get:function(){return{DEFAULT:"default",ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"CountPreference",get:function(){return{ALL:"all",UNREAD_MESSAGE_COUNT_ONLY:"unread_message_count_only",UNREAD_MENTION_COUNT_ONLY:"unread_mention_count_only",OFF:"off"}}},{key:"HiddenState",get:function(){return{UNHIDDEN:"unhidden",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"PublicChannelFilter",get:function(){return{ALL:"all",PUBLIC:"public",PRIVATE:"private"}}},{key:"SuperChannelFilter",get:function(){return{ALL:"all",SUPER:"super",NON_SUPER:"nonsuper"}}},{key:"UnreadChannelFilter",get:function(){return{ALL:"all",UNREAD_MESSAGE:"unread_message"}}},{key:"HiddenChannelFilter",get:function(){return{UNHIDDEN:"unhidden_only",HIDDEN:"hidden_only",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"Role",get:function(){return{OPERATOR:"operator",NONE:"none"}}},{key:"UnreadItemKey",get:function(){return{GROUP_CHANNEL_UNREAD_MENTION_COUNT:"group_channel_unread_mention_count",NONSUPER_UNREAD_MENTION_COUNT:"non_super_group_channel_unread_mention_count",SUPER_UNREAD_MENTION_COUNT:"super_group_channel_unread_mention_count",GROUP_CHANNEL_UNREAD_MESSAGE_COUNT:"group_channel_unread_message_count",NONSUPER_UNREAD_MESSAGE_COUNT:"non_super_group_channel_unread_message_count",SUPER_UNREAD_MESSAGE_COUNT:"super_group_channel_unread_message_count",GROUP_CHANNEL_INVITATION_COUNT:"group_channel_invitation_count",NONSUPER_INVITATION_COUNT:"non_super_group_channel_invitation_count",SUPER_INVITATION_COUNT:"super_group_channel_invitation_count"}}},{key:"cachedChannels",get:function(){return Ue[this._iid]||(Ue[this._iid]={}),Ue[this._iid]}},{key:"markAsReadAllLastSentAt",get:function(){return Me[this._iid]||0},set:function(e){Me[this._iid]=e}}]),t}(),Le=function(){d(t,he);var e=y(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).state="",r.role="",r.isMuted=!1,r.isBlockedByMe=!1,r.isBlockingMe=!1,n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){this.state=e.state,this.role=e.role||Ne.Role.NONE,e.hasOwnProperty("is_muted")&&(this.isMuted=e.is_muted),e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me),e.hasOwnProperty("is_blocking_me")&&(this.isBlockingMe=e.is_blocking_me)}},{key:"parse",value:function(e){this._update(e)}}],[{key:"objectify",value:function(e){var t=T.get(this._iid).User,n=e.user,r=e.state,i=e.role,a=void 0===i?"":i,s=e.isMuted,o=void 0!==s&&s,u=e.isBlockedByMe,l=void 0!==u&&u,c=e.isBlockingMe,d=void 0!==c&&c,f=t.objectify(n);return f.state=r,f.role=a,f.is_muted=o,f.is_blocked_by_me=l,f.is_blocking_me=d,f}},{key:"build",value:function(e,t,n,r,i,a){var s=T.get(this._iid).User;return this.objectify({user:new s(e),state:t,role:n,isMuted:r,isBlockedByMe:i,isBlockingMe:a})}},{key:"buildFromSerializedData",value:function(e){var t=T.get(this._iid).Member,n=ue.deserialize(e);return new t(t.objectify(c({user:n},n)))}},{key:"JOINED",get:function(){return"joined"}},{key:"INVITED",get:function(){return"invited"}}]),t}(),Pe=function(){d(t,he);var e=y(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).role="",r.isBlockedByMe=!1,n&&r._update(n),r}return u(t,[{key:"parse",value:function(e){this._update(e)}},{key:"_update",value:function(e){this.role=e.role||Ne.Role.NONE,e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me)}}],[{key:"objectify",value:function(e){var t=T.get(this._iid).User,n=e.user,r=e.role,i=void 0===r?"":r,a=e.isBlockedByMe,s=void 0!==a&&a,o=t.objectify(n);return o.role=i,o.is_blocked_by_me=s,o}},{key:"build",value:function(e,t){var n=T.get(this._iid).User;return this.objectify({user:new n(e),isBlockedByMe:t})}},{key:"buildFromSerializedData",value:function(e){var t=T.get(this._iid).Sender,n=ue.deserialize(e);return new t(t.objectify(c({user:n},n)))}}]),t}(),De=function(){function e(t){s(this,e),this.emojiHash=null,this.emojiCategories=null,t&&this._update(t)}return u(e,[{key:"_update",value:function(e){var t=T.get(this._iid).EmojiCategory;this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new t(e)})):[]}}]),e}(),xe=function(){function e(t){s(this,e),this.id=null,this.name=null,this.url=null,this.emojis=null,t&&this._update(t)}return u(e,[{key:"_update",value:function(e){var t=T.get(this._iid).Emoji;this.id=e.id||0,this.name=e.name||"",this.url=e.url||"",this.emojis=e.emojis?e.emojis.map((function(e){return new t(e)})):[]}}]),e}(),Fe=function(){function e(t){s(this,e),this.key=null,this.url=null,t&&this._update(t)}return u(e,[{key:"_update",value:function(e){this.key=e.key,this.url=e.url}}]),e}(),He={},je={},Ge=function(){d(t,ve);var e=y(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).channelType=ve.CHANNEL_TYPE_OPEN,r.participantCount=0,r.operators=[],n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){var t=T.get(this._iid).User;e.hasOwnProperty("participant_count")&&(this.participantCount=parseInt(e.participant_count)),e.hasOwnProperty("operators")&&Array.isArray(e.operators)&&(this.operators=e.operators.map((function(e){return new t(e)})))}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"createParticipantListQuery",value:function(){return new(T.get(this._iid).ParticipantListQuery)({channelUrl:this.url})}},{key:"createMutedUserListQuery",value:function(){return new(T.get(this._iid).MutedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"createBannedUserListQuery",value:function(){return new(T.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"isOperator",value:function(e){return!!e&&this.isOperatorWithUserId(e.userId)}},{key:"isOperatorWithUserId",value:function(e){return-1<this.operators.map((function(e){return e.userId})).indexOf(e)}},{key:"refresh",value:function(e){return T.get(this._iid).OpenChannel.getChannelWithoutCache(this.url,e)}},{key:"enter",value:function(e){var t=this;return le(this._iid,(function(e){var n=T.get(t._iid).Command.bEnter({channelUrl:t.url}),r=Dt.getInstance(t._iid);r.sendCommand(n,(function(n,i){if(r.getErrorFirstCallback()){var a=[n,i];i=a[0],n=a[1]}i?(i=i?new U(i.message,i.code):null,e(i,null)):(T.get(t._iid).OpenChannel.enteredChannels[t.url]=t).refresh((function(){return e(null,null)}))}))}),e)}},{key:"exit",value:function(e){var t=this;return le(this._iid,(function(e){var n=T.get(t._iid),r=n.Command,i=n.FileMessageQueue,a=r.bExit({channelUrl:t.url}),s=Dt.getInstance(t._iid);s.sendCommand(a,(function(n,r){if(s.getErrorFirstCallback()){var a=[n,r];r=a[0],n=a[1]}r?(r=r?new U(r.message,r.code):null,e(r,null)):(delete T.get(t._iid).OpenChannel.enteredChannels[t.url],i.delete(t.url),e(null,null))}))}),e)}},{key:"updateChannel",value:function(){var e=this,t=Z.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var r=T.get(this._iid),i=r.OpenChannel,a=r.OpenChannelParams;if(t[0]instanceof a&&1===t.length)return le(this._iid,(function(n){var r=t[0];r.channelUrl=e.url,r._validate()?A.get(e._iid).container.apiClient.updateOpenChannel(r,(function(e,t){var r=null;e||(r=i.upsert(t)),n(e,r)})):n(Z.error,null)}),n);if(3===t.length){var s=new a;return s.channelUrl=this.url,s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=this.operators.map((function(e){return e.userId})),this.updateChannel(s,n)}if(4===t.length){var o=new a;return o.channelUrl=this.url,o.name=t[0],o.coverUrlOrImage=t[1],o.data=t[2],Array.isArray(t[3])&&(o.operatorUserIds=t[3]),this.updateChannel(o,n)}if(5!==t.length)return le(this._iid,(function(e){return e(Z.error,null)}),n);var u=new a;return u.channelUrl=this.url,u.name=t[0],u.coverUrlOrImage=t[1],u.data=t[2],Array.isArray(t[3])&&(u.operatorUserIds=t[3]),u.customType=t[4],this.updateChannel(u,n)}},{key:"updateChannelWithOperatorUserIds",value:function(){var e=Z.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.updateChannel.apply(this,C(e).concat([t]));default:return le(this._iid,(function(e){return e(Z.error,null)}),t)}}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var i,a=this,s=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return-1<=e}}),new Z({type:"string",optional:!0,defaultValue:""}),new Z({type:"callback"})]),5);return i=s[0],e=s[1],t=s[2],n=s[3],r=s[4],le(this._iid,(function(r){i?r(i,null):A.get(a._iid).container.apiClient.muteUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!1},(function(e,t){r(e,null)}))}),r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.unmuteUser({channelUrl:r.url,userId:e,isGroupChannel:!1},(function(e,n){t(e,null)}))}),t)}},{key:"banUser",value:function(e,t,n){return this.banUserWithUserId(e?e.userId:null,t,n)}},{key:"banUserWithUserId",value:function(e,t,n){var r,i=this,a=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return-1<=e}}),new Z({type:"callback"})]),4);return r=a[0],e=a[1],t=a[2],n=a[3],le(this._iid,(function(n){r?n(r,null):A.get(i._iid).container.apiClient.banUser({channelUrl:i.url,userId:e,description:null,seconds:t,isGroupChannel:!1},(function(e,t){n(e,null)}))}),n)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.unbanUser({channelUrl:r.url,userId:e,isGroupChannel:!1},(function(e,n){t(e,null)}))}),t)}},{key:"delete",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.deleteOpenChannel({channelUrl:t.url},(function(n,r){n||(delete T.get(t._iid).OpenChannel.cachedChannels[t.url],T.get(t._iid).FileMessageQueue.delete(t.url)),e(n,r)}))}),e)}}],[{key:"buildFromSerializedData",value:function(e){var t=T.get(this._iid),n=t.User,r=t.OpenChannel,i=ue.deserialize(e);return new r({channel_url:i.url,name:i.name,cover_url:i.coverUrl,data:i.data,custom_type:i.customType,created_at:i.createdAt/1e3,freeze:i.isFrozen,is_ephemeral:i.isEphemeral,participant_count:i.participantCount,operators:i.operators.map((function(e){return n.objectify(e)}))})}},{key:"getChannel",value:function(e,t){var n,r,i=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"string",optional:!0,nullable:!0,defaultValue:null}),new Z({type:"callback"})]),4);if(n=i[0],e=i[1],r=i[2],t=i[3],n)return le(this._iid,(function(e){e(n,null)}),t);var a=T.get(this._iid).OpenChannel;return a.cachedChannels[e]?le(this._iid,(function(t){t(null,a.cachedChannels[e])}),t):a.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n,r,i=this,a=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"string",optional:!0,nullable:!0,defaultValue:null}),new Z({type:"callback"})]),4);return n=a[0],e=a[1],r=a[2],t=a[3],le(this._iid,(function(t){n?t(n,null):A.get(i._iid).container.apiClient.getOpenChannel({channelUrl:e,internalCall:r},(function(e,n){var r=null;e||(r=T.get(i._iid).OpenChannel.upsert(n)),t(e,r)}))}),t)}},{key:"createChannel",value:function(){var e=this,t=Z.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var r=T.get(this._iid),i=r.OpenChannel,a=r.OpenChannelParams;if(t[0]instanceof a&&1===t.length)return le(this._iid,(function(n){var r=t[0];r._validate()?A.get(e._iid).container.apiClient.createOpenChannel(r,(function(t,r){var i=null;t||(i=T.get(e._iid).OpenChannel.upsert(r)),n(t,i)})):n(Z.error,null)}),n);var s=new a;switch(t.length){case 0:break;case 1:s.name=t[0];break;case 2:s.name=t[0],s.coverUrlOrImage=t[1];break;case 3:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2];break;case 4:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=t[3];break;case 5:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=t[3],s.customType=t[4];break;default:return le(this._iid,(function(e){return e(Z.error,null)}),n)}return n?i.createChannel(s,n):i.createChannel(s)}},{key:"createChannelWithOperatorUserIds",value:function(){var e=Z.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.createChannel.apply(this,C(e).concat([t]));default:return le(this._iid,(function(e){return e(Z.error,null)}),t)}}},{key:"upsert",value:function(e){var t=new(T.get(this._iid).OpenChannel)(e);return this.cachedChannels.hasOwnProperty(t.url)?this.cachedChannels[t.url].update(e):this.cachedChannels[t.url]=t,this.cachedChannels[t.url]}},{key:"removeCachedChannel",value:function(e){this.cachedChannels[e]&&delete this.cachedChannels[e],T.get(this._iid).FileMessageQueue.delete(e)}},{key:"clearCache",value:function(){He[this._iid]={},T.get(this._iid).FileMessageQueue.clear()}},{key:"clearEnteredChannels",value:function(){je[this._iid]={}}},{key:"createOpenChannelListQuery",value:function(){return new(T.get(this._iid).OpenChannelListQuery)}},{key:"cachedChannels",get:function(){return He[this._iid]||(He[this._iid]={}),He[this._iid]}},{key:"enteredChannels",get:function(){return je[this._iid]||(je[this._iid]={}),je[this._iid]}}]),t}(),Be=function(){d(t,fe);var e=y(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).messageType=fe.MESSAGE_TYPE_USER,r.message=null,r._sender=null,r.reqId="",r.translations={},r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,r.plugins=[],n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){var t=Dt.getInstance(this._iid),n=T.get(this._iid),r=n.Sender,i=n.Plugin;this.message=String(e.message),this._sender=new r(e.user),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.translations=e.hasOwnProperty("translations")?e.translations:{},this.requestState=0<this.messageId?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),this.plugins=[],e.hasOwnProperty("plugins")&&Array.isArray(e.plugins)&&(this.plugins=e.plugins.map((function(e){return new i(e)})))}},{key:"isResendable",value:function(){var e=Dt.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&$.isResendableError(this.errorCode)}},{key:"sender",get:function(){var e=Dt.getInstance(this._iid),t=T.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),$.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}}],[{key:"objectify",value:function(e){var t=Dt.getInstance(this._iid),n=T.get(this._iid),r=n.BaseChannel,i=n.BaseMessageParams,a=n.Sender,s=n.User,o=n.ThreadInfo,u=n.OGMetaData,l=n.Plugin,c=e.messageId,d=e.reqId,f=void 0===d?"":d,h=e.user,p=e.channel,v=e.message,g=e.data,m=void 0===g?"":g,y=e.customType,_=void 0===y?"":y,b=e.mentionType,C=void 0===b?i.MentionType.USERS:b,E=e.mentionedUsers,k=void 0===E?[]:E,w=e.mentionedUserIds,S=void 0===w?[]:w,I=e.requestedMentionUserIds,A=void 0===I?[]:I,U=e.reactions,M=void 0===U?[]:U,O=e.metaArrays,R=void 0===O?[]:O,N=e.rootMessageId,L=void 0===N?0:N,P=e.parentMessageId,D=void 0===P?0:P,x=e.parentMessageText,F=void 0===x?"":x,H=e.threadInfo,j=void 0===H?null:H,G=e.translations,B=void 0===G?{}:G,q=e.sendingStatus,Y=e.errorCode,V=void 0===Y?0:Y,$=e.silent,z=void 0!==$&&$,W=e.isGlobalBlocked,Q=void 0!==W&&W,K=e.messageSurvivalSeconds,J=void 0===K?-1:K,X=e.ogMetaData,Z=void 0===X?null:X,ee=e.isOperatorMessage,te=void 0!==ee&&ee,ne=e.plugins,re=void 0===ne?[]:ne,ie=e.createdAt,ae=e.updatedAt,se=void 0===ae?0:ae,oe={};for(var ue in oe.req_id=f,oe.msg_id=c,oe.user=a.objectify({user:h,role:t.currentUser&&t.currentUser.userId===h.userId?p.myRole:h.role,isBlockedByMe:h.isBlockedByMe}),oe.channel_url=p.url,oe.channel_type=p.channelType===r.CHANNEL_TYPE_OPEN?r.CHANNEL_TYPE_OPEN:r.CHANNEL_TYPE_GROUP,oe.message=v,oe.data=m,oe.custom_type=_,oe.translations=B,oe.is_global_block=!!Q,oe.ts=ie,oe.updated_at=se,oe.mention_type=C,oe.mentioned_users=k.map((function(e){return s.objectify(e)})),oe.mentioned_user_ids=S,oe.requested_mention_user_ids=A,oe.reactions=M.map((function(e){return e.serialize()})),oe.metaarray={},R){var le=R[ue].key;oe.metaarray[le]=R[ue].value}return oe.metaarray_key_order=R.map((function(e){return e.key})),oe.root_message_id=L,oe.parent_message_id=D,oe.parent_message_text=F,j&&(oe.thread_info=o.objectify(j)),oe.sending_status=0<c?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,q&&(oe.sending_status=q),oe.silent=!!z,oe.error_code=V,oe.message_survival_seconds=J,Z&&(oe.og_tag=u.objectify(Z)),oe.is_op_msg=!!te,oe.plugins=re.map((function(e){return l.objectify(e)})),oe}},{key:"build",value:function(e,t,n,r,i,a,s,o,u,l,c,d,f,h,p,v,g,m,y,_,b,C,E,k,w,S,I){return this.objectify({messageId:t,reqId:e,user:n,channel:r,message:i,data:a,customType:s,mentionType:h,mentionedUsers:p,mentionedUserIds:_,requestedMentionUserIds:C,reactions:f,metaArrays:d,rootMessageId:v,parentMessageId:g,parentMessageText:m,threadInfo:y,translations:o,sendingStatus:b,errorCode:E,isGlobalBlocked:u,messageSurvivalSeconds:k,ogMetaData:w,isOperatorMessage:S,plugins:I,createdAt:l,updatedAt:c})}},{key:"buildFromSerializedData",value:function(e){var t=T.get(this._iid).UserMessage,n=ue.deserialize(e);return new t(t.objectify(c(c({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType},user:n.sender})))}}]),t}(),qe=function(){d(t,fe);var e=y(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).messageType=fe.MESSAGE_TYPE_FILE,r.plainUrl=null,r.name="File",r.size=0,r.type=null,r.thumbnails=[],r._sender=null,r.reqId="",r.requireAuth=null,r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){var t=Dt.getInstance(this._iid),n=A.get(this._iid).container.auth,r=T.get(this._iid).Sender;if(this._sender=new r(e.user),this.requireAuth=!!e.hasOwnProperty("require_auth")&&e.require_auth,this.plainUrl=String(e.url).split("?auth=")[0],Object.defineProperty(this,"url",{value:this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(n.eKey):this.plainUrl,configurable:!0,writable:!1}),this.name=e.hasOwnProperty("name")?e.name:"File",this.size=parseInt(e.size)||0,this.type=String(e.type),e.hasOwnProperty("custom")&&(this.data=String(e.custom)),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.thumbnails=e.hasOwnProperty("thumbnails")?e.thumbnails:[],this.requireAuth)for(var i in this.thumbnails)this.thumbnails[i].plainUrl=String(this.thumbnails[i].url).split("?auth=")[0],this.thumbnails[i].url=this.requireAuth?"".concat(this.thumbnails[i].plainUrl,"?auth=").concat(n.eKey):this.thumbnails[i].plainUrl;this.requestState=0<this.messageId?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"isResendable",value:function(){var e=Dt.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&$.isResendableError(this.errorCode)}},{key:"sender",get:function(){var e=Dt.getInstance(this._iid),t=T.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),$.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}}],[{key:"objectify",value:function(e){var t=Dt.getInstance(this._iid),n=T.get(this._iid),r=n.BaseChannel,i=n.BaseMessageParams,a=n.Sender,s=n.User,o=n.ThreadInfo,u=n.OGMetaData,l=e.messageId,c=e.reqId,d=void 0===c?"":c,f=e.user,h=void 0===f?{}:f,p=e.channel,v=e.plainUrl,g=e.name,m=e.type,y=e.size,_=void 0===y?0:y,b=e.data,C=void 0===b?"":b,E=e.customType,k=void 0===E?"":E,w=e.mentionType,S=void 0===w?i.MentionType.USERS:w,I=e.mentionedUsers,A=void 0===I?[]:I,U=e.mentionedUserIds,M=void 0===U?[]:U,O=e.requestedMentionUserIds,R=void 0===O?[]:O,N=e.reactions,L=void 0===N?[]:N,P=e.metaArrays,D=void 0===P?[]:P,x=e.rootMessageId,F=void 0===x?0:x,H=e.parentMessageId,j=void 0===H?0:H,G=e.parentMessageText,B=void 0===G?"":G,q=e.threadInfo,Y=void 0===q?null:q,V=e.thumbnails,$=void 0===V?[]:V,z=e.requireAuth,W=void 0!==z&&z,Q=e.sendingStatus,K=e.errorCode,J=void 0===K?0:K,X=e.silent,Z=void 0!==X&&X,ee=e.isGlobalBlocked,te=void 0!==ee&&ee,ne=e.messageSurvivalSeconds,re=void 0===ne?-1:ne,ie=e.ogMetaData,ae=void 0===ie?null:ie,se=e.isOperatorMessage,oe=void 0!==se&&se,ue=e.createdAt,le=e.updatedAt,ce=void 0===le?0:le,de={};de.req_id=d,de.msg_id=l,de.user=a.objectify({user:h,role:t.currentUser&&t.currentUser.userId===h.userId?p.myRole:h.role,isBlockedByMe:h.isBlockedByMe}),de.channel_url=p.url,de.channel_type=p.channelType===r.CHANNEL_TYPE_OPEN?r.CHANNEL_TYPE_OPEN:r.CHANNEL_TYPE_GROUP,de.url=v,de.name=g,de.type=m,de.size=_,de.custom=C,de.custom_type=k,de.thumbnails=$,de.require_auth=W,de.is_global_block=!!te,de.ts=ue,de.updated_at=ce,de.mention_type=S,de.mentioned_users=A.map((function(e){return s.objectify(e)})),de.mentioned_user_ids=M,de.requested_mention_user_ids=R,de.reactions=L.map((function(e){return e.serialize()})),de.metaarray={};for(var fe=0;fe<D.length;fe++){var he=D[fe].key;de.metaarray[he]=D[fe].value}return de.metaarray_key_order=D.map((function(e){return e.key})),de.root_message_id=F,de.parent_message_id=j,de.parent_message_text=B,Y&&(de.thread_info=o.objectify(Y)),de.sending_status=0<l?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,Q&&(de.sending_status=Q),de.silent=!!Z,de.error_code=J,de.message_survival_seconds=re,ae&&(de.og_tag=u.objectify(ae)),de.is_op_msg=!!oe,de}},{key:"build",value:function(e,t,n,r,i,a,s,o,u,l,c,d,f,h,p,v,g,m,y,_,b,C,E,k,w,S,I,A,U,M){return this.objectify({messageId:t,reqId:e,user:n,channel:r,plainUrl:i,name:a,type:s,size:o,data:u,customType:l,mentionType:m,mentionedUsers:y,mentionedUserIds:k,requestedMentionUserIds:S,reactions:g,metaArrays:v,rootMessageId:_,parentMessageId:b,parentMessageText:C,threadInfo:E,thumbnails:f,requireAuth:h,sendingStatus:w,errorCode:I,isGlobalBlocked:c,messageSurvivalSeconds:A,ogMetaData:U,isOperatorMessage:M,createdAt:d,updatedAt:p})}},{key:"buildFromSerializedData",value:function(e){var t=T.get(this._iid).FileMessage,n=ue.deserialize(e);return new t(t.objectify(c(c({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType},user:n.sender})))}}]),t}(),Ye=function(){d(t,fe);var e=y(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).messageType=fe.MESSAGE_TYPE_ADMIN,r.message="",r.translations={},n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){this.message=String(e.message),this.translations=e.hasOwnProperty("translations")?e.translations:{}}}],[{key:"objectify",value:function(e){var t=T.get(this._iid),n=t.BaseChannel,r=t.BaseMessageParams,i=t.User,a=t.ThreadInfo,s=t.OGMetaData,o=e.messageId,u=e.channel,l=e.message,c=e.data,d=void 0===c?"":c,f=e.customType,h=void 0===f?"":f,p=e.mentionType,v=void 0===p?r.MentionType.USERS:p,g=e.mentionedUsers,m=void 0===g?[]:g,y=e.reactions,_=void 0===y?[]:y,b=e.metaArrays,C=void 0===b?[]:b,E=e.rootMessageId,k=void 0===E?0:E,w=e.parentMessageId,S=void 0===w?0:w,I=e.parentMessageText,A=void 0===I?"":I,U=e.threadInfo,M=void 0===U?null:U,O=e.translations,R=void 0===O?{}:O,N=e.silent,L=void 0!==N&&N,P=e.ogMetaData,D=void 0===P?null:P,x=e.createdAt,F=e.updatedAt,H=void 0===F?0:F,j={msg_id:o,channel_url:u.url,channel_type:u.channelType===n.CHANNEL_TYPE_OPEN?n.CHANNEL_TYPE_OPEN:n.CHANNEL_TYPE_GROUP,message:l,data:d,custom_type:h,silent:L,ts:x,updated_at:H};j.translations=R,j.mention_type=v,j.mentioned_users=m.map((function(e){return i.objectify(e)})),j.reactions=_.map((function(e){return e.serialize()})),j.metaarray={};for(var G=0;G<C.length;G++){var B=C[G].key;j.metaarray[B]=C[G].value}return j.metaarray_key_order=C.map((function(e){return e.key})),j.root_message_id=k,j.parent_message_id=S,j.parent_message_text=A,M&&(j.thread_info=a.objectify(M)),D&&(j.og_tag=s.objectify(D)),j}},{key:"build",value:function(e,t,n,r,i,a,s,o,u,l,c,d,f,h,p,v,g){return this.objectify({messageId:e,channel:t,message:n,data:r,customType:i,mentionType:c,mentionedUsers:d,reactions:l,metaArrays:u,rootMessageId:f,parentMessageId:h,parentMessageText:p,threadInfo:v,translations:a,ogMetaData:g,createdAt:s,updatedAt:o})}},{key:"buildFromSerializedData",value:function(e){var t=T.get(this._iid).AdminMessage,n=ue.deserialize(e);return new t(t.objectify(c(c({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType}})))}}]),t}(),Ve=function(){function e(t){s(this,e);var n=T.get(this._iid),r=n.BaseMessage,i=n.BaseMessageParams;this.scheduledId=0,this.scheduledDateTimeString="",this.scheduledTimezone="",this.status=e.Status.SCHEDULED,this.createdAt=0,this.updatedAt=0,this._messageType=r.MESSAGE_TYPE_BASE,this._sender=null,this._channelType="",this.channelUrl="",this.message="",this.customType="",this.data="",this.metaArrays=[],this.mentionType=i.MentionType.USERS,this.mentionedUsers=[],this.pushNotificationDeliveryOption=i.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=[],this.errorMessage="",this.errorCode=0,t&&this._update(t)}return u(e,[{key:"_update",value:function(t){var n=this,r=T.get(this._iid),i=r.User,a=r.Sender,s=r.BaseMessageParams,o=r.MessageMetaArray;this.scheduledId=t.hasOwnProperty("scheduled_id")?parseInt(t.scheduled_id):0,this.scheduledDateTimeString=t.hasOwnProperty("scheduled_dt")?String(t.scheduled_dt):"",this.scheduledTimezone=t.hasOwnProperty("scheduled_timezone")?String(t.scheduled_timezone):"",this.status=t.hasOwnProperty("status")?String(t.status):"",this.createdAt=t.hasOwnProperty("created_at")?parseInt(t.created_at):0,this.updatedAt=t.hasOwnProperty("updated_at")?parseInt(t.updated_at):0,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this._channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):"",this._messageType=t.hasOwnProperty("type")?String(t.type):"",this._sender=t.hasOwnProperty("user")?new a(t.user):null,this.message=t.hasOwnProperty("message")?String(t.message):"",this.customType=t.hasOwnProperty("custom_type")?String(t.custom_type):"",this.data=t.hasOwnProperty("data")?String(t.data):"";var u=t.hasOwnProperty("metaarray")?t.metaarray:{},l=t.hasOwnProperty("metaarray_key_order")?t.metaarray_key_order:Object.keys(u).sort((function(e,t){return e.localeCompare(t)}));this.metaArrays=[];for(var c=0;c<l.length;c++){var d=l[c];this.metaArrays.push(new o(d,u[d]||[]))}this.mentionType=t.hasOwnProperty("mention_type")?t.mention_type:s.MentionType.USERS,this.mentionedUsers=[],t.hasOwnProperty("mentioned_users")&&t.mentioned_users.forEach((function(e){var t=new i(e);n.mentionedUsers.push(t)})),this.pushNotificationDeliveryOption=t.hasOwnProperty("push_option")?t.push_option:s.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=t.hasOwnProperty("translation_target_langs")?t.translation_target_langs:[],this.status===e.Status.FAILED&&(t.hasOwnProperty("error")&&t.error.hasOwnProperty("message")&&(this.errorMessage=String(t.error.message)),t.hasOwnProperty("error")&&t.error.hasOwnProperty("code")&&(this.errorCode=parseInt(t.error.code)))}},{key:"isOpenChannel",value:function(){var e=T.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=T.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_GROUP}},{key:"sender",get:function(){var e=Dt.getInstance(this._iid),t=T.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),$.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach((function(t){e[t.key]=t.value})),e},set:function(e){if("object"===a(e)&&e){var t=T.get(this._iid).MessageMetaArray,n=[];for(var r in e)n.push(new t(r,e[r]));this.metaArrays=n}}}],[{key:"Status",get:function(){return{SCHEDULED:"scheduled",SENT:"sent",CANCELED:"canceled",FAILED:"failed"}}}]),e}(),$e=function(){function e(){s(this,e),this.threadInfo=null,this.targetMessageId=0,this.channelUrl=null,this.channelType=null}return u(e,null,[{key:"createFromJson",value:function(e){var t=T.get(this._iid),n=t.BaseChannel,r=t.ThreadInfo,i=e.thread_info,s=e.root_message_id,o=e.channel_url,u=e.channel_type;if(!i||"object"!==a(i)||"string"!=typeof s&&"number"!=typeof s||"string"!=typeof o||"string"!=typeof u||![n.CHANNEL_TYPE_GROUP].includes(u))return null;var l=new this;return l.threadInfo=new r(i),l.targetMessageId=parseInt(s),l.channelUrl=o,l.channelType=u,l}}]),e}(),ze=function(){function e(){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this.metaDataKeyFilter="",this.metaDataValuesFilter=[],this.nicknameStartsWithFilter=null,this._token=""}return u(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&0<t.limit&&Array.isArray(t.userIdsFilter)&&"string"==typeof t.metaDataKeyFilter&&Array.isArray(t.metaDataValuesFilter)&&!!t.metaDataKeyFilter==0<t.metaDataValuesFilter.length&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter)?t.isLoading?e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,A.get(t._iid).container.apiClient.loadUserList(c(c({},t),{},{token:t._token}),(function(n,r){var i=null;if(!n){var a=T.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.users.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(Z.error,null)}),e)}}]),e}(),We=function(){function e(t){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._isOpenChannel=!1,this._channelUrl=null,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return u(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&0<t.limit?t.isLoading?e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,A.get(t._iid).container.apiClient.loadBannedUserList(c(c({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),(function(n,r){var i=null;if(!n){var a=T.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.banned_list.map((function(e){return new a(e.user)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(Z.error,null)}),e)}}]),e}(),Qe=function(){function e(){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this._token=""}return u(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&0<t.limit&&Array.isArray(t.userIdsFilter)?t.isLoading?e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,A.get(t._iid).container.apiClient.loadBlockedUserList(c(c({},t),{},{token:t._token}),(function(n,r){var i=null;if(!n){var a=T.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.users.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(Z.error,null)}),e)}}]),e}(),Ke=function(){function e(){s(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,this._token=""}return u(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&0<t.limit?t.isLoading?e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):t.hasMore?(t.isLoading=!0,A.get(t._iid).container.apiClient.loadFriendList(c(c({},t),{},{token:t._token}),(function(n,r){var i=null;if(!n){var a=T.get(t._iid).User,s=String(r.next);t._token=s,t.hasMore=!!s,i=r.users.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(Z.error,null)}),e)}}]),e}(),Je=function(){function e(){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=e.ORDER_LATEST_LAST_MESSAGE,this._token="",this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:e.QueryType.AND},this._userIdsExactFilter=[],this._userIdsIncludeFilter=[],this._userIdsIncludeFilterQueryType=e.QueryType.AND,this.nicknameContainsFilter="",this.channelNameContainsFilter="",this.memberStateFilter=Ne.MemberStateFilter.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=Ne.SuperChannelFilter.ALL,this.publicChannelFilter=Ne.PublicChannelFilter.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=Ne.UnreadChannelFilter.ALL,this.metadataOrderKeyFilter=null,this.hiddenChannelFilter=Ne.HiddenChannelFilter.UNHIDDEN,this.includeFrozen=!0}return u(e,[{key:"setSearchFilter",value:function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={search_query:t,search_fields:e.join(",").toLocaleLowerCase()})}},{key:"serialize",value:function(){return ue.serialize(this,(function(e){e.isLoading=!1}))}},{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){var n=T.get(t._iid),r=n.GroupChannel,i=n.GroupChannelListQuery;!("number"==typeof t.limit&&0<t.limit&&"boolean"==typeof t.includeEmpty&&"string"==typeof t.order&&-1<[i.ORDER_CHRONOLOGICAL,i.ORDER_LATEST_LAST_MESSAGE,i.CHANNEL_NAME_ALPHABETICAL,i.METADATA_VALUE_ALPHABETICAL].indexOf(t.order.toLowerCase())&&Array.isArray(t._userIdsExactFilter)&&Array.isArray(t._userIdsIncludeFilter)&&Array.isArray(t.customTypesFilter)&&Array.isArray(t.channelUrlsFilter)&&-1<Object.keys(i.QueryType).map((function(e){return i.QueryType[e]})).indexOf(t._userIdsIncludeFilterQueryType.toUpperCase())&&-1<Object.keys(r.MemberStateFilter).map((function(e){return r.MemberStateFilter[e]})).indexOf(t.memberStateFilter)&&-1<Object.keys(r.SuperChannelFilter).map((function(e){return r.SuperChannelFilter[e]})).indexOf(t.superChannelFilter)&&-1<Object.keys(r.PublicChannelFilter).map((function(e){return r.PublicChannelFilter[e]})).indexOf(t.publicChannelFilter)&&-1<Object.keys(r.UnreadChannelFilter).map((function(e){return r.UnreadChannelFilter[e]})).indexOf(t.unreadChannelFilter)&&-1<Object.keys(r.HiddenChannelFilter).map((function(e){return r.HiddenChannelFilter[e]})).indexOf(t.hiddenChannelFilter))||"string"!=typeof t.customTypeStartsWithFilter&&null!==t.customTypeStartsWithFilter||"string"!=typeof t.nicknameContainsFilter||"string"!=typeof t.channelNameContainsFilter||"string"!=typeof t.metadataOrderKeyFilter&&null!==t.metadataOrderKeyFilter||"boolean"!=typeof t.includeFrozen?e(Z.error,null):t.isLoading?e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,A.get(t._iid).container.apiClient.loadGroupChannelList(c(c({},t),{},{token:t._token,userIdsFilter:t._userIdsFilter,searchFilter:t._searchFilter}),(function(n,i){if(n)return t.isLoading=!1,void e(n,null);var a=[],s=String(i.next);t._token=s,t.hasNext=!!s;for(var o=i.channels,u=0;u<o.length;u++){var l=r.upsert(o[u]);a.push(l)}t.isLoading=!1,e(n,a)}))):e(null,[])}),e)}},{key:"userIdsExactFilter",get:function(){return this._userIdsExactFilter},set:function(e){Array.isArray(e)&&(this._userIdsExactFilter=e,this._userIdsIncludeFilter=[],this._userIdsFilter.userIds=this._userIdsExactFilter,this._userIdsFilter.includeMode=!1)}},{key:"userIdsIncludeFilter",get:function(){return this._userIdsIncludeFilter},set:function(e){Array.isArray(e)&&(this._userIdsIncludeFilter=e,this._userIdsExactFilter=[],this._userIdsFilter.userIds=this._userIdsIncludeFilter,this._userIdsFilter.includeMode=!0)}},{key:"userIdsIncludeFilterQueryType",get:function(){return this._userIdsIncludeFilterQueryType},set:function(t){-1<Object.keys(e.QueryType).map((function(t){return e.QueryType[t]})).indexOf(t)&&(this._userIdsIncludeFilterQueryType=t.toUpperCase(),this._userIdsFilter.queryType=this._userIdsIncludeFilterQueryType)}}],[{key:"buildFromSerializedData",value:function(e){var t=T.get(this._iid).GroupChannel,n=ue.deserialize(e),r=t.createMyGroupChannelListQuery();for(var i in n)r.hasOwnProperty(i)&&(r[i]=n[i]);return r}},{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}},{key:"QueryType",get:function(){return{AND:"AND",OR:"OR"}}},{key:"SearchField",get:function(){return{MEMBER_NICKNAME:"member_nickname",CHANNEL_NAME:"channel_name"}}}]),e}(),Xe=function(){function e(t){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.mutedMemberFilter=e.MutedMemberFilter.ALL,this.memberStateFilter=Ne.MemberStateFilter.ALL,this.nicknameStartsWithFilter=null,this.order=e.Order.MEMBER_NICKNAME_ALPHABETICAL,this._token="",this._channelUrl=t}return u(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){var n=T.get(t._iid),r=n.GroupChannel,i=n.Member,a=n.MemberListQuery;"number"==typeof t.limit&&0<t.limit&&-1<Object.keys(a.MutedMemberFilter).map((function(e){return a.MutedMemberFilter[e]})).indexOf(t.mutedMemberFilter)&&-1<Object.keys(r.MemberStateFilter).map((function(e){return r.MemberStateFilter[e]})).indexOf(t.memberStateFilter)&&-1<Object.keys(a.Order).map((function(e){return a.Order[e]})).indexOf(t.order)&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter)?t.isLoading?e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,A.get(t._iid).container.apiClient.loadMemberList(c(c({},t),{},{channelUrl:t._channelUrl,token:t._token}),(function(n,r){var a=null;if(!n){var s=String(r.next);t._token=s,t.hasNext=!!s,a=r.members.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(Z.error,null)}),e)}}],[{key:"MutedMemberFilter",get:function(){return{ALL:"all",MUTED:"muted",UNMUTED:"unmuted"}}},{key:"Order",get:function(){return{MEMBER_NICKNAME_ALPHABETICAL:"member_nickname_alphabetical",OPERATOR_THEN_MEMBER_ALPHABETICAL:"operator_then_member_alphabetical"}}}]),e}(),Ze=function(){function e(t){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return u(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&0<t.limit?t.isLoading?e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,A.get(t._iid).container.apiClient.loadMutedUserList(c(c({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),(function(n,r){var i=null;if(!n){var a=T.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.muted_list.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(Z.error,null)}),e)}}]),e}(),et=function(){function e(){s(this,e),this.limit=20,this.isLoading=!1,this.hasNext=!0,this.nameKeyword=null,this.urlKeyword=null,this.customTypes=[],this.includeFrozen=!0}return u(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){!("number"==typeof t.limit&&0<t.limit&&Array.isArray(t.customTypes))||"string"!=typeof t.nameKeyword&&null!==t.nameKeyword||"string"!=typeof t.urlKeyword&&null!==t.urlKeyword||"boolean"!=typeof t.includeFrozen?e(Z.error,null):t.isLoading?e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,A.get(t._iid).container.apiClient.loadOpenChannelList(c(c({},t),{},{token:t._token}),(function(n,r){var i=null;if(!n){var a=T.get(t._iid).OpenChannel,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.channels.map((function(e){return a.upsert(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[])}),e)}}]),e}(),tt=new WeakMap,nt=function(){function e(t){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",tt.set(this,t)}return u(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){if("number"==typeof t.limit&&0<t.limit)if(t.isLoading)e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null);else if(t.hasNext){t.isLoading=!0;var n=tt.get(t);A.get(t._iid).container.apiClient.loadOperatorList(c(c({},t),{},{token:t._token,channelUrl:n.url,isOpenChannel:n.isOpenChannel()}),(function(n,r){var i=null;if(!n){var a=T.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.operators.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))}else e(null,[]);else e(Z.error,null)}),e)}}]),e}(),rt=new WeakMap,it=function(){function e(t){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t&&rt.set(this,t.channelUrl)}return u(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&0<t.limit?t.isLoading?e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,A.get(t._iid).container.apiClient.loadParticipantList(c(c({},t),{},{channelUrl:rt.get(t),token:t._token}),(function(n,r){var i=null;if(!n){var a=T.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.participants.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(Z.error,null)}),e)}}]),e}(),at=new WeakMap,st=function(){function e(t,n){var r=n.limit,i=void 0===r?20:r,a=n.reverse,o=void 0!==a&&a,u=n.exactMatch,l=void 0!==u&&u,c=n.channelUrl,d=void 0===c?"":c,f=n.channelCustomType,h=void 0===f?"":f,p=n.messageTimestampFrom,v=void 0===p?null:p,g=n.messageTimestampTo,m=void 0===g?null:g,y=n.order,_=void 0===y?"score":y;s(this,e),this.isLoading=!1,this.hasNext=!0,at.set(this,{keyword:t,limit:i,reverse:o,exactMatch:l,channelUrl:d,channelCustomType:h,messageTimestampFrom:v,messageTimestampTo:m,order:_,previousToken:"",nextToken:""})}return u(e,[{key:"next",value:function(e){var t=this,n=T.get(this._iid),r=n.BaseChannel,i=n.GroupChannel,a=n.OpenChannel;return le(this._iid,(function(e){var n=at.get(t),s=n.keyword,o=n.limit,u=n.reverse,l=n.exactMatch,c=n.channelUrl,d=n.channelCustomType,f=n.messageTimestampFrom,h=n.messageTimestampTo,p=n.order,v=n.nextToken;!("number"==typeof o&&0<o&&o<=1e3&&"boolean"==typeof u&&"boolean"==typeof l)||"string"!=typeof c&&null!==c||"string"!=typeof d&&null!==d||"number"!=typeof f&&null!==f||"number"!=typeof h&&null!==h||!(0<=["score","ts"].indexOf(p))?e(Z.error,null):t.isLoading?e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,A.get(t._iid).container.apiClient.searchMessages({keyword:s,limit:o,reverse:u,exactMatch:l,channelUrl:c,channelCustomType:d,messageTimestampFrom:f,messageTimestampTo:h,order:p,nextToken:v},(function(n,s){var o=null;if(!n){for(var u in o=[],s.results){var l=s.results[u],c=null;l.channel.hasOwnProperty("members")?(c=new i(l.channel),i.cachedChannels[c.url]=c):(c=new a(l.channel),a.cachedChannels[c.url]=c),o.push(r.buildMessage(l,c))}t.hasNext=s.has_next,at.get(t).nextToken=s.end_cursor}t.isLoading=!1,e(n,o)}))):e(null,[])}),e)}},{key:"key",get:function(){return at.get(this).keyword}},{key:"limit",get:function(){return at.get(this).limit}},{key:"reverse",get:function(){return at.get(this).reverse}},{key:"exactMatch",get:function(){return at.get(this).exactMatch}},{key:"channelUrl",get:function(){return at.get(this).channelUrl}},{key:"channelCustomType",get:function(){return at.get(this).channelCustomType}},{key:"messageTimestampFrom",get:function(){return at.get(this).messageTimestampFrom}},{key:"messageTimestampTo",get:function(){return at.get(this).messageTimestampTo}},{key:"order",get:function(){return at.get(this).order}}]),e}(),ot=new WeakMap,ut=new WeakMap,lt=function(){function e(t){s(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,ut.set(this,Number.MAX_SAFE_INTEGER),ot.set(this,t),this.reverse=!1,this.messageTypeFilter=null,this.customTypeFilter=null,this.customTypesFilter=null,this.senderUserIdsFilter=[],this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=!1,this.includeReplies=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1,this.showSubchannelMessagesOnly=!1}return u(e,[{key:"load",value:function(e,t,n,r){var i=this,a=T.get(this._iid).BaseChannel,s=null,o=b(Z.parse(arguments,[new Z({type:"number",optional:!0,defaultValue:this.limit}),new Z({type:"boolean",optional:!0,defaultValue:this.reverse}),new Z({type:["string","number"],optional:!0,defaultValue:this.messageTypeFilter,constraint:function(e){return-1<Object.keys(a.MessageTypeFilter).map((function(e){return a.MessageTypeFilter[e]})).indexOf(e)||-1<[0,1,2,3].indexOf(e)}}),new Z({type:"callback"})]),5);return s=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){if(Array.isArray(i.senderUserIdsFilter)&&!i.senderUserIdsFilter.some((function(e){return"string"!=typeof e}))||(s=Z.error),s)r(s,null);else{if(i.limit=e,i.reverse=t,i.messageTypeFilter=n,"number"==typeof i.messageTypeFilter)switch(i.messageTypeFilter){case 0:i.messageTypeFilter=a.MessageTypeFilter.ALL;break;case 1:i.messageTypeFilter=a.MessageTypeFilter.USER;break;case 2:i.messageTypeFilter=a.MessageTypeFilter.FILE;break;case 3:i.messageTypeFilter=a.MessageTypeFilter.ADMIN}if(i.isLoading)r(new U("Query in progress.",U.QUERY_IN_PROGRESS),null);else if(i.hasMore){i.isLoading=!0;var o=ot.get(i),u=A.get(i._iid);"boolean"==typeof i.includeReaction&&i.includeReaction&&(i.includeReactions=i.includeReaction),u.container.apiClient.getMessageList({channel:o,token:ut.get(i)||(new Date).getTime()+1e4,tokenType:"timestamp",isInclusive:!1,prevResultSize:e,nextResultSize:0,shouldReverse:t,messageType:n,customType:i.customTypeFilter,customTypes:i.customTypesFilter,senderUserIds:i.senderUserIdsFilter,includeMetaArray:i.includeMetaArray,includeReactions:i.includeReactions,includeReplies:i.includeReplies,includeParentMessageText:i.includeParentMessageText,includeThreadInfo:i.includeThreadInfo,showSubchannelMessagesOnly:i.showSubchannelMessagesOnly},(function(t,n){var s=null;if(!t){(0===(s=n.messages.map((function(e){return a.buildMessage(e,o)}))).length||s.length<e)&&(i.hasMore=!1);var u=ut.get(i);ut.set(i,Math.min.apply(Math,C(s.map((function(e){return e.createdAt}))).concat([u])))}i.isLoading=!1,r(t,s)}))}else r(null,[])}}),r)}}]),e}(),ct=function(){function e(){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=Je.ORDER_LATEST_LAST_MESSAGE,this._token="",this.channelNameContainsFilter="",this.channelUrlsFilter=[],this.customTypesFilter=[],this.customTypeStartsWithFilter=null,this.superChannelFilter=Ne.SuperChannelFilter.ALL,this.membershipFilter=e.MembershipType.JOINED,this.metadataOrderKeyFilter=null,this.includeFrozen=!0}return u(e,[{key:"next",value:function(t){var n=this;return le(this._iid,(function(t){var r=T.get(n._iid).GroupChannel;!("number"==typeof n.limit&&0<n.limit&&"boolean"==typeof n.includeEmpty&&"string"==typeof n.order&&-1<[e.ORDER_CHRONOLOGICAL,e.CHANNEL_NAME_ALPHABETICAL,e.METADATA_VALUE_ALPHABETICAL,e.ORDER_LATEST_LAST_MESSAGE].indexOf(n.order.toLowerCase())&&Array.isArray(n.customTypesFilter)&&Array.isArray(n.channelUrlsFilter)&&-1<Object.keys(e.MembershipType).map((function(t){return e.MembershipType[t]})).indexOf(n.membershipFilter)&&-1<Object.keys(r.SuperChannelFilter).map((function(e){return r.SuperChannelFilter[e]})).indexOf(n.superChannelFilter))||"string"!=typeof n.customTypeStartsWithFilter&&null!==n.customTypeStartsWithFilter||"string"!=typeof n.channelNameContainsFilter||"string"!=typeof n.metadataOrderKeyFilter&&null!==n.metadataOrderKeyFilter||"boolean"!=typeof n.includeFrozen?t(Z.error,null):n.isLoading?t(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,A.get(n._iid).container.apiClient.loadPublicGroupChannelList(c(c({},n),{},{token:n._token}),(function(e,i){var a=null;if(!e){var s=String(i.next);n._token=s,n.hasNext=!!s,a=i.channels.map((function(e){return r.upsert(e)}))}n.isLoading=!1,t(e,a)}))):t(null,[])}),t)}}],[{key:"MembershipType",get:function(){return{ALL:"all",JOINED:"joined"}}},{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}}]),e}(),dt=function(){function e(){s(this,e),this.isDistinct=null,this.isSuper=null,this.isBroadcast=null,this.isPublic=null,this.channelUrl=null,this.isEphemeral=null,this.isDiscoverable=null,this.isStrict=null,this.name=null,this.data=null,this.customType=null,this.channelCover=null,this.coverUrl=null,this.coverImage=null,this.accessCode=null,this.messageSurvivalSeconds=null,this._invitedUserIds=[];var t=null;Object.defineProperty(this,"operators",{set:function(e){Array.isArray(e)&&e.filter((function(e){return e.hasOwnProperty("userId")})).length===e.length&&(t=e.map((function(e){return e.userId})))}}),Object.defineProperty(this,"operatorUserIds",{get:function(){return t},set:function(e){Array.isArray(e)&&e.filter((function(e){return"string"==typeof e})).length===e.length&&(t=e)}})}return u(e,[{key:"_validate",value:function(){return Array.isArray(this._invitedUserIds)&&this._invitedUserIds.every((function(e){return"string"==typeof e}))&&("string"==typeof this.channelUrl||null===this.channelUrl)&&("string"==typeof this.coverUrl||null===this.coverUrl)&&($.isFile(this.coverImage)||null===this.coverImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("boolean"==typeof this.isDistinct||null===this.isDistinct)&&("boolean"==typeof this.isSuper||null===this.isSuper)&&("boolean"==typeof this.isBroadcast||null===this.isBroadcast)&&("boolean"==typeof this.isPublic||null===this.isPublic)&&("boolean"==typeof this.isEphemeral||null===this.isEphemeral)&&("boolean"==typeof this.isDiscoverable||null===this.isDiscoverable)&&("boolean"==typeof this.isStrict||null===this.isStrict)&&(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every((function(e){return"string"==typeof e}))||null===this.operatorUserIds)&&("string"==typeof this.accessCode||null===this.accessCode)&&("number"==typeof this.messageSurvivalSeconds||null===this.messageSurvivalSeconds)}},{key:"addUsers",value:function(e){if(Array.isArray(e)){var t,n=e.filter((function(e){return e.hasOwnProperty("userId")&&"string"==typeof e.userId})).map((function(e){return e.userId}));(t=this._invitedUserIds).push.apply(t,C(n))}}},{key:"addUser",value:function(e){e.hasOwnProperty("userId")&&"string"==typeof e.userId&&this._invitedUserIds.push(e.userId)}},{key:"addUserIds",value:function(e){if(Array.isArray(e)){var t,n=e.filter((function(e){return"string"==typeof e}));(t=this._invitedUserIds).push.apply(t,C(n))}}},{key:"addUserId",value:function(e){"string"==typeof e&&this._invitedUserIds.push(e)}}]),e}(),ft=function(){function e(){s(this,e),this.channelUrl=null,this.name=null,this.coverUrlOrImage=null,this.data=null,this.customType=null,this._operatorUserIds=[]}return u(e,[{key:"_validate",value:function(){return(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every((function(e){return"string"==typeof e}))||null===this.operatorUserIds)&&("string"==typeof this.coverUrlOrImage||$.isFile(this.coverUrlOrImage)||null===this.coverUrlOrImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("string"==typeof this.channelUrl||null===this.channelUrl)}},{key:"operatorUserIds",get:function(){return this._operatorUserIds},set:function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this._operatorUserIds=e)}},{key:"operators",set:function(e){Array.isArray(e)&&e.every((function(e){return e.hasOwnProperty("userId")}))&&(this._operatorUserIds=e.map((function(e){return e.userId})))}}]),e}(),ht=new WeakMap,pt=function(){function e(){s(this,e),this._mentionType=e.MentionType.USERS,this._mentionedUserIds=[],this._cachedMentionedUsers=[],this._cachedMentionedUserIds=[],this._metaArrays=[],ht.set(this,null),this._parentMessageId=null}return u(e,[{key:"_validate",value:function(){var e=T.get(this._iid),t=e.BaseMessageParams,n=e.MessageMetaArray,r=ht.get(this);return-1<Object.keys(t.MentionType).map((function(e){return t.MentionType[e]})).indexOf(this.mentionType)&&this._mentionedUserIds.every((function(e){return"string"==typeof e}))&&Array.isArray(this._metaArrays)&&this._metaArrays.every((function(e){return e instanceof n}))&&("number"==typeof r||null===r)&&("number"==typeof this._parentMessageId||null===this._parentMessageId)}},{key:"mentionType",get:function(){return this._mentionType},set:function(e){var t=T.get(this._iid).BaseMessageParams;-1<Object.keys(t.MentionType).map((function(e){return t.MentionType[e]})).indexOf(e)&&(this._mentionType=e)}},{key:"mentionedUserIds",get:function(){return this._cachedMentionedUserIds},set:function(e){if(Array.isArray(e))for(var t=Dt.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if("string"!=typeof r){this._cachedMentionedUserIds=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r)<0&&t.currentUser&&t.currentUser.userId!==r&&(this._cachedMentionedUserIds.push(r),this._mentionedUserIds.push(r))}}},{key:"mentionedUsers",get:function(){return this._cachedMentionedUsers},set:function(e){if(Array.isArray(e))for(var t=Dt.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if(!r.hasOwnProperty("userId")){this._cachedMentionedUsers=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r.userId)<0&&t.currentUser&&t.currentUser.userId!==r.userId&&(this._cachedMentionedUsers.push(r),this._mentionedUserIds.push(r.userId))}}},{key:"metaArrayKeys",get:function(){return this._metaArrays.map((function(e){return e.key}))},set:function(e){var t=T.get(this._iid).MessageMetaArray,n={};if(Array.isArray(e)){this._metaArrays=[];for(var r=0;r<e.length;r++)"string"!=typeof e[r]||n[e[r]]||(n[e[r]]=!0,this._metaArrays.push(new t(e[r])))}}},{key:"metaArrays",get:function(){return this._metaArrays},set:function(e){var t=T.get(this._iid).MessageMetaArray;if(Array.isArray(e)){this._metaArrays=[];for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof t){var i,a=this._metaArrays.map((function(e){return e.key})).indexOf(r.key);a<0?this._metaArrays.push(r):(i=this._metaArrays[a].value).push.apply(i,C(r.value))}}}}},{key:"rootMessageId",get:function(){return ht.get(this)}},{key:"parentMessageId",get:function(){return this._parentMessageId},set:function(e){ht.set(this,e),this._parentMessageId=e}}],[{key:"MentionType",get:function(){return{USERS:"users",CHANNEL:"channel"}}},{key:"PushNotificationDeliveryOption",get:function(){return{DEFAULT:"default",SUPPRESS:"suppress"}}}]),e}(),vt=function(){d(t,pt);var e=y(t);function t(){var n;return s(this,t),(n=e.call(this)).message=null,n.data=null,n.customType=null,n.pushNotificationDeliveryOption=null,n._translationTargetLanguages=[],n}return u(t,[{key:"_validate",value:function(){var e=T.get(this._iid).BaseMessageParams;return _(f(t.prototype),"_validate",this).call(this)&&("string"==typeof this.message||null===this.message)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.translationTargetLanguages)&&this.translationTargetLanguages.every((function(e){return"string"==typeof e}))&&(null===this.pushNotificationDeliveryOption||-1<Object.keys(e.PushNotificationDeliveryOption).map((function(t){return e.PushNotificationDeliveryOption[t]})).indexOf(this.pushNotificationDeliveryOption))}},{key:"targetLanguages",get:function(){return this.translationTargetLanguages},set:function(e){this.translationTargetLanguages=e}},{key:"translationTargetLanguages",get:function(){return this._translationTargetLanguages},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("string"!=typeof e[t])return void(this._translationTargetLanguages=[]);this._translationTargetLanguages=e}}}]),t}(),gt=function(){d(t,pt);var e=y(t);function t(){var n;return s(this,t),(n=e.call(this)).fileName=null,n.mimeType=null,n.fileSize=null,n.data=null,n.customType=null,n.pushNotificationDeliveryOption=null,n._isUpdate=!1,n._file=null,n._fileUrl=null,n._thumbnailSizes=[],n}return u(t,[{key:"_validate",value:function(){var e=T.get(this._iid).BaseMessageParams;return _(f(t.prototype),"_validate",this).call(this)&&(this._isUpdate||$.isFile(this.file)||"string"==typeof this.fileUrl)&&("string"==typeof this.fileName||null===this.fileName)&&("string"==typeof this.mimeType||null===this.mimeType)&&("number"==typeof this.fileSize||null===this.fileSize)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&(null===this._thumbnailSizes||this._thumbnailSizes.every((function(e){return"object"===a(e)&&0<e.maxWidth&&0<e.maxHeight})))&&(null===this.pushNotificationDeliveryOption||-1<Object.keys(e.PushNotificationDeliveryOption).map((function(t){return e.PushNotificationDeliveryOption[t]})).indexOf(this.pushNotificationDeliveryOption))}},{key:"file",get:function(){return this._file},set:function(e){$.isFile(e)&&(this._fileUrl=null,this._file=e)}},{key:"fileUrl",get:function(){return this._fileUrl},set:function(e){"string"==typeof e&&(this._fileUrl=e,this._file=null)}},{key:"thumbnailSizes",get:function(){return this._thumbnailSizes},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("object"!==a(e[t])||"number"!=typeof e[t].maxWidth||"number"!=typeof e[t].maxHeight)return void(this._thumbnailSizes=[]);this._thumbnailSizes=e}}}]),t}(),mt=function(){d(t,vt);var e=y(t);function t(n){var r;return s(this,t),(r=e.call(this)).year=null,r.month=null,r.day=null,r.hour=null,r.min=null,r.timezone=null,r._scheduledDateTimeString=null,n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("year")&&(this.year=e.year),e.hasOwnProperty("month")&&(this.month=e.month),e.hasOwnProperty("day")&&(this.day=e.day),e.hasOwnProperty("hour")&&(this.hour=e.hour),e.hasOwnProperty("min")&&(this.min=e.min),e.hasOwnProperty("timezone")&&(this.timezone=e.timezone)}},{key:"_getScheduleString",value:function(){return this.scheduledDateTimeString?this.scheduledDateTimeString+" "+this.timezone:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&1<=this.month&&this.month<=12&&"number"==typeof this.day&&1<=this.day&&this.day<=31&&"number"==typeof this.hour&&0<=this.hour&&this.hour<=24&&"number"==typeof this.min&&0<=this.min&&this.min<=60&&"string"==typeof this.timezone&&0<this.timezone.length?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2)+" "+this.timezone:null}},{key:"setSchedule",value:function(e,t,n,r,i,a){"number"==typeof e&&4===e.toString().length&&"number"==typeof t&&1<=t&&t<=12&&"number"==typeof n&&1<=n&&n<=31&&"number"==typeof r&&0<=r&&r<=24&&"number"==typeof i&&0<=i&&i<=60&&"string"==typeof a&&0<a.length&&(this.scheduledDateTimeString=e.toString()+"-"+("0"+t.toString()).substr(-2)+"-"+("0"+n.toString()).substr(-2)+" "+("0"+r.toString()).substr(-2)+":"+("0"+i.toString()).substr(-2),this.timezone=a)}},{key:"scheduledDateTimeString",get:function(){return this._scheduledDateTimeString?this._scheduledDateTimeString:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&1<=this.month&&this.month<=12&&"number"==typeof this.day&&1<=this.day&&this.day<=31&&"number"==typeof this.hour&&0<=this.hour&&this.hour<=24&&"number"==typeof this.min&&0<=this.min&&this.min<=60&&"string"==typeof this.timezone&&0<this.timezone.length?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2):null},set:function(e){e&&"string"==typeof e&&(this._scheduledDateTimeString=e)}}]),t}(),yt=function(){function e(){s(this,e),this.channelUrl=null,this.channelType=null,this.messageId=0,this.includeMetaArray=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1}return u(e,[{key:"_validate",value:function(){var e=T.get(this._iid).BaseChannel;return"string"==typeof this.channelUrl&&"string"==typeof this.channelType&&[e.CHANNEL_TYPE_BASE,e.CHANNEL_TYPE_OPEN,e.CHANNEL_TYPE_GROUP].includes(this.channelType)&&"number"==typeof this.messageId&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeParentMessageText&&"boolean"==typeof this.includeThreadInfo}}]),e}(),_t=function(){function e(){s(this,e);var t=T.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=null,this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=!1,this.includeReplies=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1,this.showSubchannelMessagesOnly=!1}return u(e,[{key:"_validate",value:function(){"boolean"==typeof this.includeReaction&&this.includeReaction&&(this.includeReactions=this.includeReaction);var e=T.get(this._iid).BaseChannel;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(e.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&(Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e||null===e}))||null===this.customTypes)&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every((function(e){return"string"==typeof e}))||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeReplies&&"boolean"==typeof this.includeParentMessageText&&"boolean"==typeof this.includeThreadInfo&&"boolean"==typeof this.showSubchannelMessagesOnly}}]),e}(),bt=function(){function e(){s(this,e);var t=T.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=null,this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=!1,this.includeParentMessageText=!1}return u(e,[{key:"_validate",value:function(){"boolean"==typeof this.includeReaction&&this.includeReaction&&(this.includeReactions=this.includeReaction);var e=T.get(this._iid).BaseChannel;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(e.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&(Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e||null===e}))||null===this.customTypes)&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every((function(e){return"string"==typeof e}))||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeParentMessageText}}]),e}(),Ct=function(){function e(){s(this,e),this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=!1,this.includeReplies=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1}return u(e,[{key:"_validate",value:function(){return"boolean"==typeof this.includeReaction&&this.includeReaction&&(this.includeReactions=this.includeReaction),"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeReplies&&"boolean"==typeof this.includeParentMessageText&&"boolean"==typeof this.includeThreadInfo}}]),e}(),Et=function(){function e(){s(this,e),this.customTypes=[],this.includeEmpty=!1,this.includeFrozen=!0}return u(e,[{key:"_validate",value:function(){return(Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e}))||null===this.customTypes)&&("boolean"==typeof this.includeEmpty||null===this.includeEmpty)&&"boolean"==typeof this.includeFrozen}}]),e}(),kt=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];s(this,e),this.key=t,this.value=Array.isArray(n)&&n.every((function(e){return"string"==typeof e}))?n:[]}return u(e,[{key:"encode",value:function(){return{key:this.key,value:this.value||[]}}}]),e}(),wt=new WeakMap,St=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;s(this,e),this.key=t,this.userIds=n,this.updatedAt=r;var i={};for(var a in this.userIds)i[this.userIds[a]]=this.updatedAt;wt.set(this,i)}return u(e,[{key:"serialize",value:function(){return{key:this.key,user_ids:this.userIds,updated_at:this.updatedAt}}},{key:"_applyEvent",value:function(e){if(e instanceof oe){var t=wt.get(this);if(e.key===this.key&&(!t[e.userId]||t[e.userId]<e.updatedAt)){var n=this.userIds.indexOf(e.userId);switch(e.operation){case"add":n<0&&this.userIds.push(e.userId);break;case"delete":0<=n&&this.userIds.splice(n,1)}t[e.userId]=e.updatedAt}}}},{key:"isEmpty",get:function(){return 0===this.userIds.length}}],[{key:"createFromJson",value:function(e){var t=e.key,n=e.user_ids,r=e.updated_at;return"string"==typeof t&&t&&Array.isArray(n)&&0<n.length&&"number"==typeof r?new this(t,n,r):null}}]),e}(),It=function(){function e(t){s(this,e),this.replyCount=0,this.mostRepliedUsers=[],this.lastRepliedAt=0,this.updatedAt=0,t&&this._update(t)}return u(e,[{key:"_update",value:function(e){var t=T.get(this._iid).User;e.hasOwnProperty("reply_count")&&(this.replyCount=parseInt(e.reply_count)),e.hasOwnProperty("most_replies")&&Array.isArray(e.most_replies)&&e.most_replies.every((function(e){return"object"===a(e)}))&&(this.mostRepliedUsers=e.most_replies.map((function(e){return new t(e)}))),e.hasOwnProperty("last_replied_at")&&(this.lastRepliedAt=parseInt(e.last_replied_at)),e.hasOwnProperty("updated_at")&&(this.updatedAt=parseInt(e.updated_at))}}],[{key:"objectify",value:function(e){var t=T.get(this._iid).User,n=e.replyCount,r=e.mostRepliedUsers,i=e.lastRepliedAt,a=e.updatedAt,s={};return s.reply_count=n,Array.isArray(r)&&r.every((function(e){return e instanceof t}))&&(s.most_replies=r.map((function(e){return t.objectify(e)}))),s.last_replied_at=i,s.updated_at=a,s}},{key:"build",value:function(e,t,n,r){return this.objectify({replyCount:e,mostRepliedUsers:t,lastRepliedAt:n,updatedAt:r})}}]),e}(),At=function(){function e(t){s(this,e),this.title=null,this.url=null,this.description=null,this.defaultImage=null,t&&this._update(t)}return u(e,[{key:"_update",value:function(e){var t=T.get(this._iid).OGImage;e.hasOwnProperty("og:title")&&(this.title=e["og:title"]),e.hasOwnProperty("og:url")&&(this.url=e["og:url"]),e.hasOwnProperty("og:description")&&(this.description=e["og:description"]),e.hasOwnProperty("og:image")&&(this.defaultImage=new t(e["og:image"]))}}],[{key:"objectify",value:function(e){var t=T.get(this._iid).OGImage,n=e.title,r=void 0===n?null:n,i=e.url,a=void 0===i?null:i,s=e.description,o=void 0===s?null:s,u=e.defaultImage,l=void 0===u?null:u,c={};return c["og:title"]=r,c["og:url"]=a,c["og:description"]=o,l&&(c["og:image"]=t.objectify(l)),c}}]),e}(),Ut=function(){function e(t){s(this,e),this.url=null,this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,t&&this._update(t)}return u(e,[{key:"_update",value:function(e){e.hasOwnProperty("url")&&(this.url=e.url),e.hasOwnProperty("secure_url")&&(this.secureUrl=e.secure_url),e.hasOwnProperty("type")&&(this.type=e.type),e.hasOwnProperty("width")&&(this.width=parseInt(e.width)),e.hasOwnProperty("height")&&(this.height=parseInt(e.height)),e.hasOwnProperty("alt")&&(this.alt=e.alt)}}],[{key:"objectify",value:function(e){var t=e.url,n=void 0===t?null:t,r=e.secureUrl,i=void 0===r?null:r,a=e.type,s=void 0===a?null:a,o=e.width,u=void 0===o?0:o,l=e.height,c=void 0===l?0:l,d=e.alt,f=void 0===d?null:d,h={};return h.url=n,h.secure_url=i,h.type=s,h.width=u,h.height=c,h.alt=f,h}}]),e}(),Mt=function(){function e(t){s(this,e),this.type=null,this.vendor=null,this.detail={},t&&this._update(t)}return u(e,[{key:"_update",value:function(e){this.type=e.hasOwnProperty("type")?e.type:"",this.vendor=e.hasOwnProperty("vendor")?e.vendor:"",e.hasOwnProperty("detail")&&"object"===a(e.detail)&&!Array.isArray(e.detail)&&(this.detail=e.detail)}}],[{key:"objectify",value:function(e){var t=e.type,n=void 0===t?"":t,r=e.vendor,i=void 0===r?"":r,a=e.detail,s=void 0===a?{}:a,o={};return o.type=n,o.vendor=i,o.detail=s,o}}]),e}(),Ot=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIds=t,this.metaDataKey="",this.metaDataValues=[],this._token=""}return u(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&0<t.limit&&Array.isArray(t.userIds)&&"string"==typeof t.metaDataKey&&Array.isArray(t.metaDataValues)&&!!t.metaDataKey==0<t.metaDataValues.length?t.isLoading?e(new U("Query in progress.",U.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,A.get(t._iid).container.apiClient.loadUserList(c(c({},t),{},{userIdsFilter:t.userIds,metaDataKeyFilter:t.metaDataKey,metaDataValuesFilter:t.metaDataValues,token:t._token}),(function(n,r){var i=null;if(!n){var a=T.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,i=r.users.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(Z.error,null)}),e)}}]),e}(),Tt=new WeakMap,Rt=function(){function e(t){s(this,e),this.isLoading=!1,Tt.set(this,t)}return u(e,[{key:"prev",value:function(e,t,n,r){var i=arguments,a=this;return le(this._iid,(function(r){var s,o=T.get(a._iid).BaseChannel,u=b(Z.parse(i,[new Z({type:"number"}),new Z({type:"number"}),new Z({type:"boolean"}),new Z({type:"function"})]),5);if(s=u[0],e=u[1],t=u[2],n=u[3],r=u[4],s)r(s,null);else if(a.isLoading)r(new U("Query in progress.",U.QUERY_IN_PROGRESS),null);else{a.isLoading=!0;var l=Tt.get(a);A.get(a._iid).container.apiClient.getMessageList({channelUrl:l.url,channelType:l.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:0,shouldReverse:n,messageType:"",customType:""},(function(e,t){var n=null;e||(n=t.messages.map((function(e){return o.buildMessage(e,l)}))),a.isLoading=!1,r(e,n)}))}}),r)}},{key:"next",value:function(e,t,n,r){var i=arguments,a=this;return le(this._iid,(function(r){var s,o=T.get(a._iid).BaseChannel,u=b(Z.parse(i,[new Z({type:"number"}),new Z({type:"number"}),new Z({type:"boolean"}),new Z({type:"function"})]),5);if(s=u[0],e=u[1],t=u[2],n=u[3],r=u[4],s)r(s,null);else if(a.isLoading)r(new U("Query in progress.",U.QUERY_IN_PROGRESS),null);else{a.isLoading=!0;var l=Tt.get(a);A.get(a._iid).container.apiClient.getMessageList({channelUrl:l.url,channelType:l.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:0,nextResultSize:t,shouldReverse:n,messageType:"",customType:""},(function(e,t){var n=null;e||(n=t.messages.map((function(e){return o.buildMessage(e,l)}))),a.isLoading=!1,r(e,n)}))}}),r)}},{key:"load",value:function(e,t,n,r,i){var a=arguments,s=this;return le(this._iid,(function(i){var o,u=T.get(s._iid).BaseChannel,l=b(Z.parse(a,[new Z({type:"number"}),new Z({type:"number"}),new Z({type:"number"}),new Z({type:"boolean"}),new Z({type:"callback"})]),6);if(o=l[0],e=l[1],t=l[2],n=l[3],r=l[4],i=l[5],o)i(o,null);else if(s.isLoading)i(new U("Query in progress.",U.QUERY_IN_PROGRESS),null);else{s.isLoading=!0;var c=Tt.get(s);A.get(s._iid).container.apiClient.getMessageList({channelUrl:c.url,channelType:c.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:n,shouldReverse:r,messageType:"",customType:""},(function(e,t){var n=null;e||(n=t.messages.map((function(e){return u.buildMessage(e,c)}))),s.isLoading=!1,i(e,n)}))}}),i)}}]),e}(),Nt=null,Lt={},Pt=!1,Dt=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s(this,e);var n=!1;if((t.newInstance||!Nt||Nt&&t.appId!==Nt.getApplicationId()&&Nt.getConnectionState()===Nt.ConnectionState.CLOSED)&&(n=!0,Nt=this),n){try{if(!t.hasOwnProperty("appId"))return B.warn("Must be set appId."),Nt=null}catch(t){return B.warn("Must be set appId."),Nt=null}var r=Ae.create();Object.defineProperty(this,"_iid",{get:function(){return r}}),(Lt[r]=this).customApiHost=null,this.customWsHost=null,this.connecting=!1,this.reconnecting=!1,this.isReconnectingOnError=!1,this.connectionCallbacks=[],this.ConnectionManager=new ee(this),this.GCMPushToken="",this.APNSPushToken="",this.PUSH_TEMPLATE_DEFAULT="default",this.PUSH_TEMPLATE_ALTERNATIVE="alternative",this.currentUser=null,this.isSessionOpened=!1,this.globalTimer,this.loginTimer,this.reconnectTimer,this.loginHandler=null,this.onLoginTimerCancel,this.onReconnectTimerCancel,this.BaseChannel={MessageTypeFilter:ve.MessageTypeFilter};var i={User:he,Member:Le,GroupChannel:Ne,OpenChannel:Ge,UserMessage:Be,FileMessage:qe,AdminMessage:Ye,GroupChannelListQuery:Je,MemberListQuery:Xe,GroupChannelParams:dt,OpenChannelParams:ft,BaseMessageParams:pt,UserMessageParams:vt,FileMessageParams:gt,ScheduledUserMessageParams:mt,GroupChannelTotalUnreadMessageCountParams:Ee,MessageRetrievalParams:yt,MessageListParams:_t,ThreadedMessageListParams:bt,MessageChangeLogsParams:Ct,GroupChannelChangeLogsParams:Et,MessageMetaArray:kt,UserEventHandler:we,SessionHandler:J,ChannelHandler:Se,ConnectionHandler:ke},a={SessionManager:te,BaseChannel:ve,BaseMessage:fe,UserListQuery:Ot,ApplicationUserListQuery:ze,BannedUserListQuery:We,BlockedUserListQuery:Qe,FriendListQuery:Ke,MutedUserListQuery:Ze,OpenChannelListQuery:et,OperatorListQuery:nt,ParticipantListQuery:it,MessageListQuery:Rt,PreviousMessageListQuery:lt,MessageSearchQuery:st,PublicGroupChannelListQuery:ct,ScheduledUserMessage:Ve,ThreadInfo:It,ThreadInfoUpdateEvent:$e,OGMetaData:At,OGImage:Ut,Plugin:Mt,Command:ie,Sender:Pe,ReadStatus:Ie,Reaction:St,ReactionEvent:oe,Emoji:Fe,EmojiCategory:xe,EmojiContainer:De,FileMessageQueue:Ce},o=new T(this._iid,c(c({},i),a));for(var u in o)i[u]&&(this[u]=o[u]);A.create(r,{appId:t.appId,pinger:new Y(this),apiClient:new Q(this),wsAdapter:new X(this),commandHandler:new ye(this),onlineDetector:new ne(this),ackStateMap:{},subscribedUnreadMessageCount:{all:0,custom_types:{},ts:0},maxUnreadCountOfSuperGroupChannel:w.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,auth:new M,appInfo:null,pingInterval:15e3,pongTimeout:5e3,connectedAt:0,extensions:{},supportedExtensionKeys:["sb_uikit","sb_syncmanager"],getUserAgentWithExtensions:function(e){var t=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",n=e.sb_uikit?"u".concat(e.sb_uikit):"";return"JS/c".concat(w.SDK_VERSION,"/").concat(t,"/").concat(n)},sessionManager:new o.SessionManager(this),stateChangeEnabled:!0,isInBackground:!1,closedByGoingBackground:!1,isErrorFirstInCallback:!1}),this.userEventHandlers={},this.channelHandlers={},this.connectionHandlers={},this.Options={_useMemberAsMessageSender:!0,get UseMemberAsMessageSender(){return this._useMemberAsMessageSender},set UseMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},get useMemberAsMessageSender(){return this._useMemberAsMessageSender},set useMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},_typingIndicatorThrottle:1e3,get typingIndicatorThrottle(){return this._typingIndicatorThrottle},set typingIndicatorThrottle(e){"number"==typeof e&&1e3<=e&&e<=9e3&&(this._typingIndicatorThrottle=e)},_websocketResponseTimeout:1e4,get websocketResponseTimeout(){return this._websocketResponseTimeout},set websocketResponseTimeout(e){"number"==typeof e&&5e3<=e&&e<=3e5&&(this._websocketResponseTimeout=e)}}}return Nt}return u(e,[{key:"getApplicationId",value:function(){return A.get(this._iid).get("appId")}},{key:"getCurrentUserId",value:function(){return this.currentUser?this.currentUser.userId:null}},{key:"getDebugMode",value:function(){return Pt}},{key:"setDebugMode",value:function(e){Pt=e,B.mode=e?B.Mode.DEBUG:B.Mode.PRODUCTION}},{key:"getErrorFirstCallback",value:function(){return A.get(this._iid).container.isErrorFirstInCallback}},{key:"setErrorFirstCallback",value:function(e){"boolean"==typeof e&&A.get(this._iid).set("isErrorFirstInCallback",e)}},{key:"getCurrentApiHost",value:function(){return this.customApiHost?this.customApiHost:"https://api.sendbird.com"}},{key:"clearCurrentApiHost",value:function(){this.customApiHost=null}},{key:"getCurrentWsHost",value:function(){return this.customWsHost?this.customWsHost:"wss://ws.sendbird.com"}},{key:"clearCurrentWsHost",value:function(){this.customWsHost=null}},{key:"getConnectionState",value:function(){try{var e=A.get(this._iid).container.wsAdapter;return this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:e.client?this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:this.isSessionOpened?e.client.getConnectionState():this.ConnectionState.CLOSED:this.ConnectionState.CLOSED}catch(e){return this.ConnectionState.CLOSED}}},{key:"getPendingGCMToken",value:function(){return this.GCMPushToken}},{key:"getPendingAPNSToken",value:function(){return this.APNSPushToken}},{key:"hasLoggedIn",value:function(){var e=A.get(this._iid);return this.currentUser&&e.get("auth").hasSession()}},{key:"getLastConnectedAt",value:function(){var e=A.get(this._iid);return this.getConnectionState()===this.ConnectionState.OPEN&&this.currentUser?e.get("connectedAt"):0}},{key:"connect",value:function(e,t,n,r,i){var a=this,s=A.get(this._iid).container,o=s.wsAdapter,u=s.onlineDetector;u&&u.start();var l,c=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||3===e.length}}),new Z({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new Z({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new Z({type:"callback"})]),6);return l=c[0],e=c[1],t=c[2],n=c[3],r=c[4],i=c[5],le(this._iid,(function(i){l?i(l,null):(a.customApiHost=n,a.customWsHost=r,a.connecting=!0,a.reconnecting=!1,a.isReconnectingOnError=!1,a.reconnectTimer&&(clearTimeout(a.reconnectTimer),a.reconnectTimer=null,a.onReconnectTimerCancel=null),a.getConnectionState()===a.ConnectionState.OPEN&&a.currentUser&&a.currentUser.userId===e?(a.connecting=!1,i(null,a.currentUser)):(a.connectionCallbacks.push(i),1===a.connectionCallbacks.length&&(o.disconnect({clearSession:!0,err:null},null),o.connect(e,t))))}),i)}},{key:"reconnect",value:function(){var e=A.get(this._iid).container,t=e.wsAdapter;if(e.auth.sessionKey&&this.currentUser){var n=!0;return 0<t.reconnectCount&&(n=!1),t.disconnect({clearSession:!1,err:new U("Connection has been canceled.",U.CONNECTION_CANCELED)},null),t.reconnectCount=0,t.reconnect(this.currentUser.userId,n),!0}return!1}},{key:"disconnect",value:function(e){var t=this;return le(this._iid,(function(e){var n=A.get(t._iid).container,r=n.wsAdapter,i=n.onlineDetector;i&&i.stop(),r.disconnect({clearSession:!0,err:new U("Connection has been canceled.",U.CONNECTION_CANCELED)},e)}),e)}},{key:"setBackgroundState",value:function(){var e=A.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled;!t.isInBackground&&r&&(e.set("isInBackground",!0),this.getConnectionState()!==this.ConnectionState.CLOSED?(e.set("closedByGoingBackground",!0),n.disconnect({clearSession:!1,err:new U("Websocket connection failed.",U.WEBSOCKET_CONNECTION_FAILED)},null)):e.set("closedByGoingBackground",!1))}},{key:"setForegroundState",value:function(){var e=A.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled,i=t.isInBackground,a=t.closedByGoingBackground;i&&r&&(e.set("isInBackground",!1),a&&this.currentUser&&n.reconnect(this.currentUser.userId,!0))}},{key:"enableStateChange",value:function(){A.get(this._iid).set("enableStateChange",!0)}},{key:"disableStateChange",value:function(){A.get(this._iid).set("enableStateChange",!1)}},{key:"addExtension",value:function(e,t){var n=A.get(this._iid).container,r=n.extensions;-1<n.supportedExtensionKeys.indexOf(e)&&(r[e]=t)}},{key:"createUserListQuery",value:function(e){return new(T.get(this._iid).UserListQuery)(e)}},{key:"createApplicationUserListQuery",value:function(){return new(T.get(this._iid).ApplicationUserListQuery)}},{key:"createBlockedUserListQuery",value:function(){return new(T.get(this._iid).BlockedUserListQuery)}},{key:"createFriendListQuery",value:function(){return new(T.get(this._iid).FriendListQuery)}},{key:"createMessageSearchQuery",value:function(e,t){return new(T.get(this._iid).MessageSearchQuery)(e,t)}},{key:"sendCommand",value:function(e,t){var n=this;return le(this._iid,(function(t){n.ConnectionManager.ready((function(r,i){if(r)t(r,null);else{var a=A.get(n._iid).container,s=a.wsAdapter,o=a.ackStateMap;if(null==s||null==s.client||s.client.getConnectionState()!==n.ConnectionState.OPEN||n.getConnectionState()!==n.ConnectionState.OPEN)return void t(new U("Connection is not valid. Please reconnect.",U.WEBSOCKET_CONNECTION_CLOSED),null);if(e.isAckRequired){var u=e.requestId,l={handler:t,timer:setTimeout((function(){t(new U("Command received no ack.",U.ACK_TIMEOUT),null),delete o[u]}),n.Options.websocketResponseTimeout)};o[u]=l,s.client.send(e,(function(e){e&&(clearTimeout(l.timer),t(e,null))}))}else s.client.send(e,t)}}),!1)}),t)}},{key:"setSessionHandler",value:function(e){A.get(this._iid).container.sessionManager.handler=e}},{key:"addUserEventHandler",value:function(e,t){t instanceof T.get(this._iid).UserEventHandler&&(this.userEventHandlers[e]=t)}},{key:"removeUserEventHandler",value:function(e){delete this.userEventHandlers[e]}},{key:"removeAllUserEventHandler",value:function(){this.userEventHandlers={}}},{key:"addChannelHandler",value:function(e,t){t instanceof T.get(this._iid).ChannelHandler&&(this.channelHandlers[e]=t)}},{key:"removeChannelHandler",value:function(e){delete this.channelHandlers[e]}},{key:"removeAllChannelHandlers",value:function(){this.channelHandlers={}}},{key:"addConnectionHandler",value:function(e,t){t instanceof T.get(this._iid).ConnectionHandler&&(this.connectionHandlers[e]=t)}},{key:"removeConnectionHandler",value:function(e){delete this.connectionHandlers[e]}},{key:"removeAllConnectionHandlers",value:function(){this.connectionHandlers={}}},{key:"updateCurrentUserInfo",value:function(e,t,n){var r,i=this,a=b(Z.parse(arguments,[new Z({type:"string",nullable:!0}),new Z({type:"string",nullable:!0}),new Z({type:"callback"})]),4);return r=a[0],e=a[1],t=a[2],n=a[3],le(this._iid,(function(n){r?n(r,null):A.get(i._iid).container.apiClient.updateCurrentUserInfo({nickname:e,profileUrl:t},(function(r,a){var s=null;r||(i.currentUser&&(e&&(i.currentUser.nickname=e),t&&(i.currentUser.plainProfileUrl=t)),s=i.currentUser),n(r,s)}))}),n)}},{key:"updateCurrentUserInfoWithProfileImage",value:function(e,t,n){var r,i=this,a=b(Z.parse(arguments,[new Z({type:"string",nullable:!0}),new Z({type:"file",nullable:!0}),new Z({type:"callback"})]),4);return r=a[0],e=a[1],t=a[2],n=a[3],le(this._iid,(function(n){r?n(r,null):A.get(i._iid).container.apiClient.updateCurrentUserInfo({nickname:e,profileImage:t},(function(t,r){var a=null;t||(i.currentUser&&(e&&(i.currentUser.nickname=e),r.profile_url&&(i.currentUser.plainProfileUrl=r.profile_url)),a=i.currentUser),n(t,a)}))}),n)}},{key:"updateCurrentUserInfoWithPreferredLanguages",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.updateCurrentUserInfo({preferredLanguages:e},(function(n,i){var a=null;n||(r.currentUser&&e&&(r.currentUser._preferredLanguages=e),a=r.currentUser),t(n,a)}))}),t)}},{key:"registerGCMPushTokenForCurrentUser",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,r.pushTokenRegistrationState.ERROR):r.currentUser?A.get(r._iid).container.apiClient.registerGCMPushToken({token:e},(function(e,n){var i=r.pushTokenRegistrationState.ERROR;e||(r.GCMPushToken="",i=r.pushTokenRegistrationState.SUCCESS),t(e,i)})):(r.GCMPushToken=e,t(null,r.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterGCMPushTokenForCurrentUser",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):r.currentUser?A.get(r._iid).container.apiClient.unregisterGCMPushToken({token:e},(function(e,n){t(e,null)})):(r.GCMPushToken=e,t(null,r.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterGCMPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.unregisterAllGCMPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"registerAPNSPushTokenForCurrentUser",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,r.pushTokenRegistrationState.ERROR):r.currentUser?A.get(r._iid).container.apiClient.registerAPNSPushToken({token:e},(function(e,n){var i=r.pushTokenRegistrationState.ERROR;e||(r.APNSPushToken="",i=r.pushTokenRegistrationState.SUCCESS),t(e,i)})):(r.APNSPushToken=e,t(null,r.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterAPNSPushTokenForCurrentUser",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return 0<e.length}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):r.currentUser?A.get(r._iid).container.apiClient.unregisterAPNSPushToken({token:e},(function(e,n){t(e,null)})):(r.APNSPushToken=e,t(null,r.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterAPNSPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.unregisterAllAPNSPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"unregisterPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.unregisterAllPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"getMyGroupChannelChangeLogsByToken",value:function(e,t,n,r){var i=this,a=null,s=b(Z.parse(arguments,[new Z({type:"string",nullable:!0}),new Z({type:"array",optional:!0,nullable:!0,defaultValue:null}),new Z({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new Z({type:"callback"})]),5);a=s[0],e=s[1],t=s[2],n=s[3],r=s[4];var o=T.get(this._iid).GroupChannelChangeLogsParams,u=null;if(a){var l=b(Z.parse(arguments,[new Z({type:"string",nullable:!0}),new Z({type:o,constraint:function(e){return e._validate()}}),new Z({type:"callback"})]),4);a=l[0],e=l[1],u=l[2],r=l[3]}else(u=new o).customTypes=t,u.includeEmpty=n,u.includeFrozen=!0;return le(this._iid,(function(t){a?t(a,null):A.get(i._iid).container.apiClient.getMyGroupChannelChangeLogs(c({ts:null,token:e},u),(function(e,n){if(e)t(e,null);else{var r=T.get(i._iid).GroupChannel,a=n.updated.map((function(e){return new r(e)})),s=n.deleted,o=n.has_more,u=n.next;t(null,{updatedChannels:a,deletedChannelUrls:s,hasMore:o,token:u})}}))}),r)}},{key:"getMyGroupChannelChangeLogsByTimestamp",value:function(e,t,n,r){var i=this,a=null,s=b(Z.parse(arguments,[new Z({type:"number",constraint:function(e){return 0<=e}}),new Z({type:"array",optional:!0,nullable:!0,defaultValue:null}),new Z({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new Z({type:"callback"})]),5);a=s[0],e=s[1],t=s[2],n=s[3],r=s[4];var o=T.get(this._iid).GroupChannelChangeLogsParams,u=null;if(a){var l=b(Z.parse(arguments,[new Z({type:"number",constraint:function(e){return 0<=e}}),new Z({type:o,constraint:function(e){return e._validate()}}),new Z({type:"callback"})]),4);a=l[0],e=l[1],u=l[2],r=l[3]}else(u=new o).customTypes=t,u.includeEmpty=n,u.includeFrozen=!0;return le(this._iid,(function(t){a?t(a,null):A.get(i._iid).container.apiClient.getMyGroupChannelChangeLogs(c({ts:e,token:null},u),(function(e,n){if(e)t(e,null);else{var r=T.get(i._iid).GroupChannel,a=n.updated.map((function(e){return new r(e)})),s=n.deleted,o=n.has_more,u=n.next;t(null,{updatedChannels:a,deletedChannelUrls:s,hasMore:o,token:u})}}))}),r)}},{key:"getChannelInvitationPreference",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.getChannelInvitationPreference({},(function(t,n){var r=null;t||(r={autoAccept:n.auto_accept}),e(t,r)}))}),e)}},{key:"setChannelInvitationPreference",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"boolean"}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.setChannelInvitationPreference({isAutoAccept:e},(function(e,n){var r=null;e||(r={autoAccept:n.auto_accept}),t(e,r)}))}),t)}},{key:"getDoNotDisturb",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.getDoNotDisturb({},(function(t,n){var r=null;t||(r={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone}),e(t,r)}))}),e)}},{key:"setDoNotDisturb",value:function(e,t,n,r,i,a,s){var o,u=this,l=b(Z.parse(arguments,[new Z({type:"boolean"}),new Z({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new Z({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new Z({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new Z({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new Z({type:"string"}),new Z({type:"callback"})]),8);return o=l[0],e=l[1],t=l[2],n=l[3],r=l[4],i=l[5],a=l[6],s=l[7],le(this._iid,(function(s){o?s(o,null):A.get(u._iid).container.apiClient.setDoNotDisturb({doNotDisturbOn:e,startHour:t,startMin:n,endHour:r,endMin:i,timezone:a},(function(e,t){var n=null;e||(n={doNotDisturbOn:t.do_not_disturb,startHour:t.start_hour,startMin:t.start_min,endHour:t.end_hour,endMin:t.end_min,timezone:t.timezone}),s(e,n)}))}),s)}},{key:"getSnoozePeriod",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.getSnoozePeriod({},(function(t,n){var r=null;t||(r={isSnoozeOn:n.snooze_enabled,startTs:n.snooze_start_ts,endTs:n.snooze_end_ts}),e(t,r)}))}),e)}},{key:"setSnoozePeriod",value:function(e,t,n,r){var i,a=this,s=b(Z.parse(arguments,[new Z({type:"boolean"}),new Z({type:"number",constraint:function(e){return 0<e}}),new Z({type:"number",constraint:function(e){return 0<e}}),new Z({type:"callback"})]),5);return i=s[0],e=s[1],t=s[2],n=s[3],r=s[4],le(this._iid,(function(r){i?r(i,null):A.get(a._iid).container.apiClient.setSnoozePeriod({snoozeOn:e,startTs:t,endTs:n},(function(e,t){var n=null;e||(n={isSnoozeOn:t.snooze_enabled,startTs:t.snooze_start_ts,endTs:t.snooze_end_ts}),r(e,n)}))}),r)}},{key:"blockUser",value:function(e,t){var n,r=b(Z.parse(arguments,[new Z({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new Z({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){e(n,null)}),t):this.blockUserWithUserId(e.userId,t)}},{key:"blockUserWithUserId",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return e&&(!r.currentUser||e!==r.currentUser.userId)}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.blockUser({blockedUserId:e},(function(e,n){var r=null;e||(r=new he(n)),t(e,r)}))}),t)}},{key:"unblockUser",value:function(e,t){var n,r=b(Z.parse(arguments,[new Z({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new Z({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){e(n,null)}),t):this.unblockUserWithUserId(e.userId,t)}},{key:"unblockUserWithUserId",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string",constraint:function(e){return e&&(!r.currentUser||e!==r.currentUser.userId)}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.unblockUser({unblockedUserId:e},(function(e,n){t(e,null)}))}),t)}},{key:"getPushTriggerOption",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.getPushTriggerOption({},(function(t,n){e(t,n?n.push_trigger_option:null)}))}),e)}},{key:"setPushTriggerOption",value:function(e,t){var n=this;return le(this._iid,(function(t){-1<Object.keys(n.PushTriggerOption).map((function(e){return n.PushTriggerOption[e]})).indexOf(e)?A.get(n._iid).container.apiClient.setPushTriggerOption({pushTriggerOption:e},(function(e,n){t(e,n?n.push_trigger_option:null)})):t(Z.error,null)}),t)}},{key:"getGroupChannelCount",value:function(e,t){var n,r=this,i=T.get(this._iid).GroupChannel,a=b(Z.parse(arguments,[new Z({type:i.MemberStateFilter,optional:!0,defaultValue:i.MemberStateFilter.ALL}),new Z({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.getGroupChannelCount({memberStateFilter:e},(function(e,n){var r=null;e||(r=parseInt(n.group_channel_count)),t(e,r)}))}),t)}},{key:"getTotalUnreadChannelCount",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.getTotalUnreadChannelCount({},(function(t,n){var r=null;t||(r=parseInt(n.unread_count)),e(t,r)}))}),e)}},{key:"getTotalUnreadMessageCount",value:function(e,t){var n,r=this,i=T.get(this._iid),a=i.GroupChannel,s=i.GroupChannelTotalUnreadMessageCountParams,o=b(Z.parse(arguments,[new Z({type:"object",optional:!0,defaultValue:null,constraint:function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))||e instanceof s}}),new Z({type:"callback"})]),3);return n=o[0],e=o[1],t=o[2],le(this._iid,(function(t){if(n)t(n,null);else{var i=a.SuperChannelFilter.ALL;if(e instanceof s){var o=e;e=o.channelCustomTypesFilter,i=o.superChannelFilter}A.get(r._iid).container.apiClient.getTotalUnreadMessageCount({customTypesFilter:e,superChannelFilter:i},(function(e,n){var r=null;e||(r=parseInt(n.unread_count)),t(e,r)}))}}),t)}},{key:"getUnreadItemCount",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return 0<e.length&&e.every((function(e){return-1<Object.keys(Ne.UnreadItemKey).map((function(e){return Ne.UnreadItemKey[e]})).indexOf(e)}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){if(n)t(n,null);else{var i=e.filter((function(t,n){return e.indexOf(t)===n}));A.get(r._iid).container.apiClient.getUnreadItemCount({keys:i},(function(e,n){t(e,n)}))}}),t)}},{key:"getSubscribedTotalUnreadMessageCount",value:function(){var e=A.get(this._iid).container.subscribedUnreadMessageCount;return 0<=e.all?e.all:0}},{key:"getSubscribedCustomTypeTotalUnreadMessageCount",value:function(){var e=A.get(this._iid).container.subscribedUnreadMessageCount;if(0<Object.keys(e.custom_types).length){var t=0;for(var n in e.custom_types)t+=e.custom_types[n];return t}return 0}},{key:"getSubscribedCustomTypeUnreadMessageCount",value:function(e){if(e&&"string"==typeof e){var t=A.get(this._iid).container.subscribedUnreadMessageCount;return t.custom_types.hasOwnProperty(e)?t.custom_types[e]:0}return 0}},{key:"getMyPushTokensByToken",value:function(e,t,n){var r,i=this,a=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"string",constraint:function(e){return-1<["gcm","apns","apns_voip"].indexOf(e)}}),new Z({type:"callback"})]),4);return r=a[0],e=a[1],t=a[2],n=a[3],le(this._iid,(function(n){r?n(r,null):A.get(i._iid).container.apiClient.getPushTokens({ts:null,token:e,type:t},(function(e,t){if(e)n(e,null);else{var r=t.type;n(null,{deviceTokens:t.device_tokens,type:r?r.toLowerCase():"unknown",hasMore:t.has_more,token:t.token})}}))}),n)}},{key:"getPushTemplate",value:function(e){var t=this;return le(this._iid,(function(e){A.get(t._iid).container.apiClient.getPushTemplate({},(function(t,n){var r=null;t||(r=n.name.toString()),e(t,r)}))}),e)}},{key:"setPushTemplate",value:function(e,t){var n=this;return le(this._iid,(function(t){-1<[n.PUSH_TEMPLATE_DEFAULT,n.PUSH_TEMPLATE_ALTERNATIVE].indexOf(e)?A.get(n._iid).container.apiClient.setPushTemplate({templateName:e},(function(e,n){var r=null;e||(r=n.name.toString()),t(e,r)})):t(Z.error,null)}),t)}},{key:"markAsReadAll",value:function(e){var t=this;return le(this._iid,(function(e){var n=T.get(t._iid).GroupChannel,r=(new Date).getTime();r-n.markAsReadAllLastSentAt<1e3?e(new U("MarkAsRead rate limit exceeded.",U.MARK_AS_READ_RATE_LIMIT_EXCEEDED),null):(n.markAsReadAllLastSentAt=r,A.get(t._iid).container.apiClient.markAsReadAll({channelUrls:null},(function(i,a){if(!i)for(var s in n.cachedChannels)t.currentUser&&n.cachedChannels[s].updateReadReceipt(t.currentUser.userId,r),n.cachedChannels[s]._setGroupChannelUnreadCount(0,0);e(i,null)})))}),e)}},{key:"markAsReadWithChannelUrls",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){if(n)t(n,null);else{var i=(new Date).getTime();A.get(r._iid).container.apiClient.markAsReadAll({channelUrls:e},(function(n,a){if(!n)for(var s in e){var o=e[s];Ne.cachedChannels[o]&&(r.currentUser&&Ne.cachedChannels[o].updateReadReceipt(r.currentUser.userId,i),Ne.cachedChannels[o]._setGroupChannelUnreadCount(0,0))}t(n,null)}))}}),t)}},{key:"markAsDelivered",value:function(e){"string"==typeof e&&T.get(this._iid).GroupChannel.getChannel(e,w.INTERNAL_CALL,(function(e,t){e||t.markAsDelivered()}))}},{key:"getFriendChangeLogsByToken",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string",optional:!0,defaultValue:null}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.getFriendChangeLogsByToken({token:e},(function(e,n){var i=null;if(!e){var a=T.get(r._iid).User;i={updatedUsers:n.updated.map((function(e){return new a(e)})),deletedUserIds:n.deleted,hasMore:n.has_more,token:n.next}}t(e,i)}))}),t)}},{key:"uploadFriendDiscoveries",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return e.every((function(e){return e.hasOwnProperty("friendDiscoveryKey")}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.uploadFriendDiscoveries({discoveries:e},(function(e,n){t(e,n)}))}),t)}},{key:"deleteFriendDiscovery",value:function(e,t){var n,r=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){e(n,null)}),t):this.deleteFriendDiscoveries([e],t)}},{key:"deleteFriendDiscoveries",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.deleteFriendDiscoveries({discoveryKeys:e},(function(e,n){t(e,n)}))}),t)}},{key:"addFriends",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.addFriends({userIds:e},(function(e,n){var i=null;if(!e){var a=T.get(r._iid).User;i=n.users.map((function(e){return new a(e)}))}t(e,i)}))}),t)}},{key:"deleteFriend",value:function(e,t){var n,r=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){e(n,null)}),t):this.deleteFriends([e],t)}},{key:"deleteFriends",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.deleteFriends({userIds:e},(function(e,n){t(e,n)}))}),t)}},{key:"getAllEmoji",value:function(e){var t,n=this,r=b(Z.parse(arguments,[new Z({type:"callback"})]),2);return t=r[0],e=r[1],le(this._iid,(function(e){t?e(t,null):A.get(n._iid).container.apiClient.getAllEmoji((function(t,r){if(t)e(t,null);else{var i=new(T.get(n._iid).EmojiContainer)(r);e(null,i)}}))}),e)}},{key:"getEmojiCategory",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"number",constraint:function(e){return 0<=e}}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.getEmojiCategory({categoryId:e},(function(e,n){if(e)t(e,null);else{var i=new(T.get(r._iid).EmojiCategory)(n);t(null,i)}}))}),t)}},{key:"getEmoji",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"string"}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.getEmoji({emojiKey:e},(function(e,n){if(e)t(e,null);else{var i=new(T.get(r._iid).Emoji)(n);t(null,i)}}))}),t)}},{key:"getAllowFriendDiscovery",value:function(e){var t,n=this,r=b(Z.parse(arguments,[new Z({type:"callback"})]),2);return t=r[0],e=r[1],le(this._iid,(function(e){t?e(t,null):A.get(n._iid).container.apiClient.getAllowFriendDiscovery((function(t,n){var r=n.allow_friend_discovery;t||e(null,r)}))}),e)}},{key:"setAllowFriendDiscovery",value:function(e,t){var n,r=this,i=b(Z.parse(arguments,[new Z({type:"boolean"}),new Z({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],le(this._iid,(function(t){n?t(n,null):A.get(r._iid).container.apiClient.setAllowFriendDiscovery({allowFriendDiscovery:e},(function(n,r){n||t(null,e)}))}),t)}},{key:"ConnectionState",get:function(){return{CONNECTING:"CONNECTING",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"MessageRequestState",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",SUCCEEDED:"succeeded"}}},{key:"MessageSendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"pushTokenRegistrationState",get:function(){return{SUCCESS:"success",PENDING:"pending",ERROR:"error"}}},{key:"PushTriggerOption",get:function(){return{ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"appInfo",get:function(){return A.get(this._iid).container.appInfo}},{key:"ekey",get:function(){var e=A.get(this._iid).container.auth;return e?e.eKey:""}}],[{key:"getInstance",value:function(e){return e?Lt[e]:Nt}},{key:"getLogLevel",value:function(){return B.logLevel}},{key:"setLogLevel",value:function(e){var t=Object.values(B.supportedLogLevels);if(t.includes(e))B.logLevel=e;else{B.logLevel=B.defaultLogLevel;var n=t.map((function(e){return"'".concat(e,"'")})).join(", ");B.warn("`logLevel` parameter should be one of","".concat(n,","),"not `'".concat(e,"'`."),"Set to default log level","`".concat(B.defaultLogLevel,"`."))}}},{key:"version",get:function(){return w.SDK_VERSION}},{key:"LogLevel",get:function(){return B.supportedLogLevels}}]),e}();return Dt}(n(68),n(86),n(87))}).call(this,n(11),n(64).Buffer)},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"containsDirective",(function(){return a})),n.d(t,"vSwitch",(function(){return d})),n.d(t,"vCase",(function(){return f})),n.d(t,"vDefault",(function(){return h}));const r={};function i(e,t){e[t.expression]=t.value}function a(e=[],t){for(let n in e)if(e[n].name===t)return e[n];return!1}const s=(e=[])=>a(e,"case"),o=(e=[])=>a(e,"default");function u(e,t,{show:n}){const r=t.children;for(let e of r)if(e.data&&o(e.data.directives)){const t=n?e.elm.getAttribute("data-initial-display"):"none";e.elm.style.display=t}}function l(e){const t=e.getAttribute("data-initial-display");e.style.display="none"!==t?t:"block"}function c(e,t,n,r){let i=!1;const a=n.children;for(let e of a)if(e.data){const a=s(e.data.directives);a&&(a.value===r[t.expression]?(l(e.elm),u(0,n,{show:!1}),i=!0):e.elm.style.display="none")}i||u(0,n,{show:!0})}const d={bind(e,t){i(r,t)},inserted(e,t,n){!function(e){for(let t of e)t.setAttribute("data-initial-display",t.style.display)}(e.children),c(0,t,n,r)},update(e,t){i(r,t)},componentUpdated(e,t,n){c(0,t,n,r)}},f=()=>{},h=()=>{};t.default={install(e,t){e.directive("switch",d),e.directive("case",f),e.directive("default",h)}}}])},function(e,t,n){e.exports=n(44)},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(5),s={USER_ADDRESS_TYPE_HOME:"HOME",USER_ADDRESS_TYPE_COMPANY:"COMPANY"};function o(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}var u={name:"ProvinceInput",props:{value:""},data:function(){return{items:[]}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},created:function(){this.fetch()},methods:{fetch:function(){var e,t=this;return(e=i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getListProvince();case 2:n=e.sent,r=n.data,t.items=r;case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)}))})()}}},l=n(1);function c(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}var d={name:"CityInput",props:{value:"",provinceId:""},data:function(){return{items:[]}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{fetch:function(){var e,t=this;return(e=i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getListCity(t.provinceId);case 2:n=e.sent,r=n.data,t.items=r;case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){c(a,r,i,s,o,"next",e)}function o(e){c(a,r,i,s,o,"throw",e)}s(void 0)}))})()}},watch:{provinceId:{handler:function(e){this.items=[],e&&this.fetch()}}}};function f(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}var h={name:"DistrictInput",props:{value:"",cityId:""},data:function(){return{items:[]}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{fetch:function(){var e,t=this;return(e=i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getListDistrict(t.cityId);case 2:n=e.sent,r=n.data,t.items=r;case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){f(a,r,i,s,o,"next",e)}function o(e){f(a,r,i,s,o,"throw",e)}s(void 0)}))})()}},watch:{cityId:{handler:function(e){this.items=[],e&&this.fetch()}}}};function p(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){p(a,r,i,s,o,"next",e)}function o(e){p(a,r,i,s,o,"throw",e)}s(void 0)}))}}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _={name:"UserAddress",components:{ProvinceInput:Object(l.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("select",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"form-control",attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.model=t.target.multiple?n:n[0]}}},e._l(e.items,(function(t){return n("option",{domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)}),[],!1,null,"30c94b9c",null).exports,CityInput:Object(l.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("select",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"form-control",attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.model=t.target.multiple?n:n[0]}}},e._l(e.items,(function(t){return n("option",{domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)}),[],!1,null,"03ff9ba2",null).exports,DistrictInput:Object(l.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("select",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"form-control",attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.model=t.target.multiple?n:n[0]}}},e._l(e.items,(function(t){return n("option",{domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)}),[],!1,null,"a4ab7292",null).exports},props:{value:{}},data:function(){return m(m({},s),{},{addresses:[],editing:null,editingItem:{},editingId:"",form:{district_id:"",regency_id:"",province_id:"",recipient_name:"",addresses:"",phone:"",type:""}})},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},created:function(){this.fetch()},methods:{fetch:function(){var e=this;return v(i.a.mark((function t(){var n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e,t.next=3,a.a.getList();case 3:n=t.sent,r=n.data,e.addresses=r,s=null,e.addresses.forEach((function(e){e.is_default&&(s=e)})),!s&&e.addresses.length&&(s=e.addresses[0]),s&&e.$emit("input",s.id);case 10:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return v(i.a.mark((function t(){var n,r,s,o,u,l,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.showLoading(),n=e,t.prev=2,!e.editingId){t.next=13;break}return t.next=6,a.a.update(e.editingId,e.form);case 6:r=t.sent,s=r.data,(o=e.addresses.findIndex((function(e){return e.id==n.editingId})))&&e.$set(e.addresses,o,s),window.location.reload(),t.next=18;break;case 13:return t.next=15,a.a.create(e.form);case 15:u=t.sent,l=u.data,e.addresses.unshift(l);case 18:e.resetForm(),t.next=26;break;case 21:t.prev=21,t.t0=t.catch(2),c=t.t0.response.data.errors,console.log(c),$.each(c,(function(e,t){console.log(t),n.errorMessage(t)}));case 26:e.hideLoading();case 27:case"end":return t.stop()}}),t,null,[[2,21]])})))()},resetForm:function(){$("#modal-add-address").modal("hide"),this.form={district_id:"",regency_id:"",province_id:"",recipient_name:"",addresses:"",phone:"",type:""},this.editingId=null},edit:function(e){this.editingId=e.id,this.form=Object.assign({},e),this.openAddForm()},addressLabel:function(e){var t="";switch(e){case this.USER_ADDRESS_TYPE_HOME:t="Home Address";break;case this.USER_ADDRESS_TYPE_COMPANY:t="Office Address"}return t},setAsDefault:function(e){a.a.setAsDefault(e).data},del:function(e){var t=this;return v(i.a.mark((function n(){var r,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.confirm("Do you want to delete?");case 2:if(n.sent){n.next=4;break}return n.abrupt("return");case 4:return t.showLoading(),n.next=7,a.a.delete(e.id);case 7:if(r=n.sent,r.data){n.next=11;break}return n.abrupt("return");case 11:-1!==(s=t.getAddressIndexById(e.id))&&t.addresses.splice(s,1),t.hideLoading();case 14:case"end":return n.stop()}}),n)})))()},getAddressIndexById:function(e){return this.addresses.findIndex((function(t){return t.id===e}))},openAddForm:function(){$("#modal-add-address").modal("show")},closeAddForm:function(){this.resetForm(),$("#modal-add-address").modal("hide")},fullAddress:function(e){var t=[];return t.push(e.addresses),e.disctrict&&t.push(e.disctrict.name),e.city&&t.push(e.city.name),e.province&&t.push(e.province.name),t.join(", ")}}},b=(n(88),Object(l.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"card mt-16px address-list",staticStyle:{border:"none","border-radius":"8px"}},[e.addresses&&0!=e.addresses.length?n("div",[n("div",{staticStyle:{padding:"8px"}},e._l(e.addresses,(function(t){return n("label",{staticClass:"card-body d-flex",staticStyle:{padding:"0 24px",margin:"16px 0"}},[n("div",{staticClass:"address-radio"},[n("div",{staticClass:"radio-style"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],attrs:{type:"radio",name:"address-picker"},domProps:{value:t.id,checked:e._q(e.model,t.id)},on:{change:function(n){e.model=t.id}}}),e._v(" "),n("span",{staticClass:"checkmark"})])]),e._v(" "),n("div",{staticClass:"address-info"},[n("div",{staticClass:"address-title"},[e._v(e._s(e.addressLabel(t.type))+"\n                      "),n("a",{staticClass:"address-action action-edit",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.edit(t)}}},[e._v("Edit")]),n("a",{staticClass:"address-action action-delete",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.del(t)}}},[e._v("Delete")])]),e._v(" "),n("div",{staticClass:"address-content"},[e._v("\n                      "+e._s(t.recipient_name)+" ("+e._s(t.phone)+")"),n("br"),e._v("\n                      "+e._s(e.fullAddress(t))+"\n                    ")])])])})),0)]):n("div",{staticClass:"mt-16px"},[e._m(0)])]),e._v(" "),n("a",{staticClass:"add-shipping-address-btn-fixed web-block link-product",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.openAddForm(t)}}},[e._v("Add Shipping Address")]),e._v(" "),n("a",{staticClass:"add-shipping-address-btn mobi-block link-product",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.openAddForm(t)}}},[e._v("Add Shipping Address")]),e._v(" "),n("div",{staticClass:"modal my-modal",attrs:{id:"modal-add-address","data-backdrop":"static"}},[n("div",{staticClass:"modal-dialog my-modal-dialog"},[n("div",{staticClass:"modal-content"},[n("form",{attrs:{method:"post",id:"address"},on:{submit:function(t){return t.preventDefault(),e.save()}}},[n("div",{staticClass:"modal-body",staticStyle:{padding:"15px","background-color":"#fff"}},[n("div",{staticClass:"form-group col-12"},[e.editingId?n("h5",{staticClass:"modal-title"},[e._v("Edit Shipping Address")]):n("h5",{staticClass:"modal-title"},[e._v("Add Shipping Address")])]),e._v(" "),n("div",{staticClass:"form-group col-12"},[n("label",[e._v("Place")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.form.type,expression:"form.type"}],staticClass:"form-control",attrs:{name:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"type",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"HOME"}},[e._v("Home")]),e._v(" "),n("option",{attrs:{value:"COMPANY"}},[e._v("Company")])])]),e._v(" "),n("div",{staticClass:"col-sm-12 col-md-12 col-responsive form-group"},[n("label",[e._v("Recipient name")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.recipient_name,expression:"form.recipient_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Recipient name",required:""},domProps:{value:e.form.recipient_name},on:{input:function(t){t.target.composing||e.$set(e.form,"recipient_name",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"col-sm-12 col-md-12 col-responsive form-group"},[n("label",[e._v("Recipient phone")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.phone,expression:"form.phone"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Recipient phone",required:""},domProps:{value:e.form.phone},on:{input:function(t){t.target.composing||e.$set(e.form,"phone",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"col-sm-12 col-md-12 col-responsive form-group"},[n("label",[e._v("Province")]),e._v(" "),n("ProvinceInput",{model:{value:e.form.province_id,callback:function(t){e.$set(e.form,"province_id",t)},expression:"form.province_id"}})],1),e._v(" "),n("div",{staticClass:"col-sm-12 col-md-12 col-responsive form-group"},[n("label",[e._v("City")]),e._v(" "),n("CityInput",{attrs:{"province-id":e.form.province_id},model:{value:e.form.regency_id,callback:function(t){e.$set(e.form,"regency_id",t)},expression:"form.regency_id"}})],1),e._v(" "),n("div",{staticClass:"col-sm-12 col-md-12 col-responsive form-group"},[n("label",[e._v("District")]),e._v(" "),n("DistrictInput",{attrs:{"city-id":e.form.regency_id},model:{value:e.form.district_id,callback:function(t){e.$set(e.form,"district_id",t)},expression:"form.district_id"}})],1),e._v(" "),n("div",{staticClass:"col-12 col-responsive form-group"},[n("label",[e._v("Address")]),e._v(" "),n("span",{attrs:{id:"error-address"}}),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.addresses,expression:"form.addresses"}],staticClass:"form-control",attrs:{name:"address",placeholder:"Address",minlength:"10",required:""},domProps:{value:e.form.addresses},on:{input:function(t){t.target.composing||e.$set(e.form,"addresses",t.target.value)}}})])]),e._v(" "),e._m(1)])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-body d-flex justify-content-between"},[t("p",{staticClass:"color-gray description-text"},[this._v("Address is still empty")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-cancel",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Cancel")]),this._v(" "),t("button",{staticClass:"btn primary btn-primary",attrs:{type:"submit"}},[this._v("Save")])])}],!1,null,"6708c924",null));t.default=b.exports},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(6);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),a=s.join("&")}if(a){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(6),i=n(49),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,u={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(o=n(22)),o),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(a)})),e.exports=u}).call(this,n(11))},function(e,t,n){"use strict";var r=n(6),i=n(50),a=n(19),s=n(52),o=n(55),u=n(56),l=n(23);e.exports=function(e){return new Promise((function(t,c){var d=e.data,f=e.headers;r.isFormData(d)&&delete f["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",v=e.auth.password||"";f.Authorization="Basic "+btoa(p+":"+v)}var g=s(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),a(g,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?o(h.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h};i(t,c,r),h=null}},h.onabort=function(){h&&(c(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){c(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),c(l(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var m=n(57),y=(e.withCredentials||u(g))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;y&&(f[e.xsrfHeaderName]=y)}if("setRequestHeader"in h&&r.forEach(f,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete f[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),c(e),h=null)})),void 0===d&&(d=null),h.send(d)}))}},function(e,t,n){"use strict";var r=n(51);e.exports=function(e,t,n,i,a){var s=new Error(e);return r(s,t,n,i,a)}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],a=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(a,(function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),r.forEach(s,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var o=i.concat(a).concat(s),u=Object.keys(t).filter((function(e){return-1===o.indexOf(e)}));return r.forEach(u,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(61),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(10))},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(7);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),a=s.join("&")}if(a){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(7),i=n(74),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,u={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(o=n(31)),o),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(a)})),e.exports=u}).call(this,n(11))},function(e,t,n){"use strict";var r=n(7),i=n(75),a=n(77),s=n(28),o=n(78),u=n(81),l=n(82),c=n(32);e.exports=function(e){return new Promise((function(t,n){var d=e.data,f=e.headers;r.isFormData(d)&&delete f["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(p+":"+v)}var g=o(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),s(g,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?u(h.getAllResponseHeaders()):null,a={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};i(t,n,a),h=null}},h.onabort=function(){h&&(n(c("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(c("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var m=(e.withCredentials||l(g))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;m&&(f[e.xsrfHeaderName]=m)}if("setRequestHeader"in h&&r.forEach(f,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete f[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),n(e),h=null)})),d||(d=null),h.send(d)}))}},function(e,t,n){"use strict";var r=n(76);e.exports=function(e,t,n,i,a){var s=new Error(e);return r(s,t,n,i,a)}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],a=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function u(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function l(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=u(void 0,e[i])):n[i]=u(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=u(void 0,t[e]))})),r.forEach(a,l),r.forEach(s,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=u(void 0,e[i])):n[i]=u(void 0,t[i])})),r.forEach(o,(function(r){r in t?n[r]=u(e[r],t[r]):r in e&&(n[r]=u(void 0,e[r]))}));var c=i.concat(a).concat(s).concat(o),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return r.forEach(d,l),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){var r=n(89);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(13)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(92);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(13)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(94);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(13)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(96);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(13)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(98);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(13)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){n(105),n(106),e.exports=n(108)},function(e,t,n){window._=n(42),window.axios=n(16);var r=document.head.querySelector('meta[name="csrf-token"]');r?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=r.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token")},function(e,t,n){(function(e,r){var i;(function(){var a="Expected a function",s="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",l="[object Array]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",v="[object Map]",g="[object Number]",m="[object Object]",y="[object RegExp]",_="[object Set]",b="[object String]",C="[object Symbol]",E="[object WeakMap]",k="[object ArrayBuffer]",w="[object DataView]",S="[object Float32Array]",I="[object Float64Array]",A="[object Int8Array]",U="[object Int16Array]",M="[object Int32Array]",O="[object Uint8Array]",T="[object Uint16Array]",R="[object Uint32Array]",N=/\b__p \+= '';/g,L=/\b(__p \+=) '' \+/g,P=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,x=/[&<>"']/g,F=RegExp(D.source),H=RegExp(x.source),j=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,B=/<%=([\s\S]+?)%>/g,q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,V=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,z=RegExp($.source),W=/^\s+|\s+$/g,Q=/^\s+/,K=/\s+$/,J=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,Z=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,ae=/^0b[01]+$/i,se=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,ue=/^(?:0|[1-9]\d*)$/,le=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ce=/($^)/,de=/['\n\r\u2028\u2029\\]/g,fe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",he="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="[\\ud800-\\udfff]",ve="["+he+"]",ge="["+fe+"]",me="\\d+",ye="[\\u2700-\\u27bf]",_e="[a-z\\xdf-\\xf6\\xf8-\\xff]",be="[^\\ud800-\\udfff"+he+me+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Ce="\\ud83c[\\udffb-\\udfff]",Ee="[^\\ud800-\\udfff]",ke="(?:\\ud83c[\\udde6-\\uddff]){2}",we="[\\ud800-\\udbff][\\udc00-\\udfff]",Se="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ie="(?:"+_e+"|"+be+")",Ae="(?:"+Se+"|"+be+")",Ue="(?:"+ge+"|"+Ce+")"+"?",Me="[\\ufe0e\\ufe0f]?"+Ue+("(?:\\u200d(?:"+[Ee,ke,we].join("|")+")[\\ufe0e\\ufe0f]?"+Ue+")*"),Oe="(?:"+[ye,ke,we].join("|")+")"+Me,Te="(?:"+[Ee+ge+"?",ge,ke,we,pe].join("|")+")",Re=RegExp("[']","g"),Ne=RegExp(ge,"g"),Le=RegExp(Ce+"(?="+Ce+")|"+Te+Me,"g"),Pe=RegExp([Se+"?"+_e+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[ve,Se,"$"].join("|")+")",Ae+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[ve,Se+Ie,"$"].join("|")+")",Se+"?"+Ie+"+(?:['](?:d|ll|m|re|s|t|ve))?",Se+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",me,Oe].join("|"),"g"),De=RegExp("[\\u200d\\ud800-\\udfff"+fe+"\\ufe0e\\ufe0f]"),xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],He=-1,je={};je[S]=je[I]=je[A]=je[U]=je[M]=je[O]=je["[object Uint8ClampedArray]"]=je[T]=je[R]=!0,je[u]=je[l]=je[k]=je[c]=je[w]=je[d]=je[f]=je[h]=je[v]=je[g]=je[m]=je[y]=je[_]=je[b]=je[E]=!1;var Ge={};Ge[u]=Ge[l]=Ge[k]=Ge[w]=Ge[c]=Ge[d]=Ge[S]=Ge[I]=Ge[A]=Ge[U]=Ge[M]=Ge[v]=Ge[g]=Ge[m]=Ge[y]=Ge[_]=Ge[b]=Ge[C]=Ge[O]=Ge["[object Uint8ClampedArray]"]=Ge[T]=Ge[R]=!0,Ge[f]=Ge[h]=Ge[E]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qe=parseFloat,Ye=parseInt,Ve="object"==typeof e&&e&&e.Object===Object&&e,$e="object"==typeof self&&self&&self.Object===Object&&self,ze=Ve||$e||Function("return this")(),We=t&&!t.nodeType&&t,Qe=We&&"object"==typeof r&&r&&!r.nodeType&&r,Ke=Qe&&Qe.exports===We,Je=Ke&&Ve.process,Xe=function(){try{var e=Qe&&Qe.require&&Qe.require("util").types;return e||Je&&Je.binding&&Je.binding("util")}catch(e){}}(),Ze=Xe&&Xe.isArrayBuffer,et=Xe&&Xe.isDate,tt=Xe&&Xe.isMap,nt=Xe&&Xe.isRegExp,rt=Xe&&Xe.isSet,it=Xe&&Xe.isTypedArray;function at(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function st(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var s=e[i];t(r,s,n(s),e)}return r}function ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ct(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var s=e[n];t(s,n,e)&&(a[i++]=s)}return a}function dt(e,t){return!!(null==e?0:e.length)&&Ct(e,t,0)>-1}function ft(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function ht(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function pt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function vt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function gt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var yt=St("length");function _t(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function bt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Ct(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):bt(e,kt,n)}function Et(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function kt(e){return e!=e}function wt(e,t){var n=null==e?0:e.length;return n?Ut(e,t)/n:NaN}function St(e){return function(t){return null==t?void 0:t[e]}}function It(e){return function(t){return null==e?void 0:e[t]}}function At(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Ut(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);void 0!==a&&(n=void 0===n?a:n+a)}return n}function Mt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Ot(e){return function(t){return e(t)}}function Tt(e,t){return ht(t,(function(t){return e[t]}))}function Rt(e,t){return e.has(t)}function Nt(e,t){for(var n=-1,r=e.length;++n<r&&Ct(t,e[n],0)>-1;);return n}function Lt(e,t){for(var n=e.length;n--&&Ct(t,e[n],0)>-1;);return n}function Pt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Dt=It({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),xt=It({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ft(e){return"\\"+Be[e]}function Ht(e){return De.test(e)}function jt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Gt(e,t){return function(n){return e(t(n))}}function Bt(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function qt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Yt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Vt(e){return Ht(e)?function(e){var t=Le.lastIndex=0;for(;Le.test(e);)++t;return t}(e):yt(e)}function $t(e){return Ht(e)?function(e){return e.match(Le)||[]}(e):function(e){return e.split("")}(e)}var zt=It({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Wt=function e(t){var n,r=(t=null==t?ze:Wt.defaults(ze.Object(),t,Wt.pick(ze,Fe))).Array,i=t.Date,fe=t.Error,he=t.Function,pe=t.Math,ve=t.Object,ge=t.RegExp,me=t.String,ye=t.TypeError,_e=r.prototype,be=he.prototype,Ce=ve.prototype,Ee=t["__core-js_shared__"],ke=be.toString,we=Ce.hasOwnProperty,Se=0,Ie=(n=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ae=Ce.toString,Ue=ke.call(ve),Me=ze._,Oe=ge("^"+ke.call(we).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=Ke?t.Buffer:void 0,Le=t.Symbol,De=t.Uint8Array,Be=Te?Te.allocUnsafe:void 0,Ve=Gt(ve.getPrototypeOf,ve),$e=ve.create,We=Ce.propertyIsEnumerable,Qe=_e.splice,Je=Le?Le.isConcatSpreadable:void 0,Xe=Le?Le.iterator:void 0,yt=Le?Le.toStringTag:void 0,It=function(){try{var e=Zi(ve,"defineProperty");return e({},"",{}),e}catch(e){}}(),Qt=t.clearTimeout!==ze.clearTimeout&&t.clearTimeout,Kt=i&&i.now!==ze.Date.now&&i.now,Jt=t.setTimeout!==ze.setTimeout&&t.setTimeout,Xt=pe.ceil,Zt=pe.floor,en=ve.getOwnPropertySymbols,tn=Te?Te.isBuffer:void 0,nn=t.isFinite,rn=_e.join,an=Gt(ve.keys,ve),sn=pe.max,on=pe.min,un=i.now,ln=t.parseInt,cn=pe.random,dn=_e.reverse,fn=Zi(t,"DataView"),hn=Zi(t,"Map"),pn=Zi(t,"Promise"),vn=Zi(t,"Set"),gn=Zi(t,"WeakMap"),mn=Zi(ve,"create"),yn=gn&&new gn,_n={},bn=Ia(fn),Cn=Ia(hn),En=Ia(pn),kn=Ia(vn),wn=Ia(gn),Sn=Le?Le.prototype:void 0,In=Sn?Sn.valueOf:void 0,An=Sn?Sn.toString:void 0;function Un(e){if(qs(e)&&!Rs(e)&&!(e instanceof Rn)){if(e instanceof Tn)return e;if(we.call(e,"__wrapped__"))return Aa(e)}return new Tn(e)}var Mn=function(){function e(){}return function(t){if(!Bs(t))return{};if($e)return $e(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function On(){}function Tn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Rn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Dn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Pn;++t<n;)this.add(e[t])}function xn(e){var t=this.__data__=new Ln(e);this.size=t.size}function Fn(e,t){var n=Rs(e),r=!n&&Ts(e),i=!n&&!r&&Ds(e),a=!n&&!r&&!i&&Js(e),s=n||r||i||a,o=s?Mt(e.length,me):[],u=o.length;for(var l in e)!t&&!we.call(e,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||sa(l,u))||o.push(l);return o}function Hn(e){var t=e.length;return t?e[Dr(0,t-1)]:void 0}function jn(e,t){return ka(mi(e),Qn(t,0,e.length))}function Gn(e){return ka(mi(e))}function Bn(e,t,n){(void 0!==n&&!Us(e[t],n)||void 0===n&&!(t in e))&&zn(e,t,n)}function qn(e,t,n){var r=e[t];we.call(e,t)&&Us(r,n)&&(void 0!==n||t in e)||zn(e,t,n)}function Yn(e,t){for(var n=e.length;n--;)if(Us(e[n][0],t))return n;return-1}function Vn(e,t,n,r){return er(e,(function(e,i,a){t(r,e,n(e),a)})),r}function $n(e,t){return e&&yi(t,bo(t),e)}function zn(e,t,n){"__proto__"==t&&It?It(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Wn(e,t){for(var n=-1,i=t.length,a=r(i),s=null==e;++n<i;)a[n]=s?void 0:vo(e,t[n]);return a}function Qn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Kn(e,t,n,r,i,a){var s,o=1&t,l=2&t,f=4&t;if(n&&(s=i?n(e,r,i,a):n(e)),void 0!==s)return s;if(!Bs(e))return e;var E=Rs(e);if(E){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&we.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!o)return mi(e,s)}else{var N=na(e),L=N==h||N==p;if(Ds(e))return di(e,o);if(N==m||N==u||L&&!i){if(s=l||L?{}:ia(e),!o)return l?function(e,t){return yi(e,ta(e),t)}(e,function(e,t){return e&&yi(t,Co(t),e)}(s,e)):function(e,t){return yi(e,ea(e),t)}(e,$n(s,e))}else{if(!Ge[N])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case k:return fi(e);case c:case d:return new r(+e);case w:return function(e,t){var n=t?fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case S:case I:case A:case U:case M:case O:case"[object Uint8ClampedArray]":case T:case R:return hi(e,n);case v:return new r;case g:case b:return new r(e);case y:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new r;case C:return i=e,In?ve(In.call(i)):{}}var i}(e,N,o)}}a||(a=new xn);var P=a.get(e);if(P)return P;a.set(e,s),Ws(e)?e.forEach((function(r){s.add(Kn(r,t,n,r,e,a))})):Ys(e)&&e.forEach((function(r,i){s.set(i,Kn(r,t,n,i,e,a))}));var D=E?void 0:(f?l?$i:Vi:l?Co:bo)(e);return ot(D||e,(function(r,i){D&&(r=e[i=r]),qn(s,i,Kn(r,t,n,i,e,a))})),s}function Jn(e,t,n){var r=n.length;if(null==e)return!r;for(e=ve(e);r--;){var i=n[r],a=t[i],s=e[i];if(void 0===s&&!(i in e)||!a(s))return!1}return!0}function Xn(e,t,n){if("function"!=typeof e)throw new ye(a);return _a((function(){e.apply(void 0,n)}),t)}function Zn(e,t,n,r){var i=-1,a=dt,s=!0,o=e.length,u=[],l=t.length;if(!o)return u;n&&(t=ht(t,Ot(n))),r?(a=ft,s=!1):t.length>=200&&(a=Rt,s=!1,t=new Dn(t));e:for(;++i<o;){var c=e[i],d=null==n?c:n(c);if(c=r||0!==c?c:0,s&&d==d){for(var f=l;f--;)if(t[f]===d)continue e;u.push(c)}else a(t,d,r)||u.push(c)}return u}Un.templateSettings={escape:j,evaluate:G,interpolate:B,variable:"",imports:{_:Un}},Un.prototype=On.prototype,Un.prototype.constructor=Un,Tn.prototype=Mn(On.prototype),Tn.prototype.constructor=Tn,Rn.prototype=Mn(On.prototype),Rn.prototype.constructor=Rn,Nn.prototype.clear=function(){this.__data__=mn?mn(null):{},this.size=0},Nn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Nn.prototype.get=function(e){var t=this.__data__;if(mn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return we.call(t,e)?t[e]:void 0},Nn.prototype.has=function(e){var t=this.__data__;return mn?void 0!==t[e]:we.call(t,e)},Nn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=mn&&void 0===t?"__lodash_hash_undefined__":t,this},Ln.prototype.clear=function(){this.__data__=[],this.size=0},Ln.prototype.delete=function(e){var t=this.__data__,n=Yn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Qe.call(t,n,1),--this.size,!0)},Ln.prototype.get=function(e){var t=this.__data__,n=Yn(t,e);return n<0?void 0:t[n][1]},Ln.prototype.has=function(e){return Yn(this.__data__,e)>-1},Ln.prototype.set=function(e,t){var n=this.__data__,r=Yn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Pn.prototype.clear=function(){this.size=0,this.__data__={hash:new Nn,map:new(hn||Ln),string:new Nn}},Pn.prototype.delete=function(e){var t=Ji(this,e).delete(e);return this.size-=t?1:0,t},Pn.prototype.get=function(e){return Ji(this,e).get(e)},Pn.prototype.has=function(e){return Ji(this,e).has(e)},Pn.prototype.set=function(e,t){var n=Ji(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Dn.prototype.add=Dn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Dn.prototype.has=function(e){return this.__data__.has(e)},xn.prototype.clear=function(){this.__data__=new Ln,this.size=0},xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},xn.prototype.get=function(e){return this.__data__.get(e)},xn.prototype.has=function(e){return this.__data__.has(e)},xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ln){var r=n.__data__;if(!hn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Pn(r)}return n.set(e,t),this.size=n.size,this};var er=Ci(ur),tr=Ci(lr,!0);function nr(e,t){var n=!0;return er(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function rr(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],s=t(a);if(null!=s&&(void 0===o?s==s&&!Ks(s):n(s,o)))var o=s,u=a}return u}function ir(e,t){var n=[];return er(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function ar(e,t,n,r,i){var a=-1,s=e.length;for(n||(n=aa),i||(i=[]);++a<s;){var o=e[a];t>0&&n(o)?t>1?ar(o,t-1,n,r,i):pt(i,o):r||(i[i.length]=o)}return i}var sr=Ei(),or=Ei(!0);function ur(e,t){return e&&sr(e,t,bo)}function lr(e,t){return e&&or(e,t,bo)}function cr(e,t){return ct(t,(function(t){return Hs(e[t])}))}function dr(e,t){for(var n=0,r=(t=oi(t,e)).length;null!=e&&n<r;)e=e[Sa(t[n++])];return n&&n==r?e:void 0}function fr(e,t,n){var r=t(e);return Rs(e)?r:pt(r,n(e))}function hr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":yt&&yt in ve(e)?function(e){var t=we.call(e,yt),n=e[yt];try{e[yt]=void 0;var r=!0}catch(e){}var i=Ae.call(e);r&&(t?e[yt]=n:delete e[yt]);return i}(e):function(e){return Ae.call(e)}(e)}function pr(e,t){return e>t}function vr(e,t){return null!=e&&we.call(e,t)}function gr(e,t){return null!=e&&t in ve(e)}function mr(e,t,n){for(var i=n?ft:dt,a=e[0].length,s=e.length,o=s,u=r(s),l=1/0,c=[];o--;){var d=e[o];o&&t&&(d=ht(d,Ot(t))),l=on(d.length,l),u[o]=!n&&(t||a>=120&&d.length>=120)?new Dn(o&&d):void 0}d=e[0];var f=-1,h=u[0];e:for(;++f<a&&c.length<l;){var p=d[f],v=t?t(p):p;if(p=n||0!==p?p:0,!(h?Rt(h,v):i(c,v,n))){for(o=s;--o;){var g=u[o];if(!(g?Rt(g,v):i(e[o],v,n)))continue e}h&&h.push(v),c.push(p)}}return c}function yr(e,t,n){var r=null==(e=va(e,t=oi(t,e)))?e:e[Sa(Fa(t))];return null==r?void 0:at(r,e,n)}function _r(e){return qs(e)&&hr(e)==u}function br(e,t,n,r,i){return e===t||(null==e||null==t||!qs(e)&&!qs(t)?e!=e&&t!=t:function(e,t,n,r,i,a){var s=Rs(e),o=Rs(t),h=s?l:na(e),p=o?l:na(t),E=(h=h==u?m:h)==m,S=(p=p==u?m:p)==m,I=h==p;if(I&&Ds(e)){if(!Ds(t))return!1;s=!0,E=!1}if(I&&!E)return a||(a=new xn),s||Js(e)?qi(e,t,n,r,i,a):function(e,t,n,r,i,a,s){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case k:return!(e.byteLength!=t.byteLength||!a(new De(e),new De(t)));case c:case d:case g:return Us(+e,+t);case f:return e.name==t.name&&e.message==t.message;case y:case b:return e==t+"";case v:var o=jt;case _:var u=1&r;if(o||(o=qt),e.size!=t.size&&!u)return!1;var l=s.get(e);if(l)return l==t;r|=2,s.set(e,t);var h=qi(o(e),o(t),r,i,a,s);return s.delete(e),h;case C:if(In)return In.call(e)==In.call(t)}return!1}(e,t,h,n,r,i,a);if(!(1&n)){var A=E&&we.call(e,"__wrapped__"),U=S&&we.call(t,"__wrapped__");if(A||U){var M=A?e.value():e,O=U?t.value():t;return a||(a=new xn),i(M,O,n,r,a)}}if(!I)return!1;return a||(a=new xn),function(e,t,n,r,i,a){var s=1&n,o=Vi(e),u=o.length,l=Vi(t).length;if(u!=l&&!s)return!1;var c=u;for(;c--;){var d=o[c];if(!(s?d in t:we.call(t,d)))return!1}var f=a.get(e),h=a.get(t);if(f&&h)return f==t&&h==e;var p=!0;a.set(e,t),a.set(t,e);var v=s;for(;++c<u;){d=o[c];var g=e[d],m=t[d];if(r)var y=s?r(m,g,d,t,e,a):r(g,m,d,e,t,a);if(!(void 0===y?g===m||i(g,m,n,r,a):y)){p=!1;break}v||(v="constructor"==d)}if(p&&!v){var _=e.constructor,b=t.constructor;_==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,r,i,a)}(e,t,n,r,br,i))}function Cr(e,t,n,r){var i=n.length,a=i,s=!r;if(null==e)return!a;for(e=ve(e);i--;){var o=n[i];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<a;){var u=(o=n[i])[0],l=e[u],c=o[1];if(s&&o[2]){if(void 0===l&&!(u in e))return!1}else{var d=new xn;if(r)var f=r(l,c,u,e,t,d);if(!(void 0===f?br(c,l,3,r,d):f))return!1}}return!0}function Er(e){return!(!Bs(e)||(t=e,Ie&&Ie in t))&&(Hs(e)?Oe:se).test(Ia(e));var t}function kr(e){return"function"==typeof e?e:null==e?$o:"object"==typeof e?Rs(e)?Mr(e[0],e[1]):Ur(e):tu(e)}function wr(e){if(!da(e))return an(e);var t=[];for(var n in ve(e))we.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Sr(e){if(!Bs(e))return function(e){var t=[];if(null!=e)for(var n in ve(e))t.push(n);return t}(e);var t=da(e),n=[];for(var r in e)("constructor"!=r||!t&&we.call(e,r))&&n.push(r);return n}function Ir(e,t){return e<t}function Ar(e,t){var n=-1,i=Ls(e)?r(e.length):[];return er(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}function Ur(e){var t=Xi(e);return 1==t.length&&t[0][2]?ha(t[0][0],t[0][1]):function(n){return n===e||Cr(n,e,t)}}function Mr(e,t){return ua(e)&&fa(t)?ha(Sa(e),t):function(n){var r=vo(n,e);return void 0===r&&r===t?go(n,e):br(t,r,3)}}function Or(e,t,n,r,i){e!==t&&sr(t,(function(a,s){if(i||(i=new xn),Bs(a))!function(e,t,n,r,i,a,s){var o=ma(e,n),u=ma(t,n),l=s.get(u);if(l)return void Bn(e,n,l);var c=a?a(o,u,n+"",e,t,s):void 0,d=void 0===c;if(d){var f=Rs(u),h=!f&&Ds(u),p=!f&&!h&&Js(u);c=u,f||h||p?Rs(o)?c=o:Ps(o)?c=mi(o):h?(d=!1,c=di(u,!0)):p?(d=!1,c=hi(u,!0)):c=[]:$s(u)||Ts(u)?(c=o,Ts(o)?c=ao(o):Bs(o)&&!Hs(o)||(c=ia(u))):d=!1}d&&(s.set(u,c),i(c,u,r,a,s),s.delete(u));Bn(e,n,c)}(e,t,s,n,Or,r,i);else{var o=r?r(ma(e,s),a,s+"",e,t,i):void 0;void 0===o&&(o=a),Bn(e,s,o)}}),Co)}function Tr(e,t){var n=e.length;if(n)return sa(t+=t<0?n:0,n)?e[t]:void 0}function Rr(e,t,n){t=t.length?ht(t,(function(e){return Rs(e)?function(t){return dr(t,1===e.length?e[0]:e)}:e})):[$o];var r=-1;return t=ht(t,Ot(Ki())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Ar(e,(function(e,n,i){return{criteria:ht(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,s=i.length,o=n.length;for(;++r<s;){var u=pi(i[r],a[r]);if(u){if(r>=o)return u;var l=n[r];return u*("desc"==l?-1:1)}}return e.index-t.index}(e,t,n)}))}function Nr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var s=t[r],o=dr(e,s);n(o,s)&&Gr(a,oi(s,e),o)}return a}function Lr(e,t,n,r){var i=r?Et:Ct,a=-1,s=t.length,o=e;for(e===t&&(t=mi(t)),n&&(o=ht(e,Ot(n)));++a<s;)for(var u=0,l=t[a],c=n?n(l):l;(u=i(o,c,u,r))>-1;)o!==e&&Qe.call(o,u,1),Qe.call(e,u,1);return e}function Pr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;sa(i)?Qe.call(e,i,1):Zr(e,i)}}return e}function Dr(e,t){return e+Zt(cn()*(t-e+1))}function xr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Zt(t/2))&&(e+=e)}while(t);return n}function Fr(e,t){return ba(pa(e,t,$o),e+"")}function Hr(e){return Hn(Mo(e))}function jr(e,t){var n=Mo(e);return ka(n,Qn(t,0,n.length))}function Gr(e,t,n,r){if(!Bs(e))return e;for(var i=-1,a=(t=oi(t,e)).length,s=a-1,o=e;null!=o&&++i<a;){var u=Sa(t[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=s){var c=o[u];void 0===(l=r?r(c,u,o):void 0)&&(l=Bs(c)?c:sa(t[i+1])?[]:{})}qn(o,u,l),o=o[u]}return e}var Br=yn?function(e,t){return yn.set(e,t),e}:$o,qr=It?function(e,t){return It(e,"toString",{configurable:!0,enumerable:!1,value:qo(t),writable:!0})}:$o;function Yr(e){return ka(Mo(e))}function Vr(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=r(a);++i<a;)s[i]=e[i+t];return s}function $r(e,t){var n;return er(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function zr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,s=e[a];null!==s&&!Ks(s)&&(n?s<=t:s<t)?r=a+1:i=a}return i}return Wr(e,t,$o,n)}function Wr(e,t,n,r){var i=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,o=null===t,u=Ks(t),l=void 0===t;i<a;){var c=Zt((i+a)/2),d=n(e[c]),f=void 0!==d,h=null===d,p=d==d,v=Ks(d);if(s)var g=r||p;else g=l?p&&(r||f):o?p&&f&&(r||!h):u?p&&f&&!h&&(r||!v):!h&&!v&&(r?d<=t:d<t);g?i=c+1:a=c}return on(a,4294967294)}function Qr(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var s=e[n],o=t?t(s):s;if(!n||!Us(o,u)){var u=o;a[i++]=0===s?0:s}}return a}function Kr(e){return"number"==typeof e?e:Ks(e)?NaN:+e}function Jr(e){if("string"==typeof e)return e;if(Rs(e))return ht(e,Jr)+"";if(Ks(e))return An?An.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Xr(e,t,n){var r=-1,i=dt,a=e.length,s=!0,o=[],u=o;if(n)s=!1,i=ft;else if(a>=200){var l=t?null:xi(e);if(l)return qt(l);s=!1,i=Rt,u=new Dn}else u=t?[]:o;e:for(;++r<a;){var c=e[r],d=t?t(c):c;if(c=n||0!==c?c:0,s&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),o.push(c)}else i(u,d,n)||(u!==o&&u.push(d),o.push(c))}return o}function Zr(e,t){return null==(e=va(e,t=oi(t,e)))||delete e[Sa(Fa(t))]}function ei(e,t,n,r){return Gr(e,t,n(dr(e,t)),r)}function ti(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?Vr(e,r?0:a,r?a+1:i):Vr(e,r?a+1:0,r?i:a)}function ni(e,t){var n=e;return n instanceof Rn&&(n=n.value()),vt(t,(function(e,t){return t.func.apply(t.thisArg,pt([e],t.args))}),n)}function ri(e,t,n){var i=e.length;if(i<2)return i?Xr(e[0]):[];for(var a=-1,s=r(i);++a<i;)for(var o=e[a],u=-1;++u<i;)u!=a&&(s[a]=Zn(s[a]||o,e[u],t,n));return Xr(ar(s,1),t,n)}function ii(e,t,n){for(var r=-1,i=e.length,a=t.length,s={};++r<i;){var o=r<a?t[r]:void 0;n(s,e[r],o)}return s}function ai(e){return Ps(e)?e:[]}function si(e){return"function"==typeof e?e:$o}function oi(e,t){return Rs(e)?e:ua(e,t)?[e]:wa(so(e))}var ui=Fr;function li(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Vr(e,t,n)}var ci=Qt||function(e){return ze.clearTimeout(e)};function di(e,t){if(t)return e.slice();var n=e.length,r=Be?Be(n):new e.constructor(n);return e.copy(r),r}function fi(e){var t=new e.constructor(e.byteLength);return new De(t).set(new De(e)),t}function hi(e,t){var n=t?fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function pi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,a=Ks(e),s=void 0!==t,o=null===t,u=t==t,l=Ks(t);if(!o&&!l&&!a&&e>t||a&&s&&u&&!o&&!l||r&&s&&u||!n&&u||!i)return 1;if(!r&&!a&&!l&&e<t||l&&n&&i&&!r&&!a||o&&n&&i||!s&&i||!u)return-1}return 0}function vi(e,t,n,i){for(var a=-1,s=e.length,o=n.length,u=-1,l=t.length,c=sn(s-o,0),d=r(l+c),f=!i;++u<l;)d[u]=t[u];for(;++a<o;)(f||a<s)&&(d[n[a]]=e[a]);for(;c--;)d[u++]=e[a++];return d}function gi(e,t,n,i){for(var a=-1,s=e.length,o=-1,u=n.length,l=-1,c=t.length,d=sn(s-u,0),f=r(d+c),h=!i;++a<d;)f[a]=e[a];for(var p=a;++l<c;)f[p+l]=t[l];for(;++o<u;)(h||a<s)&&(f[p+n[o]]=e[a++]);return f}function mi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function yi(e,t,n,r){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var o=t[a],u=r?r(n[o],e[o],o,n,e):void 0;void 0===u&&(u=e[o]),i?zn(n,o,u):qn(n,o,u)}return n}function _i(e,t){return function(n,r){var i=Rs(n)?st:Vn,a=t?t():{};return i(n,e,Ki(r,2),a)}}function bi(e){return Fr((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,s&&oa(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),t=ve(t);++r<i;){var o=n[r];o&&e(t,o,r,a)}return t}))}function Ci(e,t){return function(n,r){if(null==n)return n;if(!Ls(n))return e(n,r);for(var i=n.length,a=t?i:-1,s=ve(n);(t?a--:++a<i)&&!1!==r(s[a],a,s););return n}}function Ei(e){return function(t,n,r){for(var i=-1,a=ve(t),s=r(t),o=s.length;o--;){var u=s[e?o:++i];if(!1===n(a[u],u,a))break}return t}}function ki(e){return function(t){var n=Ht(t=so(t))?$t(t):void 0,r=n?n[0]:t.charAt(0),i=n?li(n,1).join(""):t.slice(1);return r[e]()+i}}function wi(e){return function(t){return vt(jo(Ro(t).replace(Re,"")),e,"")}}function Si(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Mn(e.prototype),r=e.apply(n,t);return Bs(r)?r:n}}function Ii(e){return function(t,n,r){var i=ve(t);if(!Ls(t)){var a=Ki(n,3);t=bo(t),n=function(e){return a(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[a?t[s]:s]:void 0}}function Ai(e){return Yi((function(t){var n=t.length,r=n,i=Tn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new ye(a);if(i&&!o&&"wrapper"==Wi(s))var o=new Tn([],!0)}for(r=o?r:n;++r<n;){var u=Wi(s=t[r]),l="wrapper"==u?zi(s):void 0;o=l&&la(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?o[Wi(l[0])].apply(o,l[3]):1==s.length&&la(s)?o[u]():o.thru(s)}return function(){var e=arguments,r=e[0];if(o&&1==e.length&&Rs(r))return o.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Ui(e,t,n,i,a,s,o,u,l,c){var d=128&t,f=1&t,h=2&t,p=24&t,v=512&t,g=h?void 0:Si(e);return function m(){for(var y=arguments.length,_=r(y),b=y;b--;)_[b]=arguments[b];if(p)var C=Qi(m),E=Pt(_,C);if(i&&(_=vi(_,i,a,p)),s&&(_=gi(_,s,o,p)),y-=E,p&&y<c){var k=Bt(_,C);return Pi(e,t,Ui,m.placeholder,n,_,k,u,l,c-y)}var w=f?n:this,S=h?w[e]:e;return y=_.length,u?_=ga(_,u):v&&y>1&&_.reverse(),d&&l<y&&(_.length=l),this&&this!==ze&&this instanceof m&&(S=g||Si(S)),S.apply(w,_)}}function Mi(e,t){return function(n,r){return function(e,t,n,r){return ur(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function Oi(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Jr(n),r=Jr(r)):(n=Kr(n),r=Kr(r)),i=e(n,r)}return i}}function Ti(e){return Yi((function(t){return t=ht(t,Ot(Ki())),Fr((function(n){var r=this;return e(t,(function(e){return at(e,r,n)}))}))}))}function Ri(e,t){var n=(t=void 0===t?" ":Jr(t)).length;if(n<2)return n?xr(t,e):t;var r=xr(t,Xt(e/Vt(t)));return Ht(t)?li($t(r),0,e).join(""):r.slice(0,e)}function Ni(e){return function(t,n,i){return i&&"number"!=typeof i&&oa(t,n,i)&&(n=i=void 0),t=to(t),void 0===n?(n=t,t=0):n=to(n),function(e,t,n,i){for(var a=-1,s=sn(Xt((t-e)/(n||1)),0),o=r(s);s--;)o[i?s:++a]=e,e+=n;return o}(t,n,i=void 0===i?t<n?1:-1:to(i),e)}}function Li(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=io(t),n=io(n)),e(t,n)}}function Pi(e,t,n,r,i,a,s,o,u,l){var c=8&t;t|=c?32:64,4&(t&=~(c?64:32))||(t&=-4);var d=[e,t,i,c?a:void 0,c?s:void 0,c?void 0:a,c?void 0:s,o,u,l],f=n.apply(void 0,d);return la(e)&&ya(f,d),f.placeholder=r,Ca(f,e,t)}function Di(e){var t=pe[e];return function(e,n){if(e=io(e),(n=null==n?0:on(no(n),292))&&nn(e)){var r=(so(e)+"e").split("e");return+((r=(so(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var xi=vn&&1/qt(new vn([,-0]))[1]==1/0?function(e){return new vn(e)}:Jo;function Fi(e){return function(t){var n=na(t);return n==v?jt(t):n==_?Yt(t):function(e,t){return ht(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Hi(e,t,n,i,o,u,l,c){var d=2&t;if(!d&&"function"!=typeof e)throw new ye(a);var f=i?i.length:0;if(f||(t&=-97,i=o=void 0),l=void 0===l?l:sn(no(l),0),c=void 0===c?c:no(c),f-=o?o.length:0,64&t){var h=i,p=o;i=o=void 0}var v=d?void 0:zi(e),g=[e,t,n,i,o,h,p,u,l,c];if(v&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var l=e[3];e[3]=l?vi(l,u,t[4]):u,e[4]=l?Bt(e[3],s):t[4]}(u=t[5])&&(l=e[5],e[5]=l?gi(l,u,t[6]):u,e[6]=l?Bt(e[5],s):t[6]);(u=t[7])&&(e[7]=u);128&r&&(e[8]=null==e[8]?t[8]:on(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(g,v),e=g[0],t=g[1],n=g[2],i=g[3],o=g[4],!(c=g[9]=void 0===g[9]?d?0:e.length:sn(g[9]-f,0))&&24&t&&(t&=-25),t&&1!=t)m=8==t||16==t?function(e,t,n){var i=Si(e);return function a(){for(var s=arguments.length,o=r(s),u=s,l=Qi(a);u--;)o[u]=arguments[u];var c=s<3&&o[0]!==l&&o[s-1]!==l?[]:Bt(o,l);if((s-=c.length)<n)return Pi(e,t,Ui,a.placeholder,void 0,o,c,void 0,void 0,n-s);var d=this&&this!==ze&&this instanceof a?i:e;return at(d,this,o)}}(e,t,c):32!=t&&33!=t||o.length?Ui.apply(void 0,g):function(e,t,n,i){var a=1&t,s=Si(e);return function t(){for(var o=-1,u=arguments.length,l=-1,c=i.length,d=r(c+u),f=this&&this!==ze&&this instanceof t?s:e;++l<c;)d[l]=i[l];for(;u--;)d[l++]=arguments[++o];return at(f,a?n:this,d)}}(e,t,n,i);else var m=function(e,t,n){var r=1&t,i=Si(e);return function t(){var a=this&&this!==ze&&this instanceof t?i:e;return a.apply(r?n:this,arguments)}}(e,t,n);return Ca((v?Br:ya)(m,g),e,t)}function ji(e,t,n,r){return void 0===e||Us(e,Ce[n])&&!we.call(r,n)?t:e}function Gi(e,t,n,r,i,a){return Bs(e)&&Bs(t)&&(a.set(t,e),Or(e,t,void 0,Gi,a),a.delete(t)),e}function Bi(e){return $s(e)?void 0:e}function qi(e,t,n,r,i,a){var s=1&n,o=e.length,u=t.length;if(o!=u&&!(s&&u>o))return!1;var l=a.get(e),c=a.get(t);if(l&&c)return l==t&&c==e;var d=-1,f=!0,h=2&n?new Dn:void 0;for(a.set(e,t),a.set(t,e);++d<o;){var p=e[d],v=t[d];if(r)var g=s?r(v,p,d,t,e,a):r(p,v,d,e,t,a);if(void 0!==g){if(g)continue;f=!1;break}if(h){if(!mt(t,(function(e,t){if(!Rt(h,t)&&(p===e||i(p,e,n,r,a)))return h.push(t)}))){f=!1;break}}else if(p!==v&&!i(p,v,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function Yi(e){return ba(pa(e,void 0,Na),e+"")}function Vi(e){return fr(e,bo,ea)}function $i(e){return fr(e,Co,ta)}var zi=yn?function(e){return yn.get(e)}:Jo;function Wi(e){for(var t=e.name+"",n=_n[t],r=we.call(_n,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function Qi(e){return(we.call(Un,"placeholder")?Un:e).placeholder}function Ki(){var e=Un.iteratee||zo;return e=e===zo?kr:e,arguments.length?e(arguments[0],arguments[1]):e}function Ji(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Xi(e){for(var t=bo(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,fa(i)]}return t}function Zi(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Er(n)?n:void 0}var ea=en?function(e){return null==e?[]:(e=ve(e),ct(en(e),(function(t){return We.call(e,t)})))}:iu,ta=en?function(e){for(var t=[];e;)pt(t,ea(e)),e=Ve(e);return t}:iu,na=hr;function ra(e,t,n){for(var r=-1,i=(t=oi(t,e)).length,a=!1;++r<i;){var s=Sa(t[r]);if(!(a=null!=e&&n(e,s)))break;e=e[s]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&Gs(i)&&sa(s,i)&&(Rs(e)||Ts(e))}function ia(e){return"function"!=typeof e.constructor||da(e)?{}:Mn(Ve(e))}function aa(e){return Rs(e)||Ts(e)||!!(Je&&e&&e[Je])}function sa(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ue.test(e))&&e>-1&&e%1==0&&e<t}function oa(e,t,n){if(!Bs(n))return!1;var r=typeof t;return!!("number"==r?Ls(n)&&sa(t,n.length):"string"==r&&t in n)&&Us(n[t],e)}function ua(e,t){if(Rs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ks(e))||(Y.test(e)||!q.test(e)||null!=t&&e in ve(t))}function la(e){var t=Wi(e),n=Un[t];if("function"!=typeof n||!(t in Rn.prototype))return!1;if(e===n)return!0;var r=zi(n);return!!r&&e===r[0]}(fn&&na(new fn(new ArrayBuffer(1)))!=w||hn&&na(new hn)!=v||pn&&"[object Promise]"!=na(pn.resolve())||vn&&na(new vn)!=_||gn&&na(new gn)!=E)&&(na=function(e){var t=hr(e),n=t==m?e.constructor:void 0,r=n?Ia(n):"";if(r)switch(r){case bn:return w;case Cn:return v;case En:return"[object Promise]";case kn:return _;case wn:return E}return t});var ca=Ee?Hs:au;function da(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ce)}function fa(e){return e==e&&!Bs(e)}function ha(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in ve(n)))}}function pa(e,t,n){return t=sn(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=sn(i.length-t,0),o=r(s);++a<s;)o[a]=i[t+a];a=-1;for(var u=r(t+1);++a<t;)u[a]=i[a];return u[t]=n(o),at(e,this,u)}}function va(e,t){return t.length<2?e:dr(e,Vr(t,0,-1))}function ga(e,t){for(var n=e.length,r=on(t.length,n),i=mi(e);r--;){var a=t[r];e[r]=sa(a,n)?i[a]:void 0}return e}function ma(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ya=Ea(Br),_a=Jt||function(e,t){return ze.setTimeout(e,t)},ba=Ea(qr);function Ca(e,t,n){var r=t+"";return ba(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(J,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return ot(o,(function(n){var r="_."+n[0];t&n[1]&&!dt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(X);return t?t[1].split(Z):[]}(r),n)))}function Ea(e){var t=0,n=0;return function(){var r=un(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function ka(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var a=Dr(n,i),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var wa=function(e){var t=Es(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(V,(function(e,n,r,i){t.push(r?i.replace(te,"$1"):n||e)})),t}));function Sa(e){if("string"==typeof e||Ks(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ia(e){if(null!=e){try{return ke.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Aa(e){if(e instanceof Rn)return e.clone();var t=new Tn(e.__wrapped__,e.__chain__);return t.__actions__=mi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ua=Fr((function(e,t){return Ps(e)?Zn(e,ar(t,1,Ps,!0)):[]})),Ma=Fr((function(e,t){var n=Fa(t);return Ps(n)&&(n=void 0),Ps(e)?Zn(e,ar(t,1,Ps,!0),Ki(n,2)):[]})),Oa=Fr((function(e,t){var n=Fa(t);return Ps(n)&&(n=void 0),Ps(e)?Zn(e,ar(t,1,Ps,!0),void 0,n):[]}));function Ta(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:no(n);return i<0&&(i=sn(r+i,0)),bt(e,Ki(t,3),i)}function Ra(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=no(n),i=n<0?sn(r+i,0):on(i,r-1)),bt(e,Ki(t,3),i,!0)}function Na(e){return(null==e?0:e.length)?ar(e,1):[]}function La(e){return e&&e.length?e[0]:void 0}var Pa=Fr((function(e){var t=ht(e,ai);return t.length&&t[0]===e[0]?mr(t):[]})),Da=Fr((function(e){var t=Fa(e),n=ht(e,ai);return t===Fa(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?mr(n,Ki(t,2)):[]})),xa=Fr((function(e){var t=Fa(e),n=ht(e,ai);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?mr(n,void 0,t):[]}));function Fa(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Ha=Fr(ja);function ja(e,t){return e&&e.length&&t&&t.length?Lr(e,t):e}var Ga=Yi((function(e,t){var n=null==e?0:e.length,r=Wn(e,t);return Pr(e,ht(t,(function(e){return sa(e,n)?+e:e})).sort(pi)),r}));function Ba(e){return null==e?e:dn.call(e)}var qa=Fr((function(e){return Xr(ar(e,1,Ps,!0))})),Ya=Fr((function(e){var t=Fa(e);return Ps(t)&&(t=void 0),Xr(ar(e,1,Ps,!0),Ki(t,2))})),Va=Fr((function(e){var t=Fa(e);return t="function"==typeof t?t:void 0,Xr(ar(e,1,Ps,!0),void 0,t)}));function $a(e){if(!e||!e.length)return[];var t=0;return e=ct(e,(function(e){if(Ps(e))return t=sn(e.length,t),!0})),Mt(t,(function(t){return ht(e,St(t))}))}function za(e,t){if(!e||!e.length)return[];var n=$a(e);return null==t?n:ht(n,(function(e){return at(t,void 0,e)}))}var Wa=Fr((function(e,t){return Ps(e)?Zn(e,t):[]})),Qa=Fr((function(e){return ri(ct(e,Ps))})),Ka=Fr((function(e){var t=Fa(e);return Ps(t)&&(t=void 0),ri(ct(e,Ps),Ki(t,2))})),Ja=Fr((function(e){var t=Fa(e);return t="function"==typeof t?t:void 0,ri(ct(e,Ps),void 0,t)})),Xa=Fr($a);var Za=Fr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,za(e,n)}));function es(e){var t=Un(e);return t.__chain__=!0,t}function ts(e,t){return t(e)}var ns=Yi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Wn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Rn&&sa(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ts,args:[i],thisArg:void 0}),new Tn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var rs=_i((function(e,t,n){we.call(e,n)?++e[n]:zn(e,n,1)}));var is=Ii(Ta),as=Ii(Ra);function ss(e,t){return(Rs(e)?ot:er)(e,Ki(t,3))}function os(e,t){return(Rs(e)?ut:tr)(e,Ki(t,3))}var us=_i((function(e,t,n){we.call(e,n)?e[n].push(t):zn(e,n,[t])}));var ls=Fr((function(e,t,n){var i=-1,a="function"==typeof t,s=Ls(e)?r(e.length):[];return er(e,(function(e){s[++i]=a?at(t,e,n):yr(e,t,n)})),s})),cs=_i((function(e,t,n){zn(e,n,t)}));function ds(e,t){return(Rs(e)?ht:Ar)(e,Ki(t,3))}var fs=_i((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var hs=Fr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&oa(e,t[0],t[1])?t=[]:n>2&&oa(t[0],t[1],t[2])&&(t=[t[0]]),Rr(e,ar(t,1),[])})),ps=Kt||function(){return ze.Date.now()};function vs(e,t,n){return t=n?void 0:t,Hi(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function gs(e,t){var n;if("function"!=typeof t)throw new ye(a);return e=no(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ms=Fr((function(e,t,n){var r=1;if(n.length){var i=Bt(n,Qi(ms));r|=32}return Hi(e,r,t,n,i)})),ys=Fr((function(e,t,n){var r=3;if(n.length){var i=Bt(n,Qi(ys));r|=32}return Hi(t,r,e,n,i)}));function _s(e,t,n){var r,i,s,o,u,l,c=0,d=!1,f=!1,h=!0;if("function"!=typeof e)throw new ye(a);function p(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function v(e){return c=e,u=_a(m,t),d?p(e):o}function g(e){var n=e-l;return void 0===l||n>=t||n<0||f&&e-c>=s}function m(){var e=ps();if(g(e))return y(e);u=_a(m,function(e){var n=t-(e-l);return f?on(n,s-(e-c)):n}(e))}function y(e){return u=void 0,h&&r?p(e):(r=i=void 0,o)}function _(){var e=ps(),n=g(e);if(r=arguments,i=this,l=e,n){if(void 0===u)return v(l);if(f)return ci(u),u=_a(m,t),p(l)}return void 0===u&&(u=_a(m,t)),o}return t=io(t)||0,Bs(n)&&(d=!!n.leading,s=(f="maxWait"in n)?sn(io(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),_.cancel=function(){void 0!==u&&ci(u),c=0,r=l=i=u=void 0},_.flush=function(){return void 0===u?o:y(ps())},_}var bs=Fr((function(e,t){return Xn(e,1,t)})),Cs=Fr((function(e,t,n){return Xn(e,io(t)||0,n)}));function Es(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ye(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=e.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(Es.Cache||Pn),n}function ks(e){if("function"!=typeof e)throw new ye(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Es.Cache=Pn;var ws=ui((function(e,t){var n=(t=1==t.length&&Rs(t[0])?ht(t[0],Ot(Ki())):ht(ar(t,1),Ot(Ki()))).length;return Fr((function(r){for(var i=-1,a=on(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return at(e,this,r)}))})),Ss=Fr((function(e,t){return Hi(e,32,void 0,t,Bt(t,Qi(Ss)))})),Is=Fr((function(e,t){return Hi(e,64,void 0,t,Bt(t,Qi(Is)))})),As=Yi((function(e,t){return Hi(e,256,void 0,void 0,void 0,t)}));function Us(e,t){return e===t||e!=e&&t!=t}var Ms=Li(pr),Os=Li((function(e,t){return e>=t})),Ts=_r(function(){return arguments}())?_r:function(e){return qs(e)&&we.call(e,"callee")&&!We.call(e,"callee")},Rs=r.isArray,Ns=Ze?Ot(Ze):function(e){return qs(e)&&hr(e)==k};function Ls(e){return null!=e&&Gs(e.length)&&!Hs(e)}function Ps(e){return qs(e)&&Ls(e)}var Ds=tn||au,xs=et?Ot(et):function(e){return qs(e)&&hr(e)==d};function Fs(e){if(!qs(e))return!1;var t=hr(e);return t==f||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!$s(e)}function Hs(e){if(!Bs(e))return!1;var t=hr(e);return t==h||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function js(e){return"number"==typeof e&&e==no(e)}function Gs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Bs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qs(e){return null!=e&&"object"==typeof e}var Ys=tt?Ot(tt):function(e){return qs(e)&&na(e)==v};function Vs(e){return"number"==typeof e||qs(e)&&hr(e)==g}function $s(e){if(!qs(e)||hr(e)!=m)return!1;var t=Ve(e);if(null===t)return!0;var n=we.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ke.call(n)==Ue}var zs=nt?Ot(nt):function(e){return qs(e)&&hr(e)==y};var Ws=rt?Ot(rt):function(e){return qs(e)&&na(e)==_};function Qs(e){return"string"==typeof e||!Rs(e)&&qs(e)&&hr(e)==b}function Ks(e){return"symbol"==typeof e||qs(e)&&hr(e)==C}var Js=it?Ot(it):function(e){return qs(e)&&Gs(e.length)&&!!je[hr(e)]};var Xs=Li(Ir),Zs=Li((function(e,t){return e<=t}));function eo(e){if(!e)return[];if(Ls(e))return Qs(e)?$t(e):mi(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=na(e);return(t==v?jt:t==_?qt:Mo)(e)}function to(e){return e?(e=io(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function no(e){var t=to(e),n=t%1;return t==t?n?t-n:t:0}function ro(e){return e?Qn(no(e),0,4294967295):0}function io(e){if("number"==typeof e)return e;if(Ks(e))return NaN;if(Bs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Bs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(W,"");var n=ae.test(e);return n||oe.test(e)?Ye(e.slice(2),n?2:8):ie.test(e)?NaN:+e}function ao(e){return yi(e,Co(e))}function so(e){return null==e?"":Jr(e)}var oo=bi((function(e,t){if(da(t)||Ls(t))yi(t,bo(t),e);else for(var n in t)we.call(t,n)&&qn(e,n,t[n])})),uo=bi((function(e,t){yi(t,Co(t),e)})),lo=bi((function(e,t,n,r){yi(t,Co(t),e,r)})),co=bi((function(e,t,n,r){yi(t,bo(t),e,r)})),fo=Yi(Wn);var ho=Fr((function(e,t){e=ve(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&oa(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],s=Co(a),o=-1,u=s.length;++o<u;){var l=s[o],c=e[l];(void 0===c||Us(c,Ce[l])&&!we.call(e,l))&&(e[l]=a[l])}return e})),po=Fr((function(e){return e.push(void 0,Gi),at(ko,void 0,e)}));function vo(e,t,n){var r=null==e?void 0:dr(e,t);return void 0===r?n:r}function go(e,t){return null!=e&&ra(e,t,gr)}var mo=Mi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),e[t]=n}),qo($o)),yo=Mi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),we.call(e,t)?e[t].push(n):e[t]=[n]}),Ki),_o=Fr(yr);function bo(e){return Ls(e)?Fn(e):wr(e)}function Co(e){return Ls(e)?Fn(e,!0):Sr(e)}var Eo=bi((function(e,t,n){Or(e,t,n)})),ko=bi((function(e,t,n,r){Or(e,t,n,r)})),wo=Yi((function(e,t){var n={};if(null==e)return n;var r=!1;t=ht(t,(function(t){return t=oi(t,e),r||(r=t.length>1),t})),yi(e,$i(e),n),r&&(n=Kn(n,7,Bi));for(var i=t.length;i--;)Zr(n,t[i]);return n}));var So=Yi((function(e,t){return null==e?{}:function(e,t){return Nr(e,t,(function(t,n){return go(e,n)}))}(e,t)}));function Io(e,t){if(null==e)return{};var n=ht($i(e),(function(e){return[e]}));return t=Ki(t),Nr(e,n,(function(e,n){return t(e,n[0])}))}var Ao=Fi(bo),Uo=Fi(Co);function Mo(e){return null==e?[]:Tt(e,bo(e))}var Oo=wi((function(e,t,n){return t=t.toLowerCase(),e+(n?To(t):t)}));function To(e){return Ho(so(e).toLowerCase())}function Ro(e){return(e=so(e))&&e.replace(le,Dt).replace(Ne,"")}var No=wi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Lo=wi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Po=ki("toLowerCase");var Do=wi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var xo=wi((function(e,t,n){return e+(n?" ":"")+Ho(t)}));var Fo=wi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ho=ki("toUpperCase");function jo(e,t,n){return e=so(e),void 0===(t=n?void 0:t)?function(e){return xe.test(e)}(e)?function(e){return e.match(Pe)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var Go=Fr((function(e,t){try{return at(e,void 0,t)}catch(e){return Fs(e)?e:new fe(e)}})),Bo=Yi((function(e,t){return ot(t,(function(t){t=Sa(t),zn(e,t,ms(e[t],e))})),e}));function qo(e){return function(){return e}}var Yo=Ai(),Vo=Ai(!0);function $o(e){return e}function zo(e){return kr("function"==typeof e?e:Kn(e,1))}var Wo=Fr((function(e,t){return function(n){return yr(n,e,t)}})),Qo=Fr((function(e,t){return function(n){return yr(e,n,t)}}));function Ko(e,t,n){var r=bo(t),i=cr(t,r);null!=n||Bs(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=cr(t,bo(t)));var a=!(Bs(n)&&"chain"in n&&!n.chain),s=Hs(e);return ot(i,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),i=n.__actions__=mi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,pt([this.value()],arguments))})})),e}function Jo(){}var Xo=Ti(ht),Zo=Ti(lt),eu=Ti(mt);function tu(e){return ua(e)?St(Sa(e)):function(e){return function(t){return dr(t,e)}}(e)}var nu=Ni(),ru=Ni(!0);function iu(){return[]}function au(){return!1}var su=Oi((function(e,t){return e+t}),0),ou=Di("ceil"),uu=Oi((function(e,t){return e/t}),1),lu=Di("floor");var cu,du=Oi((function(e,t){return e*t}),1),fu=Di("round"),hu=Oi((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new ye(a);return e=no(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=vs,Un.assign=oo,Un.assignIn=uo,Un.assignInWith=lo,Un.assignWith=co,Un.at=fo,Un.before=gs,Un.bind=ms,Un.bindAll=Bo,Un.bindKey=ys,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Rs(e)?e:[e]},Un.chain=es,Un.chunk=function(e,t,n){t=(n?oa(e,t,n):void 0===t)?1:sn(no(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,s=0,o=r(Xt(i/t));a<i;)o[s++]=Vr(e,a,a+=t);return o},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return pt(Rs(n)?mi(n):[n],ar(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=Ki();return e=t?ht(e,(function(e){if("function"!=typeof e[1])throw new ye(a);return[n(e[0]),e[1]]})):[],Fr((function(n){for(var r=-1;++r<t;){var i=e[r];if(at(i[0],this,n))return at(i[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=bo(e);return function(n){return Jn(n,e,t)}}(Kn(e,1))},Un.constant=qo,Un.countBy=rs,Un.create=function(e,t){var n=Mn(e);return null==t?n:$n(n,t)},Un.curry=function e(t,n,r){var i=Hi(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Un.curryRight=function e(t,n,r){var i=Hi(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Un.debounce=_s,Un.defaults=ho,Un.defaultsDeep=po,Un.defer=bs,Un.delay=Cs,Un.difference=Ua,Un.differenceBy=Ma,Un.differenceWith=Oa,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?Vr(e,(t=n||void 0===t?1:no(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Vr(e,0,(t=r-(t=n||void 0===t?1:no(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?ti(e,Ki(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?ti(e,Ki(t,3),!0):[]},Un.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&oa(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=no(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:no(r))<0&&(r+=i),r=n>r?0:ro(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return(Rs(e)?ct:ir)(e,Ki(t,3))},Un.flatMap=function(e,t){return ar(ds(e,t),1)},Un.flatMapDeep=function(e,t){return ar(ds(e,t),1/0)},Un.flatMapDepth=function(e,t,n){return n=void 0===n?1:no(n),ar(ds(e,t),n)},Un.flatten=Na,Un.flattenDeep=function(e){return(null==e?0:e.length)?ar(e,1/0):[]},Un.flattenDepth=function(e,t){return(null==e?0:e.length)?ar(e,t=void 0===t?1:no(t)):[]},Un.flip=function(e){return Hi(e,512)},Un.flow=Yo,Un.flowRight=Vo,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Un.functions=function(e){return null==e?[]:cr(e,bo(e))},Un.functionsIn=function(e){return null==e?[]:cr(e,Co(e))},Un.groupBy=us,Un.initial=function(e){return(null==e?0:e.length)?Vr(e,0,-1):[]},Un.intersection=Pa,Un.intersectionBy=Da,Un.intersectionWith=xa,Un.invert=mo,Un.invertBy=yo,Un.invokeMap=ls,Un.iteratee=zo,Un.keyBy=cs,Un.keys=bo,Un.keysIn=Co,Un.map=ds,Un.mapKeys=function(e,t){var n={};return t=Ki(t,3),ur(e,(function(e,r,i){zn(n,t(e,r,i),e)})),n},Un.mapValues=function(e,t){var n={};return t=Ki(t,3),ur(e,(function(e,r,i){zn(n,r,t(e,r,i))})),n},Un.matches=function(e){return Ur(Kn(e,1))},Un.matchesProperty=function(e,t){return Mr(e,Kn(t,1))},Un.memoize=Es,Un.merge=Eo,Un.mergeWith=ko,Un.method=Wo,Un.methodOf=Qo,Un.mixin=Ko,Un.negate=ks,Un.nthArg=function(e){return e=no(e),Fr((function(t){return Tr(t,e)}))},Un.omit=wo,Un.omitBy=function(e,t){return Io(e,ks(Ki(t)))},Un.once=function(e){return gs(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:(Rs(t)||(t=null==t?[]:[t]),Rs(n=r?void 0:n)||(n=null==n?[]:[n]),Rr(e,t,n))},Un.over=Xo,Un.overArgs=ws,Un.overEvery=Zo,Un.overSome=eu,Un.partial=Ss,Un.partialRight=Is,Un.partition=fs,Un.pick=So,Un.pickBy=Io,Un.property=tu,Un.propertyOf=function(e){return function(t){return null==e?void 0:dr(e,t)}},Un.pull=Ha,Un.pullAll=ja,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Lr(e,t,Ki(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Lr(e,t,void 0,n):e},Un.pullAt=Ga,Un.range=nu,Un.rangeRight=ru,Un.rearg=As,Un.reject=function(e,t){return(Rs(e)?ct:ir)(e,ks(Ki(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=Ki(t,3);++r<a;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Pr(e,i),n},Un.rest=function(e,t){if("function"!=typeof e)throw new ye(a);return Fr(e,t=void 0===t?t:no(t))},Un.reverse=Ba,Un.sampleSize=function(e,t,n){return t=(n?oa(e,t,n):void 0===t)?1:no(t),(Rs(e)?jn:jr)(e,t)},Un.set=function(e,t,n){return null==e?e:Gr(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Gr(e,t,n,r)},Un.shuffle=function(e){return(Rs(e)?Gn:Yr)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&oa(e,t,n)?(t=0,n=r):(t=null==t?0:no(t),n=void 0===n?r:no(n)),Vr(e,t,n)):[]},Un.sortBy=hs,Un.sortedUniq=function(e){return e&&e.length?Qr(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?Qr(e,Ki(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&oa(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=so(e))&&("string"==typeof t||null!=t&&!zs(t))&&!(t=Jr(t))&&Ht(e)?li($t(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new ye(a);return t=null==t?0:sn(no(t),0),Fr((function(n){var r=n[t],i=li(n,0,t);return r&&pt(i,r),at(e,this,i)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?Vr(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?Vr(e,0,(t=n||void 0===t?1:no(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Vr(e,(t=r-(t=n||void 0===t?1:no(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?ti(e,Ki(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?ti(e,Ki(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ye(a);return Bs(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_s(e,t,{leading:r,maxWait:t,trailing:i})},Un.thru=ts,Un.toArray=eo,Un.toPairs=Ao,Un.toPairsIn=Uo,Un.toPath=function(e){return Rs(e)?ht(e,Sa):Ks(e)?[e]:mi(wa(so(e)))},Un.toPlainObject=ao,Un.transform=function(e,t,n){var r=Rs(e),i=r||Ds(e)||Js(e);if(t=Ki(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:Bs(e)&&Hs(a)?Mn(Ve(e)):{}}return(i?ot:ur)(e,(function(e,r,i){return t(n,e,r,i)})),n},Un.unary=function(e){return vs(e,1)},Un.union=qa,Un.unionBy=Ya,Un.unionWith=Va,Un.uniq=function(e){return e&&e.length?Xr(e):[]},Un.uniqBy=function(e,t){return e&&e.length?Xr(e,Ki(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Xr(e,void 0,t):[]},Un.unset=function(e,t){return null==e||Zr(e,t)},Un.unzip=$a,Un.unzipWith=za,Un.update=function(e,t,n){return null==e?e:ei(e,t,si(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:ei(e,t,si(n),r)},Un.values=Mo,Un.valuesIn=function(e){return null==e?[]:Tt(e,Co(e))},Un.without=Wa,Un.words=jo,Un.wrap=function(e,t){return Ss(si(t),e)},Un.xor=Qa,Un.xorBy=Ka,Un.xorWith=Ja,Un.zip=Xa,Un.zipObject=function(e,t){return ii(e||[],t||[],qn)},Un.zipObjectDeep=function(e,t){return ii(e||[],t||[],Gr)},Un.zipWith=Za,Un.entries=Ao,Un.entriesIn=Uo,Un.extend=uo,Un.extendWith=lo,Ko(Un,Un),Un.add=su,Un.attempt=Go,Un.camelCase=Oo,Un.capitalize=To,Un.ceil=ou,Un.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=io(n))==n?n:0),void 0!==t&&(t=(t=io(t))==t?t:0),Qn(io(e),t,n)},Un.clone=function(e){return Kn(e,4)},Un.cloneDeep=function(e){return Kn(e,5)},Un.cloneDeepWith=function(e,t){return Kn(e,5,t="function"==typeof t?t:void 0)},Un.cloneWith=function(e,t){return Kn(e,4,t="function"==typeof t?t:void 0)},Un.conformsTo=function(e,t){return null==t||Jn(e,t,bo(t))},Un.deburr=Ro,Un.defaultTo=function(e,t){return null==e||e!=e?t:e},Un.divide=uu,Un.endsWith=function(e,t,n){e=so(e),t=Jr(t);var r=e.length,i=n=void 0===n?r:Qn(no(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Un.eq=Us,Un.escape=function(e){return(e=so(e))&&H.test(e)?e.replace(x,xt):e},Un.escapeRegExp=function(e){return(e=so(e))&&z.test(e)?e.replace($,"\\$&"):e},Un.every=function(e,t,n){var r=Rs(e)?lt:nr;return n&&oa(e,t,n)&&(t=void 0),r(e,Ki(t,3))},Un.find=is,Un.findIndex=Ta,Un.findKey=function(e,t){return _t(e,Ki(t,3),ur)},Un.findLast=as,Un.findLastIndex=Ra,Un.findLastKey=function(e,t){return _t(e,Ki(t,3),lr)},Un.floor=lu,Un.forEach=ss,Un.forEachRight=os,Un.forIn=function(e,t){return null==e?e:sr(e,Ki(t,3),Co)},Un.forInRight=function(e,t){return null==e?e:or(e,Ki(t,3),Co)},Un.forOwn=function(e,t){return e&&ur(e,Ki(t,3))},Un.forOwnRight=function(e,t){return e&&lr(e,Ki(t,3))},Un.get=vo,Un.gt=Ms,Un.gte=Os,Un.has=function(e,t){return null!=e&&ra(e,t,vr)},Un.hasIn=go,Un.head=La,Un.identity=$o,Un.includes=function(e,t,n,r){e=Ls(e)?e:Mo(e),n=n&&!r?no(n):0;var i=e.length;return n<0&&(n=sn(i+n,0)),Qs(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ct(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:no(n);return i<0&&(i=sn(r+i,0)),Ct(e,t,i)},Un.inRange=function(e,t,n){return t=to(t),void 0===n?(n=t,t=0):n=to(n),function(e,t,n){return e>=on(t,n)&&e<sn(t,n)}(e=io(e),t,n)},Un.invoke=_o,Un.isArguments=Ts,Un.isArray=Rs,Un.isArrayBuffer=Ns,Un.isArrayLike=Ls,Un.isArrayLikeObject=Ps,Un.isBoolean=function(e){return!0===e||!1===e||qs(e)&&hr(e)==c},Un.isBuffer=Ds,Un.isDate=xs,Un.isElement=function(e){return qs(e)&&1===e.nodeType&&!$s(e)},Un.isEmpty=function(e){if(null==e)return!0;if(Ls(e)&&(Rs(e)||"string"==typeof e||"function"==typeof e.splice||Ds(e)||Js(e)||Ts(e)))return!e.length;var t=na(e);if(t==v||t==_)return!e.size;if(da(e))return!wr(e).length;for(var n in e)if(we.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return br(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?br(e,t,void 0,n):!!r},Un.isError=Fs,Un.isFinite=function(e){return"number"==typeof e&&nn(e)},Un.isFunction=Hs,Un.isInteger=js,Un.isLength=Gs,Un.isMap=Ys,Un.isMatch=function(e,t){return e===t||Cr(e,t,Xi(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,Cr(e,t,Xi(t),n)},Un.isNaN=function(e){return Vs(e)&&e!=+e},Un.isNative=function(e){if(ca(e))throw new fe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Er(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=Vs,Un.isObject=Bs,Un.isObjectLike=qs,Un.isPlainObject=$s,Un.isRegExp=zs,Un.isSafeInteger=function(e){return js(e)&&e>=-9007199254740991&&e<=9007199254740991},Un.isSet=Ws,Un.isString=Qs,Un.isSymbol=Ks,Un.isTypedArray=Js,Un.isUndefined=function(e){return void 0===e},Un.isWeakMap=function(e){return qs(e)&&na(e)==E},Un.isWeakSet=function(e){return qs(e)&&"[object WeakSet]"==hr(e)},Un.join=function(e,t){return null==e?"":rn.call(e,t)},Un.kebabCase=No,Un.last=Fa,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=no(n))<0?sn(r+i,0):on(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):bt(e,kt,i,!0)},Un.lowerCase=Lo,Un.lowerFirst=Po,Un.lt=Xs,Un.lte=Zs,Un.max=function(e){return e&&e.length?rr(e,$o,pr):void 0},Un.maxBy=function(e,t){return e&&e.length?rr(e,Ki(t,2),pr):void 0},Un.mean=function(e){return wt(e,$o)},Un.meanBy=function(e,t){return wt(e,Ki(t,2))},Un.min=function(e){return e&&e.length?rr(e,$o,Ir):void 0},Un.minBy=function(e,t){return e&&e.length?rr(e,Ki(t,2),Ir):void 0},Un.stubArray=iu,Un.stubFalse=au,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=du,Un.nth=function(e,t){return e&&e.length?Tr(e,no(t)):void 0},Un.noConflict=function(){return ze._===this&&(ze._=Me),this},Un.noop=Jo,Un.now=ps,Un.pad=function(e,t,n){e=so(e);var r=(t=no(t))?Vt(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ri(Zt(i),n)+e+Ri(Xt(i),n)},Un.padEnd=function(e,t,n){e=so(e);var r=(t=no(t))?Vt(e):0;return t&&r<t?e+Ri(t-r,n):e},Un.padStart=function(e,t,n){e=so(e);var r=(t=no(t))?Vt(e):0;return t&&r<t?Ri(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),ln(so(e).replace(Q,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&oa(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=to(e),void 0===t?(t=e,e=0):t=to(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=cn();return on(e+i*(t-e+qe("1e-"+((i+"").length-1))),t)}return Dr(e,t)},Un.reduce=function(e,t,n){var r=Rs(e)?vt:At,i=arguments.length<3;return r(e,Ki(t,4),n,i,er)},Un.reduceRight=function(e,t,n){var r=Rs(e)?gt:At,i=arguments.length<3;return r(e,Ki(t,4),n,i,tr)},Un.repeat=function(e,t,n){return t=(n?oa(e,t,n):void 0===t)?1:no(t),xr(so(e),t)},Un.replace=function(){var e=arguments,t=so(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,i=(t=oi(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var a=null==e?void 0:e[Sa(t[r])];void 0===a&&(r=i,a=n),e=Hs(a)?a.call(e):a}return e},Un.round=fu,Un.runInContext=e,Un.sample=function(e){return(Rs(e)?Hn:Hr)(e)},Un.size=function(e){if(null==e)return 0;if(Ls(e))return Qs(e)?Vt(e):e.length;var t=na(e);return t==v||t==_?e.size:wr(e).length},Un.snakeCase=Do,Un.some=function(e,t,n){var r=Rs(e)?mt:$r;return n&&oa(e,t,n)&&(t=void 0),r(e,Ki(t,3))},Un.sortedIndex=function(e,t){return zr(e,t)},Un.sortedIndexBy=function(e,t,n){return Wr(e,t,Ki(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=zr(e,t);if(r<n&&Us(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return zr(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return Wr(e,t,Ki(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=zr(e,t,!0)-1;if(Us(e[n],t))return n}return-1},Un.startCase=xo,Un.startsWith=function(e,t,n){return e=so(e),n=null==n?0:Qn(no(n),0,e.length),t=Jr(t),e.slice(n,n+t.length)==t},Un.subtract=hu,Un.sum=function(e){return e&&e.length?Ut(e,$o):0},Un.sumBy=function(e,t){return e&&e.length?Ut(e,Ki(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&oa(e,t,n)&&(t=void 0),e=so(e),t=lo({},t,r,ji);var i,a,s=lo({},t.imports,r.imports,ji),o=bo(s),u=Tt(s,o),l=0,c=t.interpolate||ce,d="__p += '",f=ge((t.escape||ce).source+"|"+c.source+"|"+(c===B?ne:ce).source+"|"+(t.evaluate||ce).source+"|$","g"),h="//# sourceURL="+(we.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++He+"]")+"\n";e.replace(f,(function(t,n,r,s,o,u){return r||(r=s),d+=e.slice(l,u).replace(de,Ft),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),d+="';\n";var p=we.call(t,"variable")&&t.variable;p||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(N,""):d).replace(L,"$1").replace(P,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Go((function(){return he(o,h+"return "+d).apply(void 0,u)}));if(v.source=d,Fs(v))throw v;return v},Un.times=function(e,t){if((e=no(e))<1||e>9007199254740991)return[];var n=4294967295,r=on(e,4294967295);e-=4294967295;for(var i=Mt(r,t=Ki(t));++n<e;)t(n);return i},Un.toFinite=to,Un.toInteger=no,Un.toLength=ro,Un.toLower=function(e){return so(e).toLowerCase()},Un.toNumber=io,Un.toSafeInteger=function(e){return e?Qn(no(e),-9007199254740991,9007199254740991):0===e?e:0},Un.toString=so,Un.toUpper=function(e){return so(e).toUpperCase()},Un.trim=function(e,t,n){if((e=so(e))&&(n||void 0===t))return e.replace(W,"");if(!e||!(t=Jr(t)))return e;var r=$t(e),i=$t(t);return li(r,Nt(r,i),Lt(r,i)+1).join("")},Un.trimEnd=function(e,t,n){if((e=so(e))&&(n||void 0===t))return e.replace(K,"");if(!e||!(t=Jr(t)))return e;var r=$t(e);return li(r,0,Lt(r,$t(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=so(e))&&(n||void 0===t))return e.replace(Q,"");if(!e||!(t=Jr(t)))return e;var r=$t(e);return li(r,Nt(r,$t(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(Bs(t)){var i="separator"in t?t.separator:i;n="length"in t?no(t.length):n,r="omission"in t?Jr(t.omission):r}var a=(e=so(e)).length;if(Ht(e)){var s=$t(e);a=s.length}if(n>=a)return e;var o=n-Vt(r);if(o<1)return r;var u=s?li(s,0,o).join(""):e.slice(0,o);if(void 0===i)return u+r;if(s&&(o+=u.length-o),zs(i)){if(e.slice(o).search(i)){var l,c=u;for(i.global||(i=ge(i.source,so(re.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var d=l.index;u=u.slice(0,void 0===d?o:d)}}else if(e.indexOf(Jr(i),o)!=o){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r},Un.unescape=function(e){return(e=so(e))&&F.test(e)?e.replace(D,zt):e},Un.uniqueId=function(e){var t=++Se;return so(e)+t},Un.upperCase=Fo,Un.upperFirst=Ho,Un.each=ss,Un.eachRight=os,Un.first=La,Ko(Un,(cu={},ur(Un,(function(e,t){we.call(Un.prototype,t)||(cu[t]=e)})),cu),{chain:!1}),Un.VERSION="4.17.20",ot(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),ot(["drop","take"],(function(e,t){Rn.prototype[e]=function(n){n=void 0===n?1:sn(no(n),0);var r=this.__filtered__&&!t?new Rn(this):this.clone();return r.__filtered__?r.__takeCount__=on(n,r.__takeCount__):r.__views__.push({size:on(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Rn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ot(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Rn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ki(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),ot(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Rn.prototype[e]=function(){return this[n](1).value()[0]}})),ot(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Rn.prototype[e]=function(){return this.__filtered__?new Rn(this):this[n](1)}})),Rn.prototype.compact=function(){return this.filter($o)},Rn.prototype.find=function(e){return this.filter(e).head()},Rn.prototype.findLast=function(e){return this.reverse().find(e)},Rn.prototype.invokeMap=Fr((function(e,t){return"function"==typeof e?new Rn(this):this.map((function(n){return yr(n,e,t)}))})),Rn.prototype.reject=function(e){return this.filter(ks(Ki(e)))},Rn.prototype.slice=function(e,t){e=no(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Rn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=no(t))<0?n.dropRight(-t):n.take(t-e)),n)},Rn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Rn.prototype.toArray=function(){return this.take(4294967295)},ur(Rn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Un[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(Un.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,o=t instanceof Rn,u=s[0],l=o||Rs(t),c=function(e){var t=i.apply(Un,pt([e],s));return r&&d?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(o=l=!1);var d=this.__chain__,f=!!this.__actions__.length,h=a&&!d,p=o&&!f;if(!a&&l){t=p?t:new Rn(this);var v=e.apply(t,s);return v.__actions__.push({func:ts,args:[c],thisArg:void 0}),new Tn(v,d)}return h&&p?e.apply(this,s):(v=this.thru(c),h?r?v.value()[0]:v.value():v)})})),ot(["pop","push","shift","sort","splice","unshift"],(function(e){var t=_e[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Rs(i)?i:[],e)}return this[n]((function(n){return t.apply(Rs(n)?n:[],e)}))}})),ur(Rn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";we.call(_n,r)||(_n[r]=[]),_n[r].push({name:t,func:n})}})),_n[Ui(void 0,2).name]=[{name:"wrapper",func:void 0}],Rn.prototype.clone=function(){var e=new Rn(this.__wrapped__);return e.__actions__=mi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=mi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=mi(this.__views__),e},Rn.prototype.reverse=function(){if(this.__filtered__){var e=new Rn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Rn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Rs(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],s=a.size;switch(a.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=on(t,e+s);break;case"takeRight":e=sn(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=a.start,o=a.end,u=o-s,l=r?o:s-1,c=this.__iteratees__,d=c.length,f=0,h=on(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return ni(e,this.__actions__);var p=[];e:for(;u--&&f<h;){for(var v=-1,g=e[l+=t];++v<d;){var m=c[v],y=m.iteratee,_=m.type,b=y(g);if(2==_)g=b;else if(!b){if(1==_)continue e;break e}}p[f++]=g}return p},Un.prototype.at=ns,Un.prototype.chain=function(){return es(this)},Un.prototype.commit=function(){return new Tn(this.value(),this.__chain__)},Un.prototype.next=function(){void 0===this.__values__&&(this.__values__=eo(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof On;){var r=Aa(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Rn){var t=e;return this.__actions__.length&&(t=new Rn(this)),(t=t.reverse()).__actions__.push({func:ts,args:[Ba],thisArg:void 0}),new Tn(t,this.__chain__)}return this.thru(Ba)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Xe&&(Un.prototype[Xe]=function(){return this}),Un}();ze._=Wt,void 0===(i=function(){return Wt}.call(t,n,t,r))||(r.exports=i)}).call(this)}).call(this,n(10),n(43)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=n(6),i=n(18),a=n(45),s=n(24);function o(e){var t=new a(e),n=i(a.prototype.request,t);return r.extend(n,a.prototype,t),r.extend(n,t),n}var u=o(n(21));u.Axios=a,u.create=function(e){return o(s(u.defaults,e))},u.Cancel=n(25),u.CancelToken=n(58),u.isCancel=n(20),u.all=function(e){return Promise.all(e)},u.spread=n(59),e.exports=u,e.exports.default=u},function(e,t,n){"use strict";var r=n(6),i=n(19),a=n(46),s=n(47),o=n(24);function u(e){this.defaults=e,this.interceptors={request:new a,response:new a}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=o(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},u.prototype.getUri=function(e){return e=o(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}})),e.exports=u},function(e,t,n){"use strict";var r=n(6);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(6),i=n(48),a=n(20),s=n(21);function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return o(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return o(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(o(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(23);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(53),i=n(54);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(6),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,s={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,a,s){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(i)&&o.push("path="+i),r.isString(a)&&o.push("domain="+a),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(25);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";(function(t,n){var r=Object.freeze({});function i(e){return null==e}function a(e){return null!=e}function s(e){return!0===e}function o(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function u(e){return null!==e&&"object"==typeof e}var l=Object.prototype.toString;function c(e){return"[object Object]"===l.call(e)}function d(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function f(e){return a(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function h(e){return null==e?"":Array.isArray(e)||c(e)&&e.toString===l?JSON.stringify(e,null,2):String(e)}function p(e){var t=parseFloat(e);return isNaN(t)?e:t}function v(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var g=v("slot,component",!0),m=v("key,ref,slot,slot-scope,is");function y(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var _=Object.prototype.hasOwnProperty;function b(e,t){return _.call(e,t)}function C(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var E=/-(\w)/g,k=C((function(e){return e.replace(E,(function(e,t){return t?t.toUpperCase():""}))})),w=C((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),S=/\B([A-Z])/g,I=C((function(e){return e.replace(S,"-$1").toLowerCase()})),A=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n};function U(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function M(e,t){for(var n in t)e[n]=t[n];return e}function O(e){for(var t={},n=0;n<e.length;n++)e[n]&&M(t,e[n]);return t}function T(e,t,n){}var R=function(e,t,n){return!1},N=function(e){return e};function L(e,t){if(e===t)return!0;var n=u(e),r=u(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),a=Array.isArray(t);if(i&&a)return e.length===t.length&&e.every((function(e,n){return L(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||a)return!1;var s=Object.keys(e),o=Object.keys(t);return s.length===o.length&&s.every((function(n){return L(e[n],t[n])}))}catch(e){return!1}}function P(e,t){for(var n=0;n<e.length;n++)if(L(e[n],t))return n;return-1}function D(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var x="data-server-rendered",F=["component","directive","filter"],H=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],j={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:R,isReservedAttr:R,isUnknownElement:R,getTagNamespace:T,parsePlatformTagName:N,mustUseProp:R,async:!0,_lifecycleHooks:H},G=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function B(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var q,Y=new RegExp("[^"+G.source+".$_\\d]"),V="__proto__"in{},$="undefined"!=typeof window,z="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,W=z&&WXEnvironment.platform.toLowerCase(),Q=$&&window.navigator.userAgent.toLowerCase(),K=Q&&/msie|trident/.test(Q),J=Q&&Q.indexOf("msie 9.0")>0,X=Q&&Q.indexOf("edge/")>0,Z=(Q&&Q.indexOf("android"),Q&&/iphone|ipad|ipod|ios/.test(Q)||"ios"===W),ee=(Q&&/chrome\/\d+/.test(Q),Q&&/phantomjs/.test(Q),Q&&Q.match(/firefox\/(\d+)/)),te={}.watch,ne=!1;if($)try{var re={};Object.defineProperty(re,"passive",{get:function(){ne=!0}}),window.addEventListener("test-passive",null,re)}catch(r){}var ie=function(){return void 0===q&&(q=!$&&!z&&void 0!==t&&t.process&&"server"===t.process.env.VUE_ENV),q},ae=$&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function se(e){return"function"==typeof e&&/native code/.test(e.toString())}var oe,ue="undefined"!=typeof Symbol&&se(Symbol)&&"undefined"!=typeof Reflect&&se(Reflect.ownKeys);oe="undefined"!=typeof Set&&se(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var le=T,ce=0,de=function(){this.id=ce++,this.subs=[]};de.prototype.addSub=function(e){this.subs.push(e)},de.prototype.removeSub=function(e){y(this.subs,e)},de.prototype.depend=function(){de.target&&de.target.addDep(this)},de.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},de.target=null;var fe=[];function he(e){fe.push(e),de.target=e}function pe(){fe.pop(),de.target=fe[fe.length-1]}var ve=function(e,t,n,r,i,a,s,o){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=o,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ge={child:{configurable:!0}};ge.child.get=function(){return this.componentInstance},Object.defineProperties(ve.prototype,ge);var me=function(e){void 0===e&&(e="");var t=new ve;return t.text=e,t.isComment=!0,t};function ye(e){return new ve(void 0,void 0,void 0,String(e))}function _e(e){var t=new ve(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var be=Array.prototype,Ce=Object.create(be);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=be[e];B(Ce,e,(function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i,a=t.apply(this,n),s=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&s.observeArray(i),s.dep.notify(),a}))}));var Ee=Object.getOwnPropertyNames(Ce),ke=!0;function we(e){ke=e}var Se=function(e){var t;this.value=e,this.dep=new de,this.vmCount=0,B(e,"__ob__",this),Array.isArray(e)?(V?(t=Ce,e.__proto__=t):function(e,t,n){for(var r=0,i=n.length;r<i;r++){var a=n[r];B(e,a,t[a])}}(e,Ce,Ee),this.observeArray(e)):this.walk(e)};function Ie(e,t){var n;if(u(e)&&!(e instanceof ve))return b(e,"__ob__")&&e.__ob__ instanceof Se?n=e.__ob__:ke&&!ie()&&(Array.isArray(e)||c(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Se(e)),t&&n&&n.vmCount++,n}function Ae(e,t,n,r,i){var a=new de,s=Object.getOwnPropertyDescriptor(e,t);if(!s||!1!==s.configurable){var o=s&&s.get,u=s&&s.set;o&&!u||2!==arguments.length||(n=e[t]);var l=!i&&Ie(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=o?o.call(e):n;return de.target&&(a.depend(),l&&(l.dep.depend(),Array.isArray(t)&&function e(t){for(var n=void 0,r=0,i=t.length;r<i;r++)(n=t[r])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&e(n)}(t))),t},set:function(t){var r=o?o.call(e):n;t===r||t!=t&&r!=r||o&&!u||(u?u.call(e,t):n=t,l=!i&&Ie(t),a.notify())}})}}function Ue(e,t,n){if(Array.isArray(e)&&d(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Ae(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function Me(e,t){if(Array.isArray(e)&&d(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||b(e,t)&&(delete e[t],n&&n.dep.notify())}}Se.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Ae(e,t[n])},Se.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ie(e[t])};var Oe=j.optionMergeStrategies;function Te(e,t){if(!t)return e;for(var n,r,i,a=ue?Reflect.ownKeys(t):Object.keys(t),s=0;s<a.length;s++)"__ob__"!==(n=a[s])&&(r=e[n],i=t[n],b(e,n)?r!==i&&c(r)&&c(i)&&Te(r,i):Ue(e,n,i));return e}function Re(e,t,n){return n?function(){var r="function"==typeof t?t.call(n,n):t,i="function"==typeof e?e.call(n,n):e;return r?Te(r,i):i}:t?e?function(){return Te("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function Ne(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n):n}function Le(e,t,n,r){var i=Object.create(e||null);return t?M(i,t):i}Oe.data=function(e,t,n){return n?Re(e,t,n):t&&"function"!=typeof t?e:Re(e,t)},H.forEach((function(e){Oe[e]=Ne})),F.forEach((function(e){Oe[e+"s"]=Le})),Oe.watch=function(e,t,n,r){if(e===te&&(e=void 0),t===te&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};for(var a in M(i,e),t){var s=i[a],o=t[a];s&&!Array.isArray(s)&&(s=[s]),i[a]=s?s.concat(o):Array.isArray(o)?o:[o]}return i},Oe.props=Oe.methods=Oe.inject=Oe.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return M(i,e),t&&M(i,t),i},Oe.provide=Re;var Pe=function(e,t){return void 0===t?e:t};function De(e,t,n){if("function"==typeof t&&(t=t.options),function(e,t){var n=e.props;if(n){var r,i,a={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(i=n[r])&&(a[k(i)]={type:null});else if(c(n))for(var s in n)i=n[s],a[k(s)]=c(i)?i:{type:i};e.props=a}}(t),function(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(c(n))for(var a in n){var s=n[a];r[a]=c(s)?M({from:a},s):{from:s}}}}(t),function(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"==typeof r&&(t[n]={bind:r,update:r})}}(t),!t._base&&(t.extends&&(e=De(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=De(e,t.mixins[r],n);var a,s={};for(a in e)o(a);for(a in t)b(e,a)||o(a);function o(r){var i=Oe[r]||Pe;s[r]=i(e[r],t[r],n,r)}return s}function xe(e,t,n,r){if("string"==typeof n){var i=e[t];if(b(i,n))return i[n];var a=k(n);if(b(i,a))return i[a];var s=w(a);return b(i,s)?i[s]:i[n]||i[a]||i[s]}}function Fe(e,t,n,r){var i=t[e],a=!b(n,e),s=n[e],o=Ge(Boolean,i.type);if(o>-1)if(a&&!b(i,"default"))s=!1;else if(""===s||s===I(e)){var u=Ge(String,i.type);(u<0||o<u)&&(s=!0)}if(void 0===s){s=function(e,t,n){if(b(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"==typeof r&&"Function"!==He(t.type)?r.call(e):r}}(r,i,e);var l=ke;we(!0),Ie(s),we(l)}return s}function He(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function je(e,t){return He(e)===He(t)}function Ge(e,t){if(!Array.isArray(t))return je(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(je(t[n],e))return n;return-1}function Be(e,t,n){he();try{if(t)for(var r=t;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var a=0;a<i.length;a++)try{if(!1===i[a].call(r,e,t,n))return}catch(e){Ye(e,r,"errorCaptured hook")}}Ye(e,t,n)}finally{pe()}}function qe(e,t,n,r,i){var a;try{(a=n?e.apply(t,n):e.call(t))&&!a._isVue&&f(a)&&!a._handled&&(a.catch((function(e){return Be(e,r,i+" (Promise/async)")})),a._handled=!0)}catch(e){Be(e,r,i)}return a}function Ye(e,t,n){if(j.errorHandler)try{return j.errorHandler.call(null,e,t,n)}catch(t){t!==e&&Ve(t,null,"config.errorHandler")}Ve(e,t,n)}function Ve(e,t,n){if(!$&&!z||"undefined"==typeof console)throw e;console.error(e)}var $e,ze=!1,We=[],Qe=!1;function Ke(){Qe=!1;var e=We.slice(0);We.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&se(Promise)){var Je=Promise.resolve();$e=function(){Je.then(Ke),Z&&setTimeout(T)},ze=!0}else if(K||"undefined"==typeof MutationObserver||!se(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())$e=void 0!==n&&se(n)?function(){n(Ke)}:function(){setTimeout(Ke,0)};else{var Xe=1,Ze=new MutationObserver(Ke),et=document.createTextNode(String(Xe));Ze.observe(et,{characterData:!0}),$e=function(){Xe=(Xe+1)%2,et.data=String(Xe)},ze=!0}function tt(e,t){var n;if(We.push((function(){if(e)try{e.call(t)}catch(e){Be(e,t,"nextTick")}else n&&n(t)})),Qe||(Qe=!0,$e()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){n=e}))}var nt=new oe;function rt(e){!function e(t,n){var r,i,a=Array.isArray(t);if(!(!a&&!u(t)||Object.isFrozen(t)||t instanceof ve)){if(t.__ob__){var s=t.__ob__.dep.id;if(n.has(s))return;n.add(s)}if(a)for(r=t.length;r--;)e(t[r],n);else for(r=(i=Object.keys(t)).length;r--;)e(t[i[r]],n)}}(e,nt),nt.clear()}var it=C((function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),r="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=r?e.slice(1):e,once:n,capture:r,passive:t}}));function at(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return qe(r,null,arguments,t,"v-on handler");for(var i=r.slice(),a=0;a<i.length;a++)qe(i[a],null,e,t,"v-on handler")}return n.fns=e,n}function st(e,t,n,r,a,o){var u,l,c,d;for(u in e)l=e[u],c=t[u],d=it(u),i(l)||(i(c)?(i(l.fns)&&(l=e[u]=at(l,o)),s(d.once)&&(l=e[u]=a(d.name,l,d.capture)),n(d.name,l,d.capture,d.passive,d.params)):l!==c&&(c.fns=l,e[u]=c));for(u in t)i(e[u])&&r((d=it(u)).name,t[u],d.capture)}function ot(e,t,n){var r;e instanceof ve&&(e=e.data.hook||(e.data.hook={}));var o=e[t];function u(){n.apply(this,arguments),y(r.fns,u)}i(o)?r=at([u]):a(o.fns)&&s(o.merged)?(r=o).fns.push(u):r=at([o,u]),r.merged=!0,e[t]=r}function ut(e,t,n,r,i){if(a(t)){if(b(t,n))return e[n]=t[n],i||delete t[n],!0;if(b(t,r))return e[n]=t[r],i||delete t[r],!0}return!1}function lt(e){return o(e)?[ye(e)]:Array.isArray(e)?function e(t,n){var r,u,l,c,d=[];for(r=0;r<t.length;r++)i(u=t[r])||"boolean"==typeof u||(c=d[l=d.length-1],Array.isArray(u)?u.length>0&&(ct((u=e(u,(n||"")+"_"+r))[0])&&ct(c)&&(d[l]=ye(c.text+u[0].text),u.shift()),d.push.apply(d,u)):o(u)?ct(c)?d[l]=ye(c.text+u):""!==u&&d.push(ye(u)):ct(u)&&ct(c)?d[l]=ye(c.text+u.text):(s(t._isVList)&&a(u.tag)&&i(u.key)&&a(n)&&(u.key="__vlist"+n+"_"+r+"__"),d.push(u)));return d}(e):void 0}function ct(e){return a(e)&&a(e.text)&&!1===e.isComment}function dt(e,t){if(e){for(var n=Object.create(null),r=ue?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var a=r[i];if("__ob__"!==a){for(var s=e[a].from,o=t;o;){if(o._provided&&b(o._provided,s)){n[a]=o._provided[s];break}o=o.$parent}if(!o&&"default"in e[a]){var u=e[a].default;n[a]="function"==typeof u?u.call(t):u}}}return n}}function ft(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var a=e[r],s=a.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,a.context!==t&&a.fnContext!==t||!s||null==s.slot)(n.default||(n.default=[])).push(a);else{var o=s.slot,u=n[o]||(n[o]=[]);"template"===a.tag?u.push.apply(u,a.children||[]):u.push(a)}}for(var l in n)n[l].every(ht)&&delete n[l];return n}function ht(e){return e.isComment&&!e.asyncFactory||" "===e.text}function pt(e,t,n){var i,a=Object.keys(t).length>0,s=e?!!e.$stable:!a,o=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&n&&n!==r&&o===n.$key&&!a&&!n.$hasNormal)return n;for(var u in i={},e)e[u]&&"$"!==u[0]&&(i[u]=vt(t,u,e[u]))}else i={};for(var l in t)l in i||(i[l]=gt(t,l));return e&&Object.isExtensible(e)&&(e._normalized=i),B(i,"$stable",s),B(i,"$key",o),B(i,"$hasNormal",a),i}function vt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:lt(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function gt(e,t){return function(){return e[t]}}function mt(e,t){var n,r,i,s,o;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t(e[r],r);else if("number"==typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(u(e))if(ue&&e[Symbol.iterator]){n=[];for(var l=e[Symbol.iterator](),c=l.next();!c.done;)n.push(t(c.value,n.length)),c=l.next()}else for(s=Object.keys(e),n=new Array(s.length),r=0,i=s.length;r<i;r++)o=s[r],n[r]=t(e[o],o,r);return a(n)||(n=[]),n._isVList=!0,n}function yt(e,t,n,r){var i,a=this.$scopedSlots[e];a?(n=n||{},r&&(n=M(M({},r),n)),i=a(n)||t):i=this.$slots[e]||t;var s=n&&n.slot;return s?this.$createElement("template",{slot:s},i):i}function _t(e){return xe(this.$options,"filters",e)||N}function bt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Ct(e,t,n,r,i){var a=j.keyCodes[t]||n;return i&&r&&!j.keyCodes[t]?bt(i,r):a?bt(a,e):r?I(r)!==t:void 0}function Et(e,t,n,r,i){if(n&&u(n)){var a;Array.isArray(n)&&(n=O(n));var s=function(s){if("class"===s||"style"===s||m(s))a=e;else{var o=e.attrs&&e.attrs.type;a=r||j.mustUseProp(t,o,s)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var u=k(s),l=I(s);u in a||l in a||(a[s]=n[s],i&&((e.on||(e.on={}))["update:"+s]=function(e){n[s]=e}))};for(var o in n)s(o)}return e}function kt(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||St(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),r}function wt(e,t,n){return St(e,"__once__"+t+(n?"_"+n:""),!0),e}function St(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&It(e[r],t+"_"+r,n);else It(e,t,n)}function It(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function At(e,t){if(t&&c(t)){var n=e.on=e.on?M({},e.on):{};for(var r in t){var i=n[r],a=t[r];n[r]=i?[].concat(i,a):a}}return e}function Ut(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var a=e[i];Array.isArray(a)?Ut(a,t,n):a&&(a.proxy&&(a.fn.proxy=!0),t[a.key]=a.fn)}return r&&(t.$key=r),t}function Mt(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"==typeof r&&r&&(e[t[n]]=t[n+1])}return e}function Ot(e,t){return"string"==typeof e?t+e:e}function Tt(e){e._o=wt,e._n=p,e._s=h,e._l=mt,e._t=yt,e._q=L,e._i=P,e._m=kt,e._f=_t,e._k=Ct,e._b=Et,e._v=ye,e._e=me,e._u=Ut,e._g=At,e._d=Mt,e._p=Ot}function Rt(e,t,n,i,a){var o,u=this,l=a.options;b(i,"_uid")?(o=Object.create(i))._original=i:(o=i,i=i._original);var c=s(l._compiled),d=!c;this.data=e,this.props=t,this.children=n,this.parent=i,this.listeners=e.on||r,this.injections=dt(l.inject,i),this.slots=function(){return u.$slots||pt(e.scopedSlots,u.$slots=ft(n,i)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return pt(e.scopedSlots,this.slots())}}),c&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=pt(e.scopedSlots,this.$slots)),l._scopeId?this._c=function(e,t,n,r){var a=Ht(o,e,t,n,r,d);return a&&!Array.isArray(a)&&(a.fnScopeId=l._scopeId,a.fnContext=i),a}:this._c=function(e,t,n,r){return Ht(o,e,t,n,r,d)}}function Nt(e,t,n,r,i){var a=_e(e);return a.fnContext=n,a.fnOptions=r,t.slot&&((a.data||(a.data={})).slot=t.slot),a}function Lt(e,t){for(var n in t)e[k(n)]=t[n]}Tt(Rt.prototype);var Pt={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;Pt.prepatch(n,n)}else(e.componentInstance=function(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return a(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}(e,Qt)).$mount(t?e.elm:void 0,t)},prepatch:function(e,t){var n=t.componentOptions;!function(e,t,n,i,a){var s=i.data.scopedSlots,o=e.$scopedSlots,u=!!(s&&!s.$stable||o!==r&&!o.$stable||s&&e.$scopedSlots.$key!==s.$key),l=!!(a||e.$options._renderChildren||u);if(e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=a,e.$attrs=i.data.attrs||r,e.$listeners=n||r,t&&e.$options.props){we(!1);for(var c=e._props,d=e.$options._propKeys||[],f=0;f<d.length;f++){var h=d[f],p=e.$options.props;c[h]=Fe(h,p,t,e)}we(!0),e.$options.propsData=t}n=n||r;var v=e.$options._parentListeners;e.$options._parentListeners=n,Wt(e,n,v),l&&(e.$slots=ft(a,i.context),e.$forceUpdate())}(t.componentInstance=e.componentInstance,n.propsData,n.listeners,t,n.children)},insert:function(e){var t,n=e.context,r=e.componentInstance;r._isMounted||(r._isMounted=!0,Zt(r,"mounted")),e.data.keepAlive&&(n._isMounted?((t=r)._inactive=!1,tn.push(t)):Xt(r,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function e(t,n){if(!(n&&(t._directInactive=!0,Jt(t))||t._inactive)){t._inactive=!0;for(var r=0;r<t.$children.length;r++)e(t.$children[r]);Zt(t,"deactivated")}}(t,!0):t.$destroy())}},Dt=Object.keys(Pt);function xt(e,t,n,o,l){if(!i(e)){var c=n.$options._base;if(u(e)&&(e=c.extend(e)),"function"==typeof e){var d;if(i(e.cid)&&void 0===(e=function(e,t){if(s(e.error)&&a(e.errorComp))return e.errorComp;if(a(e.resolved))return e.resolved;var n=Gt;if(n&&a(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),s(e.loading)&&a(e.loadingComp))return e.loadingComp;if(n&&!a(e.owners)){var r=e.owners=[n],o=!0,l=null,c=null;n.$on("hook:destroyed",(function(){return y(r,n)}));var d=function(e){for(var t=0,n=r.length;t<n;t++)r[t].$forceUpdate();e&&(r.length=0,null!==l&&(clearTimeout(l),l=null),null!==c&&(clearTimeout(c),c=null))},h=D((function(n){e.resolved=Bt(n,t),o?r.length=0:d(!0)})),p=D((function(t){a(e.errorComp)&&(e.error=!0,d(!0))})),v=e(h,p);return u(v)&&(f(v)?i(e.resolved)&&v.then(h,p):f(v.component)&&(v.component.then(h,p),a(v.error)&&(e.errorComp=Bt(v.error,t)),a(v.loading)&&(e.loadingComp=Bt(v.loading,t),0===v.delay?e.loading=!0:l=setTimeout((function(){l=null,i(e.resolved)&&i(e.error)&&(e.loading=!0,d(!1))}),v.delay||200)),a(v.timeout)&&(c=setTimeout((function(){c=null,i(e.resolved)&&p(null)}),v.timeout)))),o=!1,e.loading?e.loadingComp:e.resolved}}(d=e,c)))return function(e,t,n,r,i){var a=me();return a.asyncFactory=e,a.asyncMeta={data:t,context:n,children:r,tag:i},a}(d,t,n,o,l);t=t||{},Cn(e),a(t.model)&&function(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var i=t.on||(t.on={}),s=i[r],o=t.model.callback;a(s)?(Array.isArray(s)?-1===s.indexOf(o):s!==o)&&(i[r]=[o].concat(s)):i[r]=o}(e.options,t);var h=function(e,t,n){var r=t.options.props;if(!i(r)){var s={},o=e.attrs,u=e.props;if(a(o)||a(u))for(var l in r){var c=I(l);ut(s,u,l,c,!0)||ut(s,o,l,c,!1)}return s}}(t,e);if(s(e.options.functional))return function(e,t,n,i,s){var o=e.options,u={},l=o.props;if(a(l))for(var c in l)u[c]=Fe(c,l,t||r);else a(n.attrs)&&Lt(u,n.attrs),a(n.props)&&Lt(u,n.props);var d=new Rt(n,u,s,i,e),f=o.render.call(null,d._c,d);if(f instanceof ve)return Nt(f,n,d.parent,o);if(Array.isArray(f)){for(var h=lt(f)||[],p=new Array(h.length),v=0;v<h.length;v++)p[v]=Nt(h[v],n,d.parent,o);return p}}(e,h,t,n,o);var p=t.on;if(t.on=t.nativeOn,s(e.options.abstract)){var v=t.slot;t={},v&&(t.slot=v)}!function(e){for(var t=e.hook||(e.hook={}),n=0;n<Dt.length;n++){var r=Dt[n],i=t[r],a=Pt[r];i===a||i&&i._merged||(t[r]=i?Ft(a,i):a)}}(t);var g=e.options.name||l;return new ve("vue-component-"+e.cid+(g?"-"+g:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:h,listeners:p,tag:l,children:o},d)}}}function Ft(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function Ht(e,t,n,r,l,c){return(Array.isArray(n)||o(n))&&(l=r,r=n,n=void 0),s(c)&&(l=2),function(e,t,n,r,o){if(a(n)&&a(n.__ob__))return me();if(a(n)&&a(n.is)&&(t=n.is),!t)return me();var l,c,d;(Array.isArray(r)&&"function"==typeof r[0]&&((n=n||{}).scopedSlots={default:r[0]},r.length=0),2===o?r=lt(r):1===o&&(r=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(r)),"string"==typeof t)?(c=e.$vnode&&e.$vnode.ns||j.getTagNamespace(t),l=j.isReservedTag(t)?new ve(j.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!a(d=xe(e.$options,"components",t))?new ve(t,n,r,void 0,void 0,e):xt(d,n,e,r,t)):l=xt(t,n,e,r);return Array.isArray(l)?l:a(l)?(a(c)&&function e(t,n,r){if(t.ns=n,"foreignObject"===t.tag&&(n=void 0,r=!0),a(t.children))for(var o=0,u=t.children.length;o<u;o++){var l=t.children[o];a(l.tag)&&(i(l.ns)||s(r)&&"svg"!==l.tag)&&e(l,n,r)}}(l,c),a(n)&&function(e){u(e.style)&&rt(e.style),u(e.class)&&rt(e.class)}(n),l):me()}(e,t,n,r,l)}var jt,Gt=null;function Bt(e,t){return(e.__esModule||ue&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?t.extend(e):e}function qt(e){return e.isComment&&e.asyncFactory}function Yt(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(a(n)&&(a(n.componentOptions)||qt(n)))return n}}function Vt(e,t){jt.$on(e,t)}function $t(e,t){jt.$off(e,t)}function zt(e,t){var n=jt;return function r(){null!==t.apply(null,arguments)&&n.$off(e,r)}}function Wt(e,t,n){jt=e,st(t,n||{},Vt,$t,zt,e),jt=void 0}var Qt=null;function Kt(e){var t=Qt;return Qt=e,function(){Qt=t}}function Jt(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Xt(e,t){if(t){if(e._directInactive=!1,Jt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Xt(e.$children[n]);Zt(e,"activated")}}function Zt(e,t){he();var n=e.$options[t],r=t+" hook";if(n)for(var i=0,a=n.length;i<a;i++)qe(n[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),pe()}var en=[],tn=[],nn={},rn=!1,an=!1,sn=0,on=0,un=Date.now;if($&&!K){var ln=window.performance;ln&&"function"==typeof ln.now&&un()>document.createEvent("Event").timeStamp&&(un=function(){return ln.now()})}function cn(){var e,t;for(on=un(),an=!0,en.sort((function(e,t){return e.id-t.id})),sn=0;sn<en.length;sn++)(e=en[sn]).before&&e.before(),t=e.id,nn[t]=null,e.run();var n=tn.slice(),r=en.slice();sn=en.length=tn.length=0,nn={},rn=an=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Xt(e[t],!0)}(n),function(e){for(var t=e.length;t--;){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Zt(r,"updated")}}(r),ae&&j.devtools&&ae.emit("flush")}var dn=0,fn=function(e,t,n,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++dn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new oe,this.newDepIds=new oe,this.expression="","function"==typeof t?this.getter=t:(this.getter=function(e){if(!Y.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}(t),this.getter||(this.getter=T)),this.value=this.lazy?void 0:this.get()};fn.prototype.get=function(){var e;he(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;Be(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&rt(e),pe(),this.cleanupDeps()}return e},fn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},fn.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},fn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==nn[t]){if(nn[t]=!0,an){for(var n=en.length-1;n>sn&&en[n].id>e.id;)n--;en.splice(n+1,0,e)}else en.push(e);rn||(rn=!0,tt(cn))}}(this)},fn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){Be(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},fn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},fn.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},fn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var hn={enumerable:!0,configurable:!0,get:T,set:T};function pn(e,t,n){hn.get=function(){return this[t][n]},hn.set=function(e){this[t][n]=e},Object.defineProperty(e,n,hn)}var vn={lazy:!0};function gn(e,t,n){var r=!ie();"function"==typeof n?(hn.get=r?mn(t):yn(n),hn.set=T):(hn.get=n.get?r&&!1!==n.cache?mn(t):yn(n.get):T,hn.set=n.set||T),Object.defineProperty(e,t,hn)}function mn(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),de.target&&t.depend(),t.value}}function yn(e){return function(){return e.call(this,this)}}function _n(e,t,n,r){return c(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,r)}var bn=0;function Cn(e){var t=e.options;if(e.super){var n=Cn(e.super);if(n!==e.superOptions){e.superOptions=n;var r=function(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}(e);r&&M(e.extendOptions,r),(t=e.options=De(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function En(e){this._init(e)}function kn(e){return e&&(e.Ctor.options.name||e.tag)}function wn(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:(n=e,"[object RegExp]"===l.call(n)&&e.test(t));var n}function Sn(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var a in n){var s=n[a];if(s){var o=kn(s.componentOptions);o&&!t(o)&&In(n,a,r,i)}}}function In(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,y(n,t)}!function(e){e.prototype._init=function(e){var t=this;t._uid=bn++,t._isVue=!0,e&&e._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(t,e):t.$options=De(Cn(t.constructor),e||{},t),t._renderProxy=t,t._self=t,function(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(t),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Wt(e,t)}(t),function(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,i=n&&n.context;e.$slots=ft(t._renderChildren,i),e.$scopedSlots=r,e._c=function(t,n,r,i){return Ht(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return Ht(e,t,n,r,i,!0)};var a=n&&n.data;Ae(e,"$attrs",a&&a.attrs||r,null,!0),Ae(e,"$listeners",t._parentListeners||r,null,!0)}(t),Zt(t,"beforeCreate"),function(e){var t=dt(e.$options.inject,e);t&&(we(!1),Object.keys(t).forEach((function(n){Ae(e,n,t[n])})),we(!0))}(t),function(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[];e.$parent&&we(!1);var a=function(a){i.push(a);var s=Fe(a,t,n,e);Ae(r,a,s),a in e||pn(e,"_props",a)};for(var s in t)a(s);we(!0)}(e,t.props),t.methods&&function(e,t){for(var n in e.$options.props,t)e[n]="function"!=typeof t[n]?T:A(t[n],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;c(t=e._data="function"==typeof t?function(e,t){he();try{return e.call(t,t)}catch(e){return Be(e,t,"data()"),{}}finally{pe()}}(t,e):t||{})||(t={});for(var n,r=Object.keys(t),i=e.$options.props,a=(e.$options.methods,r.length);a--;){var s=r[a];i&&b(i,s)||(void 0,36!==(n=(s+"").charCodeAt(0))&&95!==n&&pn(e,"_data",s))}Ie(t,!0)}(e):Ie(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),r=ie();for(var i in t){var a=t[i],s="function"==typeof a?a:a.get;r||(n[i]=new fn(e,s||T,T,vn)),i in e||gn(e,i,a)}}(e,t.computed),t.watch&&t.watch!==te&&function(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)_n(e,n,r[i]);else _n(e,n,r)}}(e,t.watch)}(t),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(t),Zt(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}(En),function(e){Object.defineProperty(e.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(e.prototype,"$props",{get:function(){return this._props}}),e.prototype.$set=Ue,e.prototype.$delete=Me,e.prototype.$watch=function(e,t,n){if(c(t))return _n(this,e,t,n);(n=n||{}).user=!0;var r=new fn(this,e,t,n);if(n.immediate)try{t.call(this,r.value)}catch(e){Be(e,this,'callback for immediate watcher "'+r.expression+'"')}return function(){r.teardown()}}}(En),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,a=e.length;i<a;i++)r.$on(e[i],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)n.$off(e[r],t);return n}var a,s=n._events[e];if(!s)return n;if(!t)return n._events[e]=null,n;for(var o=s.length;o--;)if((a=s[o])===t||a.fn===t){s.splice(o,1);break}return n},e.prototype.$emit=function(e){var t=this._events[e];if(t){t=t.length>1?U(t):t;for(var n=U(arguments,1),r='event handler for "'+e+'"',i=0,a=t.length;i<a;i++)qe(t[i],this,n,this,r)}return this}}(En),function(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,a=Kt(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),a(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Zt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||y(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Zt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(En),function(e){Tt(e.prototype),e.prototype.$nextTick=function(e){return tt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,i=n._parentVnode;i&&(t.$scopedSlots=pt(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{Gt=t,e=r.call(t._renderProxy,t.$createElement)}catch(n){Be(n,t,"render"),e=t._vnode}finally{Gt=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof ve||(e=me()),e.parent=i,e}}(En);var An=[String,RegExp,Array],Un={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:An,exclude:An,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)In(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){Sn(e,(function(e){return wn(t,e)}))})),this.$watch("exclude",(function(t){Sn(e,(function(e){return!wn(t,e)}))}))},render:function(){var e=this.$slots.default,t=Yt(e),n=t&&t.componentOptions;if(n){var r=kn(n),i=this.include,a=this.exclude;if(i&&(!r||!wn(i,r))||a&&r&&wn(a,r))return t;var s=this.cache,o=this.keys,u=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;s[u]?(t.componentInstance=s[u].componentInstance,y(o,u),o.push(u)):(s[u]=t,o.push(u),this.max&&o.length>parseInt(this.max)&&In(s,o[0],o,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}}};!function(e){var t={get:function(){return j}};Object.defineProperty(e,"config",t),e.util={warn:le,extend:M,mergeOptions:De,defineReactive:Ae},e.set=Ue,e.delete=Me,e.nextTick=tt,e.observable=function(e){return Ie(e),e},e.options=Object.create(null),F.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,M(e.options.components,Un),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=U(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=De(this.options,e),this}}(e),function(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var a=e.name||n.options.name,s=function(e){this._init(e)};return(s.prototype=Object.create(n.prototype)).constructor=s,s.cid=t++,s.options=De(n.options,e),s.super=n,s.options.props&&function(e){var t=e.options.props;for(var n in t)pn(e.prototype,"_props",n)}(s),s.options.computed&&function(e){var t=e.options.computed;for(var n in t)gn(e.prototype,n,t[n])}(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,F.forEach((function(e){s[e]=n[e]})),a&&(s.options.components[a]=s),s.superOptions=n.options,s.extendOptions=e,s.sealedOptions=M({},s.options),i[r]=s,s}}(e),function(e){F.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&c(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}(e)}(En),Object.defineProperty(En.prototype,"$isServer",{get:ie}),Object.defineProperty(En.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(En,"FunctionalRenderContext",{value:Rt}),En.version="2.6.12";var Mn=v("style,class"),On=v("input,textarea,option,select,progress"),Tn=function(e,t,n){return"value"===n&&On(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Rn=v("contenteditable,draggable,spellcheck"),Nn=v("events,caret,typing,plaintext-only"),Ln=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Pn="http://www.w3.org/1999/xlink",Dn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},xn=function(e){return Dn(e)?e.slice(6,e.length):""},Fn=function(e){return null==e||!1===e};function Hn(e,t){return{staticClass:jn(e.staticClass,t.staticClass),class:a(e.class)?[e.class,t.class]:t.class}}function jn(e,t){return e?t?e+" "+t:e:t||""}function Gn(e){return Array.isArray(e)?function(e){for(var t,n="",r=0,i=e.length;r<i;r++)a(t=Gn(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}(e):u(e)?function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(e):"string"==typeof e?e:""}var Bn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},qn=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Yn=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Vn=function(e){return qn(e)||Yn(e)};function $n(e){return Yn(e)?"svg":"math"===e?"math":void 0}var zn=Object.create(null),Wn=v("text,number,password,search,email,tel,url");function Qn(e){return"string"==typeof e?document.querySelector(e)||document.createElement("div"):e}var Kn=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(e,t){return document.createElementNS(Bn[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),Jn={create:function(e,t){Xn(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Xn(e,!0),Xn(t))},destroy:function(e){Xn(e,!0)}};function Xn(e,t){var n=e.data.ref;if(a(n)){var r=e.context,i=e.componentInstance||e.elm,s=r.$refs;t?Array.isArray(s[n])?y(s[n],i):s[n]===i&&(s[n]=void 0):e.data.refInFor?Array.isArray(s[n])?s[n].indexOf(i)<0&&s[n].push(i):s[n]=[i]:s[n]=i}}var Zn=new ve("",{},[]),er=["create","activate","update","remove","destroy"];function tr(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&a(e.data)===a(t.data)&&function(e,t){if("input"!==e.tag)return!0;var n,r=a(n=e.data)&&a(n=n.attrs)&&n.type,i=a(n=t.data)&&a(n=n.attrs)&&n.type;return r===i||Wn(r)&&Wn(i)}(e,t)||s(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&i(t.asyncFactory.error))}function nr(e,t,n){var r,i,s={};for(r=t;r<=n;++r)a(i=e[r].key)&&(s[i]=r);return s}var rr={create:ir,update:ir,destroy:function(e){ir(e,Zn)}};function ir(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n,r,i,a=e===Zn,s=t===Zn,o=sr(e.data.directives,e.context),u=sr(t.data.directives,t.context),l=[],c=[];for(n in u)r=o[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,ur(i,"update",t,e),i.def&&i.def.componentUpdated&&c.push(i)):(ur(i,"bind",t,e),i.def&&i.def.inserted&&l.push(i));if(l.length){var d=function(){for(var n=0;n<l.length;n++)ur(l[n],"inserted",t,e)};a?ot(t,"insert",d):d()}if(c.length&&ot(t,"postpatch",(function(){for(var n=0;n<c.length;n++)ur(c[n],"componentUpdated",t,e)})),!a)for(n in o)u[n]||ur(o[n],"unbind",e,e,s)}(e,t)}var ar=Object.create(null);function sr(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)(r=e[n]).modifiers||(r.modifiers=ar),i[or(r)]=r,r.def=xe(t.$options,"directives",r.name);return i}function or(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function ur(e,t,n,r,i){var a=e.def&&e.def[t];if(a)try{a(n.elm,e,n,r,i)}catch(r){Be(r,n.context,"directive "+e.name+" "+t+" hook")}}var lr=[Jn,rr];function cr(e,t){var n=t.componentOptions;if(!(a(n)&&!1===n.Ctor.options.inheritAttrs||i(e.data.attrs)&&i(t.data.attrs))){var r,s,o=t.elm,u=e.data.attrs||{},l=t.data.attrs||{};for(r in a(l.__ob__)&&(l=t.data.attrs=M({},l)),l)s=l[r],u[r]!==s&&dr(o,r,s);for(r in(K||X)&&l.value!==u.value&&dr(o,"value",l.value),u)i(l[r])&&(Dn(r)?o.removeAttributeNS(Pn,xn(r)):Rn(r)||o.removeAttribute(r))}}function dr(e,t,n){e.tagName.indexOf("-")>-1?fr(e,t,n):Ln(t)?Fn(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Rn(t)?e.setAttribute(t,function(e,t){return Fn(t)||"false"===t?"false":"contenteditable"===e&&Nn(t)?t:"true"}(t,n)):Dn(t)?Fn(n)?e.removeAttributeNS(Pn,xn(t)):e.setAttributeNS(Pn,t,n):fr(e,t,n)}function fr(e,t,n){if(Fn(n))e.removeAttribute(t);else{if(K&&!J&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var hr={create:cr,update:cr};function pr(e,t){var n=t.elm,r=t.data,s=e.data;if(!(i(r.staticClass)&&i(r.class)&&(i(s)||i(s.staticClass)&&i(s.class)))){var o=function(e){for(var t=e.data,n=e,r=e;a(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(t=Hn(r.data,t));for(;a(n=n.parent);)n&&n.data&&(t=Hn(t,n.data));return function(e,t){return a(e)||a(t)?jn(e,Gn(t)):""}(t.staticClass,t.class)}(t),u=n._transitionClasses;a(u)&&(o=jn(o,Gn(u))),o!==n._prevClass&&(n.setAttribute("class",o),n._prevClass=o)}}var vr,gr,mr,yr,_r,br,Cr={create:pr,update:pr},Er=/[\w).+\-_$\]]/;function kr(e){var t,n,r,i,a,s=!1,o=!1,u=!1,l=!1,c=0,d=0,f=0,h=0;for(r=0;r<e.length;r++)if(n=t,t=e.charCodeAt(r),s)39===t&&92!==n&&(s=!1);else if(o)34===t&&92!==n&&(o=!1);else if(u)96===t&&92!==n&&(u=!1);else if(l)47===t&&92!==n&&(l=!1);else if(124!==t||124===e.charCodeAt(r+1)||124===e.charCodeAt(r-1)||c||d||f){switch(t){case 34:o=!0;break;case 39:s=!0;break;case 96:u=!0;break;case 40:f++;break;case 41:f--;break;case 91:d++;break;case 93:d--;break;case 123:c++;break;case 125:c--}if(47===t){for(var p=r-1,v=void 0;p>=0&&" "===(v=e.charAt(p));p--);v&&Er.test(v)||(l=!0)}}else void 0===i?(h=r+1,i=e.slice(0,r).trim()):g();function g(){(a||(a=[])).push(e.slice(h,r).trim()),h=r+1}if(void 0===i?i=e.slice(0,r).trim():0!==h&&g(),a)for(r=0;r<a.length;r++)i=wr(i,a[r]);return i}function wr(e,t){var n=t.indexOf("(");if(n<0)return'_f("'+t+'")('+e+")";var r=t.slice(0,n),i=t.slice(n+1);return'_f("'+r+'")('+e+(")"!==i?","+i:i)}function Sr(e,t){console.error("[Vue compiler]: "+e)}function Ir(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function Ar(e,t,n,r,i){(e.props||(e.props=[])).push(Dr({name:t,value:n,dynamic:i},r)),e.plain=!1}function Ur(e,t,n,r,i){(i?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[])).push(Dr({name:t,value:n,dynamic:i},r)),e.plain=!1}function Mr(e,t,n,r){e.attrsMap[t]=n,e.attrsList.push(Dr({name:t,value:n},r))}function Or(e,t,n,r,i,a,s,o){(e.directives||(e.directives=[])).push(Dr({name:t,rawName:n,value:r,arg:i,isDynamicArg:a,modifiers:s},o)),e.plain=!1}function Tr(e,t,n){return n?"_p("+t+',"'+e+'")':e+t}function Rr(e,t,n,i,a,s,o,u){var l;(i=i||r).right?u?t="("+t+")==='click'?'contextmenu':("+t+")":"click"===t&&(t="contextmenu",delete i.right):i.middle&&(u?t="("+t+")==='click'?'mouseup':("+t+")":"click"===t&&(t="mouseup")),i.capture&&(delete i.capture,t=Tr("!",t,u)),i.once&&(delete i.once,t=Tr("~",t,u)),i.passive&&(delete i.passive,t=Tr("&",t,u)),i.native?(delete i.native,l=e.nativeEvents||(e.nativeEvents={})):l=e.events||(e.events={});var c=Dr({value:n.trim(),dynamic:u},o);i!==r&&(c.modifiers=i);var d=l[t];Array.isArray(d)?a?d.unshift(c):d.push(c):l[t]=d?a?[c,d]:[d,c]:c,e.plain=!1}function Nr(e,t,n){var r=Lr(e,":"+t)||Lr(e,"v-bind:"+t);if(null!=r)return kr(r);if(!1!==n){var i=Lr(e,t);if(null!=i)return JSON.stringify(i)}}function Lr(e,t,n){var r;if(null!=(r=e.attrsMap[t]))for(var i=e.attrsList,a=0,s=i.length;a<s;a++)if(i[a].name===t){i.splice(a,1);break}return n&&delete e.attrsMap[t],r}function Pr(e,t){for(var n=e.attrsList,r=0,i=n.length;r<i;r++){var a=n[r];if(t.test(a.name))return n.splice(r,1),a}}function Dr(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function xr(e,t,n){var r=n||{},i=r.number,a="$$v";r.trim&&(a="(typeof $$v === 'string'? $$v.trim(): $$v)"),i&&(a="_n("+a+")");var s=Fr(t,a);e.model={value:"("+t+")",expression:JSON.stringify(t),callback:"function ($$v) {"+s+"}"}}function Fr(e,t){var n=function(e){if(e=e.trim(),vr=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<vr-1)return(yr=e.lastIndexOf("."))>-1?{exp:e.slice(0,yr),key:'"'+e.slice(yr+1)+'"'}:{exp:e,key:null};for(gr=e,yr=_r=br=0;!jr();)Gr(mr=Hr())?qr(mr):91===mr&&Br(mr);return{exp:e.slice(0,_r),key:e.slice(_r+1,br)}}(e);return null===n.key?e+"="+t:"$set("+n.exp+", "+n.key+", "+t+")"}function Hr(){return gr.charCodeAt(++yr)}function jr(){return yr>=vr}function Gr(e){return 34===e||39===e}function Br(e){var t=1;for(_r=yr;!jr();)if(Gr(e=Hr()))qr(e);else if(91===e&&t++,93===e&&t--,0===t){br=yr;break}}function qr(e){for(var t=e;!jr()&&(e=Hr())!==t;);}var Yr,Vr="__r";function $r(e,t,n){var r=Yr;return function i(){null!==t.apply(null,arguments)&&Qr(e,i,n,r)}}var zr=ze&&!(ee&&Number(ee[1])<=53);function Wr(e,t,n,r){if(zr){var i=on,a=t;t=a._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return a.apply(this,arguments)}}Yr.addEventListener(e,t,ne?{capture:n,passive:r}:n)}function Qr(e,t,n,r){(r||Yr).removeEventListener(e,t._wrapper||t,n)}function Kr(e,t){if(!i(e.data.on)||!i(t.data.on)){var n=t.data.on||{},r=e.data.on||{};Yr=t.elm,function(e){if(a(e.__r)){var t=K?"change":"input";e[t]=[].concat(e.__r,e[t]||[]),delete e.__r}a(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(n),st(n,r,Wr,Qr,$r,t.context),Yr=void 0}}var Jr,Xr={create:Kr,update:Kr};function Zr(e,t){if(!i(e.data.domProps)||!i(t.data.domProps)){var n,r,s=t.elm,o=e.data.domProps||{},u=t.data.domProps||{};for(n in a(u.__ob__)&&(u=t.data.domProps=M({},u)),o)n in u||(s[n]="");for(n in u){if(r=u[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),r===o[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=r;var l=i(r)?"":String(r);ei(s,l)&&(s.value=l)}else if("innerHTML"===n&&Yn(s.tagName)&&i(s.innerHTML)){(Jr=Jr||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var c=Jr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;c.firstChild;)s.appendChild(c.firstChild)}else if(r!==o[n])try{s[n]=r}catch(e){}}}}function ei(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(e,t)||function(e,t){var n=e.value,r=e._vModifiers;if(a(r)){if(r.number)return p(n)!==p(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}(e,t))}var ti={create:Zr,update:Zr},ni=C((function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var r=e.split(n);r.length>1&&(t[r[0].trim()]=r[1].trim())}})),t}));function ri(e){var t=ii(e.style);return e.staticStyle?M(e.staticStyle,t):t}function ii(e){return Array.isArray(e)?O(e):"string"==typeof e?ni(e):e}var ai,si=/^--/,oi=/\s*!important$/,ui=function(e,t,n){if(si.test(t))e.style.setProperty(t,n);else if(oi.test(n))e.style.setProperty(I(t),n.replace(oi,""),"important");else{var r=ci(t);if(Array.isArray(n))for(var i=0,a=n.length;i<a;i++)e.style[r]=n[i];else e.style[r]=n}},li=["Webkit","Moz","ms"],ci=C((function(e){if(ai=ai||document.createElement("div").style,"filter"!==(e=k(e))&&e in ai)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<li.length;n++){var r=li[n]+t;if(r in ai)return r}}));function di(e,t){var n=t.data,r=e.data;if(!(i(n.staticStyle)&&i(n.style)&&i(r.staticStyle)&&i(r.style))){var s,o,u=t.elm,l=r.staticStyle,c=r.normalizedStyle||r.style||{},d=l||c,f=ii(t.data.style)||{};t.data.normalizedStyle=a(f.__ob__)?M({},f):f;var h=function(e,t){for(var n,r={},i=e;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=ri(i.data))&&M(r,n);(n=ri(e.data))&&M(r,n);for(var a=e;a=a.parent;)a.data&&(n=ri(a.data))&&M(r,n);return r}(t);for(o in d)i(h[o])&&ui(u,o,"");for(o in h)(s=h[o])!==d[o]&&ui(u,o,null==s?"":s)}}var fi={create:di,update:di},hi=/\s+/;function pi(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(hi).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function vi(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(hi).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function gi(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&M(t,mi(e.name||"v")),M(t,e),t}return"string"==typeof e?mi(e):void 0}}var mi=C((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),yi=$&&!J,_i="transition",bi="animation",Ci="transition",Ei="transitionend",ki="animation",wi="animationend";yi&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ci="WebkitTransition",Ei="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ki="WebkitAnimation",wi="webkitAnimationEnd"));var Si=$?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Ii(e){Si((function(){Si(e)}))}function Ai(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),pi(e,t))}function Ui(e,t){e._transitionClasses&&y(e._transitionClasses,t),vi(e,t)}function Mi(e,t,n){var r=Ti(e,t),i=r.type,a=r.timeout,s=r.propCount;if(!i)return n();var o=i===_i?Ei:wi,u=0,l=function(){e.removeEventListener(o,c),n()},c=function(t){t.target===e&&++u>=s&&l()};setTimeout((function(){u<s&&l()}),a+1),e.addEventListener(o,c)}var Oi=/\b(transform|all)(,|$)/;function Ti(e,t){var n,r=window.getComputedStyle(e),i=(r[Ci+"Delay"]||"").split(", "),a=(r[Ci+"Duration"]||"").split(", "),s=Ri(i,a),o=(r[ki+"Delay"]||"").split(", "),u=(r[ki+"Duration"]||"").split(", "),l=Ri(o,u),c=0,d=0;return t===_i?s>0&&(n=_i,c=s,d=a.length):t===bi?l>0&&(n=bi,c=l,d=u.length):d=(n=(c=Math.max(s,l))>0?s>l?_i:bi:null)?n===_i?a.length:u.length:0,{type:n,timeout:c,propCount:d,hasTransform:n===_i&&Oi.test(r[Ci+"Property"])}}function Ri(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return Ni(t)+Ni(e[n])})))}function Ni(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Li(e,t){var n=e.elm;a(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=gi(e.data.transition);if(!i(r)&&!a(n._enterCb)&&1===n.nodeType){for(var s=r.css,o=r.type,l=r.enterClass,c=r.enterToClass,d=r.enterActiveClass,f=r.appearClass,h=r.appearToClass,v=r.appearActiveClass,g=r.beforeEnter,m=r.enter,y=r.afterEnter,_=r.enterCancelled,b=r.beforeAppear,C=r.appear,E=r.afterAppear,k=r.appearCancelled,w=r.duration,S=Qt,I=Qt.$vnode;I&&I.parent;)S=I.context,I=I.parent;var A=!S._isMounted||!e.isRootInsert;if(!A||C||""===C){var U=A&&f?f:l,M=A&&v?v:d,O=A&&h?h:c,T=A&&b||g,R=A&&"function"==typeof C?C:m,N=A&&E||y,L=A&&k||_,P=p(u(w)?w.enter:w),x=!1!==s&&!J,F=xi(R),H=n._enterCb=D((function(){x&&(Ui(n,O),Ui(n,M)),H.cancelled?(x&&Ui(n,U),L&&L(n)):N&&N(n),n._enterCb=null}));e.data.show||ot(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),R&&R(n,H)})),T&&T(n),x&&(Ai(n,U),Ai(n,M),Ii((function(){Ui(n,U),H.cancelled||(Ai(n,O),F||(Di(P)?setTimeout(H,P):Mi(n,o,H)))}))),e.data.show&&(t&&t(),R&&R(n,H)),x||F||H()}}}function Pi(e,t){var n=e.elm;a(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=gi(e.data.transition);if(i(r)||1!==n.nodeType)return t();if(!a(n._leaveCb)){var s=r.css,o=r.type,l=r.leaveClass,c=r.leaveToClass,d=r.leaveActiveClass,f=r.beforeLeave,h=r.leave,v=r.afterLeave,g=r.leaveCancelled,m=r.delayLeave,y=r.duration,_=!1!==s&&!J,b=xi(h),C=p(u(y)?y.leave:y),E=n._leaveCb=D((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),_&&(Ui(n,c),Ui(n,d)),E.cancelled?(_&&Ui(n,l),g&&g(n)):(t(),v&&v(n)),n._leaveCb=null}));m?m(k):k()}function k(){E.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),f&&f(n),_&&(Ai(n,l),Ai(n,d),Ii((function(){Ui(n,l),E.cancelled||(Ai(n,c),b||(Di(C)?setTimeout(E,C):Mi(n,o,E)))}))),h&&h(n,E),_||b||E())}}function Di(e){return"number"==typeof e&&!isNaN(e)}function xi(e){if(i(e))return!1;var t=e.fns;return a(t)?xi(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Fi(e,t){!0!==t.data.show&&Li(t)}var Hi=function(e){var t,n,r={},u=e.modules,l=e.nodeOps;for(t=0;t<er.length;++t)for(r[er[t]]=[],n=0;n<u.length;++n)a(u[n][er[t]])&&r[er[t]].push(u[n][er[t]]);function c(e){var t=l.parentNode(e);a(t)&&l.removeChild(t,e)}function d(e,t,n,i,o,u,c){if(a(e.elm)&&a(u)&&(e=u[c]=_e(e)),e.isRootInsert=!o,!function(e,t,n,i){var o=e.data;if(a(o)){var u=a(e.componentInstance)&&o.keepAlive;if(a(o=o.hook)&&a(o=o.init)&&o(e,!1),a(e.componentInstance))return f(e,t),h(n,e.elm,i),s(u)&&function(e,t,n,i){for(var s,o=e;o.componentInstance;)if(a(s=(o=o.componentInstance._vnode).data)&&a(s=s.transition)){for(s=0;s<r.activate.length;++s)r.activate[s](Zn,o);t.push(o);break}h(n,e.elm,i)}(e,t,n,i),!0}}(e,t,n,i)){var d=e.data,v=e.children,g=e.tag;a(g)?(e.elm=e.ns?l.createElementNS(e.ns,g):l.createElement(g,e),y(e),p(e,v,t),a(d)&&m(e,t),h(n,e.elm,i)):s(e.isComment)?(e.elm=l.createComment(e.text),h(n,e.elm,i)):(e.elm=l.createTextNode(e.text),h(n,e.elm,i))}}function f(e,t){a(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,g(e)?(m(e,t),y(e)):(Xn(e),t.push(e))}function h(e,t,n){a(e)&&(a(n)?l.parentNode(n)===e&&l.insertBefore(e,t,n):l.appendChild(e,t))}function p(e,t,n){if(Array.isArray(t))for(var r=0;r<t.length;++r)d(t[r],n,e.elm,null,!0,t,r);else o(e.text)&&l.appendChild(e.elm,l.createTextNode(String(e.text)))}function g(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return a(e.tag)}function m(e,n){for(var i=0;i<r.create.length;++i)r.create[i](Zn,e);a(t=e.data.hook)&&(a(t.create)&&t.create(Zn,e),a(t.insert)&&n.push(e))}function y(e){var t;if(a(t=e.fnScopeId))l.setStyleScope(e.elm,t);else for(var n=e;n;)a(t=n.context)&&a(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t),n=n.parent;a(t=Qt)&&t!==e.context&&t!==e.fnContext&&a(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t)}function _(e,t,n,r,i,a){for(;r<=i;++r)d(n[r],a,e,t,!1,n,r)}function b(e){var t,n,i=e.data;if(a(i))for(a(t=i.hook)&&a(t=t.destroy)&&t(e),t=0;t<r.destroy.length;++t)r.destroy[t](e);if(a(t=e.children))for(n=0;n<e.children.length;++n)b(e.children[n])}function C(e,t,n){for(;t<=n;++t){var r=e[t];a(r)&&(a(r.tag)?(E(r),b(r)):c(r.elm))}}function E(e,t){if(a(t)||a(e.data)){var n,i=r.remove.length+1;for(a(t)?t.listeners+=i:t=function(e,t){function n(){0==--n.listeners&&c(e)}return n.listeners=t,n}(e.elm,i),a(n=e.componentInstance)&&a(n=n._vnode)&&a(n.data)&&E(n,t),n=0;n<r.remove.length;++n)r.remove[n](e,t);a(n=e.data.hook)&&a(n=n.remove)?n(e,t):t()}else c(e.elm)}function k(e,t,n,r){for(var i=n;i<r;i++){var s=t[i];if(a(s)&&tr(e,s))return i}}function w(e,t,n,o,u,c){if(e!==t){a(t.elm)&&a(o)&&(t=o[u]=_e(t));var f=t.elm=e.elm;if(s(e.isAsyncPlaceholder))a(t.asyncFactory.resolved)?A(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(s(t.isStatic)&&s(e.isStatic)&&t.key===e.key&&(s(t.isCloned)||s(t.isOnce)))t.componentInstance=e.componentInstance;else{var h,p=t.data;a(p)&&a(h=p.hook)&&a(h=h.prepatch)&&h(e,t);var v=e.children,m=t.children;if(a(p)&&g(t)){for(h=0;h<r.update.length;++h)r.update[h](e,t);a(h=p.hook)&&a(h=h.update)&&h(e,t)}i(t.text)?a(v)&&a(m)?v!==m&&function(e,t,n,r,s){for(var o,u,c,f=0,h=0,p=t.length-1,v=t[0],g=t[p],m=n.length-1,y=n[0],b=n[m],E=!s;f<=p&&h<=m;)i(v)?v=t[++f]:i(g)?g=t[--p]:tr(v,y)?(w(v,y,r,n,h),v=t[++f],y=n[++h]):tr(g,b)?(w(g,b,r,n,m),g=t[--p],b=n[--m]):tr(v,b)?(w(v,b,r,n,m),E&&l.insertBefore(e,v.elm,l.nextSibling(g.elm)),v=t[++f],b=n[--m]):tr(g,y)?(w(g,y,r,n,h),E&&l.insertBefore(e,g.elm,v.elm),g=t[--p],y=n[++h]):(i(o)&&(o=nr(t,f,p)),i(u=a(y.key)?o[y.key]:k(y,t,f,p))?d(y,r,e,v.elm,!1,n,h):tr(c=t[u],y)?(w(c,y,r,n,h),t[u]=void 0,E&&l.insertBefore(e,c.elm,v.elm)):d(y,r,e,v.elm,!1,n,h),y=n[++h]);f>p?_(e,i(n[m+1])?null:n[m+1].elm,n,h,m,r):h>m&&C(t,f,p)}(f,v,m,n,c):a(m)?(a(e.text)&&l.setTextContent(f,""),_(f,null,m,0,m.length-1,n)):a(v)?C(v,0,v.length-1):a(e.text)&&l.setTextContent(f,""):e.text!==t.text&&l.setTextContent(f,t.text),a(p)&&a(h=p.hook)&&a(h=h.postpatch)&&h(e,t)}}}function S(e,t,n){if(s(n)&&a(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var I=v("attrs,class,staticClass,staticStyle,key");function A(e,t,n,r){var i,o=t.tag,u=t.data,l=t.children;if(r=r||u&&u.pre,t.elm=e,s(t.isComment)&&a(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(a(u)&&(a(i=u.hook)&&a(i=i.init)&&i(t,!0),a(i=t.componentInstance)))return f(t,n),!0;if(a(o)){if(a(l))if(e.hasChildNodes())if(a(i=u)&&a(i=i.domProps)&&a(i=i.innerHTML)){if(i!==e.innerHTML)return!1}else{for(var c=!0,d=e.firstChild,h=0;h<l.length;h++){if(!d||!A(d,l[h],n,r)){c=!1;break}d=d.nextSibling}if(!c||d)return!1}else p(t,l,n);if(a(u)){var v=!1;for(var g in u)if(!I(g)){v=!0,m(t,n);break}!v&&u.class&&rt(u.class)}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,o){if(!i(t)){var u,c=!1,f=[];if(i(e))c=!0,d(t,f);else{var h=a(e.nodeType);if(!h&&tr(e,t))w(e,t,f,null,null,o);else{if(h){if(1===e.nodeType&&e.hasAttribute(x)&&(e.removeAttribute(x),n=!0),s(n)&&A(e,t,f))return S(t,f,!0),e;u=e,e=new ve(l.tagName(u).toLowerCase(),{},[],void 0,u)}var p=e.elm,v=l.parentNode(p);if(d(t,f,p._leaveCb?null:v,l.nextSibling(p)),a(t.parent))for(var m=t.parent,y=g(t);m;){for(var _=0;_<r.destroy.length;++_)r.destroy[_](m);if(m.elm=t.elm,y){for(var E=0;E<r.create.length;++E)r.create[E](Zn,m);var k=m.data.hook.insert;if(k.merged)for(var I=1;I<k.fns.length;I++)k.fns[I]()}else Xn(m);m=m.parent}a(v)?C([e],0,0):a(e.tag)&&b(e)}}return S(t,f,c),t.elm}a(e)&&b(e)}}({nodeOps:Kn,modules:[hr,Cr,Xr,ti,fi,$?{create:Fi,activate:Fi,remove:function(e,t){!0!==e.data.show?Pi(e,t):t()}}:{}].concat(lr)});J&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&zi(e,"input")}));var ji={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?ot(n,"postpatch",(function(){ji.componentUpdated(e,t,n)})):Gi(e,t,n.context),e._vOptions=[].map.call(e.options,Yi)):("textarea"===n.tag||Wn(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Vi),e.addEventListener("compositionend",$i),e.addEventListener("change",$i),J&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Gi(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,Yi);i.some((function(e,t){return!L(e,r[t])}))&&(e.multiple?t.value.some((function(e){return qi(e,i)})):t.value!==t.oldValue&&qi(t.value,i))&&zi(e,"change")}}};function Gi(e,t,n){Bi(e,t,n),(K||X)&&setTimeout((function(){Bi(e,t,n)}),0)}function Bi(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var a,s,o=0,u=e.options.length;o<u;o++)if(s=e.options[o],i)a=P(r,Yi(s))>-1,s.selected!==a&&(s.selected=a);else if(L(Yi(s),r))return void(e.selectedIndex!==o&&(e.selectedIndex=o));i||(e.selectedIndex=-1)}}function qi(e,t){return t.every((function(t){return!L(t,e)}))}function Yi(e){return"_value"in e?e._value:e.value}function Vi(e){e.target.composing=!0}function $i(e){e.target.composing&&(e.target.composing=!1,zi(e.target,"input"))}function zi(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Wi(e){return!e.componentInstance||e.data&&e.data.transition?e:Wi(e.componentInstance._vnode)}var Qi={model:ji,show:{bind:function(e,t,n){var r=t.value,i=(n=Wi(n)).data&&n.data.transition,a=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,Li(n,(function(){e.style.display=a}))):e.style.display=r?a:"none"},update:function(e,t,n){var r=t.value;!r!=!t.oldValue&&((n=Wi(n)).data&&n.data.transition?(n.data.show=!0,r?Li(n,(function(){e.style.display=e.__vOriginalDisplay})):Pi(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none")},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}}},Ki={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Ji(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?Ji(Yt(t.children)):e}function Xi(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var a in i)t[k(a)]=i[a];return t}function Zi(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var ea=function(e){return e.tag||qt(e)},ta=function(e){return"show"===e.name},na={name:"transition",props:Ki,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(ea)).length){var r=this.mode,i=n[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return i;var a=Ji(i);if(!a)return i;if(this._leaving)return Zi(e,i);var s="__transition-"+this._uid+"-";a.key=null==a.key?a.isComment?s+"comment":s+a.tag:o(a.key)?0===String(a.key).indexOf(s)?a.key:s+a.key:a.key;var u=(a.data||(a.data={})).transition=Xi(this),l=this._vnode,c=Ji(l);if(a.data.directives&&a.data.directives.some(ta)&&(a.data.show=!0),c&&c.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(a,c)&&!qt(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var d=c.data.transition=M({},u);if("out-in"===r)return this._leaving=!0,ot(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),Zi(e,i);if("in-out"===r){if(qt(a))return l;var f,h=function(){f()};ot(u,"afterEnter",h),ot(u,"enterCancelled",h),ot(d,"delayLeave",(function(e){f=e}))}}return i}}},ra=M({tag:String,moveClass:String},Ki);function ia(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function aa(e){e.data.newPos=e.elm.getBoundingClientRect()}function sa(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var a=e.elm.style;a.transform=a.WebkitTransform="translate("+r+"px,"+i+"px)",a.transitionDuration="0s"}}delete ra.mode;var oa={Transition:na,TransitionGroup:{props:ra,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=Kt(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],a=this.children=[],s=Xi(this),o=0;o<i.length;o++){var u=i[o];u.tag&&null!=u.key&&0!==String(u.key).indexOf("__vlist")&&(a.push(u),n[u.key]=u,(u.data||(u.data={})).transition=s)}if(r){for(var l=[],c=[],d=0;d<r.length;d++){var f=r[d];f.data.transition=s,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?l.push(f):c.push(f)}this.kept=e(t,null,l),this.removed=c}return e(t,null,a)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(ia),e.forEach(aa),e.forEach(sa),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;Ai(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Ei,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Ei,e),n._moveCb=null,Ui(n,t))})}})))},methods:{hasMove:function(e,t){if(!yi)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){vi(n,e)})),pi(n,t),n.style.display="none",this.$el.appendChild(n);var r=Ti(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}}};En.config.mustUseProp=Tn,En.config.isReservedTag=Vn,En.config.isReservedAttr=Mn,En.config.getTagNamespace=$n,En.config.isUnknownElement=function(e){if(!$)return!0;if(Vn(e))return!1;if(e=e.toLowerCase(),null!=zn[e])return zn[e];var t=document.createElement(e);return e.indexOf("-")>-1?zn[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:zn[e]=/HTMLUnknownElement/.test(t.toString())},M(En.options.directives,Qi),M(En.options.components,oa),En.prototype.__patch__=$?Hi:T,En.prototype.$mount=function(e,t){return function(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=me),Zt(e,"beforeMount"),r=function(){e._update(e._render(),n)},new fn(e,r,T,{before:function(){e._isMounted&&!e._isDestroyed&&Zt(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,Zt(e,"mounted")),e}(this,e=e&&$?Qn(e):void 0,t)},$&&setTimeout((function(){j.devtools&&ae&&ae.emit("init",En)}),0);var ua,la=/\{\{((?:.|\r?\n)+?)\}\}/g,ca=/[-.*+?^${}()|[\]\/\\]/g,da=C((function(e){var t=e[0].replace(ca,"\\$&"),n=e[1].replace(ca,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")})),fa={staticKeys:["staticClass"],transformNode:function(e,t){t.warn;var n=Lr(e,"class");n&&(e.staticClass=JSON.stringify(n));var r=Nr(e,"class",!1);r&&(e.classBinding=r)},genData:function(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}},ha={staticKeys:["staticStyle"],transformNode:function(e,t){t.warn;var n=Lr(e,"style");n&&(e.staticStyle=JSON.stringify(ni(n)));var r=Nr(e,"style",!1);r&&(e.styleBinding=r)},genData:function(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}},pa=v("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),va=v("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),ga=v("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),ma=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,ya=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,_a="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+G.source+"]*",ba="((?:"+_a+"\\:)?"+_a+")",Ca=new RegExp("^<"+ba),Ea=/^\s*(\/?)>/,ka=new RegExp("^<\\/"+ba+"[^>]*>"),wa=/^<!DOCTYPE [^>]+>/i,Sa=/^<!\--/,Ia=/^<!\[/,Aa=v("script,style,textarea",!0),Ua={},Ma={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},Oa=/&(?:lt|gt|quot|amp|#39);/g,Ta=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Ra=v("pre,textarea",!0),Na=function(e,t){return e&&Ra(e)&&"\n"===t[0]};function La(e,t){var n=t?Ta:Oa;return e.replace(n,(function(e){return Ma[e]}))}var Pa,Da,xa,Fa,Ha,ja,Ga,Ba,qa=/^@|^v-on:/,Ya=/^v-|^@|^:|^#/,Va=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,$a=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,za=/^\(|\)$/g,Wa=/^\[.*\]$/,Qa=/:(.*)$/,Ka=/^:|^\.|^v-bind:/,Ja=/\.[^.\]]+(?=[^\]]*$)/g,Xa=/^v-slot(:|$)|^#/,Za=/[\r\n]/,es=/\s+/g,ts=C((function(e){return(ua=ua||document.createElement("div")).innerHTML=e,ua.textContent})),ns="_empty_";function rs(e,t,n){return{type:1,tag:e,attrsList:t,attrsMap:ls(t),rawAttrsMap:{},parent:n,children:[]}}function is(e,t){var n,r;(r=Nr(n=e,"key"))&&(n.key=r),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,function(e){var t=Nr(e,"ref");t&&(e.ref=t,e.refInFor=function(e){for(var t=e;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}(e))}(e),function(e){var t;"template"===e.tag?(t=Lr(e,"scope"),e.slotScope=t||Lr(e,"slot-scope")):(t=Lr(e,"slot-scope"))&&(e.slotScope=t);var n=Nr(e,"slot");if(n&&(e.slotTarget='""'===n?'"default"':n,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||Ur(e,"slot",n,function(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}(e,"slot"))),"template"===e.tag){var r=Pr(e,Xa);if(r){var i=os(r),a=i.name,s=i.dynamic;e.slotTarget=a,e.slotTargetDynamic=s,e.slotScope=r.value||ns}}else{var o=Pr(e,Xa);if(o){var u=e.scopedSlots||(e.scopedSlots={}),l=os(o),c=l.name,d=l.dynamic,f=u[c]=rs("template",[],e);f.slotTarget=c,f.slotTargetDynamic=d,f.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=f,!0})),f.slotScope=o.value||ns,e.children=[],e.plain=!1}}}(e),function(e){"slot"===e.tag&&(e.slotName=Nr(e,"name"))}(e),function(e){var t;(t=Nr(e,"is"))&&(e.component=t),null!=Lr(e,"inline-template")&&(e.inlineTemplate=!0)}(e);for(var i=0;i<xa.length;i++)e=xa[i](e,t)||e;return function(e){var t,n,r,i,a,s,o,u,l=e.attrsList;for(t=0,n=l.length;t<n;t++)if(r=i=l[t].name,a=l[t].value,Ya.test(r))if(e.hasBindings=!0,(s=us(r.replace(Ya,"")))&&(r=r.replace(Ja,"")),Ka.test(r))r=r.replace(Ka,""),a=kr(a),(u=Wa.test(r))&&(r=r.slice(1,-1)),s&&(s.prop&&!u&&"innerHtml"===(r=k(r))&&(r="innerHTML"),s.camel&&!u&&(r=k(r)),s.sync&&(o=Fr(a,"$event"),u?Rr(e,'"update:"+('+r+")",o,null,!1,0,l[t],!0):(Rr(e,"update:"+k(r),o,null,!1,0,l[t]),I(r)!==k(r)&&Rr(e,"update:"+I(r),o,null,!1,0,l[t])))),s&&s.prop||!e.component&&Ga(e.tag,e.attrsMap.type,r)?Ar(e,r,a,l[t],u):Ur(e,r,a,l[t],u);else if(qa.test(r))r=r.replace(qa,""),(u=Wa.test(r))&&(r=r.slice(1,-1)),Rr(e,r,a,s,!1,0,l[t],u);else{var c=(r=r.replace(Ya,"")).match(Qa),d=c&&c[1];u=!1,d&&(r=r.slice(0,-(d.length+1)),Wa.test(d)&&(d=d.slice(1,-1),u=!0)),Or(e,r,i,a,d,u,s,l[t])}else Ur(e,r,JSON.stringify(a),l[t]),!e.component&&"muted"===r&&Ga(e.tag,e.attrsMap.type,r)&&Ar(e,r,"true",l[t])}(e),e}function as(e){var t;if(t=Lr(e,"v-for")){var n=function(e){var t=e.match(Va);if(t){var n={};n.for=t[2].trim();var r=t[1].trim().replace(za,""),i=r.match($a);return i?(n.alias=r.replace($a,"").trim(),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r,n}}(t);n&&M(e,n)}}function ss(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function os(e){var t=e.name.replace(Xa,"");return t||"#"!==e.name[0]&&(t="default"),Wa.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'+t+'"',dynamic:!1}}function us(e){var t=e.match(Ja);if(t){var n={};return t.forEach((function(e){n[e.slice(1)]=!0})),n}}function ls(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n].name]=e[n].value;return t}var cs=/^xmlns:NS\d+/,ds=/^NS\d+:/;function fs(e){return rs(e.tag,e.attrsList.slice(),e.parent)}var hs,ps,vs=[fa,ha,{preTransformNode:function(e,t){if("input"===e.tag){var n,r=e.attrsMap;if(!r["v-model"])return;if((r[":type"]||r["v-bind:type"])&&(n=Nr(e,"type")),r.type||n||!r["v-bind"]||(n="("+r["v-bind"]+").type"),n){var i=Lr(e,"v-if",!0),a=i?"&&("+i+")":"",s=null!=Lr(e,"v-else",!0),o=Lr(e,"v-else-if",!0),u=fs(e);as(u),Mr(u,"type","checkbox"),is(u,t),u.processed=!0,u.if="("+n+")==='checkbox'"+a,ss(u,{exp:u.if,block:u});var l=fs(e);Lr(l,"v-for",!0),Mr(l,"type","radio"),is(l,t),ss(u,{exp:"("+n+")==='radio'"+a,block:l});var c=fs(e);return Lr(c,"v-for",!0),Mr(c,":type",n),is(c,t),ss(u,{exp:i,block:c}),s?u.else=!0:o&&(u.elseif=o),u}}}}],gs={expectHTML:!0,modules:vs,directives:{model:function(e,t,n){var r=t.value,i=t.modifiers,a=e.tag,s=e.attrsMap.type;if(e.component)return xr(e,r,i),!1;if("select"===a)!function(e,t,n){var r='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(n&&n.number?"_n(val)":"val")+"});";Rr(e,"change",r=r+" "+Fr(t,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),null,!0)}(e,r,i);else if("input"===a&&"checkbox"===s)!function(e,t,n){var r=n&&n.number,i=Nr(e,"value")||"null",a=Nr(e,"true-value")||"true",s=Nr(e,"false-value")||"false";Ar(e,"checked","Array.isArray("+t+")?_i("+t+","+i+")>-1"+("true"===a?":("+t+")":":_q("+t+","+a+")")),Rr(e,"change","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+a+"):("+s+");if(Array.isArray($$a)){var $$v="+(r?"_n("+i+")":i)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Fr(t,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Fr(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Fr(t,"$$c")+"}",null,!0)}(e,r,i);else if("input"===a&&"radio"===s)!function(e,t,n){var r=n&&n.number,i=Nr(e,"value")||"null";Ar(e,"checked","_q("+t+","+(i=r?"_n("+i+")":i)+")"),Rr(e,"change",Fr(t,i),null,!0)}(e,r,i);else if("input"===a||"textarea"===a)!function(e,t,n){var r=e.attrsMap.type,i=n||{},a=i.lazy,s=i.number,o=i.trim,u=!a&&"range"!==r,l=a?"change":"range"===r?Vr:"input",c="$event.target.value";o&&(c="$event.target.value.trim()"),s&&(c="_n("+c+")");var d=Fr(t,c);u&&(d="if($event.target.composing)return;"+d),Ar(e,"value","("+t+")"),Rr(e,l,d,null,!0),(o||s)&&Rr(e,"blur","$forceUpdate()")}(e,r,i);else if(!j.isReservedTag(a))return xr(e,r,i),!1;return!0},text:function(e,t){t.value&&Ar(e,"textContent","_s("+t.value+")",t)},html:function(e,t){t.value&&Ar(e,"innerHTML","_s("+t.value+")",t)}},isPreTag:function(e){return"pre"===e},isUnaryTag:pa,mustUseProp:Tn,canBeLeftOpenTag:va,isReservedTag:Vn,getTagNamespace:$n,staticKeys:function(e){return e.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(",")}(vs)},ms=C((function(e){return v("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}));var ys=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,_s=/\([^)]*?\);*$/,bs=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Cs={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Es={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},ks=function(e){return"if("+e+")return null;"},ws={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:ks("$event.target !== $event.currentTarget"),ctrl:ks("!$event.ctrlKey"),shift:ks("!$event.shiftKey"),alt:ks("!$event.altKey"),meta:ks("!$event.metaKey"),left:ks("'button' in $event && $event.button !== 0"),middle:ks("'button' in $event && $event.button !== 1"),right:ks("'button' in $event && $event.button !== 2")};function Ss(e,t){var n=t?"nativeOn:":"on:",r="",i="";for(var a in e){var s=Is(e[a]);e[a]&&e[a].dynamic?i+=a+","+s+",":r+='"'+a+'":'+s+","}return r="{"+r.slice(0,-1)+"}",i?n+"_d("+r+",["+i.slice(0,-1)+"])":n+r}function Is(e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map((function(e){return Is(e)})).join(",")+"]";var t=bs.test(e.value),n=ys.test(e.value),r=bs.test(e.value.replace(_s,""));if(e.modifiers){var i="",a="",s=[];for(var o in e.modifiers)if(ws[o])a+=ws[o],Cs[o]&&s.push(o);else if("exact"===o){var u=e.modifiers;a+=ks(["ctrl","shift","alt","meta"].filter((function(e){return!u[e]})).map((function(e){return"$event."+e+"Key"})).join("||"))}else s.push(o);return s.length&&(i+=function(e){return"if(!$event.type.indexOf('key')&&"+e.map(As).join("&&")+")return null;"}(s)),a&&(i+=a),"function($event){"+i+(t?"return "+e.value+"($event)":n?"return ("+e.value+")($event)":r?"return "+e.value:e.value)+"}"}return t||n?e.value:"function($event){"+(r?"return "+e.value:e.value)+"}"}function As(e){var t=parseInt(e,10);if(t)return"$event.keyCode!=="+t;var n=Cs[e],r=Es[e];return"_k($event.keyCode,"+JSON.stringify(e)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(r)+")"}var Us={on:function(e,t){e.wrapListeners=function(e){return"_g("+e+","+t.value+")"}},bind:function(e,t){e.wrapData=function(n){return"_b("+n+",'"+e.tag+"',"+t.value+","+(t.modifiers&&t.modifiers.prop?"true":"false")+(t.modifiers&&t.modifiers.sync?",true":"")+")"}},cloak:T},Ms=function(e){this.options=e,this.warn=e.warn||Sr,this.transforms=Ir(e.modules,"transformCode"),this.dataGenFns=Ir(e.modules,"genData"),this.directives=M(M({},Us),e.directives);var t=e.isReservedTag||R;this.maybeComponent=function(e){return!!e.component||!t(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Os(e,t){var n=new Ms(t);return{render:"with(this){return "+(e?Ts(e,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function Ts(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return Rs(e,t);if(e.once&&!e.onceProcessed)return Ns(e,t);if(e.for&&!e.forProcessed)return Ps(e,t);if(e.if&&!e.ifProcessed)return Ls(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return function(e,t){var n=e.slotName||'"default"',r=Hs(e,t),i="_t("+n+(r?","+r:""),a=e.attrs||e.dynamicAttrs?Bs((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:k(e.name),value:e.value,dynamic:e.dynamic}}))):null,s=e.attrsMap["v-bind"];return!a&&!s||r||(i+=",null"),a&&(i+=","+a),s&&(i+=(a?"":",null")+","+s),i+")"}(e,t);var n;if(e.component)n=function(e,t,n){var r=t.inlineTemplate?null:Hs(t,n,!0);return"_c("+e+","+Ds(t,n)+(r?","+r:"")+")"}(e.component,e,t);else{var r;(!e.plain||e.pre&&t.maybeComponent(e))&&(r=Ds(e,t));var i=e.inlineTemplate?null:Hs(e,t,!0);n="_c('"+e.tag+"'"+(r?","+r:"")+(i?","+i:"")+")"}for(var a=0;a<t.transforms.length;a++)n=t.transforms[a](e,n);return n}return Hs(e,t)||"void 0"}function Rs(e,t){e.staticProcessed=!0;var n=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return "+Ts(e,t)+"}"),t.pre=n,"_m("+(t.staticRenderFns.length-1)+(e.staticInFor?",true":"")+")"}function Ns(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return Ls(e,t);if(e.staticInFor){for(var n="",r=e.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+Ts(e,t)+","+t.onceId+++","+n+")":Ts(e,t)}return Rs(e,t)}function Ls(e,t,n,r){return e.ifProcessed=!0,function e(t,n,r,i){if(!t.length)return i||"_e()";var a=t.shift();return a.exp?"("+a.exp+")?"+s(a.block)+":"+e(t,n,r,i):""+s(a.block);function s(e){return r?r(e,n):e.once?Ns(e,n):Ts(e,n)}}(e.ifConditions.slice(),t,n,r)}function Ps(e,t,n,r){var i=e.for,a=e.alias,s=e.iterator1?","+e.iterator1:"",o=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,(r||"_l")+"(("+i+"),function("+a+s+o+"){return "+(n||Ts)(e,t)+"})"}function Ds(e,t){var n="{",r=function(e,t){var n=e.directives;if(n){var r,i,a,s,o="directives:[",u=!1;for(r=0,i=n.length;r<i;r++){a=n[r],s=!0;var l=t.directives[a.name];l&&(s=!!l(e,a,t.warn)),s&&(u=!0,o+='{name:"'+a.name+'",rawName:"'+a.rawName+'"'+(a.value?",value:("+a.value+"),expression:"+JSON.stringify(a.value):"")+(a.arg?",arg:"+(a.isDynamicArg?a.arg:'"'+a.arg+'"'):"")+(a.modifiers?",modifiers:"+JSON.stringify(a.modifiers):"")+"},")}return u?o.slice(0,-1)+"]":void 0}}(e,t);r&&(n+=r+","),e.key&&(n+="key:"+e.key+","),e.ref&&(n+="ref:"+e.ref+","),e.refInFor&&(n+="refInFor:true,"),e.pre&&(n+="pre:true,"),e.component&&(n+='tag:"'+e.tag+'",');for(var i=0;i<t.dataGenFns.length;i++)n+=t.dataGenFns[i](e);if(e.attrs&&(n+="attrs:"+Bs(e.attrs)+","),e.props&&(n+="domProps:"+Bs(e.props)+","),e.events&&(n+=Ss(e.events,!1)+","),e.nativeEvents&&(n+=Ss(e.nativeEvents,!0)+","),e.slotTarget&&!e.slotScope&&(n+="slot:"+e.slotTarget+","),e.scopedSlots&&(n+=function(e,t,n){var r=e.for||Object.keys(t).some((function(e){var n=t[e];return n.slotTargetDynamic||n.if||n.for||xs(n)})),i=!!e.if;if(!r)for(var a=e.parent;a;){if(a.slotScope&&a.slotScope!==ns||a.for){r=!0;break}a.if&&(i=!0),a=a.parent}var s=Object.keys(t).map((function(e){return Fs(t[e],n)})).join(",");return"scopedSlots:_u(["+s+"]"+(r?",null,true":"")+(!r&&i?",null,false,"+function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}(s):"")+")"}(e,e.scopedSlots,t)+","),e.model&&(n+="model:{value:"+e.model.value+",callback:"+e.model.callback+",expression:"+e.model.expression+"},"),e.inlineTemplate){var a=function(e,t){var n=e.children[0];if(n&&1===n.type){var r=Os(n,t.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map((function(e){return"function(){"+e+"}"})).join(",")+"]}"}}(e,t);a&&(n+=a+",")}return n=n.replace(/,$/,"")+"}",e.dynamicAttrs&&(n="_b("+n+',"'+e.tag+'",'+Bs(e.dynamicAttrs)+")"),e.wrapData&&(n=e.wrapData(n)),e.wrapListeners&&(n=e.wrapListeners(n)),n}function xs(e){return 1===e.type&&("slot"===e.tag||e.children.some(xs))}function Fs(e,t){var n=e.attrsMap["slot-scope"];if(e.if&&!e.ifProcessed&&!n)return Ls(e,t,Fs,"null");if(e.for&&!e.forProcessed)return Ps(e,t,Fs);var r=e.slotScope===ns?"":String(e.slotScope),i="function("+r+"){return "+("template"===e.tag?e.if&&n?"("+e.if+")?"+(Hs(e,t)||"undefined")+":undefined":Hs(e,t)||"undefined":Ts(e,t))+"}",a=r?"":",proxy:true";return"{key:"+(e.slotTarget||'"default"')+",fn:"+i+a+"}"}function Hs(e,t,n,r,i){var a=e.children;if(a.length){var s=a[0];if(1===a.length&&s.for&&"template"!==s.tag&&"slot"!==s.tag){var o=n?t.maybeComponent(s)?",1":",0":"";return""+(r||Ts)(s,t)+o}var u=n?function(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r];if(1===i.type){if(js(i)||i.ifConditions&&i.ifConditions.some((function(e){return js(e.block)}))){n=2;break}(t(i)||i.ifConditions&&i.ifConditions.some((function(e){return t(e.block)})))&&(n=1)}}return n}(a,t.maybeComponent):0,l=i||Gs;return"["+a.map((function(e){return l(e,t)})).join(",")+"]"+(u?","+u:"")}}function js(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function Gs(e,t){return 1===e.type?Ts(e,t):3===e.type&&e.isComment?(r=e,"_e("+JSON.stringify(r.text)+")"):"_v("+(2===(n=e).type?n.expression:qs(JSON.stringify(n.text)))+")";var n,r}function Bs(e){for(var t="",n="",r=0;r<e.length;r++){var i=e[r],a=qs(i.value);i.dynamic?n+=i.name+","+a+",":t+='"'+i.name+'":'+a+","}return t="{"+t.slice(0,-1)+"}",n?"_d("+t+",["+n.slice(0,-1)+"])":t}function qs(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function Ys(e,t){try{return new Function(e)}catch(n){return t.push({err:n,code:e}),T}}function Vs(e){var t=Object.create(null);return function(n,r,i){(r=M({},r)).warn,delete r.warn;var a=r.delimiters?String(r.delimiters)+n:n;if(t[a])return t[a];var s=e(n,r),o={},u=[];return o.render=Ys(s.render,u),o.staticRenderFns=s.staticRenderFns.map((function(e){return Ys(e,u)})),t[a]=o}}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b");var $s,zs,Ws=($s=function(e,t){var n=function(e,t){Pa=t.warn||Sr,ja=t.isPreTag||R,Ga=t.mustUseProp||R,Ba=t.getTagNamespace||R,t.isReservedTag,xa=Ir(t.modules,"transformNode"),Fa=Ir(t.modules,"preTransformNode"),Ha=Ir(t.modules,"postTransformNode"),Da=t.delimiters;var n,r,i=[],a=!1!==t.preserveWhitespace,s=t.whitespace,o=!1,u=!1;function l(e){if(c(e),o||e.processed||(e=is(e,t)),i.length||e===n||n.if&&(e.elseif||e.else)&&ss(n,{exp:e.elseif,block:e}),r&&!e.forbidden)if(e.elseif||e.else)s=e,(l=function(e){for(var t=e.length;t--;){if(1===e[t].type)return e[t];e.pop()}}(r.children))&&l.if&&ss(l,{exp:s.elseif,block:s});else{if(e.slotScope){var a=e.slotTarget||'"default"';(r.scopedSlots||(r.scopedSlots={}))[a]=e}r.children.push(e),e.parent=r}var s,l;e.children=e.children.filter((function(e){return!e.slotScope})),c(e),e.pre&&(o=!1),ja(e.tag)&&(u=!1);for(var d=0;d<Ha.length;d++)Ha[d](e,t)}function c(e){if(!u)for(var t;(t=e.children[e.children.length-1])&&3===t.type&&" "===t.text;)e.children.pop()}return function(e,t){for(var n,r,i=[],a=t.expectHTML,s=t.isUnaryTag||R,o=t.canBeLeftOpenTag||R,u=0;e;){if(n=e,r&&Aa(r)){var l=0,c=r.toLowerCase(),d=Ua[c]||(Ua[c]=new RegExp("([\\s\\S]*?)(</"+c+"[^>]*>)","i")),f=e.replace(d,(function(e,n,r){return l=r.length,Aa(c)||"noscript"===c||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Na(c,n)&&(n=n.slice(1)),t.chars&&t.chars(n),""}));u+=e.length-f.length,e=f,I(c,u-l,u)}else{var h=e.indexOf("<");if(0===h){if(Sa.test(e)){var p=e.indexOf("--\x3e");if(p>=0){t.shouldKeepComment&&t.comment(e.substring(4,p),u,u+p+3),k(p+3);continue}}if(Ia.test(e)){var v=e.indexOf("]>");if(v>=0){k(v+2);continue}}var g=e.match(wa);if(g){k(g[0].length);continue}var m=e.match(ka);if(m){var y=u;k(m[0].length),I(m[1],y,u);continue}var _=w();if(_){S(_),Na(_.tagName,e)&&k(1);continue}}var b=void 0,C=void 0,E=void 0;if(h>=0){for(C=e.slice(h);!(ka.test(C)||Ca.test(C)||Sa.test(C)||Ia.test(C)||(E=C.indexOf("<",1))<0);)h+=E,C=e.slice(h);b=e.substring(0,h)}h<0&&(b=e),b&&k(b.length),t.chars&&b&&t.chars(b,u-b.length,u)}if(e===n){t.chars&&t.chars(e);break}}function k(t){u+=t,e=e.substring(t)}function w(){var t=e.match(Ca);if(t){var n,r,i={tagName:t[1],attrs:[],start:u};for(k(t[0].length);!(n=e.match(Ea))&&(r=e.match(ya)||e.match(ma));)r.start=u,k(r[0].length),r.end=u,i.attrs.push(r);if(n)return i.unarySlash=n[1],k(n[0].length),i.end=u,i}}function S(e){var n=e.tagName,u=e.unarySlash;a&&("p"===r&&ga(n)&&I(r),o(n)&&r===n&&I(n));for(var l=s(n)||!!u,c=e.attrs.length,d=new Array(c),f=0;f<c;f++){var h=e.attrs[f],p=h[3]||h[4]||h[5]||"",v="a"===n&&"href"===h[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;d[f]={name:h[1],value:La(p,v)}}l||(i.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:d,start:e.start,end:e.end}),r=n),t.start&&t.start(n,d,l,e.start,e.end)}function I(e,n,a){var s,o;if(null==n&&(n=u),null==a&&(a=u),e)for(o=e.toLowerCase(),s=i.length-1;s>=0&&i[s].lowerCasedTag!==o;s--);else s=0;if(s>=0){for(var l=i.length-1;l>=s;l--)t.end&&t.end(i[l].tag,n,a);i.length=s,r=s&&i[s-1].tag}else"br"===o?t.start&&t.start(e,[],!0,n,a):"p"===o&&(t.start&&t.start(e,[],!1,n,a),t.end&&t.end(e,n,a))}I()}(e,{warn:Pa,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function(e,a,s,c,d){var f=r&&r.ns||Ba(e);K&&"svg"===f&&(a=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];cs.test(r.name)||(r.name=r.name.replace(ds,""),t.push(r))}return t}(a));var h,p=rs(e,a,r);f&&(p.ns=f),"style"!==(h=p).tag&&("script"!==h.tag||h.attrsMap.type&&"text/javascript"!==h.attrsMap.type)||ie()||(p.forbidden=!0);for(var v=0;v<Fa.length;v++)p=Fa[v](p,t)||p;o||(function(e){null!=Lr(e,"v-pre")&&(e.pre=!0)}(p),p.pre&&(o=!0)),ja(p.tag)&&(u=!0),o?function(e){var t=e.attrsList,n=t.length;if(n)for(var r=e.attrs=new Array(n),i=0;i<n;i++)r[i]={name:t[i].name,value:JSON.stringify(t[i].value)},null!=t[i].start&&(r[i].start=t[i].start,r[i].end=t[i].end);else e.pre||(e.plain=!0)}(p):p.processed||(as(p),function(e){var t=Lr(e,"v-if");if(t)e.if=t,ss(e,{exp:t,block:e});else{null!=Lr(e,"v-else")&&(e.else=!0);var n=Lr(e,"v-else-if");n&&(e.elseif=n)}}(p),function(e){null!=Lr(e,"v-once")&&(e.once=!0)}(p)),n||(n=p),s?l(p):(r=p,i.push(p))},end:function(e,t,n){var a=i[i.length-1];i.length-=1,r=i[i.length-1],l(a)},chars:function(e,t,n){if(r&&(!K||"textarea"!==r.tag||r.attrsMap.placeholder!==e)){var i,l,c,d=r.children;(e=u||e.trim()?"script"===(i=r).tag||"style"===i.tag?e:ts(e):d.length?s?"condense"===s&&Za.test(e)?"":" ":a?" ":"":"")&&(u||"condense"!==s||(e=e.replace(es," ")),!o&&" "!==e&&(l=function(e,t){var n=t?da(t):la;if(n.test(e)){for(var r,i,a,s=[],o=[],u=n.lastIndex=0;r=n.exec(e);){(i=r.index)>u&&(o.push(a=e.slice(u,i)),s.push(JSON.stringify(a)));var l=kr(r[1].trim());s.push("_s("+l+")"),o.push({"@binding":l}),u=i+r[0].length}return u<e.length&&(o.push(a=e.slice(u)),s.push(JSON.stringify(a))),{expression:s.join("+"),tokens:o}}}(e,Da))?c={type:2,expression:l.expression,tokens:l.tokens,text:e}:" "===e&&d.length&&" "===d[d.length-1].text||(c={type:3,text:e}),c&&d.push(c))}},comment:function(e,t,n){if(r){var i={type:3,text:e,isComment:!0};r.children.push(i)}}}),n}(e.trim(),t);!1!==t.optimize&&function(e,t){e&&(hs=ms(t.staticKeys||""),ps=t.isReservedTag||R,function e(t){if(t.static=function(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||g(e.tag)||!ps(e.tag)||function(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e.for)return!0}return!1}(e)||!Object.keys(e).every(hs))))}(t),1===t.type){if(!ps(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var n=0,r=t.children.length;n<r;n++){var i=t.children[n];e(i),i.static||(t.static=!1)}if(t.ifConditions)for(var a=1,s=t.ifConditions.length;a<s;a++){var o=t.ifConditions[a].block;e(o),o.static||(t.static=!1)}}}(e),function e(t,n){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=n),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var r=0,i=t.children.length;r<i;r++)e(t.children[r],n||!!t.for);if(t.ifConditions)for(var a=1,s=t.ifConditions.length;a<s;a++)e(t.ifConditions[a].block,n)}}(e,!1))}(n,t);var r=Os(n,t);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}},function(e){function t(t,n){var r=Object.create(e),i=[],a=[];if(n)for(var s in n.modules&&(r.modules=(e.modules||[]).concat(n.modules)),n.directives&&(r.directives=M(Object.create(e.directives||null),n.directives)),n)"modules"!==s&&"directives"!==s&&(r[s]=n[s]);r.warn=function(e,t,n){(n?a:i).push(e)};var o=$s(t.trim(),r);return o.errors=i,o.tips=a,o}return{compile:t,compileToFunctions:Vs(t)}})(gs),Qs=(Ws.compile,Ws.compileToFunctions);function Ks(e){return(zs=zs||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',zs.innerHTML.indexOf("&#10;")>0}var Js=!!$&&Ks(!1),Xs=!!$&&Ks(!0),Zs=C((function(e){var t=Qn(e);return t&&t.innerHTML})),eo=En.prototype.$mount;En.prototype.$mount=function(e,t){if((e=e&&Qn(e))===document.body||e===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=Zs(r));else{if(!r.nodeType)return this;r=r.innerHTML}else e&&(r=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e));if(r){var i=Qs(r,{outputSourceRange:!1,shouldDecodeNewlines:Js,shouldDecodeNewlinesForHref:Xs,delimiters:n.delimiters,comments:n.comments},this),a=i.render,s=i.staticRenderFns;n.render=a,n.staticRenderFns=s}}return eo.call(this,e,t)},En.compile=Qs,e.exports=En}).call(this,n(10),n(26).setImmediate)},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,s,o,u=1,l={},c=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){a.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),r=function(t){e.postMessage(s+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[u]=i,r(u),u++},f.clearImmediate=h}function h(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(10),n(11))},function(e,t,n){(function(e){(function(t){"use strict";var n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function r(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var i=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,r){"object"===i(t)?e.exports=r():n.moment=r()}(n,(function(){var t,n;function a(){return t.apply(null,arguments)}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function u(e){return void 0===e}function l(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function c(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e,t){for(var n in t)f(t,n)&&(e[n]=t[n]);return f(t,"toString")&&(e.toString=t.toString),f(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return St(e,t,n,r,!0).utc()}function v(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function g(e){if(null==e._isValid){var t=v(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function m(e){var t=p(NaN);return null!=e?h(v(t),e):v(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var y=a.momentProperties=[];function _(e,t){var n,r,i;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=v(t)),u(t._locale)||(e._locale=t._locale),y.length>0)for(n=0;n<y.length;n++)u(i=t[r=y[n]])||(e[r]=i);return e}var b=!1;function C(e){_(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,a.updateOffset(this),b=!1)}function E(e){return e instanceof C||null!=e&&null!=e._isAMomentObject}function k(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function w(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=k(t)),n}function S(e,t,n){var r,i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),s=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&w(e[r])!==w(t[r]))&&s++;return s+a}function I(e){!1===a.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function A(e,t){var n=!0;return h((function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,e),n){for(var r,s=[],o=0;o<arguments.length;o++){if(r="","object"===i(arguments[o])){for(var u in r+="\n["+o+"] ",arguments[0])r+=u+": "+arguments[0][u]+", ";r=r.slice(0,-2)}else r=arguments[o];s.push(r)}I(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var U,M={};function O(e,t){null!=a.deprecationHandler&&a.deprecationHandler(e,t),M[e]||(I(t),M[e]=!0)}function T(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function R(e,t){var n,r=h({},e);for(n in t)f(t,n)&&(o(e[n])&&o(t[n])?(r[n]={},h(r[n],e[n]),h(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)f(e,n)&&!f(t,n)&&o(e[n])&&(r[n]=h({},r[n]));return r}function N(e){null!=e&&this.set(e)}a.suppressDeprecationWarnings=!1,a.deprecationHandler=null,U=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)f(e,t)&&n.push(t);return n};var L={};function P(e,t){var n=e.toLowerCase();L[n]=L[n+"s"]=L[t]=e}function D(e){return"string"==typeof e?L[e]||L[e.toLowerCase()]:void 0}function x(e){var t,n,r={};for(n in e)f(e,n)&&(t=D(n))&&(r[t]=e[n]);return r}var F={};function H(e,t){F[e]=t}function j(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var G=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,q={},Y={};function V(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(Y[e]=i),t&&(Y[t[0]]=function(){return j(i.apply(this,arguments),t[1],t[2])}),n&&(Y[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function $(e,t){return e.isValid()?(t=z(t,e.localeData()),q[t]=q[t]||function(e){var t,n,r,i=e.match(G);for(t=0,n=i.length;t<n;t++)Y[i[t]]?i[t]=Y[i[t]]:i[t]=(r=i[t]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(t){var r,a="";for(r=0;r<n;r++)a+=T(i[r])?i[r].call(t,e):i[r];return a}}(t),q[t](e)):e.localeData().invalidDate()}function z(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(B.lastIndex=0;n>=0&&B.test(e);)e=e.replace(B,r),B.lastIndex=0,n-=1;return e}var W=/\d/,Q=/\d\d/,K=/\d{3}/,J=/\d{4}/,X=/[+-]?\d{6}/,Z=/\d\d?/,ee=/\d\d\d\d?/,te=/\d\d\d\d\d\d?/,ne=/\d{1,3}/,re=/\d{1,4}/,ie=/[+-]?\d{1,6}/,ae=/\d+/,se=/[+-]?\d+/,oe=/Z|[+-]\d\d:?\d\d/gi,ue=/Z|[+-]\d\d(?::?\d\d)?/gi,le=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ce={};function de(e,t,n){ce[e]=T(t)?t:function(e,r){return e&&n?n:t}}function fe(e,t){return f(ce,e)?ce[e](t._strict,t._locale):new RegExp(he(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i}))))}function he(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var pe={};function ve(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),l(t)&&(r=function(e,n){n[t]=w(e)}),n=0;n<e.length;n++)pe[e[n]]=r}function ge(e,t){ve(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function me(e,t,n){null!=t&&f(pe,e)&&pe[e](t,n._a,n,e)}function ye(e){return _e(e)?366:365}function _e(e){return e%4==0&&e%100!=0||e%400==0}V("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),V(0,["YY",2],0,(function(){return this.year()%100})),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),P("year","y"),H("year",1),de("Y",se),de("YY",Z,Q),de("YYYY",re,J),de("YYYYY",ie,X),de("YYYYYY",ie,X),ve(["YYYYY","YYYYYY"],0),ve("YYYY",(function(e,t){t[0]=2===e.length?a.parseTwoDigitYear(e):w(e)})),ve("YY",(function(e,t){t[0]=a.parseTwoDigitYear(e)})),ve("Y",(function(e,t){t[0]=parseInt(e,10)})),a.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var be,Ce=Ee("FullYear",!0);function Ee(e,t){return function(n){return null!=n?(we(this,e,n),a.updateOffset(this,t),this):ke(this,e)}}function ke(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function we(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&_e(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Se(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Se(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,r=(t%(n=12)+n)%n;return e+=(t-r)/12,1===r?_e(e)?29:28:31-r%7%2}be=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},V("M",["MM",2],"Mo",(function(){return this.month()+1})),V("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),V("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),P("month","M"),H("month",8),de("M",Z),de("MM",Z,Q),de("MMM",(function(e,t){return t.monthsShortRegex(e)})),de("MMMM",(function(e,t){return t.monthsRegex(e)})),ve(["M","MM"],(function(e,t){t[1]=w(e)-1})),ve(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[1]=i:v(n).invalidMonth=e}));var Ie=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ae="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ue="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Me(e,t,n){var r,i,a,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=be.call(this._shortMonthsParse,s))?i:null:-1!==(i=be.call(this._longMonthsParse,s))?i:null:"MMM"===t?-1!==(i=be.call(this._shortMonthsParse,s))||-1!==(i=be.call(this._longMonthsParse,s))?i:null:-1!==(i=be.call(this._longMonthsParse,s))||-1!==(i=be.call(this._shortMonthsParse,s))?i:null}function Oe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=w(t);else if(!l(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Se(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Te(e){return null!=e?(Oe(this,e),a.updateOffset(this,!0),this):ke(this,"Month")}var Re=le,Ne=le;function Le(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],a=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),a.sort(e),t=0;t<12;t++)r[t]=he(r[t]),i[t]=he(i[t]);for(t=0;t<24;t++)a[t]=he(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Pe(e,t,n,r,i,a,s){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,r,i,a,s),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,r,i,a,s),o}function De(e){var t;if(e<100&&e>=0){var n=Array.prototype.slice.call(arguments);n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function xe(e,t,n){var r=7+t-n;return-(7+De(e,0,r).getUTCDay()-t)%7+r-1}function Fe(e,t,n,r,i){var a,s,o=1+7*(t-1)+(7+n-r)%7+xe(e,r,i);return o<=0?s=ye(a=e-1)+o:o>ye(e)?(a=e+1,s=o-ye(e)):(a=e,s=o),{year:a,dayOfYear:s}}function He(e,t,n){var r,i,a=xe(e.year(),t,n),s=Math.floor((e.dayOfYear()-a-1)/7)+1;return s<1?r=s+je(i=e.year()-1,t,n):s>je(e.year(),t,n)?(r=s-je(e.year(),t,n),i=e.year()+1):(i=e.year(),r=s),{week:r,year:i}}function je(e,t,n){var r=xe(e,t,n),i=xe(e+1,t,n);return(ye(e)-r+i)/7}function Ge(e,t){return e.slice(t,7).concat(e.slice(0,t))}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),H("week",5),H("isoWeek",5),de("w",Z),de("ww",Z,Q),de("W",Z),de("WW",Z,Q),ge(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=w(e)})),V("d",0,"do","day"),V("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),V("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),V("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),H("day",11),H("weekday",11),H("isoWeekday",11),de("d",Z),de("e",Z),de("E",Z),de("dd",(function(e,t){return t.weekdaysMinRegex(e)})),de("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),de("dddd",(function(e,t){return t.weekdaysRegex(e)})),ge(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:v(n).invalidWeekday=e})),ge(["d","e","E"],(function(e,t,n,r){t[r]=w(e)}));var Be="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),qe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ye="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ve(e,t,n){var r,i,a,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=be.call(this._weekdaysParse,s))?i:null:"ddd"===t?-1!==(i=be.call(this._shortWeekdaysParse,s))?i:null:-1!==(i=be.call(this._minWeekdaysParse,s))?i:null:"dddd"===t?-1!==(i=be.call(this._weekdaysParse,s))||-1!==(i=be.call(this._shortWeekdaysParse,s))||-1!==(i=be.call(this._minWeekdaysParse,s))?i:null:"ddd"===t?-1!==(i=be.call(this._shortWeekdaysParse,s))||-1!==(i=be.call(this._weekdaysParse,s))||-1!==(i=be.call(this._minWeekdaysParse,s))?i:null:-1!==(i=be.call(this._minWeekdaysParse,s))||-1!==(i=be.call(this._weekdaysParse,s))||-1!==(i=be.call(this._shortWeekdaysParse,s))?i:null}var $e=le,ze=le,We=le;function Qe(){function e(e,t){return t.length-e.length}var t,n,r,i,a,s=[],o=[],u=[],l=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),a=this.weekdays(n,""),s.push(r),o.push(i),u.push(a),l.push(r),l.push(i),l.push(a);for(s.sort(e),o.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)o[t]=he(o[t]),u[t]=he(u[t]),l[t]=he(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ke(){return this.hours()%12||12}function Je(e,t){V(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Xe(e,t){return t._meridiemParse}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Ke),V("k",["kk",2],0,(function(){return this.hours()||24})),V("hmm",0,0,(function(){return""+Ke.apply(this)+j(this.minutes(),2)})),V("hmmss",0,0,(function(){return""+Ke.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)})),V("Hmm",0,0,(function(){return""+this.hours()+j(this.minutes(),2)})),V("Hmmss",0,0,(function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)})),Je("a",!0),Je("A",!1),P("hour","h"),H("hour",13),de("a",Xe),de("A",Xe),de("H",Z),de("h",Z),de("k",Z),de("HH",Z,Q),de("hh",Z,Q),de("kk",Z,Q),de("hmm",ee),de("hmmss",te),de("Hmm",ee),de("Hmmss",te),ve(["H","HH"],3),ve(["k","kk"],(function(e,t,n){var r=w(e);t[3]=24===r?0:r})),ve(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ve(["h","hh"],(function(e,t,n){t[3]=w(e),v(n).bigHour=!0})),ve("hmm",(function(e,t,n){var r=e.length-2;t[3]=w(e.substr(0,r)),t[4]=w(e.substr(r)),v(n).bigHour=!0})),ve("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[3]=w(e.substr(0,r)),t[4]=w(e.substr(r,2)),t[5]=w(e.substr(i)),v(n).bigHour=!0})),ve("Hmm",(function(e,t,n){var r=e.length-2;t[3]=w(e.substr(0,r)),t[4]=w(e.substr(r))})),ve("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[3]=w(e.substr(0,r)),t[4]=w(e.substr(r,2)),t[5]=w(e.substr(i))}));var Ze,et=Ee("Hours",!0),tt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ae,monthsShort:Ue,week:{dow:0,doy:6},weekdays:Be,weekdaysMin:Ye,weekdaysShort:qe,meridiemParse:/[ap]\.?m?\.?/i},nt={},rt={};function it(e){return e?e.toLowerCase().replace("_","-"):e}function at(t){var n=null;if(!nt[t]&&e&&e.exports)try{n=Ze._abbr,r(),st(n)}catch(e){}return nt[t]}function st(e,t){var n;return e&&((n=u(t)?ut(e):ot(e,t))?Ze=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Ze._abbr}function ot(e,t){if(null!==t){var n,r=tt;if(t.abbr=e,null!=nt[e])O("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=nt[e]._config;else if(null!=t.parentLocale)if(null!=nt[t.parentLocale])r=nt[t.parentLocale]._config;else{if(null==(n=at(t.parentLocale)))return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;r=n._config}return nt[e]=new N(R(r,t)),rt[e]&&rt[e].forEach((function(e){ot(e.name,e.config)})),st(e),nt[e]}return delete nt[e],null}function ut(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ze;if(!s(e)){if(t=at(e))return t;e=[e]}return function(e){for(var t,n,r,i,a=0;a<e.length;){for(t=(i=it(e[a]).split("-")).length,n=(n=it(e[a+1]))?n.split("-"):null;t>0;){if(r=at(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&S(i,n,!0)>=t-1)break;t--}a++}return Ze}(e)}function lt(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[1]<0||n[1]>11?1:n[2]<1||n[2]>Se(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,v(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),v(e)._overflowWeeks&&-1===t&&(t=7),v(e)._overflowWeekday&&-1===t&&(t=8),v(e).overflow=t),e}function ct(e,t,n){return null!=e?e:null!=t?t:n}function dt(e){var t,n,r,i,s,o=[];if(!e._d){for(r=function(e){var t=new Date(a.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,n,r,i,a,s,o,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,s=4,n=ct(t.GG,e._a[0],He(It(),1,4).year),r=ct(t.W,1),((i=ct(t.E,1))<1||i>7)&&(u=!0);else{a=e._locale._week.dow,s=e._locale._week.doy;var l=He(It(),a,s);n=ct(t.gg,e._a[0],l.year),r=ct(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+a,(t.e<0||t.e>6)&&(u=!0)):i=a}r<1||r>je(n,a,s)?v(e)._overflowWeeks=!0:null!=u?v(e)._overflowWeekday=!0:(o=Fe(n,r,i,a,s),e._a[0]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(s=ct(e._a[0],r[0]),(e._dayOfYear>ye(s)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=De(s,0,e._dayOfYear),e._a[1]=n.getUTCMonth(),e._a[2]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?De:Pe).apply(null,o),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(v(e).weekdayMismatch=!0)}}var ft=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pt=/Z|[+-]\d\d(?::?\d\d)?/,vt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],mt=/^\/?Date\((\-?\d+)/i;function yt(e){var t,n,r,i,a,s,o=e._i,u=ft.exec(o)||ht.exec(o);if(u){for(v(e).iso=!0,t=0,n=vt.length;t<n;t++)if(vt[t][1].exec(u[1])){i=vt[t][0],r=!1!==vt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[3])){a=(u[2]||" ")+gt[t][0];break}if(null==a)return void(e._isValid=!1)}if(!r&&null!=a)return void(e._isValid=!1);if(u[4]){if(!pt.exec(u[4]))return void(e._isValid=!1);s="Z"}e._f=i+(a||"")+(s||""),kt(e)}else e._isValid=!1}var _t=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function bt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}var Ct={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Et(e){var t,n,r,i,a,s,o,u=_t.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(u){var l=(t=u[4],n=u[3],r=u[2],i=u[5],a=u[6],s=u[7],o=[bt(t),Ue.indexOf(n),parseInt(r,10),parseInt(i,10),parseInt(a,10)],s&&o.push(parseInt(s,10)),o);if(!function(e,t,n){return!e||qe.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}(u[1],l,e))return;e._a=l,e._tzm=function(e,t,n){if(e)return Ct[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(u[8],u[9],u[10]),e._d=De.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function kt(e){if(e._f!==a.ISO_8601)if(e._f!==a.RFC_2822){e._a=[],v(e).empty=!0;var t,n,r,i,s,o=""+e._i,u=o.length,l=0;for(r=z(e._f,e._locale).match(G)||[],t=0;t<r.length;t++)i=r[t],(n=(o.match(fe(i,e))||[])[0])&&((s=o.substr(0,o.indexOf(n))).length>0&&v(e).unusedInput.push(s),o=o.slice(o.indexOf(n)+n.length),l+=n.length),Y[i]?(n?v(e).empty=!1:v(e).unusedTokens.push(i),me(i,n,e)):e._strict&&!n&&v(e).unusedTokens.push(i);v(e).charsLeftOver=u-l,o.length>0&&v(e).unusedInput.push(o),e._a[3]<=12&&!0===v(e).bigHour&&e._a[3]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[3]=function(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),dt(e),lt(e)}else Et(e);else yt(e)}function wt(e){var t=e._i,n=e._f;return e._locale=e._locale||ut(e._l),null===t||void 0===n&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),E(t)?new C(lt(t)):(c(t)?e._d=t:s(n)?function(e){var t,n,r,i,a;if(0===e._f.length)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)a=0,t=_({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],kt(t),g(t)&&(a+=v(t).charsLeftOver,a+=10*v(t).unusedTokens.length,v(t).score=a,(null==r||a<r)&&(r=a,n=t));h(e,n||t)}(e):n?kt(e):function(e){var t=e._i;u(t)?e._d=new Date(a.now()):c(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=mt.exec(e._i);null===t?(yt(e),!1===e._isValid&&(delete e._isValid,Et(e),!1===e._isValid&&(delete e._isValid,a.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):s(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),dt(e)):o(t)?function(e){if(!e._d){var t=x(e._i);e._a=d([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),dt(e)}}(e):l(t)?e._d=new Date(t):a.createFromInputFallback(e)}(e),g(e)||(e._d=null),e))}function St(e,t,n,r,i){var a,u={};return!0!==n&&!1!==n||(r=n,n=void 0),(o(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||s(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=i,u._l=n,u._i=e,u._f=t,u._strict=r,(a=new C(lt(wt(u))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function It(e,t,n,r){return St(e,t,n,r,!1)}a.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),a.ISO_8601=function(){},a.RFC_2822=function(){};var At=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=It.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()})),Ut=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=It.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}));function Mt(e,t){var n,r;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return It();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}var Ot=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Tt(e){var t=x(e),n=t.year||0,r=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,s=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===be.call(Ot,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Ot.length;++r)if(e[Ot[r]]){if(n)return!1;parseFloat(e[Ot[r]])!==w(e[Ot[r]])&&(n=!0)}return!0}(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*o*60*60,this._days=+s+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=ut(),this._bubble()}function Rt(e){return e instanceof Tt}function Nt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Lt(e,t){V(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+j(~~(e/60),2)+t+j(~~e%60,2)}))}Lt("Z",":"),Lt("ZZ",""),de("Z",ue),de("ZZ",ue),ve(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Dt(ue,e)}));var Pt=/([\+\-]|\d\d)/gi;function Dt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Pt)||["-",0,0],i=60*r[1]+w(r[2]);return 0===i?0:"+"===r[0]?i:-i}function xt(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(E(e)||c(e)?e.valueOf():It(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),a.updateOffset(n,!1),n):It(e).local()}function Ft(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ht(){return!!this.isValid()&&this._isUTC&&0===this._offset}a.updateOffset=function(){};var jt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Gt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Bt(e,t){var n,r,a,s,o,u,c=e,d=null;return Rt(e)?c={ms:e._milliseconds,d:e._days,M:e._months}:l(e)?(c={},t?c[t]=e:c.milliseconds=e):(d=jt.exec(e))?(n="-"===d[1]?-1:1,c={y:0,d:w(d[2])*n,h:w(d[3])*n,m:w(d[4])*n,s:w(d[5])*n,ms:w(Nt(1e3*d[6]))*n}):(d=Gt.exec(e))?(n="-"===d[1]?-1:1,c={y:qt(d[2],n),M:qt(d[3],n),w:qt(d[4],n),d:qt(d[5],n),h:qt(d[6],n),m:qt(d[7],n),s:qt(d[8],n)}):null==c?c={}:"object"===(void 0===c?"undefined":i(c))&&("from"in c||"to"in c)&&(s=It(c.from),o=It(c.to),a=s.isValid()&&o.isValid()?(o=xt(o,s),s.isBefore(o)?u=Yt(s,o):((u=Yt(o,s)).milliseconds=-u.milliseconds,u.months=-u.months),u):{milliseconds:0,months:0},(c={}).ms=a.milliseconds,c.M=a.months),r=new Tt(c),Rt(e)&&f(e,"_locale")&&(r._locale=e._locale),r}function qt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Yt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Vt(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(O(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),$t(this,Bt(n="string"==typeof n?+n:n,r),e),this}}function $t(e,t,n,r){var i=t._milliseconds,s=Nt(t._days),o=Nt(t._months);e.isValid()&&(r=null==r||r,o&&Oe(e,ke(e,"Month")+o*n),s&&we(e,"Date",ke(e,"Date")+s*n),i&&e._d.setTime(e._d.valueOf()+i*n),r&&a.updateOffset(e,s||o))}Bt.fn=Tt.prototype,Bt.invalid=function(){return Bt(NaN)};var zt=Vt(1,"add"),Wt=Vt(-1,"subtract");function Qt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Kt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ut(e))&&(this._locale=t),this)}a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Jt=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function Xt(){return this._locale}function Zt(e,t){return(e%t+t)%t}function en(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-126227808e5:new Date(e,t,n).valueOf()}function tn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-126227808e5:Date.UTC(e,t,n)}function nn(e,t){V(0,[e,e.length],0,t)}function rn(e,t,n,r,i){var a;return null==e?He(this,r,i).year:(t>(a=je(e,r,i))&&(t=a),an.call(this,e,t,n,r,i))}function an(e,t,n,r,i){var a=Fe(e,t,n,r,i),s=De(a.year,0,a.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}V(0,["gg",2],0,(function(){return this.weekYear()%100})),V(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),nn("gggg","weekYear"),nn("ggggg","weekYear"),nn("GGGG","isoWeekYear"),nn("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),H("weekYear",1),H("isoWeekYear",1),de("G",se),de("g",se),de("GG",Z,Q),de("gg",Z,Q),de("GGGG",re,J),de("gggg",re,J),de("GGGGG",ie,X),de("ggggg",ie,X),ge(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=w(e)})),ge(["gg","GG"],(function(e,t,n,r){t[r]=a.parseTwoDigitYear(e)})),V("Q",0,"Qo","quarter"),P("quarter","Q"),H("quarter",7),de("Q",W),ve("Q",(function(e,t){t[1]=3*(w(e)-1)})),V("D",["DD",2],"Do","date"),P("date","D"),H("date",9),de("D",Z),de("DD",Z,Q),de("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ve(["D","DD"],2),ve("Do",(function(e,t){t[2]=w(e.match(Z)[0])}));var sn=Ee("Date",!0);V("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),H("dayOfYear",4),de("DDD",ne),de("DDDD",K),ve(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=w(e)})),V("m",["mm",2],0,"minute"),P("minute","m"),H("minute",14),de("m",Z),de("mm",Z,Q),ve(["m","mm"],4);var on=Ee("Minutes",!1);V("s",["ss",2],0,"second"),P("second","s"),H("second",15),de("s",Z),de("ss",Z,Q),ve(["s","ss"],5);var un,ln=Ee("Seconds",!1);for(V("S",0,0,(function(){return~~(this.millisecond()/100)})),V(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),V(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),V(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),V(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),V(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),V(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),P("millisecond","ms"),H("millisecond",16),de("S",ne,W),de("SS",ne,Q),de("SSS",ne,K),un="SSSS";un.length<=9;un+="S")de(un,ae);function cn(e,t){t[6]=w(1e3*("0."+e))}for(un="S";un.length<=9;un+="S")ve(un,cn);var dn=Ee("Milliseconds",!1);V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var fn=C.prototype;function hn(e){return e}fn.add=zt,fn.calendar=function(e,t){var n=e||It(),r=xt(n,this).startOf("day"),i=a.calendarFormat(this,r)||"sameElse",s=t&&(T(t[i])?t[i].call(this,n):t[i]);return this.format(s||this.localeData().calendar(i,this,It(n)))},fn.clone=function(){return new C(this)},fn.diff=function(e,t,n){var r,i,a;if(!this.isValid())return NaN;if(!(r=xt(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=D(t)){case"year":a=Qt(this,r)/12;break;case"month":a=Qt(this,r);break;case"quarter":a=Qt(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-i)/864e5;break;case"week":a=(this-r-i)/6048e5;break;default:a=this-r}return n?a:k(a)},fn.endOf=function(e){var t;if(void 0===(e=D(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?tn:en;switch(e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-Zt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-Zt(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-Zt(t,1e3)-1}return this._d.setTime(t),a.updateOffset(this,!0),this},fn.format=function(e){e||(e=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var t=$(this,e);return this.localeData().postformat(t)},fn.from=function(e,t){return this.isValid()&&(E(e)&&e.isValid()||It(e).isValid())?Bt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},fn.fromNow=function(e){return this.from(It(),e)},fn.to=function(e,t){return this.isValid()&&(E(e)&&e.isValid()||It(e).isValid())?Bt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},fn.toNow=function(e){return this.to(It(),e)},fn.get=function(e){return T(this[e=D(e)])?this[e]():this},fn.invalidAt=function(){return v(this).overflow},fn.isAfter=function(e,t){var n=E(e)?e:It(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=D(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},fn.isBefore=function(e,t){var n=E(e)?e:It(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=D(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},fn.isBetween=function(e,t,n,r){var i=E(e)?e:It(e),a=E(t)?t:It(t);return!!(this.isValid()&&i.isValid()&&a.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n))},fn.isSame=function(e,t){var n,r=E(e)?e:It(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=D(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},fn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},fn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},fn.isValid=function(){return g(this)},fn.lang=Jt,fn.locale=Kt,fn.localeData=Xt,fn.max=Ut,fn.min=At,fn.parsingFlags=function(){return h({},v(this))},fn.set=function(e,t){if("object"===(void 0===e?"undefined":i(e)))for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:F[n]});return t.sort((function(e,t){return e.priority-t.priority})),t}(e=x(e)),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit]);else if(T(this[e=D(e)]))return this[e](t);return this},fn.startOf=function(e){var t;if(void 0===(e=D(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?tn:en;switch(e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Zt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=Zt(t,6e4);break;case"second":t=this._d.valueOf(),t-=Zt(t,1e3)}return this._d.setTime(t),a.updateOffset(this,!0),this},fn.subtract=Wt,fn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},fn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},fn.toDate=function(){return new Date(this.valueOf())},fn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?$(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):T(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",$(n,"Z")):$(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},fn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)},fn.toJSON=function(){return this.isValid()?this.toISOString():null},fn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},fn.unix=function(){return Math.floor(this.valueOf()/1e3)},fn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},fn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},fn.year=Ce,fn.isLeapYear=function(){return _e(this.year())},fn.weekYear=function(e){return rn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},fn.isoWeekYear=function(e){return rn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},fn.quarter=fn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},fn.month=Te,fn.daysInMonth=function(){return Se(this.year(),this.month())},fn.week=fn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},fn.isoWeek=fn.isoWeeks=function(e){var t=He(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},fn.weeksInYear=function(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)},fn.isoWeeksInYear=function(){return je(this.year(),1,4)},fn.date=sn,fn.day=fn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},fn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},fn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},fn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},fn.hour=fn.hours=et,fn.minute=fn.minutes=on,fn.second=fn.seconds=ln,fn.millisecond=fn.milliseconds=dn,fn.utcOffset=function(e,t,n){var r,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Dt(ue,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=Ft(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==e&&(!t||this._changeInProgress?$t(this,Bt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Ft(this)},fn.utc=function(e){return this.utcOffset(0,e)},fn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ft(this),"m")),this},fn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Dt(oe,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},fn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?It(e).utcOffset():0,(this.utcOffset()-e)%60==0)},fn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},fn.isLocal=function(){return!!this.isValid()&&!this._isUTC},fn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},fn.isUtc=Ht,fn.isUTC=Ht,fn.zoneAbbr=function(){return this._isUTC?"UTC":""},fn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},fn.dates=A("dates accessor is deprecated. Use date instead.",sn),fn.months=A("months accessor is deprecated. Use month instead",Te),fn.years=A("years accessor is deprecated. Use year instead",Ce),fn.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),fn.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e={};if(_(e,this),(e=wt(e))._a){var t=e._isUTC?p(e._a):It(e._a);this._isDSTShifted=this.isValid()&&S(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var pn=N.prototype;function vn(e,t,n,r){var i=ut(),a=p().set(r,t);return i[n](a,e)}function gn(e,t,n){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return vn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=vn(e,r,n,"month");return i}function mn(e,t,n,r){"boolean"==typeof e?(l(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,l(t)&&(n=t,t=void 0),t=t||"");var i,a=ut(),s=e?a._week.dow:0;if(null!=n)return vn(t,(n+s)%7,r,"day");var o=[];for(i=0;i<7;i++)o[i]=vn(t,(i+s)%7,r,"day");return o}pn.calendar=function(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return T(r)?r.call(t,n):r},pn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])},pn.invalidDate=function(){return this._invalidDate},pn.ordinal=function(e){return this._ordinal.replace("%d",e)},pn.preparse=hn,pn.postformat=hn,pn.relativeTime=function(e,t,n,r){var i=this._relativeTime[n];return T(i)?i(e,t,n,r):i.replace(/%d/i,e)},pn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return T(n)?n(t):n.replace(/%s/i,t)},pn.set=function(e){var t,n;for(n in e)T(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},pn.months=function(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ie).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone},pn.monthsShort=function(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ie.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},pn.monthsParse=function(e,t,n){var r,i,a;if(this._monthsParseExact)return Me.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},pn.monthsRegex=function(e){return this._monthsParseExact?(f(this,"_monthsRegex")||Le.call(this),e?this._monthsStrictRegex:this._monthsRegex):(f(this,"_monthsRegex")||(this._monthsRegex=Ne),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},pn.monthsShortRegex=function(e){return this._monthsParseExact?(f(this,"_monthsRegex")||Le.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(f(this,"_monthsShortRegex")||(this._monthsShortRegex=Re),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},pn.week=function(e){return He(e,this._week.dow,this._week.doy).week},pn.firstDayOfYear=function(){return this._week.doy},pn.firstDayOfWeek=function(){return this._week.dow},pn.weekdays=function(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ge(n,this._week.dow):e?n[e.day()]:n},pn.weekdaysMin=function(e){return!0===e?Ge(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},pn.weekdaysShort=function(e){return!0===e?Ge(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},pn.weekdaysParse=function(e,t,n){var r,i,a;if(this._weekdaysParseExact)return Ve.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},pn.weekdaysRegex=function(e){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(f(this,"_weekdaysRegex")||(this._weekdaysRegex=$e),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},pn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(f(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ze),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},pn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(f(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=We),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},pn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},pn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},st("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),a.lang=A("moment.lang is deprecated. Use moment.locale instead.",st),a.langData=A("moment.langData is deprecated. Use moment.localeData instead.",ut);var yn=Math.abs;function _n(e,t,n,r){var i=Bt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function bn(e){return e<0?Math.floor(e):Math.ceil(e)}function Cn(e){return 4800*e/146097}function En(e){return 146097*e/4800}function kn(e){return function(){return this.as(e)}}var wn=kn("ms"),Sn=kn("s"),In=kn("m"),An=kn("h"),Un=kn("d"),Mn=kn("w"),On=kn("M"),Tn=kn("Q"),Rn=kn("y");function Nn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ln=Nn("milliseconds"),Pn=Nn("seconds"),Dn=Nn("minutes"),xn=Nn("hours"),Fn=Nn("days"),Hn=Nn("months"),jn=Nn("years"),Gn=Math.round,Bn={ss:44,s:45,m:45,h:22,d:26,M:11};function qn(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}var Yn=Math.abs;function Vn(e){return(e>0)-(e<0)||+e}function $n(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Yn(this._milliseconds)/1e3,r=Yn(this._days),i=Yn(this._months);e=k(n/60),t=k(e/60),n%=60,e%=60;var a=k(i/12),s=i%=12,o=r,u=t,l=e,c=n?n.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var f=d<0?"-":"",h=Vn(this._months)!==Vn(d)?"-":"",p=Vn(this._days)!==Vn(d)?"-":"",v=Vn(this._milliseconds)!==Vn(d)?"-":"";return f+"P"+(a?h+a+"Y":"")+(s?h+s+"M":"")+(o?p+o+"D":"")+(u||l||c?"T":"")+(u?v+u+"H":"")+(l?v+l+"M":"")+(c?v+c+"S":"")}var zn=Tt.prototype;return zn.isValid=function(){return this._isValid},zn.abs=function(){var e=this._data;return this._milliseconds=yn(this._milliseconds),this._days=yn(this._days),this._months=yn(this._months),e.milliseconds=yn(e.milliseconds),e.seconds=yn(e.seconds),e.minutes=yn(e.minutes),e.hours=yn(e.hours),e.months=yn(e.months),e.years=yn(e.years),this},zn.add=function(e,t){return _n(this,e,t,1)},zn.subtract=function(e,t){return _n(this,e,t,-1)},zn.as=function(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=D(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Cn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(En(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},zn.asMilliseconds=wn,zn.asSeconds=Sn,zn.asMinutes=In,zn.asHours=An,zn.asDays=Un,zn.asWeeks=Mn,zn.asMonths=On,zn.asQuarters=Tn,zn.asYears=Rn,zn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN},zn._bubble=function(){var e,t,n,r,i,a=this._milliseconds,s=this._days,o=this._months,u=this._data;return a>=0&&s>=0&&o>=0||a<=0&&s<=0&&o<=0||(a+=864e5*bn(En(o)+s),s=0,o=0),u.milliseconds=a%1e3,e=k(a/1e3),u.seconds=e%60,t=k(e/60),u.minutes=t%60,n=k(t/60),u.hours=n%24,s+=k(n/24),o+=i=k(Cn(s)),s-=bn(En(i)),r=k(o/12),o%=12,u.days=s,u.months=o,u.years=r,this},zn.clone=function(){return Bt(this)},zn.get=function(e){return e=D(e),this.isValid()?this[e+"s"]():NaN},zn.milliseconds=Ln,zn.seconds=Pn,zn.minutes=Dn,zn.hours=xn,zn.days=Fn,zn.weeks=function(){return k(this.days()/7)},zn.months=Hn,zn.years=jn,zn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var r=Bt(e).abs(),i=Gn(r.as("s")),a=Gn(r.as("m")),s=Gn(r.as("h")),o=Gn(r.as("d")),u=Gn(r.as("M")),l=Gn(r.as("y")),c=i<=Bn.ss&&["s",i]||i<Bn.s&&["ss",i]||a<=1&&["m"]||a<Bn.m&&["mm",a]||s<=1&&["h"]||s<Bn.h&&["hh",s]||o<=1&&["d"]||o<Bn.d&&["dd",o]||u<=1&&["M"]||u<Bn.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,qn.apply(null,c)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},zn.toISOString=$n,zn.toString=$n,zn.toJSON=$n,zn.locale=Kt,zn.localeData=Xt,zn.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$n),zn.lang=Jt,V("X",0,0,"unix"),V("x",0,0,"valueOf"),de("x",se),de("X",/[+-]?\d+(\.\d{1,3})?/),ve("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))})),ve("x",(function(e,t,n){n._d=new Date(w(e))})),a.version="2.24.0",t=It,a.fn=fn,a.min=function(){var e=[].slice.call(arguments,0);return Mt("isBefore",e)},a.max=function(){var e=[].slice.call(arguments,0);return Mt("isAfter",e)},a.now=function(){return Date.now?Date.now():+new Date},a.utc=p,a.unix=function(e){return It(1e3*e)},a.months=function(e,t){return gn(e,t,"months")},a.isDate=c,a.locale=st,a.invalid=m,a.duration=Bt,a.isMoment=E,a.weekdays=function(e,t,n){return mn(e,t,n,"weekdays")},a.parseZone=function(){return It.apply(null,arguments).parseZone()},a.localeData=ut,a.isDuration=Rt,a.monthsShort=function(e,t){return gn(e,t,"monthsShort")},a.weekdaysMin=function(e,t,n){return mn(e,t,n,"weekdaysMin")},a.defineLocale=ot,a.updateLocale=function(e,t){if(null!=t){var n,r,i=tt;null!=(r=at(e))&&(i=r._config),(n=new N(t=R(i,t))).parentLocale=nt[e],nt[e]=n,st(e)}else null!=nt[e]&&(null!=nt[e].parentLocale?nt[e]=nt[e].parentLocale:null!=nt[e]&&delete nt[e]);return nt[e]},a.locales=function(){return U(nt)},a.weekdaysShort=function(e,t,n){return mn(e,t,n,"weekdaysShort")},a.normalizeUnits=D,a.relativeTimeRounding=function(e){return void 0===e?Gn:"function"==typeof e&&(Gn=e,!0)},a.relativeTimeThreshold=function(e,t){return void 0!==Bn[e]&&(void 0===t?Bn[e]:(Bn[e]=t,"s"===e&&(Bn.ss=t-1),!0))},a.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},a.prototype=fn,a.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},a}))})),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o={install:function(e,t){var n=t&&t.moment?t.moment:i;Object.defineProperties(e.prototype,{$moment:{get:function(){return n}}}),e.moment=n,e.filter("moment",(function(){for(var e=arguments,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=e[i];var s=(r=Array.prototype.slice.call(r)).shift(),o=void 0;if(o=Array.isArray(s)&&"string"==typeof s[0]?n(s[0],s[1],!0):"number"==typeof s&&s.toString().length<12?n.unix(s):n(s),!s||!o.isValid())return console.warn("Could not build a valid `moment` object from input."),s;function u(){for(var e=arguments,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=e[i];var s=(r=Array.prototype.slice.call(r)).shift();switch(s){case"add":for(var l=r.shift().split(",").map(Function.prototype.call,String.prototype.trim),c={},d=0;d<l.length;d++){var f=l[d].split(" ");c[f[1]]=f[0]}o.add(c);break;case"subtract":for(var h=r.shift().split(",").map(Function.prototype.call,String.prototype.trim),p={},v=0;v<h.length;v++){var g=h[v].split(" ");p[g[1]]=g[0]}o.subtract(p);break;case"from":var m="now",y=!1;"now"===r[0]&&r.shift(),n(r[0]).isValid()&&(m=n(r.shift())),!0===r[0]&&(r.shift(),y=!0),o="now"!==m?o.from(m,y):o.fromNow(y);break;case"diff":var _=n(),b="",C=!1;n(r[0]).isValid()?_=n(r.shift()):null!==r[0]&&"now"!==r[0]||r.shift(),r[0]&&(b=r.shift()),!0===r[0]&&(C=r.shift()),o=o.diff(_,b,C);break;case"calendar":var E=n(),k={};n(r[0]).isValid()?E=n(r.shift()):null!==r[0]&&"now"!==r[0]||r.shift(),"object"===a(r[0])&&(k=r.shift()),o=o.calendar(E,k);break;case"utc":o.utc();break;case"timezone":o.tz(r.shift());break;default:var w=s;o=o.format(w)}r.length&&u.apply(u,r)}return u.apply(u,r),o})),e.filter("duration",(function(){for(var e=arguments,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=e[i];var a=(r=Array.prototype.slice.call(r)).shift(),o=r.shift();function u(e){Array.isArray(e)||(e=[e]);var t=n.duration.apply(n,s(e));return t.isValid()||console.warn("Could not build a valid `duration` object from input."),t}var l=u(a);if("add"===o||"subtract"===o){var c=u(r);l[o](c)}else if(l&&l[o]){var d;l=(d=l)[o].apply(d,s(r))}return l}))}},u=o.install;t.default=o,t.install=u,Object.defineProperty(t,"__esModule",{value:!0})})(t)}).call(this,n(10))},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),s=new k(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var o=b(s,n);if(o){if(o===c)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,s),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function d(){}function f(){}function h(){}var p={};p[i]=function(){return this};var v=Object.getPrototypeOf,g=v&&v(v(w([])));g&&g!==t&&n.call(g,i)&&(p=g);var m=h.prototype=d.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var r;this._invoke=function(i,a){function s(){return new t((function(r,s){!function r(i,a,s,o){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,o)}))}o(u.arg)}(i,a,r,s)}))}return r=r?r.then(s,s):s()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function w(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=m.constructor=h,h.constructor=f,f.displayName=o(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,o(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(_.prototype),_.prototype[a]=function(){return this},e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var s=new _(u(t,n,r,i),a);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(m),o(m,s,"Generator"),m[i]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=w,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var o=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(o&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";(function(e){var r=n(65),i=n(66),a=n(67);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=o(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=o(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?o(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=o(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|h(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return j(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return U(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var a,s=1,o=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(a=n;a<o;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*s}else-1!==c&&(a-=a-c),c=-1}else for(n+u>o&&(n=o-u),a=n;a>=0;a--){for(var d=!0,f=0;f<u;f++)if(l(e,a+f)!==l(t,f)){d=!1;break}if(d)return a}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var s=0;s<r;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[n+s]=o}return s}function b(e,t,n,r){return B(j(t,e.length-n),e,n,r)}function C(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return C(e,t,n,r)}function k(e,t,n,r){return B(G(t),e,n,r)}function w(e,t,n,r){return B(function(e,t){for(var n,r,i,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,s,o,u,l=e[i],c=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],s=e[i+2],128==(192&a)&&128==(192&s)&&(u=(15&l)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],s=e[i+2],o=e[i+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(u=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),o=Math.min(a,s),l=this.slice(r,i),c=e.slice(t,n),d=0;d<o;++d)if(l[d]!==c[d]){a=l[d],s=c[d];break}return a<s?-1:s<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return C(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function U(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function M(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=H(e[a]);return i}function O(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,a){return a||P(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function x(e,t,n,r,a){return a||P(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var a=0,s=1,o=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var a=n-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return x(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return x(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=u.isBuffer(e)?e:j(new u(e,r).toString()),o=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%o]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function G(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(10))},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),s=r[0],o=r[1],u=new a(function(e,t,n){return 3*(t+n)/4-n}(0,s,o)),c=0,d=o>0?s-4:s;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===o&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[c++]=255&t);1===o&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],s=0,o=n-i;s<o;s+=16383)a.push(c(e,s,s+16383>o?o:s+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,a,s=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,s,o=8*i-r-1,u=(1<<o)-1,l=u>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=o;c>0;a=256*a+e[t+d],d+=f,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=r;c>0;s=256*s+e[t+d],d+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),a-=l}return(h?-1:1)*s*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var s,o,u,l=8*a-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(s++,u/=2),s+d>=c?(o=0,s=c):s+d>=1?(o=(t*u-1)*Math.pow(2,i),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+h]=255&o,h+=p,o/=256,i-=8);for(s=s<<i|o,l+=i;l>0;e[n+h]=255&s,h+=p,s/=256,l-=8);e[n+h-p]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(69)},function(e,t,n){"use strict";var r=n(7),i=n(27),a=n(70),s=n(33);function o(e){var t=new a(e),n=i(a.prototype.request,t);return r.extend(n,a.prototype,t),r.extend(n,t),n}var u=o(n(30));u.Axios=a,u.create=function(e){return o(s(u.defaults,e))},u.Cancel=n(34),u.CancelToken=n(83),u.isCancel=n(29),u.all=function(e){return Promise.all(e)},u.spread=n(84),u.isAxiosError=n(85),e.exports=u,e.exports.default=u},function(e,t,n){"use strict";var r=n(7),i=n(28),a=n(71),s=n(72),o=n(33);function u(e){this.defaults=e,this.interceptors={request:new a,response:new a}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=o(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},u.prototype.getUri=function(e){return e=o(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(o(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(o(r||{},{method:e,url:t,data:n}))}})),e.exports=u},function(e,t,n){"use strict";var r=n(7);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(7),i=n(73),a=n(29),s=n(30);function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return o(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return o(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(o(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(32);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(7);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,a,s){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(i)&&o.push("path="+i),r.isString(a)&&o.push("domain="+a),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(79),i=n(80);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(7),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,s={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(7);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(34);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,t){e.exports="object"==typeof self?self.FormData:window.FormData},function(e,t,n){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(e,t,n){"use strict";n(35)},function(e,t,n){(e.exports=n(12)(!1)).push([e.i,'\n.address-radio[data-v-6708c924] {\n    float: left;\n}\n.address-info[data-v-6708c924] {\n    display:block;\n    padding-left: 20px;\n    line-height: 1.8em;\n}\n.address-info .address-title[data-v-6708c924] {\n    font-weight: 700;\n    /*padding-bottom: 5px;*/\n}\n.address-info .address-content[data-v-6708c924] {\n  font-family: "Inter";\n  font-style: normal;\n  font-weight: normal;\n  font-size: 14px;\n  line-height: 145%;\n  /* or 20px */\n\n  letter-spacing: 0.002em;\n}\n\n/* The.radio-style */\n.radio-style[data-v-6708c924] {\n    display: block;\n    position: relative;\n    padding-left: 12px;\n    margin-bottom: 12px;\n    cursor: pointer;\n    font-size: 22px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n/* Hide the browser\'s default radio button */\n.radio-style input[data-v-6708c924] {\n    position: absolute;\n    opacity: 0;\n    cursor: pointer;\n}\n\n/* Create a custom radio button */\n.checkmark[data-v-6708c924] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 20px;\n    width: 20px;\n    background-color: #FFFFFF;\n    border-radius: 50%;\n    border: 2px solid #30B6A4;\n    box-sizing: border-box;\n}\n\n/* On mouse-over, add a grey background color */\n.radio-style:hover input ~ .checkmark[data-v-6708c924] {\n    background-color: #ccc;\n}\n\n/* When the radio button is checked, add a blue background */\n.radio-style input:checked ~ .checkmark[data-v-6708c924] {\n    background-color: #30B6A4;\n}\n\n/* Create the indicator (the dot/circle - hidden when not checked) */\n.checkmark[data-v-6708c924]:after {\n    content: "";\n    position: absolute;\n    display: none;\n}\n\n/* Show the indicator (dot/circle) when checked */\n.radio-style input:checked ~ .checkmark[data-v-6708c924]:after {\n    display: block;\n}\n\n/* Style the indicator (dot/circle) */\n.radio-style .checkmark[data-v-6708c924]:after {\n    top: 4px;\n    left: 4px;\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background: white;\n}\n.address-action[data-v-6708c924] {\n}\n.action-edit[data-v-6708c924] {\n    color: #413EC1;\n    padding-left: 15px;\n}\n.action-edit[data-v-6708c924]:hover {\n    color: #413EC1;\n}\n.action-delete[data-v-6708c924] {\n    color: #EB4242;\n    padding-left: 10px;\n}\n.action-delete[data-v-6708c924]:hover {\n    color: #EB4242;\n}\n.add-shipping-address-btn[data-v-6708c924] {\n    float:right;\n}\n.my-modal-dialog[data-v-6708c924] {\n    max-width: 480px;\n}\n.my-modal-dialog .modal-body[data-v-6708c924] {\n    padding: 15px;\n}\n.address-list[data-v-6708c924] {\n    position:relative;\n}\n.address-list .add-shipping-address-btn[data-v-6708c924] {\n    right: 0;\n    padding: 1.25rem;\n    position: absolute;\n}\n@media (min-width: 0) and (max-width: 576px) {\n.address-list .add-shipping-address-btn[data-v-6708c924] {\n    right: 0;\n    padding: 1px;\n    position: absolute;\n}\n}\n.btn-cancel[data-v-6708c924]{\n    width: 86px;\n}\n.btn-primary[data-v-6708c924]{\n    width: 125px;\n}\n.modal-title[data-v-6708c924]{\n    font-size: 16px;\n    margin: 15px 0px;\n}\n.modal-footer[data-v-6708c924]{\n    padding-top: 0px;\n}\n',""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,n){"use strict";n(36)},function(e,t,n){(e.exports=n(12)(!1)).push([e.i,"\n.cart-store-order[data-v-e22f89f4] {\n  padding-bottom: 20px;\n}\n.card[data-v-e22f89f4] {\n  filter: drop-shadow(0px 4px 8px rgba(0, 0, 0, 0.04));\n  border-radius:8px;\n}\n.card .text-fee[data-v-e22f89f4] {\n  margin: 20px 0px;\n}\n.title-card[data-v-e22f89f4] {\n  margin-top: 48px;\n}\n.card-header[data-v-e22f89f4], .card-footer[data-v-e22f89f4] {\n  background-color: #ffffff;\n}\n.cart-item-card[data-v-e22f89f4] {\n  padding: 16px 0;\n  margin: 0 16px;\n  border-bottom: 1px solid #E4E8E8;\n}\n.cart-item-card .form-group[data-v-e22f89f4] {\n  margin-bottom: 0px;\n}\n.cart-item-card .wrap-select[data-v-e22f89f4] {\n  margin-bottom: 0px;\n}\n.custom-control-label[data-v-e22f89f4]:before {\n}\n.your-cart[data-v-e22f89f4] {\n  border-radius: 8px;\n  padding: 0 16px;\n  background-color: #FFFFFF;\n}\n.your-cart .product[data-v-e22f89f4] {\n  /*margin-top: 16px;*/\n}\nlabel.custom-control-label[data-v-e22f89f4] {\n  padding-left: 12px;\n}\n.modal-body[data-v-e22f89f4] {\n  background-color: white;\n}\n/*qty-btn {*/\n/*    border:*/\n/*} .*/\n.qty-btn[data-v-e22f89f4] {\n  border: none;\n  background-color: #fff;\n}\n.qty-btn[data-v-e22f89f4]:hover {\n  background-color: #F6F8F8;\n}\n",""])},function(e,t,n){"use strict";n(37)},function(e,t,n){(e.exports=n(12)(!1)).push([e.i,"\n.cart-store-order[data-v-13e1b1ce] {\n    padding-bottom: 20px;\n}\n.card[data-v-13e1b1ce] {\n    filter: drop-shadow(0px 4px 8px rgba(0, 0, 0, 0.04));\n    border: none;\n}\n.card .text-fee[data-v-13e1b1ce] {\n    margin: 10px 0px;\n}\n.title-card[data-v-13e1b1ce] {\n    margin-top: 48px;\n}\n.card-header[data-v-13e1b1ce], .card-footer[data-v-13e1b1ce] {\n    background-color: #ffffff;\n}\n.cart-item-card[data-v-13e1b1ce] {\n    padding: 10px 24px;\n    border-bottom: 1px solid #E4E8E8;\n}\n.cart-item-card .form-group[data-v-13e1b1ce] {\n    margin-bottom: 0px;\n}\n.cart-item-card .wrap-select[data-v-13e1b1ce] {\n    margin-bottom: 0px;\n}\n.custom-control-label[data-v-13e1b1ce]:before {\n}\n.your-cart[data-v-13e1b1ce] {\n    border-radius: 8px;\n    padding: 0px 32px;\n}\n.your-cart .product[data-v-13e1b1ce] {\n    margin-top: 16px;\n}\nlabel.custom-control-label[data-v-13e1b1ce] {\n    padding-left: 12px;\n}\n.product-item[data-v-13e1b1ce] {\n    margin-bottom: 12px;\n}\n.modal-header[data-v-13e1b1ce]{\n  padding: 24px 32px;\n}\n.modal-body[data-v-13e1b1ce]{\n  padding: 0;\n  margin-top: 8px;\n  height: 60vh;\n  overflow-y: auto;\n}\n.cart-detail-payment[data-v-13e1b1ce]{\n  margin-left: 32px;\n  margin-bottom: 0;\n  margin-top: 10px;\n}\n",""])},function(e,t,n){"use strict";n(38)},function(e,t,n){(e.exports=n(12)(!1)).push([e.i,"\n.product-title[data-v-eb61b168]{\n    color: #413EC1;\n}\n.auto-layout[data-v-eb61b168]{\n    justify-content: center;\n    padding: 7px 183px;\n    width: 763px;\n    height: 38px;\n\n    background: rgba(247, 190, 25, 0.25);\n    border-radius: 6px;\n\n    font-family: Inter;\n    font-style: normal;\n    font-weight: 600;\n    font-size: 16px;\n    line-height: 150%;\n}\n.cart-store-order[data-v-eb61b168] {\n    padding-bottom: 20px;\n}\n.card[data-v-eb61b168] {\n    filter: drop-shadow(0px 4px 8px rgba(0, 0, 0, 0.04));\n    border: none;\n}\n.card .text-fee[data-v-eb61b168] {\n    margin: 10px 0px;\n}\n.title-card[data-v-eb61b168] {\n    margin-top: 48px;\n}\n.card-header[data-v-eb61b168], .card-footer[data-v-eb61b168] {\n    background-color: #ffffff;\n}\n.cart-item-card[data-v-eb61b168] {\n    padding: 10px 24px;\n    border-bottom: 1px solid #E4E8E8;\n}\n.cart-item-card .form-group[data-v-eb61b168] {\n    margin-bottom: 0px;\n}\n.cart-item-card .wrap-select[data-v-eb61b168] {\n    margin-bottom: 0px;\n}\n.custom-control-label[data-v-eb61b168]:before {\n}\n.your-cart[data-v-eb61b168] {\n    border-radius: 8px;\n    padding: 0px 32px;\n}\n.your-cart .product[data-v-eb61b168] {\n    margin-top: 16px;\n}\nlabel.custom-control-label[data-v-eb61b168] {\n    padding-left: 12px;\n}\n.product-item[data-v-eb61b168] {\n    margin-bottom: 12px;\n}\n.modal-header[data-v-eb61b168]{\n    padding: 24px 32px;\n}\n.modal-body[data-v-eb61b168]{\n    padding: 0;\n    margin-top: 8px;\n    height: 60vh;\n    overflow-y: auto;\n}\n.cart-detail-payment[data-v-eb61b168]{\n    margin-left: 32px;\n    margin-bottom: 0;\n    margin-top: 10px;\n}\n",""])},function(e,t,n){"use strict";n(39)},function(e,t,n){(e.exports=n(12)(!1)).push([e.i,"\ninput.messenger-chat-input[data-v-191ac5af] {\n    height: auto;\n}\n",""])},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(8),s=n(3),o={readAsDataURL:function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsDataURL(e)}))}};function u(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){u(a,r,i,s,o,"next",e)}function o(e){u(a,r,i,s,o,"throw",e)}s(void 0)}))}}var c={name:"ChatBox",props:{user:{},group:{}},data:function(){return{attachLink:"",attachImage:null,previewAttachImage:"",chatText:"",originMessages:[]}},mounted:function(){var e=this;return l(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e,(n=localStorage.getItem("chatProductUrl"))&&(localStorage.removeItem("chatProductUrl"),e.attachLink=n),e.$refs.chatInput.focus();case 4:case"end":return t.stop()}}),t)})))()},computed:{messages:function(){return this.originMessages.map((function(e){return e}))},friend:function(){var e=this;return this.group?this.group.members.find((function(t){return t.userId!=e.user.userId})):{}}},methods:{init:function(){this.collection&&this.collection.remove(),this.originMessages=[],this.collection=new s.MessageCollection(this.group),this.collection.limit=20;var e=new s.MessageCollection.CollectionHandler;e.onSucceededMessageEvent=this.onSucceededMessageEvent,this.collection.setCollectionHandler(e),this.fetchPreviousMessage(),console.log(this.group),this.group.markAsRead()},sendTextMessage:function(){var e=this;return l(i.a.mark((function t(){var n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.attachLink){t.next=8;break}return t.next=4,a.a.sendTextMessage(e.group,e.attachLink);case 4:n=t.sent,e.originMessages.push(n),e.collection.handleSendMessageResponse(n),e.attachLink="";case 8:if(e.attachImage&&(e.sendFileMessage(e.attachImage),e.removeAttachImage()),e.chatText){t.next=11;break}return t.abrupt("return");case 11:return r=e.chatText,e.chatText="",t.next=15,a.a.sendTextMessage(e.group,r);case 15:s=t.sent,e.originMessages.push(s),e.collection.handleSendMessageResponse(s),e.scrollToBottom(),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),console.log("Error",t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},sendFileMessage:function(e){var t=this;return l(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,a.a.sendFileMessage(t.group,e);case 5:r=n.sent,t.originMessages.push(r),t.collection.handleSendMessageResponse(r),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log("Error",n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},fetchPreviousMessage:function(){var e=this;return l(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.isLoadingPrevious){t.next=3;break}return t.abrupt("return");case 3:return e.isLoadingPrevious=!0,t.next=6,e.collection.fetchSucceededMessages("prev");case 6:n=t.sent,console.log("Fetch previous message success",n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:e.isLoadingPrevious=!1;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},fetchNextMessage:function(){var e=this;return l(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.collection.fetchSucceededMessages("next");case 3:n=t.sent,console.log("Fetch next message success",n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},onSucceededMessageEvent:function(e,t){this.originMessages=[],this.originMessages=this.collection.messages,this.isLoadedFirstTime||(this.isLoadedFirstTime=!0,this.scrollToBottom())},scrollToBottom:function(){var e=this;setTimeout((function(){e.$refs.listChat.scrollTop=e.$refs.listChat.scrollHeight})),console.log("scroll bottom")},handleScroll:function(e){0===e.target.scrollTop?this.fetchPreviousMessage():e.target.scrollTop+e.target.clientHeight===e.target.scrollHeight&&this.group.markAsRead()},removeAttachLink:function(){this.attachLink=""},removeAttachImage:function(){this.attachImage="",this.$refs.file.value=""},isTypeImage:function(e){return e.startsWith("image/")},onSelectImage:function(){this.attachImage=this.$refs.file.files[0]},defaultImg:function(e){var t=location.protocol+"//"+location.host;e.target.src=t+"/img/store-avatar/default-avatar.png"}},watch:{group:{immediate:!0,handler:function(e){console.log("[Chat] init group: ",e),e&&this.init()}},attachImage:{immediate:!0,handler:function(e){var t=this;return l(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return t.previewAttachImage="",n.abrupt("return");case 3:return console.log("attach image"),n.next=6,o.readAsDataURL(e);case 6:t.previewAttachImage=n.sent,console.log(t.previewAttachImage);case 8:case"end":return n.stop()}}),n)})))()}}}},d=(n(97),n(1));function f(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}var h={name:"Messenger",props:{userId:{}},components:{ChatBox:Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"right right-room in ",attrs:{id:"messages-1",role:"tabpanel"}},[n("div",{staticClass:"name-room d-flex align-items-center"},[n("img",{attrs:{src:e.friend.profileUrl,alt:""},on:{error:e.defaultImg}}),e._v(" "),n("div",[n("div",{staticClass:"read d-flex justify-content-between align-items-center"},[n("p",{staticClass:"color-primary"},[e._v(e._s(e.friend.nickname))])]),e._v(" "),e.friend.lastSeenAt?n("p",{staticClass:"color-gray"},[e._v("Last seen "+e._s(e._f("moment")(e.friend.lastSeenAt,"from")))]):e._e()])]),e._v(" "),n("div",{ref:"listChat",staticClass:"content-box-room",on:{scroll:e.handleScroll}},e._l(e.messages,(function(t){return n("div",{staticClass:"message",class:{"message-mine":t.sender.userId===e.user.userId,"message-other":t.sender.userId!==e.user.userId}},["file"===t.messageType?n("div",{staticClass:"detail-image-message"},[e.isTypeImage(t.type)?n("img",{attrs:{src:t.url,alt:t.name}}):n("a",{attrs:{href:t.url,target:"_blank"}},[e._v(e._s(t.name))])]):n("div",{staticClass:"detail-message"},[e._v("\n                "+e._s(t.message)+"\n            ")]),e._v(" "),n("span",{staticClass:"color-gray mess-time"},[e._v(e._s(e._f("moment")(t.createdAt,"MMM Do YY, h:mm")))])])})),0),e._v(" "),e.attachLink?n("div",{staticClass:"alert alert-none alert-mess fade show d-flex justify-content-between align-items-start col-12 message-attach-link",attrs:{role:"alert"}},[n("div",[n("p",{staticClass:"color-gray m-0"},[e._v("Link to product:")]),e._v(" "),n("a",{attrs:{href:e.attachLink,target:"_blank"}},[e._v(e._s(e.attachLink))])]),e._v(" "),n("span",{attrs:{"aria-hidden":"true","aria-label":"Close"},on:{click:function(t){return t.preventDefault(),e.removeAttachLink()}}},[e._v("")])]):e._e(),e._v(" "),e.previewAttachImage?n("div",{staticClass:"alert alert-none alert-mess fade show d-flex justify-content-between align-items-start col-12 message-attach-image",attrs:{role:"alert"}},[n("div",[n("img",{staticClass:"image-preview",attrs:{src:e.previewAttachImage,alt:""}})]),e._v(" "),n("span",{attrs:{"aria-hidden":"true","aria-label":"Close"},on:{click:function(t){return t.preventDefault(),e.removeAttachImage()}}},[e._v("")])]):e._e(),e._v(" "),n("form",{staticClass:"send",attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.sendTextMessage(t)}}},[n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-group-prepend"},[e._m(0),e._v(" "),n("input",{ref:"file",staticClass:"d-none",attrs:{type:"file",id:"fileLoader",name:"files",title:"Load File"},on:{change:function(t){return t.preventDefault(),e.onSelectImage(t)}}})]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.chatText,expression:"chatText"}],ref:"chatInput",staticClass:"form-control messenger-chat-input",attrs:{type:"text",placeholder:"Type your message here..."},domProps:{value:e.chatText},on:{input:function(t){t.target.composing||(e.chatText=t.target.value)}}}),e._v(" "),e._m(1)])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"input-group-text open-file",attrs:{for:"fileLoader"}},[t("img",{attrs:{src:"/asset-seller/Img/file.svg"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("button",{staticClass:"input-group-text submit",attrs:{type:"submit"}},[t("img",{attrs:{src:"/asset-seller/Img/send.svg"}})])])}],!1,null,"191ac5af",null).exports},data:function(){return{user:{},originGroupChannels:[],groupActivatedId:"",groupActivated:null}},computed:{groupChannels:function(){if(!this.originGroupChannels.length)return[];var e=this,t=this.originGroupChannels.map((function(t){return e.groupActivated||e.groupActivatedId!=t.url||(e.groupActivated=t),{friend:t.members.find((function(t){return t.userId!==e.user.userId})),channel:t}}));return this.groupActivatedId&&this.groupActivated||(this.groupActivated=this.originGroupChannels[0],this.groupActivatedId=this.originGroupChannels[0].url,localStorage.setItem("chatGroupActivatedId",this.groupActivatedId)),t}},mounted:function(){var e,t=this;return(e=i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,t.groupActivatedId=localStorage.getItem("chatGroupActivatedId"),e.next=4,a.a.connect(t.userId,(function(e){n.originGroupChannels=e}));case 4:t.user=e.sent;case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){f(a,r,i,s,o,"next",e)}function o(e){f(a,r,i,s,o,"throw",e)}s(void 0)}))})()},methods:{activeGroup:function(e){this.groupActivated=e,this.groupActivatedId=e.url,localStorage.setItem("chatGroupActivatedId",this.groupActivatedId)},test:function(){a.a.getSendBirdIntance().getTotalUnreadChannelCount((function(e,t){t||console.log(e)}))},defaultImg:function(e){var t=location.protocol+"//"+location.host;e.target.src=t+"/img/store-avatar/default-avatar.png"}}},p=Object(d.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Messages bg-white"},[n("div",{staticClass:"row ml-0 mr-0"},[n("div",{staticClass:"left col-lg-3 col-md-4 col-select"},[n("h3",{staticClass:"color-back"},[e._v("Messages")]),e._v(" "),n("hr",{staticClass:"web-block"}),e._v(" "),n("ul",{staticClass:"chat-box nav"},[e._l(this.groupChannels,(function(t,r){return[n("li",{key:r,staticClass:"item-chat"},[n("a",{class:{active:t.channel.url===e.groupActivatedId},attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.activeGroup(t.channel)}}},[n("div",{staticClass:"d-flex align-items-center"},[n("img",{attrs:{src:t.friend.profileUrl,alt:""},on:{error:e.defaultImg}}),e._v(" "),n("div",[n("div",{staticClass:"read d-flex justify-content-between align-items-center"},[n("p",{staticClass:"group-nickname"},[e._v(e._s(t.friend.nickname))]),e._v(" "),t.channel.unreadMessageCount>0?n("div",{staticClass:"dot-red d-block"},[n("span",{staticClass:"badge badge-secondary"},[e._v(e._s(t.channel.unreadMessageCount))])]):e._e()]),e._v(" "),t.channel.lastMessage?n("p",{staticClass:"color-gray group-last-message",attrs:{title:t.channel.lastMessage.message}},[e._v(e._s(t.channel.lastMessage.message))]):e._e()])])])]),e._v(" "),n("hr")]}))],2)]),e._v(" "),n("div",{staticClass:"tab-content col-lg-9 col-md-8 col-select"},[e.groupActivated?n("ChatBox",{attrs:{user:e.user,group:e.groupActivated}}):n("p",{staticClass:"color-gray select-message d-none"},[e._v("Select message beside to start messaging.")])],1)])])}),[],!1,null,"1eac42ca",null);t.default=p.exports},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=new(n(14))({appId:"DBF8BFAF-A834-4045-AB56-D270B894C68C"});new a.ChannelHandler;function s(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}var o={name:"ChatButton",props:["userId","storeId","productUrl"],data:function(){return{}},mounted:function(){},methods:{startChat:function(){var e,t=this;return(e=i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"0"!=t.userId){e.next=4;break}return $("#modalLogin").modal("show"),e.abrupt("return");case 4:localStorage.setItem("chatGroupActivatedId","buyer-".concat(t.userId,"-store-").concat(t.storeId)),localStorage.setItem("chatProductUrl",t.productUrl),localStorage.setItem("chatStoreId",t.storeId),window.location.href="/messenger/".concat(t.storeId),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))})()}}},u=n(1),l=Object(u.a)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("a",{staticClass:"btn-customer tertiary-icon btn",attrs:{href:"#",role:"button"},on:{click:function(t){return t.preventDefault(),e.startChat(t)}}},[e._t("default")],2)}),[],!1,null,"de84fdd0",null);t.default=l.exports},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(8);function s(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}var o={name:"CountUnread",props:["userId"],mounted:function(){var e,t=this;return(e=i.a.mark((function e(){var n,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,console.log("init userId: ",t.userId),n.userId){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,a.a.connectUser(t.userId);case 6:e.sent,r=a.a.getSendBirdIntance(),(s=new r.ChannelHandler).onChannelChanged=function(e){r.getTotalUnreadChannelCount((function(e,t){t||$("#unread-count").text(e)}))},r.addChannelHandler("unread_count_channel_handler",s);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))})()}},u=n(1),l=Object(u.a)(o,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,"33501559",null);t.default=l.exports},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(4);function s(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}var u={name:"Checkout",components:{UserAddress:n(17).default},props:{buyNowCart:{},refId:{}},data:function(){return{cart:{},userAddress:null,listProductsInProgress:{},listStoresInprogress:{},isSaveInprocess:!1,userAddressId:null}},created:function(){this.fetch()},computed:{orderStoreTotalItem:function(){var e={};return this.cart.store_orders.forEach((function(t){e[t.id]=t.products.reduce((function(e,t){return e+t.quantity}),0)})),e},model:{get:function(){var e=[];return this.cart.store_orders.forEach((function(t,n){e[n]={shipping_option_id:t.shipping_option_id,enable_insurance:t.enable_insurance,products:[]},t.products.forEach((function(t,r){e[n].products[r]={quantity:t.quantity}}))})),e},set:function(){}},checkoutId:function(){return void 0!==this.cart.checkout_id?this.cart.checkout_id:this.refId}},methods:{fetch:function(){var e=this;return o(i.a.mark((function t(){var n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showLoading(),t.next=3,a.a.getCheckoutCart(Number(e.buyNowCart),e.checkoutId);case 3:if(n=t.sent,r=n.data,e.cart=r,!e.userAddressId){t.next=16;break}return t.prev=7,t.next=10,a.a.updateAddress(e.userAddressId,e.checkoutId);case 10:s=t.sent,e.cart=s.data,t.next=16;break;case 14:t.prev=14,t.t0=t.catch(7);case 16:e.hideLoading();case 17:case"end":return t.stop()}}),t,null,[[7,14]])})))()},onPickedAddress:function(e){this.userAddress=e},addQuantity:function(e){var t=this;return o(i.a.mark((function n(){var r,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.showLoading(),r=e.quantity+1,t.$set(t.listProductsInProgress,e.row_id,!0),n.prev=3,n.next=6,a.a.updateRowQuantity(e.row_id,r,t.checkoutId);case 6:s=n.sent,t.cart=s.data,n.next=12;break;case 10:n.prev=10,n.t0=n.catch(3);case 12:t.$delete(t.listProductsInProgress,e.row_id),t.hideLoading();case 14:case"end":return n.stop()}}),n,null,[[3,10]])})))()},subQuantity:function(e){var t=this;return o(i.a.mark((function n(){var r,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.showLoading(),r=e.quantity-1,t.$set(t.listProductsInProgress,e.row_id,!0),n.prev=3,n.next=6,a.a.updateRowQuantity(e.row_id,r,t.checkoutId);case 6:s=n.sent,t.cart=s.data,n.next=12;break;case 10:n.prev=10,n.t0=n.catch(3);case 12:t.$delete(t.listProductsInProgress,e.row_id),t.hideLoading();case 14:case"end":return n.stop()}}),n,null,[[3,10]])})))()},onChangeShippingOption:function(e,t){var n=this;return o(i.a.mark((function r(){var s,o;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.showLoading(),r.prev=1,r.next=4,a.a.updateShippingOption(e.id,t,n.checkoutId);case 4:s=r.sent,o=s.data,n.cart=o,r.next=11;break;case 9:r.prev=9,r.t0=r.catch(1);case 11:n.hideLoading();case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()},onChangeShippingInsurance:function(e,t){var n=this;return o(i.a.mark((function r(){var s,o;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.showLoading(),r.prev=1,r.next=4,a.a.updateShippingInsurance(e.id,t,n.checkoutId);case 4:s=r.sent,o=s.data,n.cart=o,r.next=11;break;case 9:r.prev=9,r.t0=r.catch(1);case 11:n.hideLoading();case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()},onChangeUserAddress:function(e){var t=this;return o(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.checkoutId){n.next=3;break}return t.userAddressId=e,n.abrupt("return");case 3:return t.showLoading(),n.prev=4,n.next=7,a.a.updateAddress(e,t.checkoutId);case 7:r=n.sent,t.cart=r.data,n.next=13;break;case 11:n.prev=11,n.t0=n.catch(4);case 13:t.hideLoading();case 14:case"end":return n.stop()}}),n,null,[[4,11]])})))()},payment:function(){var e=this;return o(i.a.mark((function t(){var n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,e.showLoading(),t.prev=2,t.next=5,a.a.createPayment(["BCA","BRI","MANDIRI","BNI","PERMATA","ALFAMART"],e.checkoutId);case 5:r=t.sent,window.location.href=r.data.invoice_url,console.log(r),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0.message&&(n.errorMessage(t.t0.message),e.hideLoading()),s=t.t0.response.data.errors,$.each(s,(function(e,t){n.errorMessage(t)}));case 15:e.hideLoading();case 16:case"end":return t.stop()}}),t,null,[[2,10]])})))()},saveOrder:function(){var e=this;return o(i.a.mark((function t(){var n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,e.showLoading(),t.prev=2,e.isSaveInprocess=!0,t.next=6,a.a.saveOrder(e.cart);case 6:if(r=t.sent,void 0===r.data.errors){t.next=10;break}return t.abrupt("return");case 10:e.payment(),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(2),void 0!==(s=t.t0.response.data).errors&&Array.isArray(s.errors)&&s.errors.forEach((function(e){n.errorMessage(e)})),void 0!==s.reload&&window.location.reload();case 18:e.isSaveInprocess=!1,e.hideLoading();case 20:case"end":return t.stop()}}),t,null,[[2,13]])})))()},defaultImg:function(e){var t=location.protocol+"//"+location.host;e.target.src=t+"/img/not-found.jpg"}}},l=(n(91),n(1)),c=Object(l.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12  col-md-12 col-lg-8 col-xs-8"},[n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"16px"}},[e._v("Shipping Address")]),e._v(" "),n("UserAddress",{on:{input:e.onChangeUserAddress},model:{value:e.userAddress,callback:function(t){e.userAddress=t},expression:"userAddress"}}),e._v(" "),n("div",{staticClass:"cart-store-order"},[n("h6",{staticClass:"title-card card-title-product",staticStyle:{"margin-bottom":"16px"}},[e._v("Shopping Cart")]),e._v(" "),n("div",{staticClass:"cart-content"},e._l(e.cart.store_orders,(function(t,r){return n("div",{staticClass:"card",staticStyle:{"margin-bottom":"16px"}},[n("div",{staticClass:"card-header d-flex justify-content-between card-header-responsive"},[n("p",{staticClass:"color-gray"},[e._v("Products in cart")]),e._v(" "),n("div",{staticClass:"d-flex align-items-center"},[n("img",{attrs:{src:"/vendor/buyer/Img/store-outline.svg"}}),e._v(" "),n("a",{attrs:{href:t.url}},[e._v(e._s(t.name))])])]),e._v(" "),n("div",{staticClass:"your-cart",staticStyle:{"margin-top":"16px"}},e._l(t.products,(function(t,i){return n("div",{key:t.row_id,staticClass:"product",staticStyle:{"margin-bottom":"0"}},[n("div",{staticClass:"row left d-flex align-items-center justify-content-between"},[n("div",{staticClass:"col-sm-6 col-md-2 col-lg-2",staticStyle:{"padding-left":"16px"}},[n("img",{staticClass:"img-your-cart-responsive",attrs:{src:t.thumbnail_url,alt:""},on:{error:e.defaultImg}})]),e._v(" "),n("div",{staticClass:"detail-product-yourcart col-sm-6 col-md-4 col-lg-4"},[n("a",{staticClass:"name-product truncate-overflow-one",attrs:{href:t.url,target:"_blank"}},[e._v(e._s(t.name))]),e._v(" "),e._l(t.options,(function(t,r){return n("div",{key:r,staticClass:"checkout-product-option",staticStyle:{"padding-top":"8px"}},[n("span",[e._v(e._s(r)+": "+e._s(t))])])}))],2),e._v(" "),n("div",{staticClass:"col-sm-6 col-md-4 col-lg-4 ",staticStyle:{padding:"28px 0"}},[n("div",{staticClass:"d-flex amount-main amount-details col-12",staticStyle:{width:"160px"}},[n("button",{staticClass:"button-1 col qty-btn",attrs:{disabled:e.listProductsInProgress[t.row_id]},on:{click:function(n){return e.subQuantity(t)}}},[n("img",{attrs:{src:"/vendor/buyer/Img/reduction.svg",alt:""}})]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model[r].products[i].quantity,expression:"model[storeIndex]['products'][productIndex]['quantity']"}],staticClass:"input number numbar-main",staticStyle:{height:"40px"},attrs:{type:"text",disabled:e.listProductsInProgress[t.row_id]},domProps:{value:e.model[r].products[i].quantity},on:{input:function(t){t.target.composing||e.$set(e.model[r].products[i],"quantity",t.target.value)}}}),e._v(" "),n("button",{staticClass:"col button-2 qty-btn",attrs:{disabled:e.listProductsInProgress[t.row_id]},on:{click:function(n){return e.addQuantity(t)}}},[n("img",{attrs:{src:"/vendor/buyer/Img/add.svg",alt:""}})])])]),e._v(" "),t.discount_percent?n("div",{staticClass:"col-sm-6 col-md-2 col-lg-2 rigfht-sale flex-column prices-sale-off",staticStyle:{"text-align":"right"}},[n("p",{staticClass:"text-sale "},[e._v(e._s(e._f("formatCurrency")(t.price_old*t.quantity)))]),e._v(" "),n("h3",{staticClass:"card-title-product"},[e._v(e._s(e._f("formatCurrency")(t.total)))]),e._v(" "),n("p",{staticClass:"sale-off text-left web-block",staticStyle:{"margin-left":"23px"}},[e._v(e._s(t.discount_percent)+"% off")])]):n("div",{staticClass:"col-sm-6 col-md-2 col-lg-2 rigfht-sale flex-column",staticStyle:{"text-align":"right"}},[n("h3",{staticClass:"card-title-product",staticStyle:{"padding-bottom":"52px","padding-top":"36px"}},[e._v(e._s(e._f("formatCurrency")(t.total)))])])])])})),0),e._v(" "),n("hr",{staticStyle:{margin:"0 16px"}}),e._v(" "),n("div",{staticClass:"cart-item-card"},[n("div",{staticClass:"row"},[n("div",{staticClass:"form-group col-md-6 col-sm-12",staticStyle:{"padding-right":"57px"}},[n("div",{staticClass:"wrap-select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.model[r].shipping_option_id,expression:"model[storeIndex]['shipping_option_id']"}],staticClass:"form-control",staticStyle:{"background-color":"#F6F8F8"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.model[r],"shipping_option_id",t.target.multiple?n:n[0])},function(n){return e.onChangeShippingOption(t,n.currentTarget.value)}]}},e._l(t.shipping_options,(function(t){return n("option",{domProps:{value:t.id}},[e._v("\n                          "+e._s(t.name)+"\n                        ")])})),0)])]),e._v(" "),n("div",{staticClass:"col-md-4 col-sm-6 d-flex align-items-center",staticStyle:{padding:"0"}},[n("div",{staticClass:"custom-control custom-checkbox",staticStyle:{"padding-left":"16px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model[r].enable_insurance,expression:"model[storeIndex]['enable_insurance']"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"insurance-"+r},domProps:{checked:Array.isArray(e.model[r].enable_insurance)?e._i(e.model[r].enable_insurance,null)>-1:e.model[r].enable_insurance},on:{change:[function(t){var n=e.model[r].enable_insurance,i=t.target,a=!!i.checked;if(Array.isArray(n)){var s=e._i(n,null);i.checked?s<0&&e.$set(e.model[r],"enable_insurance",n.concat([null])):s>-1&&e.$set(e.model[r],"enable_insurance",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.model[r],"enable_insurance",a)},function(n){return e.onChangeShippingInsurance(t,n.currentTarget.checked)}]}}),e._v(" "),n("label",{staticClass:"custom-control-label",attrs:{for:"insurance-"+r}},[e._v("Shipping\n                        Insurance")])])]),e._v(" "),n("div",{staticClass:"col-md-2 col-sm-6 d-flex justify-content-end align-items-center shipping-fee-mobi"},[n("h3",{},[e._v(e._s(e._f("formatCurrency")(t.shipping_fee+t.insurance_fee)))])])])]),e._v(" "),t.error?n("div",{staticClass:"cart-item-card"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 text-danger"},[e._v("\n                    "+e._s(t.error_message)+"\n                  ")])])]):e._e(),e._v(" "),n("div",{staticClass:"cart-item-card d-flex justify-content-between",staticStyle:{border:"0px"}},[n("p",{staticClass:"color-gray"},[e._v("Subtotal ("+e._s(e.orderStoreTotalItem[t.id])+" item\n                  "),e.orderStoreTotalItem[t.id]>1?[e._v("s")]:e._e(),e._v("\n                  )\n                ")],2),e._v(" "),n("h3",{},[e._v(e._s(e._f("formatCurrency")(t.total)))])])])})),0)])],1),e._v(" "),n("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xs-4"},[n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"16px"}},[e._v("Order Summary")]),e._v(" "),n("div",{staticClass:"card mt-16px",staticStyle:{border:"none"}},[n("div",{staticClass:"card-header d-flex justify-content-start",staticStyle:{padding:"24px"}},[n("p",{staticClass:"color-gray link-product",staticStyle:{"white-space":"nowrap","padding-right":"50px"}},[e._v("Reference Number")]),e._v(" "),n("p",[n("b",{staticClass:"truncate-overflow-one link-product"},[e._v(e._s(e.cart.checkout_id.toUpperCase()))])])]),e._v(" "),n("div",{staticClass:"card-body",staticStyle:{padding:"4px 24px"}},[n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Total Price ("+e._s(e.cart.total_items)+" Item\n                "),e.cart.total_items?[e._v("s")]:e._e(),e._v("\n                )\n              ")],2),e._v(" "),n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e._f("formatCurrency")(e.cart.subtotal)))])]),e._v(" "),n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Total Shipping Fee")]),e._v(" "),n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e._f("formatCurrency")(e.cart.total_shipping_fee)))])]),e._v(" "),n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Shipping Insurance")]),e._v(" "),n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e._f("formatCurrency")(e.cart.total_insurance_fee)))])])]),e._v(" "),n("div",{staticClass:"card-footer",staticStyle:{padding:"8px 24px"}},[n("div",{staticClass:"mt-3 d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Total Amount")]),e._v(" "),n("h5",{staticClass:"product-title",staticStyle:{"margin-top":"-8px"}},[e._v(e._s(e._f("formatCurrency")(e.cart.total)))])]),e._v(" "),n("div",{staticClass:"mt-5 mb-3"},[n("p",{staticClass:"color-gray text-center link-product"},[e._v("All prices are inclusive Tax 10%")]),e._v(" "),n("button",{staticClass:"btn primary w-100 mt-2",attrs:{disabled:e.isSaveInprocess},on:{click:function(t){return t.preventDefault(),e.saveOrder(t)}}},[e._v("Make Payment\n              ")])])])])])])])}),[],!1,null,"e22f89f4",null);t.default=c.exports},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(4),s=n(5),o=n(9),u=n.n(o),l=n(15),c=n.n(l);function d(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){d(a,r,i,s,o,"next",e)}function o(e){d(a,r,i,s,o,"throw",e)}s(void 0)}))}}u.a.use(c.a);var h={name:"Checkout",props:["routeCheckout","checkoutId","userId"],data:function(){return{cart:{},userAddress:{},methodChecked:[],methodCard:["CREDIT_CARD"],methodVirtual:["BCA","BRI","MANDIRI","BNI","PERMATA"],methodBankTransfer:["BCA","BRI","MANDIRI","BNI","PERMATA","ALFAMART"],methodOutlet:["ALFAMART"],isSaveInprocess:!1,paymentFee:0}},computed:{},created:function(){this.fetch()},methods:{fetch:function(){var e=this;return f(i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showLoading(),t.prev=1,t.next=4,a.a.getCheckoutCartById(e.checkoutId);case 4:return n=t.sent,r=n.data,e.cart=r,t.next=9,s.a.getOne(e.cart.buyer_address.id);case 9:e.userAddress=t.sent,e.userAddress=e.userAddress.data,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0);case 16:e.hideLoading();case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))()},payment:function(){var e=this;return f(i.a.mark((function t(){var n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,e.showLoading(),t.prev=2,t.next=5,a.a.createPayment(e.methodChecked,e.checkoutId);case 5:r=t.sent,window.location.href=r.data.invoice_url,console.log(r),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0.message&&(n.errorMessage(t.t0.message),e.hideLoading()),s=t.t0.response.data.errors,$.each(s,(function(e,t){n.errorMessage(t)}));case 15:e.hideLoading();case 16:case"end":return t.stop()}}),t,null,[[2,10]])})))()},getPaymentFee:function(){var e=this;return f(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showLoading(),t.prev=1,t.next=4,a.a.getPaymentFeeentFee(e.methodChecked,e.checkoutId);case 4:n=t.sent,e.paymentFee=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:console.log(e.paymentFee),e.hideLoading();case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()},defaultImg:function(e){var t=location.protocol+"//"+location.host;e.target.src=t+"/img/not-found.jpg"}}},p=(n(93),n(1)),v=Object(p.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12  col-md-12 col-lg-8 col-xs-8",staticStyle:{padding:"0 12px"}},[n("div",{staticClass:"title-payment card-title-product web-block"},[e._v("Payment Method")]),e._v(" "),n("div",{staticClass:"payment-channel web-block"},[n("form",{staticClass:"form-step1-1",staticStyle:{"margin-bottom":"0"}},[n("div",{staticStyle:{"border-bottom":"1px solid #E4E8E8",padding:"16px 0"}},[n("div",{staticClass:"wrap-check d-flex justify-content-between align-items-center"},[n("div",{staticClass:"wrap-check"},[n("label",{staticClass:"custom-control custom-radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.methodChecked,expression:"methodChecked"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"payment"},domProps:{value:e.methodCard,checked:e._q(e.methodChecked,e.methodCard)},on:{change:[function(t){e.methodChecked=e.methodCard},e.getPaymentFee]}}),e._v(" "),n("span",{staticClass:"custom-control-label"}),e._v(" "),n("span",{staticClass:"custom-text link-product"},[e._v("Credit card")])])]),e._v(" "),e._m(0)])]),e._v(" "),e._m(1),e._v(" "),n("div",{staticClass:"wrap-check payment-channel-item d-flex justify-content-between align-items-center"},[n("label",{staticClass:"custom-control custom-radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.methodChecked,expression:"methodChecked"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"payment"},domProps:{value:e.methodBankTransfer,checked:e._q(e.methodChecked,e.methodBankTransfer)},on:{change:[function(t){e.methodChecked=e.methodBankTransfer},e.getPaymentFee]}}),e._v(" "),n("span",{staticClass:"custom-control-label"}),e._v(" "),n("span",{staticClass:"custom-text link-product"},[e._v("Bank Transfer")])]),e._v(" "),e._m(2)]),e._v(" "),n("div",{staticClass:"wrap-check payment-channel-item d-flex justify-content-between align-items-center"},[n("label",{staticClass:"custom-control custom-radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.methodChecked,expression:"methodChecked"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"payment"},domProps:{value:e.methodVirtual,checked:e._q(e.methodChecked,e.methodVirtual)},on:{change:[function(t){e.methodChecked=e.methodVirtual},e.getPaymentFee]}}),e._v(" "),n("span",{staticClass:"custom-control-label"}),e._v(" "),n("span",{staticClass:"custom-text link-product"},[e._v("Bank Virtual Accounts")])]),e._v(" "),e._m(3)]),e._v(" "),e._m(4)])]),e._v(" "),n("div",{staticClass:"title-payment mobi-payment mobi-block"},[e._v("Payment Method")]),e._v(" "),n("div",{staticClass:"payment-channel mobi-block"},[n("form",{staticClass:"form-step1-1"},[n("div",{staticClass:"wrap-check payment-channel-item d-flex justify-content-between"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.methodChecked,expression:"methodChecked"}],staticClass:"form-control selectpicker",staticStyle:{"border-radius":"4px","background-color":"#F6F8F8"},attrs:{name:"payment",title:"Select Payment Method"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.methodChecked=t.target.multiple?n:n[0]},e.getPaymentFee]}},[n("option",{domProps:{value:e.methodCard}},[e._v("Credit Cards")]),e._v(" "),n("option",{domProps:{value:e.methodBankTransfer}},[e._v("Bank Transfer")]),e._v(" "),n("option",{domProps:{value:e.methodVirtual}},[e._v("Bank Virtual Accounts")]),e._v(" "),n("option",{attrs:{value:"EWALLET",disabled:""}},[e._v("E-Wallet")])])])])])]),e._v(" "),n("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xs-4",staticStyle:{padding:"0 12px"}},[n("div",{staticClass:"title-payment card-title-product web-block"},[e._v("Order Summary")]),e._v(" "),n("div",{staticClass:"card mt-16px web-block"},[n("div",{staticClass:"card-header d-flex justify-content-start",staticStyle:{padding:"24px"}},[n("p",{staticClass:"color-gray link-product",staticStyle:{"white-space":"nowrap","padding-right":"50px"}},[e._v("Reference Number")]),e._v(" "),n("p",[n("b",{staticClass:"truncate-overflow-one link-product"},[e._v(e._s(e.cart.checkout_id.toUpperCase()))])])]),e._v(" "),n("div",{staticClass:"card-body",staticStyle:{padding:"4px 24px"}},[n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Total Price ("+e._s(e.cart.total_items)+" Item\n                  "),e.cart.total_items?[e._v("s")]:e._e(),e._v("\n                  )\n                ")],2),e._v(" "),n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e._f("formatCurrency")(e.cart.subtotal)))])]),e._v(" "),n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Total Shipping Fee")]),e._v(" "),n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e._f("formatCurrency")(e.cart.total_shipping_fee)))])]),e._v(" "),n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Shipping Insurance")]),e._v(" "),n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e._f("formatCurrency")(e.cart.total_insurance_fee)))])]),e._v(" "),n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Payment Fee")]),e._v(" "),n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e._f("formatCurrency")(e.paymentFee)))])])]),e._v(" "),n("div",{staticClass:"card-footer",staticStyle:{padding:"8px 24px"}},[n("div",{staticClass:"mt-3 d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Total Amount")]),e._v(" "),n("h5",{staticClass:"product-title",staticStyle:{"margin-top":"-8px"}},[e._v(e._s(e._f("formatCurrency")(e.cart.total+e.paymentFee)))])]),e._v(" "),n("div",{staticClass:"mt-5 mb-3"},[n("p",{staticClass:"color-gray link-product text-center"},[e._v("All prices are inclusive Tax 10%")]),e._v(" "),n("button",{staticClass:"btn primary w-100 mt-2",staticStyle:{"padding-top":"14px"},attrs:{disabled:e.isSaveInprocess},on:{click:function(t){return t.preventDefault(),e.payment(t)}}},[n("img",{attrs:{src:"/vendor/buyer/svg/lock.svg"}}),e._v(" "),n("span",{staticClass:"link-product"},[e._v("Pay Now")])])])])])])]),e._v(" "),n("div",{staticClass:"row mb-30px"},[n("div",{staticClass:"col-8"},[n("div",{staticClass:"mobi-payment card-title-product web-block",staticStyle:{margin:"48px 0 16px 0"}},[e._v("Shipping Address")]),e._v(" "),n("div",{staticClass:"payment-channel web-block",staticStyle:{"padding-bottom":"20px"}},[n("div",{staticClass:" d-flex justify-content-between text-top",staticStyle:{"padding-bottom":"8px"}},[n("div",{staticClass:"phone recipient-name card-title-product"},[e._v("\n                "+e._s(e.userAddress.type)+"\n              ")]),e._v(" "),n("a",{attrs:{href:e.routeCheckout+"?ref="+e.checkoutId,id:"change-address",role:"tab"}},[n("span",{staticClass:"link-product"},[e._v("Change Shipping Address")])])]),e._v(" "),n("div",{staticClass:"d-flex justify-content-between text-top phone-padding",staticStyle:{"padding-bottom":"4px"}},[n("div",{staticClass:"phone description-text"},[e._v("\n                "+e._s(e.userAddress.recipient_name)+"(+"+e._s(e.userAddress.phone)+")\n              ")])]),e._v(" "),n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"description-text"},[e._v("\n                "+e._s(e.userAddress.addresses)+"\n              ")])])])]),e._v(" "),n("div",{staticClass:"col-4"},[n("div",{staticClass:"title-payment card-title-product web-block",staticStyle:{margin:"48px 0 16px 0"}},[e._v("Shopping Cart")]),e._v(" "),n("div",{staticClass:"payment-channel web-block",staticStyle:{padding:"26px 24px"}},[n("div",{staticClass:"product justify-content-between",staticStyle:{"padding-bottom":"6px"}},e._l(e.cart.store_orders,(function(t,r){return n("div",e._l(t.products,(function(t,r){return n("div",{key:t.row_id,staticClass:"product-item d-flex justify-content-between"},[n("div",{staticClass:"d-flex justify-content-start",staticStyle:{width:"70%"}},[n("img",{staticClass:"d-block mr-3 img-fluid",staticStyle:{height:"initial"},attrs:{src:t.thumbnail_url,width:"68",alt:""},on:{error:e.defaultImg}}),e._v(" "),n("div",[n("a",{staticClass:"color-custom truncate-overflow-one",attrs:{href:t.url}},[e._v(e._s(t.name))]),e._v(" "),e._l(t.options,(function(t,r){return n("div",{key:r,staticClass:"checkout-product-option"},[n("span",[e._v(e._s(r)+": "+e._s(t))])])}))],2)]),e._v(" "),n("div",{staticClass:"d-flex justify-content-end",staticStyle:{width:"30%"}},[n("p",{staticClass:"font-weight-bold"},[e._v(e._s(e._f("formatCurrency")(t.total)))])])])})),0)})),0),e._v(" "),e._m(5)])])]),e._v(" "),n("div",{staticClass:"mobi-block grand-total"},[n("div",{staticClass:"container"},[n("div",{staticClass:"d-flex justify-content-between in-line"},[n("p",[e._v("Total Price ("+e._s(e.cart.total_items)+" Item\n                    "),e.cart.total_items?[e._v("s")]:e._e(),e._v("\n                    )\n                  ")],2),e._v(" "),n("h6",[e._v(e._s(e._f("formatCurrency")(e.cart.subtotal)))])]),e._v(" "),n("div",{staticClass:"d-flex justify-content-between in-line"},[n("p",[e._v("Total Shipping Fee")]),e._v(" "),n("h6",[e._v(e._s(e._f("formatCurrency")(e.cart.total_shipping_fee)))])]),e._v(" "),n("div",{staticClass:"d-flex justify-content-between in-line"},[n("p",[e._v("Shipping Insurance")]),e._v(" "),n("h6",[e._v(e._s(e._f("formatCurrency")(e.cart.total_insurance_fee)))])]),e._v(" "),n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",[e._v("Payment Fee")]),e._v(" "),n("h6",[e._v(e._s(e._f("formatCurrency")(e.paymentFee)))])]),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"d-flex justify-content-between wrap-total"},[n("p",{staticClass:"tax",staticStyle:{"font-weight":"bold"}},[e._v("All price are inclusive Tax 10%")]),e._v(" "),n("div",[n("p",{staticClass:"text-right"},[e._v("Total")]),e._v(" "),n("h2",[e._v(e._s(e._f("formatCurrency")(e.cart.total+e.paymentFee)))])])]),e._v(" "),n("div",{attrs:{id:"show-btn-payment"}},[n("ul",{staticClass:"nav"},[n("li",{staticClass:"w-100"},[n("p",{staticClass:"color-gray text-center web-block"},[e._v("All prices are inclusive Tax 10%")]),e._v(" "),n("button",{staticClass:"btn primary w-100 mt-2",attrs:{disabled:e.isSaveInprocess,id:"continue-disabled-mobi"},on:{click:function(t){return t.preventDefault(),e.payment(t)}}},[e._v("Pay Now\n                      ")])])])])])]),e._v(" "),n("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog",staticStyle:{"max-width":"640px"}},[n("div",{staticClass:"modal-content"},[e._m(6),e._v(" "),n("div",{staticClass:"modal-body"},[e._l(e.cart.store_orders,(function(t,r){return n("div",{staticClass:"card"},[n("div",{staticClass:"your-cart",staticStyle:{"border-radius":"8px",padding:"0","background-color":"#FFFFFF","border-bottom":"1px solid #E4E8E8",margin:"18px 32px 0 32px"}},[n("div",{staticClass:"d-flex justify-content-between"},[n("div",{staticClass:"d-flex align-items-center"},[n("img",{staticStyle:{"padding-right":"11px"},attrs:{src:"/vendor/buyer/Img/store-outline.svg"}}),e._v(" "),n("a",{attrs:{href:t.url}},[e._v(e._s(t.name))])]),e._v(" "),n("chat-button",{staticClass:"btn-chat-payment",staticStyle:{padding:"0 !important"},attrs:{"store-id":t.id,"user-id":e.userId}},[e._v("\n                      Message Seller\n                    ")])],1),e._v(" "),e._l(t.products,(function(t,r){return n("div",{key:t.row_id,staticClass:"product",staticStyle:{"margin-bottom":"0","margin-top":"-4px"}},[n("div",{staticClass:"row d-flex align-items-center justify-content-between"},[n("div",{staticClass:"col-8 d-flex justify-content-start"},[n("img",{staticClass:"img-your-cart-responsive cart-detail-payment",attrs:{src:t.thumbnail_url,alt:""},on:{error:e.defaultImg}}),e._v(" "),n("div",{staticClass:"justify-content-between",staticStyle:{"margin-top":"16px"}},[n("a",{staticClass:"name-product truncate-overflow-one",attrs:{href:t.url,target:"_blank"}},[e._v(e._s(t.name))]),e._v(" "),e._l(t.options,(function(t,r){return n("div",{key:r,staticClass:"checkout-product-option",staticStyle:{"padding-top":"8px"}},[n("span",{staticStyle:{"white-space":"nowrap"}},[e._v(e._s(r)+": "+e._s(t))])])}))],2)]),e._v(" "),t.discount_percent?n("div",{staticClass:"col-4  justify-content-end",staticStyle:{"text-align":"right"}},[n("p",{staticClass:"text-sale "},[e._v(e._s(e._f("formatCurrency")(t.price_old*t.quantity)))]),e._v(" "),n("h3",{staticClass:"card-title-product",staticStyle:{"padding-bottom":"8px"}},[e._v(e._s(e._f("formatCurrency")(t.total)))]),e._v(" "),n("p",{staticClass:"sale-off web-block",staticStyle:{display:"initial"}},[e._v(e._s(t.discount_percent)+"% off")])]):n("div",{staticClass:"col-4 d-flex justify-content-end"},[n("h3",{staticClass:"card-title-product",staticStyle:{"padding-bottom":"52px"}},[e._v(e._s(e._f("formatCurrency")(t.total)))])])]),e._v(" "),n("div",{staticClass:"card-header-payment-view link-product",staticStyle:{"padding-top":"8px","padding-bottom":"6px"}},[e._v("\n                      Note:-"+e._s(t.note)+"\n                    ")])])})),e._v(" "),n("div",{staticClass:"d-flex justify-content-between cart-item-card-payment-view",staticStyle:{"padding-top":"0"}},[n("p",{staticClass:"color-gray link-product"},[e._v("Delivery Method:")]),e._v(" "),n("div",{directives:[{name:"switch",rawName:"v-switch",value:t.shipping_option_id,expression:"store.shipping_option_id"}]},[n("p",{directives:[{name:"case",rawName:"v-case",value:"REG",expression:"'REG'"}],staticClass:"color-black link-product"},[e._v("Regular")]),e._v(" "),n("p",{directives:[{name:"case",rawName:"v-case",value:"ND",expression:"'ND'"}],staticClass:"color-black link-product"},[e._v("Next Day")]),e._v(" "),n("p",{directives:[{name:"case",rawName:"v-case",value:"SD",expression:"'SD'"}],staticClass:"color-black link-product"},[e._v("Same Day")])])]),e._v(" "),n("div",{staticClass:"d-flex justify-content-between cart-item-card-payment-view"},[n("p",{staticClass:"color-gray link-product"},[e._v("Duration:")]),e._v(" "),n("div",{directives:[{name:"switch",rawName:"v-switch",value:t.shipping_option_id,expression:"store.shipping_option_id"}]},[n("p",{directives:[{name:"case",rawName:"v-case",value:"REG",expression:"'REG'"}],staticClass:"color-black link-product"},[e._v("2-3 days to arrive")]),e._v(" "),n("p",{directives:[{name:"case",rawName:"v-case",value:"ND",expression:"'ND'"}],staticClass:"color-black link-product"},[e._v("Package will arrive tomorrow")]),e._v(" "),n("p",{directives:[{name:"case",rawName:"v-case",value:"SD",expression:"'SD'"}],staticClass:"color-black link-product"},[e._v("Package will arrive in the same day")])])]),e._v(" "),n("div",{staticClass:"d-flex justify-content-between cart-item-card-payment-view",staticStyle:{"margin-bottom":"20px"}},[n("p",{staticClass:"color-gray link-product"},[e._v("Delivery Fee:")]),e._v(" "),n("p",{staticClass:"color-black link-product"},[e._v(e._s(e._f("formatCurrency")(t.shipping_fee+t.insurance_fee)))])])],2)])})),e._v(" "),e._m(7),e._v(" "),n("div",{staticClass:"d-flex justify-content-between",staticStyle:{"padding-right":"24px"}},[n("p",{staticClass:"color-gray text-center"}),e._v(" "),n("p",{staticClass:"product-subtitle"},[e._v(e._s(e._f("formatCurrency")(e.cart.total+e.paymentFee)))])])],2),e._v(" "),n("div",{staticClass:"modal-footer"})])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",[t("img",{attrs:{src:"/vendor/buyer/svg/Mastercard-logo.png",height:"16px"}})]),this._v(" "),t("span",[t("img",{attrs:{src:"/vendor/buyer/svg/visa-logo.png",height:"16px"}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrap-check payment-channel-item justify-content-between",staticStyle:{padding:"24px 21px",display:"none"}},[t("p",{staticClass:"description-text"},[this._v("\n                  Please select your card for your payment, you can add a few cards if you havent added one:\n                ")]),this._v(" "),t("div",{staticClass:"mt-3"},[t("button",{staticClass:"add-credit-card",attrs:{disabled:""}},[t("span",[this._v("Add Credit Card")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",[t("img",{attrs:{src:"/vendor/buyer/svg/BCA.png",height:"16px"}})]),this._v(" "),t("span",[t("img",{attrs:{src:"/vendor/buyer/svg/Bank2.png",height:"16px"}})]),this._v(" "),t("span",[t("img",{attrs:{src:"/vendor/buyer/svg/CIMB.png",height:"16px"}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",[t("img",{attrs:{src:"/vendor/buyer/svg/BCA.png",height:"16px"}})]),this._v(" "),t("span",[t("img",{attrs:{src:"/vendor/buyer/svg/Bank2.png",height:"16px"}})]),this._v(" "),t("span",[t("img",{attrs:{src:"/vendor/buyer/svg/CIMB.png",height:"16px"}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrap-check payment-channel-item d-flex justify-content-between align-items-center"},[t("label",{staticClass:"custom-control custom-radio"},[t("input",{staticClass:"custom-control-input",attrs:{type:"radio",name:"payment",disabled:"",value:"EWALLET"}}),this._v(" "),t("span",{staticClass:"custom-control-label"}),this._v(" "),t("span",{staticClass:"custom-text link-product"},[this._v("E-Wallet")])]),this._v(" "),t("div",[t("span",[t("img",{attrs:{src:"/vendor/buyer/svg/gopay.png",height:"16px"}})])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"web-block"},[t("p",{staticClass:"color-gray"}),this._v(" "),t("a",{staticClass:"btn-customer secondary btn",attrs:{href:"#","data-toggle":"modal","data-target":"#exampleModal",role:"button"}},[this._v("View\n                Detail")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("p",{staticClass:"custom-font card-title-product"},[this._v("Shopping Cart")]),this._v(" "),t("button",{staticClass:"close",staticStyle:{padding:"11px"},attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[t("img",{attrs:{src:"/vendor/buyer/svg/VectorX.svg"}})])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex justify-content-between cart-item-card-payment-view",staticStyle:{"padding-right":"24px","padding-top":"16px"}},[t("p",{staticClass:"color-gray text-center link-product"},[this._v("All prices are inclusive Tax 10%")]),this._v(" "),t("h6",{staticClass:"color-black text-center card-title-product"},[t("b",[this._v("Total")])])])}],!1,null,"13e1b1ce",null);t.default=v.exports},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(4),s=n(5),o=n(9),u=n.n(o),l=n(15),c=n.n(l);function d(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){d(a,r,i,s,o,"next",e)}function o(e){d(a,r,i,s,o,"throw",e)}s(void 0)}))}}u.a.use(c.a);var h={name:"Checkout",props:["routeCheckout","checkoutId","userId"],data:function(){return{cart:{},userAddress:{},methodChecked:[],methodCard:["CREDIT_CARD"],methodVirtual:["BCA","BRI","MANDIRI","BNI","PERMATA"],methodBankTransfer:["BCA","BRI","MANDIRI","BNI","PERMATA","ALFAMART"],methodOutlet:["ALFAMART"],isSaveInprocess:!1,paymentFee:0}},computed:{},created:function(){this.fetch()},methods:{fetch:function(){var e=this;return f(i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showLoading(),t.prev=1,t.next=4,a.a.getCheckoutCartById(e.checkoutId);case 4:return n=t.sent,r=n.data,e.cart=r,t.next=9,s.a.getOne(e.cart.buyer_address.id);case 9:e.userAddress=t.sent,e.userAddress=e.userAddress.data,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0);case 16:e.hideLoading();case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))()},payment:function(){var e=this;return f(i.a.mark((function t(){var n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,e.showLoading(),t.prev=2,t.next=5,a.a.createPayment(e.methodChecked,e.checkoutId);case 5:r=t.sent,window.location.href=r.data.invoice_url,console.log(r),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0.message&&(n.errorMessage(t.t0.message),e.hideLoading()),s=t.t0.response.data.errors,$.each(s,(function(e,t){n.errorMessage(t)}));case 15:e.hideLoading();case 16:case"end":return t.stop()}}),t,null,[[2,10]])})))()},getPaymentFee:function(){var e=this;return f(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showLoading(),t.prev=1,t.next=4,a.a.getPaymentFeeentFee(e.methodChecked,e.checkoutId);case 4:n=t.sent,e.paymentFee=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:console.log(e.paymentFee),e.hideLoading();case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()},defaultImg:function(e){var t=location.protocol+"//"+location.host;e.target.src=t+"/img/not-found.jpg"}}},p=(n(95),n(1)),v=Object(p.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("div",{staticClass:"row"},[e._m(1),e._v(" "),n("div",{staticClass:"col-4",staticStyle:{padding:"0 12px"}},[n("div",{staticClass:"card mt-16px cart-pure-white"},[n("div",{staticClass:"card-header d-flex justify-content-start",staticStyle:{padding:"24px"}},[n("p",{staticClass:"color-gray link-product",staticStyle:{"white-space":"nowrap","padding-right":"50px"}},[e._v("Reference Number")]),e._v(" "),n("p",[n("b",{staticClass:"truncate-overflow-one link-product"},[e._v(e._s(e.cart.checkout_id.toUpperCase()))])])]),e._v(" "),n("div",{staticClass:"card-body",staticStyle:{padding:"4px 24px"}},[n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Total Price ("+e._s(e.cart.total_items)+" Item\n                            "),e.cart.total_items?[e._v("s")]:e._e(),e._v("\n                            )\n                        ")],2),e._v(" "),n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e._f("formatCurrency")(e.cart.subtotal)))])]),e._v(" "),n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Total Shipping Fee")]),e._v(" "),n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e._f("formatCurrency")(e.cart.total_shipping_fee)))])]),e._v(" "),n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Shipping Insurance")]),e._v(" "),n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e._f("formatCurrency")(e.cart.total_insurance_fee)))])]),e._v(" "),n("div",{staticClass:"text-fee d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Payment Fee")]),e._v(" "),n("h6",{staticClass:"card-title-product",staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e._f("formatCurrency")(e.paymentFee)))])])]),e._v(" "),n("div",{staticClass:"card-footer",staticStyle:{padding:"8px 24px"}},[n("div",{staticClass:"mt-3 d-flex justify-content-between"},[n("p",{staticClass:"color-gray link-product"},[e._v("Total Amount")]),e._v(" "),n("h5",{staticClass:"product-title",staticStyle:{"margin-top":"-8px",color:"#222831"}},[e._v(e._s(e._f("formatCurrency")(e.cart.total+e.paymentFee)))])])])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12  col-md-12 col-lg-8 col-xs-8",staticStyle:{padding:"24px 8px"}},[t("div",{staticClass:"product-subtitle"},[this._v("Transfer your payment to:")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-8 cart-pure-white"},[n("div",{staticClass:"form-group"},[n("p",{staticClass:"card-title-product"},[e._v("Account name:")]),e._v(" "),n("p",{staticClass:"product-title"},[e._v("SHUKSHUK INDONESIA BARU")])]),e._v(" "),n("div",{staticClass:"form-group"},[n("p",{staticClass:"card-title-product"},[e._v("Account number:")]),e._v(" "),n("p",{staticClass:"product-title"},[e._v("4727111777")])]),e._v(" "),n("div",{staticClass:"form-group",staticStyle:{"margin-top":"40px"}},[n("p",{staticClass:"card-title-product"},[e._v("Please use this order ID as your reference when making payment:")]),e._v(" "),n("p",{staticClass:"product-title"},[e._v("seller bank")])]),e._v(" "),n("div",{staticClass:"form-group auto-layout"},[n("p",[e._v("Please transfer your payment within 00:30:00")])])])}],!1,null,"eb61b168",null);t.default=v.exports},function(e,t,n){"use strict";n.r(t);var r=n(9);n.n(r).a.filter("formatCurrency",(function(e){return e=Number(e),Number.isNaN(e)&&(e=0),"Rp "+String(e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")})),n(41),window.Vue=n(9),Vue.use(n(62)),Vue.component("chat-button",n(100).default),Vue.component("count-unread",n(101).default),Vue.component("checkout",n(102).default),Vue.component("checkout-payment",n(103).default),Vue.component("checkout-payment-manual",n(104).default),Vue.component("user-address",n(17).default),Vue.component("messenger",n(99).default),Vue.mixin({methods:{confirm:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return confirm(e)})),errorMessage:function(e){$.notify({content:e,alertType:"alert-danger",timeout:8e3})},successMessage:function(e){$.notify({content:e,alertType:"alert-success",timeout:8e3})},warningMessage:function(e){$.notify({content:e,alertType:"alert-warning",timeout:8e3})},showLoading:function(e){$(".loading-container").show()},hideLoading:function(e){$(".loading-container").hide()}}});new Vue({el:"#app"});Vue.prototype.$log=console.log},function(e,t){},,function(e,t){}]);
//# sourceMappingURL=app.js.map